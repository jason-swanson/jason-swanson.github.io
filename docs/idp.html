<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>idp API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
        overflow-y: hidden;
    }
</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>


            <h2>Contents</h2>
            <ul>
  <li><a href="#module-description">Module description</a></li>
  <li><a href="#the-pressed-penny-machine">The pressed penny machine</a>
  <ul>
    <li><a href="#new-coins">New coins</a></li>
    <li><a href="#observed-coins">Observed coins</a></li>
    <li><a href="#effective-sample-size">Effective sample size</a></li>
  </ul></li>
  <li><a href="#flicking-thumbtacks">Flicking thumbtacks</a></li>
  <li><a href="#amazon-reviews">Amazon reviews</a>
  <ul>
    <li><a href="#new-products">New products</a></li>
    <li><a href="#products-with-few-reviews">Products with few reviews</a></li>
  </ul></li>
  <li><a href="#video-game-leaderboards">Video game leaderboards</a></li>
</ul>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Measure">Measure</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Measure.__init__">Measure</a>
                        </li>
                        <li>
                                <a class="variable" href="#Measure.cdf">cdf</a>
                        </li>
                        <li>
                                <a class="variable" href="#Measure.pdf">pdf</a>
                        </li>
                        <li>
                                <a class="variable" href="#Measure.mean">mean</a>
                        </li>
                        <li>
                                <a class="variable" href="#Measure.totalMass">totalMass</a>
                        </li>
                        <li>
                                <a class="variable" href="#Measure.bandwidth">bandwidth</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#IDPModel">IDPModel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#IDPModel.__init__">IDPModel</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.colConc">colConc</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.rowConc">rowConc</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.baseMeas">baseMeas</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.rowCounts">rowCounts</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.likelihoods">likelihoods</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.scale">scale</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.weightedSims">weightedSims</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.ess">ess</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.essPop">essPop</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.addRowCounts">addRowCounts</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.delRowCounts">delRowCounts</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.addWeightedSims">addWeightedSims</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.clearWeightedSims">clearWeightedSims</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.rowDistLaw">rowDistLaw</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#WeightedSim">WeightedSim</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#WeightedSim.__init__">WeightedSim</a>
                        </li>
                        <li>
                                <a class="variable" href="#WeightedSim.idpModel">idpModel</a>
                        </li>
                        <li>
                                <a class="variable" href="#WeightedSim.rowWeights">rowWeights</a>
                        </li>
                        <li>
                                <a class="variable" href="#WeightedSim.rowDistSims">rowDistSims</a>
                        </li>
                        <li>
                                <a class="variable" href="#WeightedSim.totalWeight">totalWeight</a>
                        </li>
                        <li>
                                <a class="function" href="#WeightedSim.updateRowCounts">updateRowCounts</a>
                        </li>
                        <li>
                                <a class="function" href="#WeightedSim.updateScale">updateScale</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
idp    </h1>

                        <div class="docstring"><p>Tools for working with iterated Dirichlet processes.</p>

<h1 id="module-description">Module description</h1>

<p>Consider a situation in which there are several agents, all from the
same population. Each agent undertakes a sequence of actions. These
actions are chosen according to the agent's particular tendencies.
Although different agents have different tendencies, there may be
patterns in the population.</p>

<p>We observe a certain set of agents over a certain amount of time. Based
on these observations, we want to make probabilistic forecasts about two
things:</p>

<ul>
<li>The future behavior of the agents we have observed.</li>
<li>The behavior of a new (unobserved) agent from the population.</li>
</ul>

<p>An iterated Dirichlet process is a mathematical tool that can model
this. The file, <code>idp-paper-9.pdf</code>, gives the mathematical details. (In
this rest of this documentation, we refer to this file as the "Paper.")
This module, <code><a href="">idp</a></code>, is a Python implementation of the iterated Dirichlet
process (IDP).</p>

<p>Below are four examples using the <code><a href="">idp</a></code> module.</p>

<h1 id="the-pressed-penny-machine">The pressed penny machine</h1>

<p>Imagine a pressed penny machine, like those found in museums or tourist
attractions. For a fee, the machine presses a penny into a commemorative
souvenir. Now imagine the machine is broken, so that it mangles all the
pennies we feed it. Each pressed penny it creates is mangled in its own
way. Each has its own probability of landing on heads when flipped. In
this situation, the agents are the pennies and the actions are the heads
and tails that they produce.</p>

<p>Now suppose we create seven mangled pennies and flip each one 5 times.
Suppose that the first four coins each result in 4 heads out of 5 flips.
The fifth coin results in 1 head, the sixth coin results in 4 heads, and
the seventh coin results in 3 heads. If we flip the fifth coin one more
time, what is the probability that it will land on heads? Looking only
at the past flips of the fifth coin, it seems biased towards tails.
Overall, though, the machine seems to make coins that are biased towards
heads. All seven coins could be heads-biased, and the fifth coin just
had an unlucky run. How should we balance these competing intuitions to
arrive at a probability?</p>

<p>One way to answer this is to model the situation with an IDP. We begin
by creating an instance of the <code><a href="#IDPModel">IDPModel</a></code> class and running 10,000
simulations.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">idp</span> <span class="kn">import</span> <span class="n">IDPModel</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span>
<span class="o">...</span>     <span class="p">[[</span><span class="mi">5</span> <span class="o">-</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="new-coins">New coins</h2>

<p>With these simulations in place, the first question we ask is the
following. If we were to get a new coin from this machine, how would we
expect it to behave? The new coin would have some random probability of
heads, $\theta$. We can get the law (or distribution) of $\theta$ with
the <code><a href="#IDPModel.rowDistLaw">IDPModel.rowDistLaw</a></code> method.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">law</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowDistLaw</span><span class="p">()</span>
</code></pre>
</div>

<p>The probability that a new coin will land on heads on its first flip is
simply the mean of $\theta$.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">law</span><span class="o">.</span><span class="n">mean</span>
<span class="mf">0.656011735128012</span>
</code></pre>
</div>

<p>The following will plot the cumulative distribution function of
$\theta$:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">law</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTQ6MTE6MzcuNDMyMjA4PC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTZjYTMzMWJjNGIiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNmNhMzMxYmM0YiIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTZjYTMzMWJjNGIiIHg9IjEzOC43NjM2MzYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzAuODEyMDc0IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNmNhMzMxYmM0YiIgeD0iMjAzLjY5NDU0NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS43NDI5ODMgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNmNhMzMxYmM0YiIgeD0iMjY4LjYyNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MC42NzM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI202Y2EzMzFiYzRiIiB4PSIzMzMuNTU2MzY0IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI1LjYwNDgwMSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI202Y2EzMzFiYzRiIiB4PSIzOTguNDg3MjczIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkwLjUzNTcxIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9Im1hdHBsb3RsaWIuYXhpc18yIj4KICAgIDxnIGlkPSJ5dGlja18xIj4KICAgICA8ZyBpZD0ibGluZTJkXzciPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtNWNiOTVjYjRmZCIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNWNiOTVjYjRmZCIgeD0iNTcuNiIgeT0iMjk1LjQ4OCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSAwLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyOTkuMjg3MjE5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18yIj4KICAgICA8ZyBpZD0ibGluZTJkXzgiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201Y2I5NWNiNGZkIiB4PSI1Ny42IiB5PSIyNDcuMTA0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzgiPgogICAgICA8IS0tIDAuMiAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDI1MC45MDMyMTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfOSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTVjYjk1Y2I0ZmQiIHg9IjU3LjYiIHk9IjE5OC43MiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF85Ij4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyMDIuNTE5MjE5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM0IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEwIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNWNiOTVjYjRmZCIgeD0iNTcuNiIgeT0iMTUwLjMzNiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMC42IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTU0LjEzNTIxOSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTVjYjk1Y2I0ZmQiIHg9IjU3LjYiIHk9IjEwMS45NTIiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDEwNS43NTEyMTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzgiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzYiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201Y2I5NWNiNGZkIiB4PSI1Ny42IiB5PSI1My41NjgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTIiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDU3LjM2NzIxOSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9ImxpbmUyZF8xMyI+CiAgICA8cGF0aCBkPSJNIDczLjgzMjcyNyAyOTUuNDg4IApMIDc1LjQ2NDE1NyAyOTQuMTAxMjAxIApMIDc3LjA5NTU4NyAyOTMuNDU1NDE3IApMIDgxLjk4OTg3NyAyOTIuMDMwMjQ5IApMIDkxLjc3ODQ1NiAyODkuNzQ5MzQzIApMIDEwMy4xOTg0NjUgMjg3LjI4NzY3MyAKTCAxMTEuMzU1NjE0IDI4NS41NDI5MDYgCkwgMTg4LjAzMjgxOSAyNzAuMjYyNzQyIApMIDE5MS4yOTU2NzggMjY5LjUxODU5MiAKTCAxOTYuMTg5OTY4IDI2OC41MDg0NDcgCkwgMjAyLjcxNTY4OCAyNjYuOTk5NzA2IApMIDIwNC4zNDcxMTcgMjY2LjU0MTU2MiAKTCAyMDUuOTc4NTQ3IDI2Ni4yMzk4NDkgCkwgMjEwLjg3MjgzNyAyNjQuOTAzNjUzIApMIDIxNS43NjcxMjcgMjYzLjQ3MDA5MSAKTCAyMjIuMjkyODQ2IDI2MS41ODA4MyAKTCAyMjguODE4NTY2IDI1OS40ODc1MzYgCkwgMjM2Ljk3NTcxNSAyNTYuMzc4MTc2IApMIDI0MS44NzAwMDUgMjU0LjE0NDM0MiAKTCAyNDMuNTAxNDM0IDI1My4yOTAwMzkgCkwgMjQ4LjM5NTcyNCAyNTAuMTcwNjcgCkwgMjU2LjU1Mjg3MyAyNDQuMjUwMTY2IApMIDI1OC4xODQzMDMgMjQzLjIwNjIyOCAKTCAyNjEuNDQ3MTYzIDI0MC42NzA0NTYgCkwgMjYzLjA3ODU5MyAyMzkuMjU3OTI2IApMIDI2NC43MTAwMjMgMjM3LjYxNzQyIApMIDI2Ni4zNDE0NTMgMjM1LjQxMjE3NyAKTCAyNzEuMjM1NzQyIDIyOS44MzkzNTcgCkwgMjc3Ljc2MTQ2MiAyMjEuMzg3NDg1IApMIDI4MS4wMjQzMjIgMjE2LjIzMjg2MiAKTCAyODIuNjU1NzUxIDIxNC4wNzc2NDMgCkwgMjg0LjI4NzE4MSAyMTAuOTUyMDI0IApMIDI4NS45MTg2MTEgMjA4LjA5MDEzOSAKTCAyODkuMTgxNDcxIDIwMi42OTE3NTQgCkwgMjkwLjgxMjkwMSAxOTkuNTc2MjA4IApMIDI5Mi40NDQzMzEgMTk1LjgzNjExMSAKTCAyOTQuMDc1NzYxIDE5Mi44ODk5MjYgCkwgMjk1LjcwNzE5IDE4OS40OTAwNzcgCkwgMjk3LjMzODYyIDE4NS42NzE2NTIgCkwgMjk4Ljk3MDA1IDE4Mi4yMjczNDYgCkwgMzAyLjIzMjkxIDE3NS45MzM2MDYgCkwgMzAzLjg2NDM0IDE3Mi4zNzQ4OTIgCkwgMzA1LjQ5NTc3IDE2OS4xODQxMTUgCkwgMzE1LjI4NDM0OSAxNDUuNzAzNzMxIApMIDMxNi45MTU3NzkgMTQyLjU2NDQ1IApMIDMyMS44MTAwNjkgMTMxLjA1NzA2NCAKTCAzMjYuNzA0MzU4IDEyMC41NjQ1ODYgCkwgMzI4LjMzNTc4OCAxMTcuNDk1OTQ2IApMIDMzMS41OTg2NDggMTEwLjcwODE2NCAKTCAzMzMuMjMwMDc4IDEwNi45NzUyMTMgCkwgMzM0Ljg2MTUwOCAxMDMuODUxODczIApMIDM0My4wMTg2NTcgOTAuNDE0NjgxIApMIDM0NC42NTAwODcgODguMDcxODMzIApMIDM0Ny45MTI5NDcgODMuODk1OTg3IApMIDM1MS4xNzU4MDYgNzkuNDY1MTY1IApMIDM1NC40Mzg2NjYgNzUuOTUwODY0IApMIDM1Ni4wNzAwOTYgNzQuMjMyMTk4IApMIDM2Mi41OTU4MTUgNjguNzI3OTA1IApMIDM2NS44NTg2NzUgNjYuNTA5MTA1IApMIDM2Ny40OTAxMDUgNjUuNDI2OTA4IApMIDM3MC43NTI5NjUgNjMuNjk0ODUzIApMIDM3NC4wMTU4MjUgNjIuMTQ5ODkyIApMIDM4My44MDQ0MDQgNTguNzY0MzkyIApMIDM5MS45NjE1NTMgNTYuNTM3NTc0IApMIDM5NS4yMjQ0MTMgNTUuNTY1MzM4IApMIDM5Ni44NTU4NDMgNTQuOTU3MDYgCkwgMzk4LjQ4NzI3MyA1My41NjggCkwgMzk4LjQ4NzI3MyA1My41NjggCiIgY2xpcC1wYXRoPSJ1cmwoI3BlMzk1OGY3NjJmKSIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzFmNzdiNDsgc3Ryb2tlLXdpZHRoOiAxLjU7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfMyI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA1Ny42IDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF80Ij4KICAgIDxwYXRoIGQ9Ik0gNDE0LjcyIDMwNy41ODQgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF81Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzYiPgogICAgPHBhdGggZD0iTSA1Ny42IDQxLjQ3MiAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICA8L2c+CiA8L2c+CiA8ZGVmcz4KICA8Y2xpcFBhdGggaWQ9InBlMzk1OGY3NjJmIj4KICAgPHJlY3QgeD0iNTcuNiIgeT0iNDEuNDcyIiB3aWR0aD0iMzU3LjEyIiBoZWlnaHQ9IjI2Ni4xMTIiLz4KICA8L2NsaXBQYXRoPgogPC9kZWZzPgo8L3N2Zz4K" alt="image" /></p>

<p>The random variable $\theta$ has a discrete component, so it does not
have a probability density function. But we can plot an approximate
density as follows:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">law</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTQ6MTE6NDAuMDAzOTMwPC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTA5YzVkNzVmNTgiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDljNWQ3NWY1OCIgeD0iNzIuMTg0NzM1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMjMzMTcyIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTA5YzVkNzVmNTgiIHg9IjEzNy43NzQ4NDEiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjkuODIzMjc4IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDljNWQ3NWY1OCIgeD0iMjAzLjM2NDk0NyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS40MTMzODQgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDljNWQ3NWY1OCIgeD0iMjY4Ljk1NTA1MyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MS4wMDM0OTEgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20wOWM1ZDc1ZjU4IiB4PSIzMzQuNTQ1MTU5IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI2LjU5MzU5NyAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20wOWM1ZDc1ZjU4IiB4PSI0MDAuMTM1MjY1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkyLjE4MzcwMyAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzEiIGQ9Ik0gNzk0IDUzMSAKTCAxODI1IDUzMSAKTCAxODI1IDQwOTEgCkwgNzAzIDM4NjYgCkwgNzAzIDQ0NDEgCkwgMTgxOSA0NjY2IApMIDI0NTAgNDY2NiAKTCAyNDUwIDUzMSAKTCAzNDgxIDUzMSAKTCAzNDgxIDAgCkwgNzk0IDAgCkwgNzk0IDUzMSAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMiI+CiAgICA8ZyBpZD0ieXRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF83Ij4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibWE3ZGNiNDVjOTkiIGQ9Ik0gMCAwIApMIC0zLjUgMCAKIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2RlZnM+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWE3ZGNiNDVjOTkiIHg9IjU3LjYiIHk9IjI3NC43NzAyNzgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfNyI+CiAgICAgIDwhLS0gMC41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjc4LjU2OTQ5Nykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM1IiBkPSJNIDY5MSA0NjY2IApMIDMxNjkgNDY2NiAKTCAzMTY5IDQxMzQgCkwgMTI2OSA0MTM0IApMIDEyNjkgMjk5MSAKUSAxNDA2IDMwMzggMTU0MyAzMDYxIApRIDE2ODEgMzA4NCAxODE5IDMwODQgClEgMjYwMCAzMDg0IDMwNTYgMjY1NiAKUSAzNTEzIDIyMjggMzUxMyAxNDk3IApRIDM1MTMgNzQ0IDMwNDQgMzI2IApRIDI1NzUgLTkxIDE3MjIgLTkxIApRIDE0MjggLTkxIDExMjMgLTQxIApRIDgxOSA5IDQ5NCAxMDkgCkwgNDk0IDc0NCAKUSA3NzUgNTkxIDEwNzUgNTE2IApRIDEzNzUgNDQxIDE3MDkgNDQxIApRIDIyNTAgNDQxIDI1NjUgNzI1IApRIDI4ODEgMTAwOSAyODgxIDE0OTcgClEgMjg4MSAxOTg0IDI1NjUgMjI2OCAKUSAyMjUwIDI1NTMgMTcwOSAyNTUzIApRIDE0NTYgMjU1MyAxMjA0IDI0OTcgClEgOTUzIDI0NDEgNjkxIDIzMjIgCkwgNjkxIDQ2NjYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18yIj4KICAgICA8ZyBpZD0ibGluZTJkXzgiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21hN2RjYjQ1Yzk5IiB4PSI1Ny42IiB5PSIyMzEuNjE4OTYzIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzgiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDIzNS40MTgxODIpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfOSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWE3ZGNiNDVjOTkiIHg9IjU3LjYiIHk9IjE4OC40Njc2NDgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOSI+CiAgICAgIDwhLS0gMS41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTkyLjI2Njg2Nikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWE3ZGNiNDVjOTkiIHg9IjU3LjYiIHk9IjE0NS4zMTYzMzMiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTAiPgogICAgICA8IS0tIDIuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDE0OS4xMTU1NTEpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzUiPgogICAgIDxnIGlkPSJsaW5lMmRfMTEiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21hN2RjYjQ1Yzk5IiB4PSI1Ny42IiB5PSIxMDIuMTY1MDE3IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzExIj4KICAgICAgPCEtLSAyLjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxMDUuOTY0MjM2KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEyIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYTdkY2I0NWM5OSIgeD0iNTcuNiIgeT0iNTkuMDEzNzAyIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEyIj4KICAgICAgPCEtLSAzLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSA2Mi44MTI5MjEpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMyIgZD0iTSAyNTk3IDI1MTYgClEgMzA1MCAyNDE5IDMzMDQgMjExMiAKUSAzNTU5IDE4MDYgMzU1OSAxMzU2IApRIDM1NTkgNjY2IDMwODQgMjg3IApRIDI2MDkgLTkxIDE3MzQgLTkxIApRIDE0NDEgLTkxIDExMzAgLTMzIApRIDgxOSAyNSA0ODggMTQxIApMIDQ4OCA3NTAgClEgNzUwIDU5NyAxMDYyIDUxOSAKUSAxMzc1IDQ0MSAxNzE2IDQ0MSAKUSAyMzA5IDQ0MSAyNjIwIDY3NSAKUSAyOTMxIDkwOSAyOTMxIDEzNTYgClEgMjkzMSAxNzY5IDI2NDIgMjAwMSAKUSAyMzUzIDIyMzQgMTgzOCAyMjM0IApMIDEyOTQgMjIzNCAKTCAxMjk0IDI3NTMgCkwgMTg2MyAyNzUzIApRIDIzMjggMjc1MyAyNTc1IDI5MzkgClEgMjgyMiAzMTI1IDI4MjIgMzQ3NSAKUSAyODIyIDM4MzQgMjU2NyA0MDI2IApRIDIzMTMgNDIxOSAxODM4IDQyMTkgClEgMTU3OCA0MjE5IDEyODEgNDE2MiAKUSA5ODQgNDEwNiA2MjggMzk4OCAKTCA2MjggNDU1MCAKUSA5ODggNDY1MCAxMzAyIDQ3MDAgClEgMTYxNiA0NzUwIDE4OTQgNDc1MCAKUSAyNjEzIDQ3NTAgMzAzMSA0NDIzIApRIDM0NTAgNDA5NyAzNDUwIDM1NDEgClEgMzQ1MCAzMTUzIDMyMjggMjg4NiAKUSAzMDA2IDI2MTkgMjU5NyAyNTE2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9ImxpbmUyZF8xMyI+CiAgICA8cGF0aCBkPSJNIDczLjgzMjcyNyAyNjUuNzA0NTMgCkwgNzUuNDgwNzIgMjc5LjAxNDc5MiAKTCA3Ny4xMjg3MTMgMjg0LjQyNTU3NyAKTCA3OC43NzY3MDUgMjg3LjMyNzkyOCAKTCA4MC40MjQ2OTggMjg5LjA5MzAxMyAKTCA4Mi4wNzI2OSAyOTAuMjU0MDk0IApMIDgzLjcyMDY4MyAyOTEuMDYyNzg1IApMIDg1LjM2ODY3NiAyOTEuNjQ5MjA0IApMIDg4LjY2NDY2MSAyOTIuNDAyOTkxIApMIDkxLjk2MDY0NiAyOTIuNzg0MjU4IApMIDk2LjkwNDYyNCAyOTIuOTY1NjA3IApMIDEwMS44NDg2MDIgMjkzLjEyNjg5NCAKTCAxMDYuNzkyNTggMjkzLjUxNjg2IApMIDExOC4zMjg1MjggMjk0LjUzNjEwNiAKTCAxMjYuNTY4NDkxIDI5NS4xMjEzMTUgCkwgMTMxLjUxMjQ2OSAyOTUuMjg4OTMzIApMIDE1MS4yODgzOCAyOTUuMzkyMDc3IApMIDE1Ni4yMzIzNTggMjk0Ljk2NTUwNSAKTCAxNjIuODI0MzI5IDI5NC4zNDMxNCAKTCAxNjYuMTIwMzE0IDI5NC4yMTc4ODUgCkwgMTY5LjQxNjI5OSAyOTQuMjg0OTc1IApMIDE3Ny42NTYyNjIgMjk0LjgyMDYyNSAKTCAxODAuOTUyMjQ3IDI5NC42NDAzOTYgCkwgMTg0LjI0ODIzMyAyOTQuMTAzNDEzIApMIDE5OS4wODAxNjYgMjkwLjk4NTM2MSAKTCAyMDIuMzc2MTUxIDI4OS44NDYyNzMgCkwgMjA3LjMyMDEyOSAyODcuNzI1MDQ1IApMIDIxMi4yNjQxMDcgMjg1LjY0NDc3NCAKTCAyMTguODU2MDc4IDI4My4xMTA5MjIgCkwgMjIyLjE1MjA2MyAyODEuNTcyMjQ4IApMIDIyNS40NDgwNDggMjc5LjY0NzE2MiAKTCAyMjcuMDk2MDQxIDI3OC40NzU1NDkgCkwgMjI4Ljc0NDAzMyAyNzcuMTEzODE1IApMIDIzMC4zOTIwMjYgMjc1LjUxODA1OCAKTCAyMzIuMDQwMDE4IDI3My42NDY2NTYgCkwgMjMzLjY4ODAxMSAyNzEuNDY2ODYyIApMIDIzNS4zMzYwMDQgMjY4Ljk2MTM0NyAKTCAyMzYuOTgzOTk2IDI2Ni4xMzQ1MDUgCkwgMjQwLjI3OTk4MiAyNTkuNjcyMDIyIApMIDI0Ni44NzE5NTIgMjQ1Ljg3OTg5NSAKTCAyNTAuMTY3OTM3IDIzOS43MjUyNTggCkwgMjUzLjQ2MzkyMiAyMzMuNjY1MTMzIApMIDI1NS4xMTE5MTUgMjMwLjI3MjM4IApMIDI1Ni43NTk5MDggMjI2LjQwNjUxNyAKTCAyNTguNDA3OSAyMjEuOTUzMTYgCkwgMjYwLjA1NTg5MyAyMTYuODg0ODg1IApMIDI2MS43MDM4ODYgMjExLjI3MDM3NiAKTCAyNjQuOTk5ODcxIDE5OS4wMjg3NTkgCkwgMjY5Ljk0Mzg0OSAxODAuNTEyOTg4IApMIDI3OC4xODM4MTIgMTUwLjM2NzE3NyAKTCAyODEuNDc5Nzk3IDEzNy4zOTU3MjMgCkwgMjg5LjcxOTc2IDEwMy45ODg3MTMgCkwgMjkxLjM2Nzc1MyA5OC4wMTc0ODUgCkwgMjkzLjAxNTc0NSA5Mi42MzMyODMgCkwgMjk0LjY2MzczOCA4Ny45MDU4MTEgCkwgMjk2LjMxMTczMSA4My44MDAxMDIgCkwgMjk3Ljk1OTcyMyA4MC4xNzU3OTQgCkwgMzA0LjU1MTY5NCA2Ni42NTMxNjMgCkwgMzA3Ljg0NzY3OSA1OS44NzkyNjYgCkwgMzA5LjQ5NTY3MSA1Ny4wODIxODIgCkwgMzExLjE0MzY2NCA1NS4wMDY4MDggCkwgMzEyLjc5MTY1NyA1My44MTUyMzYgCkwgMzE0LjQzOTY0OSA1My41NjggCkwgMzE2LjA4NzY0MiA1NC4yMzMwMTUgCkwgMzE3LjczNTYzNSA1NS43MTU0MzUgCkwgMzE5LjM4MzYyNyA1Ny44OTI1MDYgCkwgMzIxLjAzMTYyIDYwLjY0MTc2OCAKTCAzMjIuNjc5NjEyIDYzLjg1OTYzMyAKTCAzMjQuMzI3NjA1IDY3LjQ3MzkwMyAKTCAzMjUuOTc1NTk4IDcxLjQ1MzY5OCAKTCAzMjcuNjIzNTkgNzUuODE1MDI2IApMIDMyOS4yNzE1ODMgODAuNjE1NDE1IApMIDMzMC45MTk1NzUgODUuOTMyNCAKTCAzMzIuNTY3NTY4IDkxLjgyODcgCkwgMzM0LjIxNTU2MSA5OC4zMTY0NTkgCkwgMzM3LjUxMTU0NiAxMTIuNzY0NTAzIApMIDM0OS4wNDc0OTQgMTY2LjAzMTQzMyAKTCAzNTcuMjg3NDU3IDIwMi45NzQ3MzMgCkwgMzYwLjU4MzQ0MyAyMTYuOTE0NDE0IApMIDM2My44Nzk0MjggMjI5Ljg0Njk4IApMIDM2Ny4xNzU0MTMgMjQxLjY1OTQzMiAKTCAzNzAuNDcxMzk4IDI1Mi4yODA4MzkgCkwgMzcyLjExOTM5MSAyNTcuMTAyNzc1IApMIDM3My43NjczODMgMjYxLjU3MjU1NSAKTCAzNzUuNDE1Mzc2IDI2NS42NzU5NzYgCkwgMzc3LjA2MzM2OSAyNjkuNDA2Njc4IApMIDM3OC43MTEzNjEgMjcyLjc2NTU3NSAKTCAzODAuMzU5MzU0IDI3NS43NTc4OTkgCkwgMzgyLjAwNzM0NyAyNzguMzg5MzMgCkwgMzgzLjY1NTMzOSAyODAuNjYyMzY5IApMIDM4NS4zMDMzMzIgMjgyLjU3MzA4NSAKTCAzODYuOTUxMzI0IDI4NC4xMDcwMjMgCkwgMzg4LjU5OTMxNyAyODUuMjMyMDUxIApMIDM5MC4yNDczMSAyODUuODg0NjA0IApMIDM5MS44OTUzMDIgMjg1Ljk0MjM2MiAKTCAzOTMuNTQzMjk1IDI4NS4xNjQxODcgCkwgMzk1LjE5MTI4NyAyODMuMDMxMjMxIApMIDM5Ni44MzkyOCAyNzguMTkxOTMyIApMIDM5OC40ODcyNzMgMjY1LjI4MDYwNCAKTCAzOTguNDg3MjczIDI2NS4yODA2MDQgCiIgY2xpcC1wYXRoPSJ1cmwoI3AyZGY2NjU3MjBmKSIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzFmNzdiNDsgc3Ryb2tlLXdpZHRoOiAxLjU7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfMyI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA1Ny42IDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF80Ij4KICAgIDxwYXRoIGQ9Ik0gNDE0LjcyIDMwNy41ODQgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF81Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzYiPgogICAgPHBhdGggZD0iTSA1Ny42IDQxLjQ3MiAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICA8L2c+CiA8L2c+CiA8ZGVmcz4KICA8Y2xpcFBhdGggaWQ9InAyZGY2NjU3MjBmIj4KICAgPHJlY3QgeD0iNTcuNiIgeT0iNDEuNDcyIiB3aWR0aD0iMzU3LjEyIiBoZWlnaHQ9IjI2Ni4xMTIiLz4KICA8L2NsaXBQYXRoPgogPC9kZWZzPgo8L3N2Zz4K" alt="image" /></p>

<p>The approximate density is computed by smoothing out the discrete point
masses. The degree of smoothing is determined by a parameter called the
"bandwidth". (See <code><a href="#IDPModel.rowDistLaw">IDPModel.rowDistLaw</a></code> for details.) This bandwidth is
computed automatically. We can view the computed bandwidth, and we can
also set it manually.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">law</span><span class="o">.</span><span class="n">bandwidth</span>
<span class="mf">0.11677711975041316</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">law</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowDistLaw</span><span class="p">(</span><span class="n">bandwidth</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">law</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTQ6MTE6NDEuNDk4NTExPC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTI3ZGNhNGRhZWUiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMjdkY2E0ZGFlZSIgeD0iNzIuMTg0NzM1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMjMzMTcyIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTI3ZGNhNGRhZWUiIHg9IjEzNy43NzQ4NDEiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjkuODIzMjc4IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMjdkY2E0ZGFlZSIgeD0iMjAzLjM2NDk0NyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS40MTMzODQgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMjdkY2E0ZGFlZSIgeD0iMjY4Ljk1NTA1MyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MS4wMDM0OTEgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20yN2RjYTRkYWVlIiB4PSIzMzQuNTQ1MTU5IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI2LjU5MzU5NyAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20yN2RjYTRkYWVlIiB4PSI0MDAuMTM1MjY1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkyLjE4MzcwMyAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzEiIGQ9Ik0gNzk0IDUzMSAKTCAxODI1IDUzMSAKTCAxODI1IDQwOTEgCkwgNzAzIDM4NjYgCkwgNzAzIDQ0NDEgCkwgMTgxOSA0NjY2IApMIDI0NTAgNDY2NiAKTCAyNDUwIDUzMSAKTCAzNDgxIDUzMSAKTCAzNDgxIDAgCkwgNzk0IDAgCkwgNzk0IDUzMSAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMiI+CiAgICA8ZyBpZD0ieXRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF83Ij4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTBlZTRhNzMzMjQiIGQ9Ik0gMCAwIApMIC0zLjUgMCAKIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2RlZnM+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTBlZTRhNzMzMjQiIHg9IjU3LjYiIHk9IjMwMi4wNzE2NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSAwIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NC4yMzc1IDMwNS44NzA4NTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMiI+CiAgICAgPGcgaWQ9ImxpbmUyZF84Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMGVlNGE3MzMyNCIgeD0iNTcuNiIgeT0iMjUxLjgzODQ2MyIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF84Ij4KICAgICAgPCEtLSAxIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NC4yMzc1IDI1NS42Mzc2ODIpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF85Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMGVlNGE3MzMyNCIgeD0iNTcuNiIgeT0iMjAxLjYwNTI4NyIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF85Ij4KICAgICAgPCEtLSAyIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NC4yMzc1IDIwNS40MDQ1MDUpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIi8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTBlZTRhNzMzMjQiIHg9IjU3LjYiIHk9IjE1MS4zNzIxMSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMyAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDQuMjM3NSAxNTUuMTcxMzI5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzMiIGQ9Ik0gMjU5NyAyNTE2IApRIDMwNTAgMjQxOSAzMzA0IDIxMTIgClEgMzU1OSAxODA2IDM1NTkgMTM1NiAKUSAzNTU5IDY2NiAzMDg0IDI4NyAKUSAyNjA5IC05MSAxNzM0IC05MSAKUSAxNDQxIC05MSAxMTMwIC0zMyAKUSA4MTkgMjUgNDg4IDE0MSAKTCA0ODggNzUwIApRIDc1MCA1OTcgMTA2MiA1MTkgClEgMTM3NSA0NDEgMTcxNiA0NDEgClEgMjMwOSA0NDEgMjYyMCA2NzUgClEgMjkzMSA5MDkgMjkzMSAxMzU2IApRIDI5MzEgMTc2OSAyNjQyIDIwMDEgClEgMjM1MyAyMjM0IDE4MzggMjIzNCAKTCAxMjk0IDIyMzQgCkwgMTI5NCAyNzUzIApMIDE4NjMgMjc1MyAKUSAyMzI4IDI3NTMgMjU3NSAyOTM5IApRIDI4MjIgMzEyNSAyODIyIDM0NzUgClEgMjgyMiAzODM0IDI1NjcgNDAyNiAKUSAyMzEzIDQyMTkgMTgzOCA0MjE5IApRIDE1NzggNDIxOSAxMjgxIDQxNjIgClEgOTg0IDQxMDYgNjI4IDM5ODggCkwgNjI4IDQ1NTAgClEgOTg4IDQ2NTAgMTMwMiA0NzAwIApRIDE2MTYgNDc1MCAxODk0IDQ3NTAgClEgMjYxMyA0NzUwIDMwMzEgNDQyMyAKUSAzNDUwIDQwOTcgMzQ1MCAzNTQxIApRIDM0NTAgMzE1MyAzMjI4IDI4ODYgClEgMzAwNiAyNjE5IDI1OTcgMjUxNiAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMzIi8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTBlZTRhNzMzMjQiIHg9IjU3LjYiIHk9IjEwMS4xMzg5MzMiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ0LjIzNzUgMTA0LjkzODE1Mikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEyIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMGVlNGE3MzMyNCIgeD0iNTcuNiIgeT0iNTAuOTA1NzU3IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEyIj4KICAgICAgPCEtLSA1IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NC4yMzc1IDU0LjcwNDk3Nikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM1IiBkPSJNIDY5MSA0NjY2IApMIDMxNjkgNDY2NiAKTCAzMTY5IDQxMzQgCkwgMTI2OSA0MTM0IApMIDEyNjkgMjk5MSAKUSAxNDA2IDMwMzggMTU0MyAzMDYxIApRIDE2ODEgMzA4NCAxODE5IDMwODQgClEgMjYwMCAzMDg0IDMwNTYgMjY1NiAKUSAzNTEzIDIyMjggMzUxMyAxNDk3IApRIDM1MTMgNzQ0IDMwNDQgMzI2IApRIDI1NzUgLTkxIDE3MjIgLTkxIApRIDE0MjggLTkxIDExMjMgLTQxIApRIDgxOSA5IDQ5NCAxMDkgCkwgNDk0IDc0NCAKUSA3NzUgNTkxIDEwNzUgNTE2IApRIDEzNzUgNDQxIDE3MDkgNDQxIApRIDIyNTAgNDQxIDI1NjUgNzI1IApRIDI4ODEgMTAwOSAyODgxIDE0OTcgClEgMjg4MSAxOTg0IDI1NjUgMjI2OCAKUSAyMjUwIDI1NTMgMTcwOSAyNTUzIApRIDE0NTYgMjU1MyAxMjA0IDI0OTcgClEgOTUzIDI0NDEgNjkxIDIzMjIgCkwgNjkxIDQ2NjYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJsaW5lMmRfMTMiPgogICAgPHBhdGggZD0iTSA3My44MzI3MjcgMjcwLjYzNzE3NCAKTCA3NS40ODA3MiAyNzYuNzU5MTQ2IApMIDc3LjEyODcxMyAyODIuMDc5ODQ3IApMIDc4Ljc3NjcwNSAyODEuNTc2NjI5IApMIDgwLjQyNDY5OCAyODQuNzYwMDMzIApMIDgyLjA3MjY5IDI4NS40NDMzODMgCkwgODMuNzIwNjgzIDI4MS4yNTEwOTYgCkwgODUuMzY4Njc2IDI4Ni40Mjk1IApMIDg3LjAxNjY2OCAyODkuNzc2NzUyIApMIDg4LjY2NDY2MSAyODUuNzYxOTIyIApMIDkwLjMxMjY1MyAyODMuMTM0MTQ5IApMIDkxLjk2MDY0NiAyODguMTYxNTMyIApMIDkzLjYwODYzOSAyODkuNTMzMzcyIApMIDk1LjI1NjYzMSAyODcuMjMzOTk4IApMIDk2LjkwNDYyNCAyODYuMjUyODU1IApMIDk4LjU1MjYxNyAyODguNTI3MDQ4IApMIDEwMC4yMDA2MDkgMjg4LjU3MTE4MSAKTCAxMDEuODQ4NjAyIDI4My43OTc5NzMgCkwgMTAzLjQ5NjU5NCAyODUuMDk3MjEzIApMIDEwNS4xNDQ1ODcgMjg4LjAzOTAyNiAKTCAxMDYuNzkyNTggMjg2LjU1MTE4NSAKTCAxMDguNDQwNTcyIDI5My41MzE4MTggCkwgMTEwLjA4ODU2NSAyODYuNjk2MDUxIApMIDExMS43MzY1NTcgMjg3LjQwNTAwMSAKTCAxMTMuMzg0NTUgMjg0LjQ2MDUwNCAKTCAxMTUuMDMyNTQzIDI4NC45NDk4NzYgCkwgMTE2LjY4MDUzNSAyODcuNTM0MTcxIApMIDExOC4zMjg1MjggMjk0Ljc3MDQ3OSAKTCAxMTkuOTc2NTIxIDI4OS4zNDE0MiAKTCAxMjEuNjI0NTEzIDI5MS4yNzI5MzIgCkwgMTIzLjI3MjUwNiAyODcuNzg2Mzg3IApMIDEyNC45MjA0OTggMjg0Ljg4ODAwNSAKTCAxMjYuNTY4NDkxIDI4NS42NzQ2MDkgCkwgMTI4LjIxNjQ4NCAyOTAuMDU0NTAzIApMIDEyOS44NjQ0NzYgMjkzLjAwNzcwNiAKTCAxMzEuNTEyNDY5IDI5MC41Mzg1NTUgCkwgMTMzLjE2MDQ2MSAyODEuNjg2OTQ2IApMIDEzNC44MDg0NTQgMjkxLjgyNjkwOCAKTCAxMzYuNDU2NDQ3IDI4OS40Nzg2MDMgCkwgMTM4LjEwNDQzOSAyODYuMTY3OSAKTCAxMzkuNzUyNDMyIDI5NC41OTM3OTYgCkwgMTQxLjQwMDQyNSAyOTMuNjMxNzA2IApMIDE0My4wNDg0MTcgMjg3LjgzNTA1NiAKTCAxNDQuNjk2NDEgMjg4LjQ3MDM3IApMIDE0Ni4zNDQ0MDIgMjkxLjE1MDQ3MSAKTCAxNDcuOTkyMzk1IDI4OS4yMjM4MDkgCkwgMTQ5LjY0MDM4OCAyOTAuODcwNTA2IApMIDE1MS4yODgzOCAyODUuNzc4MTI3IApMIDE1Mi45MzYzNzMgMjg4LjI4MTA4OSAKTCAxNTQuNTg0MzY1IDI4OC44MTE1NDUgCkwgMTU2LjIzMjM1OCAyODkuNzg4MzU4IApMIDE1Ny44ODAzNTEgMjkyLjk5NjA2NCAKTCAxNTkuNTI4MzQzIDI5Mi41NTYzMDkgCkwgMTYxLjE3NjMzNiAyODUuNzQ3NzQxIApMIDE2Mi44MjQzMjkgMjkyLjUxOTM1IApMIDE2NC40NzIzMjEgMjg2LjkzNzgxNCAKTCAxNjYuMTIwMzE0IDI5NS40MDkyNTYgCkwgMTY3Ljc2ODMwNiAyODcuMDE3ODgxIApMIDE2OS40MTYyOTkgMjg3Ljk2MTMwMyAKTCAxNzEuMDY0MjkyIDI5Mi40MTk3NTIgCkwgMTcyLjcxMjI4NCAyOTEuMzkyNTM2IApMIDE3NC4zNjAyNzcgMjg3LjI3ODAyOSAKTCAxNzYuMDA4MjY5IDI4Ny4wNTQxNDggCkwgMTc3LjY1NjI2MiAyODguMjcyMDY2IApMIDE3OS4zMDQyNTUgMjg3Ljk2MTExNSAKTCAxODAuOTUyMjQ3IDI5Mi4wODY5NjUgCkwgMTgyLjYwMDI0IDI4Ni4yMDkzMDcgCkwgMTg0LjI0ODIzMyAyODUuNDYwNTk3IApMIDE4NS44OTYyMjUgMjgxLjg4NTg0MyAKTCAxODcuNTQ0MjE4IDI4OS4yMzA4NzUgCkwgMTg5LjE5MjIxIDI3NC4wNDE5MTQgCkwgMTkwLjg0MDIwMyAyOTAuNzMxOTI3IApMIDE5Mi40ODgxOTYgMjg4LjI1NDQzOSAKTCAxOTQuMTM2MTg4IDI4Mi4yNDQ0NTYgCkwgMTk1Ljc4NDE4MSAyOTUuNDg4IApMIDE5Ny40MzIxNzQgMjg4LjUxOTA4NiAKTCAxOTkuMDgwMTY2IDI5Mi4zNjk5MjcgCkwgMjAwLjcyODE1OSAyOTAuNjY1NTUgCkwgMjAyLjM3NjE1MSAyODIuMzk4MDY5IApMIDIwNC4wMjQxNDQgMjg1LjEwODE0MiAKTCAyMDUuNjcyMTM3IDI4My4xOTE3NCAKTCAyMDcuMzIwMTI5IDI4NS41ODQ0ODUgCkwgMjA4Ljk2ODEyMiAyNzcuNjg4NDg0IApMIDIxMC42MTYxMTQgMjgxLjA1NDIzIApMIDIxMi4yNjQxMDcgMjgyLjMxNjE0NSAKTCAyMTMuOTEyMSAyODIuNTI0MDEyIApMIDIxNS41NjAwOTIgMjg3LjQ3MDAyNCAKTCAyMTcuMjA4MDg1IDI4Mi40MDc2NCAKTCAyMTguODU2MDc4IDI4OS4wMDUyODggCkwgMjIwLjUwNDA3IDI4NC40NTIxNjggCkwgMjIyLjE1MjA2MyAyNzIuNjM3MTUxIApMIDIyMy44MDAwNTUgMjcwLjc4MDg2NyAKTCAyMjUuNDQ4MDQ4IDI2Ny41OTM4NDggCkwgMjI3LjA5NjA0MSAyNzAuNTc0Nzg5IApMIDIyOC43NDQwMzMgMjcxLjg0NTg5IApMIDIzMC4zOTIwMjYgMjgyLjcxODI1NiAKTCAyMzIuMDQwMDE4IDI3Ny43NjA3NzMgCkwgMjMzLjY4ODAxMSAyOTAuMTkzNDg1IApMIDIzNS4zMzYwMDQgMjc0LjI2MTE2OSAKTCAyMzYuOTgzOTk2IDI3MS44ODE4MiAKTCAyMzguNjMxOTg5IDI2OC4wMjY0NjQgCkwgMjQwLjI3OTk4MiAyNzEuNDg5ODQ3IApMIDI0MS45Mjc5NzQgMjgwLjg1NTkyOSAKTCAyNDMuNTc1OTY3IDI3NS44NDMyNjUgCkwgMjQ1LjIyMzk1OSAyNTIuMDk2MjI4IApMIDI0Ni44NzE5NTIgMjU2LjE3MzUxIApMIDI0OC41MTk5NDUgMjI3Ljg1MTY1MSAKTCAyNTAuMTY3OTM3IDI1OC4wOTc1NjggCkwgMjUxLjgxNTkzIDI1Ni43NDk5NTEgCkwgMjUzLjQ2MzkyMiAyNTkuMzc5MzAxIApMIDI1NS4xMTE5MTUgMjY3LjU4NzU5OCAKTCAyNTYuNzU5OTA4IDI1Mi4yNjc1OTcgCkwgMjU4LjQwNzkgMjY3LjU4NTYyOSAKTCAyNjAuMDU1ODkzIDI1Ni4xNjQ4MjIgCkwgMjYxLjcwMzg4NiAyNTUuNjk2MjA4IApMIDI2My4zNTE4NzggMjI0LjEzMDY2MSAKTCAyNjQuOTk5ODcxIDIwOC42MzMxMDQgCkwgMjY2LjY0Nzg2MyAyMDguMDY2NDcgCkwgMjY4LjI5NTg1NiAyMDkuMTAzIApMIDI2OS45NDM4NDkgMjIwLjcxMjc0NSAKTCAyNzEuNTkxODQxIDIwNy45ODIxNjkgCkwgMjczLjIzOTgzNCAxOTguMTU0MDE5IApMIDI3NC44ODc4MjYgMjM3LjcyMzkyIApMIDI3Ni41MzU4MTkgMTc4LjYxMjczMiAKTCAyNzguMTgzODEyIDE0OC40MzU4NjQgCkwgMjc5LjgzMTgwNCAxODYuNDY1NjEgCkwgMjgxLjQ3OTc5NyAyNDYuMjM1OTIgCkwgMjgzLjEyNzc5IDE5OS4zNTQyMTcgCkwgMjg0Ljc3NTc4MiAxOTYuNzk1NTA5IApMIDI4Ni40MjM3NzUgMTcwLjM0MDE0MiAKTCAyODguMDcxNzY3IDE1Ni45NTE3MDIgCkwgMjg5LjcxOTc2IDE0MS4yOTk2MDYgCkwgMjkxLjM2Nzc1MyAxOTEuMjk1NDI2IApMIDI5My4wMTU3NDUgMTg2LjE4MDk1OCAKTCAyOTQuNjYzNzM4IDEzMi4zNjEyODUgCkwgMjk2LjMxMTczMSA4Mi45ODMxNTggCkwgMjk3Ljk1OTcyMyAyMDYuNDczNDggCkwgMjk5LjYwNzcxNiA5MC40NDAzMTEgCkwgMzAxLjI1NTcwOCAxNjEuMDM1ODcxIApMIDMwMi45MDM3MDEgMTU5LjAyOTcwNCAKTCAzMDQuNTUxNjk0IDEzNy41Nzc0NTEgCkwgMzA2LjE5OTY4NiAxMzYuNDUxNDM5IApMIDMwNy44NDc2NzkgODIuMDMwNTY5IApMIDMwOS40OTU2NzEgMTk3LjYzNzkxNCAKTCAzMTEuMTQzNjY0IDE4My44NjYwNzMgCkwgMzEyLjc5MTY1NyAxNTQuNTMyODI1IApMIDMxNC40Mzk2NDkgMTEwLjQ4MDMwOSAKTCAzMTYuMDg3NjQyIDEyNy4zOTA3MjQgCkwgMzE3LjczNTYzNSAyMjIuNzc5NTI5IApMIDMxOS4zODM2MjcgMTUyLjc4NTExMyAKTCAzMjEuMDMxNjIgMTQ1LjY5NTM0MSAKTCAzMjIuNjc5NjEyIDE1Ni4wMzY2MTMgCkwgMzI0LjMyNzYwNSAxMDcuNzM0MjI3IApMIDMyNS45NzU1OTggMTkwLjcwMTg2NiAKTCAzMjcuNjIzNTkgNTMuNTY4IApMIDMyOS4yNzE1ODMgMjA0LjczNDg1IApMIDMzMC45MTk1NzUgMjA2LjAzNTQ1NCAKTCAzMzIuNTY3NTY4IDEzNC43MzkxMTkgCkwgMzM0LjIxNTU2MSAxNDQuMDk2NzQ1IApMIDMzNS44NjM1NTMgMjA1LjA5NzczNSAKTCAzMzcuNTExNTQ2IDE5MS4wNDcyOTQgCkwgMzM5LjE1OTUzOSAxMzYuMjQ0NzY0IApMIDM0MC44MDc1MzEgMTYwLjY0NzcxOSAKTCAzNDIuNDU1NTI0IDE4MS41OTQzMjkgCkwgMzQ0LjEwMzUxNiAyMzAuMjk5NjQxIApMIDM0NS43NTE1MDkgMjAwLjA3MDcwMyAKTCAzNDcuMzk5NTAyIDIzMy4xODkyNDggCkwgMzQ5LjA0NzQ5NCAxOTAuNTgxNTM5IApMIDM1MC42OTU0ODcgMjU5LjI5Mzk4MyAKTCAzNTIuMzQzNDc5IDIzOS4zNTE4OTIgCkwgMzUzLjk5MTQ3MiAyMzMuOTk0Mzg1IApMIDM1NS42Mzk0NjUgMjI3LjQ0NDM4MSAKTCAzNTcuMjg3NDU3IDIyMi42NzU2MzYgCkwgMzU4LjkzNTQ1IDIyOC42MTkxMDcgCkwgMzYwLjU4MzQ0MyAyMzguMzAyMDY4IApMIDM2Mi4yMzE0MzUgMjQ3LjAwMzM0MiAKTCAzNjMuODc5NDI4IDI1OC41NTQzNDEgCkwgMzY1LjUyNzQyIDI0NS44MjgwODcgCkwgMzY3LjE3NTQxMyAyNDkuMjAwNjM2IApMIDM2OC44MjM0MDYgMjU4LjU4MjAxNSAKTCAzNzAuNDcxMzk4IDI3My41NzY5MTggCkwgMzcyLjExOTM5MSAyNzMuMjE0NDAzIApMIDM3My43NjczODMgMjczLjA1NDg4NyAKTCAzNzUuNDE1Mzc2IDI2OC43MDQ5NTggCkwgMzc3LjA2MzM2OSAyNzAuMTg4MjIzIApMIDM3OC43MTEzNjEgMjc1LjA4NDgzMSAKTCAzODAuMzU5MzU0IDI3NS45NDQ3MjYgCkwgMzgyLjAwNzM0NyAyODQuOTYyNjQ4IApMIDM4My42NTUzMzkgMjg1LjQxNDg4NyAKTCAzODUuMzAzMzMyIDI4MC4zNTEzNzMgCkwgMzg2Ljk1MTMyNCAyODQuNDk3NjAzIApMIDM4OC41OTkzMTcgMjg0LjM3MzEzOSAKTCAzOTAuMjQ3MzEgMjg0LjY0NjI1MyAKTCAzOTEuODk1MzAyIDI4NS40NjY1NTggCkwgMzkzLjU0MzI5NSAyODMuMTkyNzUxIApMIDM5NS4xOTEyODcgMjgyLjk5MjU2MiAKTCAzOTYuODM5MjggMjgwLjUzNjgzNCAKTCAzOTguNDg3MjczIDI3Mi4zMDU1NTUgCkwgMzk4LjQ4NzI3MyAyNzIuMzA1NTU1IAoiIGNsaXAtcGF0aD0idXJsKCNwZGJkN2VjMzNlYikiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMxZjc3YjQ7IHN0cm9rZS13aWR0aDogMS41OyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzMiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNTcuNiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNCI+CiAgICA8cGF0aCBkPSJNIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNSI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA0MTQuNzIgMzA3LjU4NCAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF82Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiA0MS40NzIgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgPC9nPgogPC9nPgogPGRlZnM+CiAgPGNsaXBQYXRoIGlkPSJwZGJkN2VjMzNlYiI+CiAgIDxyZWN0IHg9IjU3LjYiIHk9IjQxLjQ3MiIgd2lkdGg9IjM1Ny4xMiIgaGVpZ2h0PSIyNjYuMTEyIi8+CiAgPC9jbGlwUGF0aD4KIDwvZGVmcz4KPC9zdmc+Cg==" alt="image" /></p>

<h2 id="observed-coins">Observed coins</h2>

<p>Everything we did above can also be done for the seven coins that we
have already observed. Consider, for instance, the fifth coin. (Its
0-based index in the <code><a href="#IDPModel.rowCounts">IDPModel.rowCounts</a></code> property is 4). It has an
unknown probability of heads that we might denote by $\theta_4$. We can
view the distribution of $\theta_4$, given the flips we have already
observed.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">law</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowDistLaw</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">law</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTQ6MTE6NDMuMTcxMTk2PC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTRlMDk3OTM0ZjYiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNGUwOTc5MzRmNiIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTRlMDk3OTM0ZjYiIHg9IjEzOC43NjM2MzYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzAuODEyMDc0IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNGUwOTc5MzRmNiIgeD0iMjAzLjY5NDU0NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS43NDI5ODMgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNGUwOTc5MzRmNiIgeD0iMjY4LjYyNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MC42NzM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI200ZTA5NzkzNGY2IiB4PSIzMzMuNTU2MzY0IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI1LjYwNDgwMSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI200ZTA5NzkzNGY2IiB4PSIzOTguNDg3MjczIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkwLjUzNTcxIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9Im1hdHBsb3RsaWIuYXhpc18yIj4KICAgIDxnIGlkPSJ5dGlja18xIj4KICAgICA8ZyBpZD0ibGluZTJkXzciPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtYWY2YTEwMDM3OCIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYWY2YTEwMDM3OCIgeD0iNTcuNiIgeT0iMjk1LjYxOTYyNCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSAwLjAwIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOC4zMzQzNzUgMjk5LjQxODg0Mykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSIxNTkuMDMzMjAzIi8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMiI+CiAgICAgPGcgaWQ9ImxpbmUyZF84Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYWY2YTEwMDM3OCIgeD0iNTcuNiIgeT0iMjYzLjc2MDY4NiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF84Ij4KICAgICAgPCEtLSAwLjI1IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOC4zMzQzNzUgMjY3LjU1OTkwNSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM1IiBkPSJNIDY5MSA0NjY2IApMIDMxNjkgNDY2NiAKTCAzMTY5IDQxMzQgCkwgMTI2OSA0MTM0IApMIDEyNjkgMjk5MSAKUSAxNDA2IDMwMzggMTU0MyAzMDYxIApRIDE2ODEgMzA4NCAxODE5IDMwODQgClEgMjYwMCAzMDg0IDMwNTYgMjY1NiAKUSAzNTEzIDIyMjggMzUxMyAxNDk3IApRIDM1MTMgNzQ0IDMwNDQgMzI2IApRIDI1NzUgLTkxIDE3MjIgLTkxIApRIDE0MjggLTkxIDExMjMgLTQxIApRIDgxOSA5IDQ5NCAxMDkgCkwgNDk0IDc0NCAKUSA3NzUgNTkxIDEwNzUgNTE2IApRIDEzNzUgNDQxIDE3MDkgNDQxIApRIDIyNTAgNDQxIDI1NjUgNzI1IApRIDI4ODEgMTAwOSAyODgxIDE0OTcgClEgMjg4MSAxOTg0IDI1NjUgMjI2OCAKUSAyMjUwIDI1NTMgMTcwOSAyNTUzIApRIDE0NTYgMjU1MyAxMjA0IDI0OTcgClEgOTUzIDI0NDEgNjkxIDIzMjIgCkwgNjkxIDQ2NjYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIiB4PSI5NS40MTAxNTYiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzUiIHg9IjE1OS4wMzMyMDMiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18zIj4KICAgICA8ZyBpZD0ibGluZTJkXzkiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21hZjZhMTAwMzc4IiB4PSI1Ny42IiB5PSIyMzEuOTAxNzQ3IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzkiPgogICAgICA8IS0tIDAuNTAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI4LjMzNDM3NSAyMzUuNzAwOTY2KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9IjE1OS4wMzMyMDMiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEwIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYWY2YTEwMDM3OCIgeD0iNTcuNiIgeT0iMjAwLjA0MjgwOSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMC43NSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjguMzM0Mzc1IDIwMy44NDIwMjcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zNyIgZD0iTSA1MjUgNDY2NiAKTCAzNTI1IDQ2NjYgCkwgMzUyNSA0Mzk3IApMIDE4MzEgMCAKTCAxMTcyIDAgCkwgMjc2NiA0MTM0IApMIDUyNSA0MTM0IApMIDUyNSA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNyIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSIxNTkuMDMzMjAzIi8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWFmNmExMDAzNzgiIHg9IjU3LjYiIHk9IjE2OC4xODM4NyIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMSI+CiAgICAgIDwhLS0gMS4wMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjguMzM0Mzc1IDE3MS45ODMwODkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iMTU5LjAzMzIwMyIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzYiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21hZjZhMTAwMzc4IiB4PSI1Ny42IiB5PSIxMzYuMzI0OTMxIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEyIj4KICAgICAgPCEtLSAxLjI1IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOC4zMzQzNzUgMTQwLjEyNDE1KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIiB4PSI5NS40MTAxNTYiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzUiIHg9IjE1OS4wMzMyMDMiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja183Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEzIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYWY2YTEwMDM3OCIgeD0iNTcuNiIgeT0iMTA0LjQ2NTk5MyIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMyI+CiAgICAgIDwhLS0gMS41MCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjguMzM0Mzc1IDEwOC4yNjUyMTIpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzUiIHg9Ijk1LjQxMDE1NiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iMTU5LjAzMzIwMyIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzgiPgogICAgIDxnIGlkPSJsaW5lMmRfMTQiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21hZjZhMTAwMzc4IiB4PSI1Ny42IiB5PSI3Mi42MDcwNTQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTQiPgogICAgICA8IS0tIDEuNzUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI4LjMzNDM3NSA3Ni40MDYyNzMpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzciIHg9Ijk1LjQxMDE1NiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iMTU5LjAzMzIwMyIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJsaW5lMmRfMTUiPgogICAgPHBhdGggZD0iTSA3My44MzI3MjcgMjUwLjIwNDk0OSAKTCA3Ny4wOTU1ODcgMjM4LjI3NzI5OCAKTCA4OC41MTU1OTYgMTk0Ljc4MzUzNSAKTCA5MS43Nzg0NTYgMTgzLjgyNTM5MSAKTCA5NS4wNDEzMTYgMTc0LjEzNDkxOSAKTCA5Ni42NzI3NDYgMTY5LjgxNzA5MiAKTCA5OC4zMDQxNzUgMTY1Ljg2NTQxMiAKTCA5OS45MzU2MDUgMTYyLjI4MzQyMyAKTCAxMDEuNTY3MDM1IDE1OS4wNjk0MyAKTCAxMDMuMTk4NDY1IDE1Ni4yMTcwMzQgCkwgMTA0LjgyOTg5NSAxNTMuNzE1NjU1IApMIDEwNi40NjEzMjUgMTUxLjU1MTA1MiAKTCAxMDguMDkyNzU1IDE0OS43MDU4NDQgCkwgMTA5LjcyNDE4NSAxNDguMTYwMDQ4IApMIDExMS4zNTU2MTQgMTQ2Ljg5MTYyOSAKTCAxMTIuOTg3MDQ0IDE0NS44NzcwNjIgCkwgMTE0LjYxODQ3NCAxNDUuMDkxODkxIApMIDExNi4yNDk5MDQgMTQ0LjUxMTI2NiAKTCAxMTcuODgxMzM0IDE0NC4xMTA0NDUgCkwgMTE5LjUxMjc2NCAxNDMuODY1MjQ0IApMIDEyMi43NzU2MjQgMTQzLjc0OTk2OSAKTCAxMjYuMDM4NDgzIDE0My45OTU4MDEgCkwgMTMwLjkzMjc3MyAxNDQuNzM1MTE4IApMIDE0Mi4zNTI3ODIgMTQ2LjY1MTYxNyAKTCAxNTAuNTA5OTMxIDE0Ny44NTQyMzYgCkwgMTUzLjc3Mjc5MSAxNDguNTIyMzg4IApMIDE1Ny4wMzU2NTEgMTQ5LjQ0NzQxMyAKTCAxNjAuMjk4NTExIDE1MC43MTQ5MzIgCkwgMTYzLjU2MTM3IDE1Mi4zNjkyMjYgCkwgMTY2LjgyNDIzIDE1NC4zOTc5MDYgCkwgMTcwLjA4NzA5IDE1Ni43MzA1NzUgCkwgMTgzLjEzODUyOSAxNjYuNjA3MjczIApMIDE4Ni40MDEzODkgMTY4LjYxNzEzMyAKTCAxODkuNjY0MjQ5IDE3MC4yODg5NTEgCkwgMTkyLjkyNzEwOCAxNzEuNTkyNjczIApMIDE5Ni4xODk5NjggMTcyLjUxOTk0OCAKTCAxOTkuNDUyODI4IDE3My4wODE5MzkgCkwgMjAyLjcxNTY4OCAxNzMuMzA3MDIzIApMIDIwNS45Nzg1NDcgMTczLjIzNTEwOCAKTCAyMDkuMjQxNDA3IDE3Mi45MDY0MTEgCkwgMjEyLjUwNDI2NyAxNzIuMzQ1NTA3IApMIDIxNS43NjcxMjcgMTcxLjU0NDcyMiAKTCAyMTkuMDI5OTg2IDE3MC40NTI5MzggCkwgMjIyLjI5Mjg0NiAxNjguOTc1NTk5IApMIDIyMy45MjQyNzYgMTY4LjA1NDEzNiAKTCAyMjUuNTU1NzA2IDE2Ni45ODg5MDggCkwgMjI3LjE4NzEzNiAxNjUuNzY0MjQgCkwgMjI4LjgxODU2NiAxNjQuMzY2Mjg0IApMIDIzMC40NDk5OTUgMTYyLjc4MzkzOCAKTCAyMzIuMDgxNDI1IDE2MS4wMDk1NTQgCkwgMjMzLjcxMjg1NSAxNTkuMDM5Mzc3IApMIDIzNS4zNDQyODUgMTU2Ljg3MzYzIApMIDIzOC42MDcxNDUgMTUxLjk3NDMxMyAKTCAyNDEuODcwMDA1IDE0Ni4zNzUzNTUgCkwgMjQ1LjEzMjg2NCAxNDAuMTYwODEgCkwgMjQ4LjM5NTcyNCAxMzMuNDA2ODUgCkwgMjUxLjY1ODU4NCAxMjYuMTY4MzU1IApMIDI1NC45MjE0NDQgMTE4LjQ4ODE0NiAKTCAyNTkuODE1NzMzIDEwNi4yNzg4NTIgCkwgMjY5LjYwNDMxMiA4MS4yNzEwMTcgCkwgMjcyLjg2NzE3MiA3My42NTY0OTkgCkwgMjc2LjEzMDAzMiA2Ni44ODQ5NzQgCkwgMjc3Ljc2MTQ2MiA2My45MDQ0NTcgCkwgMjc5LjM5Mjg5MiA2MS4yMzkzNDkgCkwgMjgxLjAyNDMyMiA1OC45MjE5MzIgCkwgMjgyLjY1NTc1MSA1Ni45ODMwNDUgCkwgMjg0LjI4NzE4MSA1NS40NTE5MzcgCkwgMjg1LjkxODYxMSA1NC4zNTYwMiAKTCAyODcuNTUwMDQxIDUzLjcyMDUxMyAKTCAyODkuMTgxNDcxIDUzLjU2OCAKTCAyOTAuODEyOTAxIDUzLjkxNzkyMyAKTCAyOTIuNDQ0MzMxIDU0Ljc4NjA3IApMIDI5NC4wNzU3NjEgNTYuMTg0MTAzIApMIDI5NS43MDcxOSA1OC4xMTkxNzUgCkwgMjk3LjMzODYyIDYwLjU5MzY2NyAKTCAyOTguOTcwMDUgNjMuNjA1MDcxIApMIDMwMC42MDE0OCA2Ny4xNDYwMSAKTCAzMDIuMjMyOTEgNzEuMjA0Mzc2IApMIDMwMy44NjQzNCA3NS43NjM1NjcgCkwgMzA1LjQ5NTc3IDgwLjgwMjc4NyAKTCAzMDcuMTI3MiA4Ni4yOTczNjkgCkwgMzEwLjM5MDA1OSA5OC41MzY1OTEgCkwgMzEzLjY1MjkxOSAxMTIuMjE4Nzk1IApMIDMxNi45MTU3NzkgMTI3LjAzOTQzOSAKTCAzMjEuODEwMDY5IDE1MC42NjA3MzggCkwgMzI5Ljk2NzIxOCAxOTAuNzA2OTQ5IApMIDMzMy4yMzAwNzggMjA1LjkyMTc0MyAKTCAzMzYuNDkyOTM3IDIyMC4yMDMzMjggCkwgMzM5Ljc1NTc5NyAyMzMuMzA0MTAyIApMIDM0My4wMTg2NTcgMjQ1LjA0MzQ5NyAKTCAzNDYuMjgxNTE3IDI1NS4zMTU4OCAKTCAzNDcuOTEyOTQ3IDI1OS44ODk5MjcgCkwgMzQ5LjU0NDM3NiAyNjQuMDkxOTk0IApMIDM1MS4xNzU4MDYgMjY3LjkyOTM5MiAKTCAzNTIuODA3MjM2IDI3MS40MTMwODcgCkwgMzU0LjQzODY2NiAyNzQuNTU3MTggCkwgMzU2LjA3MDA5NiAyNzcuMzc4MzQxIApMIDM1Ny43MDE1MjYgMjc5Ljg5NTIxNiAKTCAzNTkuMzMyOTU2IDI4Mi4xMjc4NDkgCkwgMzYwLjk2NDM4NiAyODQuMDk3MTQgCkwgMzYyLjU5NTgxNSAyODUuODI0MzQ4IApMIDM2NC4yMjcyNDUgMjg3LjMzMDY2OSAKTCAzNjUuODU4Njc1IDI4OC42MzY4ODQgCkwgMzY3LjQ5MDEwNSAyODkuNzYzMDc5IApMIDM2OS4xMjE1MzUgMjkwLjcyODQ0MSAKTCAzNzAuNzUyOTY1IDI5MS41NTExMDcgCkwgMzc0LjAxNTgyNSAyOTIuODM1MDgyIApMIDM3Ny4yNzg2ODQgMjkzLjczNjE2MiAKTCAzODAuNTQxNTQ0IDI5NC4zNTU0NDQgCkwgMzgzLjgwNDQwNCAyOTQuNzc0MTYgCkwgMzg4LjY5ODY5MyAyOTUuMTU4MDIzIApMIDM5NS4yMjQ0MTMgMjk1LjQxNjcyMyAKTCAzOTguNDg3MjczIDI5NS40ODggCkwgMzk4LjQ4NzI3MyAyOTUuNDg4IAoiIGNsaXAtcGF0aD0idXJsKCNwMWVjMDJjZjk4YikiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMxZjc3YjQ7IHN0cm9rZS13aWR0aDogMS41OyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzMiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNTcuNiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNCI+CiAgICA8cGF0aCBkPSJNIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNSI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA0MTQuNzIgMzA3LjU4NCAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF82Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiA0MS40NzIgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgPC9nPgogPC9nPgogPGRlZnM+CiAgPGNsaXBQYXRoIGlkPSJwMWVjMDJjZjk4YiI+CiAgIDxyZWN0IHg9IjU3LjYiIHk9IjQxLjQ3MiIgd2lkdGg9IjM1Ny4xMiIgaGVpZ2h0PSIyNjYuMTEyIi8+CiAgPC9jbGlwUGF0aD4KIDwvZGVmcz4KPC9zdmc+Cg==" alt="image" /></p>

<p>We can also find the probability that the fifth coin, if flipped again,
will land on heads:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">law</span><span class="o">.</span><span class="n">mean</span>
<span class="mf">0.4455686228426346</span>
</code></pre>
</div>

<h2 id="effective-sample-size">Effective sample size</h2>

<p>The above probabilities and graphs are not calculated by direct
simulation, but by using <a href="https://en.wikipedia.org/wiki/Importance_sampling">importance
sampling</a>. Although
the sample size is 10,000, the "effective sample size" is lower:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">6578.067134805476</span>
</code></pre>
</div>

<p>What this means is that the accuracy of our calculations is about the
same as if we did 6,578 direct simulations.</p>

<h1 id="flicking-thumbtacks">Flicking thumbtacks</h1>

<p>Imagine a box of 320 thumbtacks. We flick each thumbtack 9 times. If it
lands point up, we call it a success. Point down is a failure. Because
of the imperfections, each thumbtack has its own probability of success.
The file, <code>tacks.csv</code>, contains the success and failure counts for this
experiment. The data in <code>tacks.csv</code> is exactly the data considered in
<a href="https://doi.org/10.1214/aos/1032526949">Liu (1996)</a>. (This data
originally came from an experiment by Beckett and Diaconis in 1994. In
the original experiment, there were not 320 thumbtacks. Rather, there
were 16 thumbtacks, 2 flickers, and 10 surfaces.)</p>

<p>To study this situation, we first create the model and perform 10,000
simulations.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">csv</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tacks.csv&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">sheet</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="o">...</span>     <span class="n">rowCounts</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sheet</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="c1"># took ~4m on a Macbook</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">243.581441084223</span>
</code></pre>
</div>

<p>Here, we use a row concentration parameter of $2$ and a base measure
that assigns probability $1/2$ to both $0$ and $1$. This matches the
distribution used by Liu. What we call the column concentration
parameter is denoted by $c$ in Liu's analysis. Liu considers the cases
$c = 0.1$, $c = 1$, $c = 5$, and $c = 10$. Here, we are taking $c = 1$.</p>

<p>We also checked our effective sample size, which is a good habit
whenever we add new weighted simulations. For comparison, Liu reported
an effective sample size of 227 in the case $c = 1$.</p>

<p>We now look at the approximate density of the posterior probability of
success.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">law</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowDistLaw</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">law</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">bandwidth</span>
<span class="mf">0.10510725412303899</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTI6NTE6NDMuNzgzMjkwPC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibWNmYmEwOTFkMWIiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtY2ZiYTA5MWQxYiIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWNmYmEwOTFkMWIiIHg9IjEzOC43NjM2MzYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzAuODEyMDc0IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtY2ZiYTA5MWQxYiIgeD0iMjAzLjY5NDU0NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS43NDI5ODMgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtY2ZiYTA5MWQxYiIgeD0iMjY4LjYyNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MC42NzM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21jZmJhMDkxZDFiIiB4PSIzMzMuNTU2MzY0IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI1LjYwNDgwMSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21jZmJhMDkxZDFiIiB4PSIzOTguNDg3MjczIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkwLjUzNTcxIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9Im1hdHBsb3RsaWIuYXhpc18yIj4KICAgIDxnIGlkPSJ5dGlja18xIj4KICAgICA8ZyBpZD0ibGluZTJkXzciPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtNWUxMGY0ZmFhMCIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNWUxMGY0ZmFhMCIgeD0iNTcuNiIgeT0iMjk1LjcwOTU1NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSAwLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyOTkuNTA4NzczKSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18yIj4KICAgICA8ZyBpZD0ibGluZTJkXzgiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201ZTEwZjRmYWEwIiB4PSI1Ny42IiB5PSIyNjIuODE3NDg3IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzgiPgogICAgICA8IS0tIDAuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDI2Ni42MTY3MDYpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zNSIgZD0iTSA2OTEgNDY2NiAKTCAzMTY5IDQ2NjYgCkwgMzE2OSA0MTM0IApMIDEyNjkgNDEzNCAKTCAxMjY5IDI5OTEgClEgMTQwNiAzMDM4IDE1NDMgMzA2MSAKUSAxNjgxIDMwODQgMTgxOSAzMDg0IApRIDI2MDAgMzA4NCAzMDU2IDI2NTYgClEgMzUxMyAyMjI4IDM1MTMgMTQ5NyAKUSAzNTEzIDc0NCAzMDQ0IDMyNiAKUSAyNTc1IC05MSAxNzIyIC05MSAKUSAxNDI4IC05MSAxMTIzIC00MSAKUSA4MTkgOSA0OTQgMTA5IApMIDQ5NCA3NDQgClEgNzc1IDU5MSAxMDc1IDUxNiAKUSAxMzc1IDQ0MSAxNzA5IDQ0MSAKUSAyMjUwIDQ0MSAyNTY1IDcyNSAKUSAyODgxIDEwMDkgMjg4MSAxNDk3IApRIDI4ODEgMTk4NCAyNTY1IDIyNjggClEgMjI1MCAyNTUzIDE3MDkgMjU1MyAKUSAxNDU2IDI1NTMgMTIwNCAyNDk3IApRIDk1MyAyNDQxIDY5MSAyMzIyIApMIDY5MSA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF85Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNWUxMGY0ZmFhMCIgeD0iNTcuNiIgeT0iMjI5LjkyNTQyMSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF85Ij4KICAgICAgPCEtLSAxLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyMzMuNzI0NjM5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEwIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNWUxMGY0ZmFhMCIgeD0iNTcuNiIgeT0iMTk3LjAzMzM1NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMS41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjAwLjgzMjU3Mikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTVlMTBmNGZhYTAiIHg9IjU3LjYiIHk9IjE2NC4xNDEyODciIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDIuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDE2Ny45NDA1MDUpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzYiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201ZTEwZjRmYWEwIiB4PSI1Ny42IiB5PSIxMzEuMjQ5MjIiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTIiPgogICAgICA8IS0tIDIuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDEzNS4wNDg0MzgpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzUiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzciPgogICAgIDxnIGlkPSJsaW5lMmRfMTMiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201ZTEwZjRmYWEwIiB4PSI1Ny42IiB5PSI5OC4zNTcxNTMiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTMiPgogICAgICA8IS0tIDMuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDEwMi4xNTYzNzEpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMyIgZD0iTSAyNTk3IDI1MTYgClEgMzA1MCAyNDE5IDMzMDQgMjExMiAKUSAzNTU5IDE4MDYgMzU1OSAxMzU2IApRIDM1NTkgNjY2IDMwODQgMjg3IApRIDI2MDkgLTkxIDE3MzQgLTkxIApRIDE0NDEgLTkxIDExMzAgLTMzIApRIDgxOSAyNSA0ODggMTQxIApMIDQ4OCA3NTAgClEgNzUwIDU5NyAxMDYyIDUxOSAKUSAxMzc1IDQ0MSAxNzE2IDQ0MSAKUSAyMzA5IDQ0MSAyNjIwIDY3NSAKUSAyOTMxIDkwOSAyOTMxIDEzNTYgClEgMjkzMSAxNzY5IDI2NDIgMjAwMSAKUSAyMzUzIDIyMzQgMTgzOCAyMjM0IApMIDEyOTQgMjIzNCAKTCAxMjk0IDI3NTMgCkwgMTg2MyAyNzUzIApRIDIzMjggMjc1MyAyNTc1IDI5MzkgClEgMjgyMiAzMTI1IDI4MjIgMzQ3NSAKUSAyODIyIDM4MzQgMjU2NyA0MDI2IApRIDIzMTMgNDIxOSAxODM4IDQyMTkgClEgMTU3OCA0MjE5IDEyODEgNDE2MiAKUSA5ODQgNDEwNiA2MjggMzk4OCAKTCA2MjggNDU1MCAKUSA5ODggNDY1MCAxMzAyIDQ3MDAgClEgMTYxNiA0NzUwIDE4OTQgNDc1MCAKUSAyNjEzIDQ3NTAgMzAzMSA0NDIzIApRIDM0NTAgNDA5NyAzNDUwIDM1NDEgClEgMzQ1MCAzMTUzIDMyMjggMjg4NiAKUSAzMDA2IDI2MTkgMjU5NyAyNTE2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfOCI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xNCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTVlMTBmNGZhYTAiIHg9IjU3LjYiIHk9IjY1LjQ2NTA4NiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xNCI+CiAgICAgIDwhLS0gMy41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgNjkuMjY0MzA0KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibGluZTJkXzE1Ij4KICAgIDxwYXRoIGQ9Ik0gNzMuODMyNzI3IDI5NS40ODggCkwgOTEuNzc4NDU2IDI5NS4zMzU5MDEgCkwgMTI3LjY2OTkxMyAyOTQuNjgxNDE3IApMIDE0MC43MjEzNTIgMjk0LjI4MzA3NCAKTCAxNDguODc4NTAyIDI5My41NTI1NjIgCkwgMTU3LjAzNTY1MSAyOTMuMDE4NDY5IApMIDE2MC4yOTg1MTEgMjkyLjQyMTE4MyAKTCAxNjUuMTkyOCAyOTEuMDc0NDI1IApMIDE3My4zNDk5NSAyODguNTk0MDUxIApMIDE3Ni42MTI4MSAyODcuNjI1NjQ3IApMIDE3OS44NzU2NjkgMjg2Ljk3MTQ2NiAKTCAxODMuMTM4NTI5IDI4Ni43MzQyNTMgCkwgMTg2LjQwMTM4OSAyODYuNTAxNzkgCkwgMTg4LjAzMjgxOSAyODYuMTcxMDc0IApMIDE4OS42NjQyNDkgMjg1LjU5OTkwMiAKTCAxOTEuMjk1Njc4IDI4NC43Mzc2MTEgCkwgMTkyLjkyNzEwOCAyODMuNTUwNjIgCkwgMTk0LjU1ODUzOCAyODIuMDMyNTA5IApMIDE5Ni4xODk5NjggMjgwLjIyMjgzNyAKTCAyMDEuMDg0MjU4IDI3NC4wNjc2MjQgCkwgMjAyLjcxNTY4OCAyNzEuOTk2MTMyIApMIDIwNC4zNDcxMTcgMjY5LjcyOTYwNCAKTCAyMDUuOTc4NTQ3IDI2Ni45MjQ0MTMgCkwgMjA3LjYwOTk3NyAyNjMuMTkxMjc3IApMIDIwOS4yNDE0MDcgMjU4LjI3NTM2NCAKTCAyMTAuODcyODM3IDI1Mi4yMTUyMjkgCkwgMjE0LjEzNTY5NyAyMzguMTk5NDE2IApMIDIyMi4yOTI4NDYgMjAyLjUxOTUwMyAKTCAyMjMuOTI0Mjc2IDE5NC4wNDYyMTggCkwgMjI1LjU1NTcwNiAxODQuNDE5NjQ3IApMIDIyNy4xODcxMzYgMTczLjQyNTc2NSAKTCAyMzMuNzEyODU1IDEyNS4wNTE3NzkgCkwgMjM1LjM0NDI4NSAxMTYuNjU2ODQzIApMIDIzNi45NzU3MTUgMTExLjAzNzY2OSAKTCAyMzguNjA3MTQ1IDEwNy44ODU2ODMgCkwgMjQwLjIzODU3NSAxMDYuMzk4NDMgCkwgMjQxLjg3MDAwNSAxMDUuNTUxMTI4IApMIDI0My41MDE0MzQgMTA0LjQ1NDgzNCAKTCAyNDUuMTMyODY0IDEwMi43MzcxNDcgCkwgMjQ2Ljc2NDI5NCAxMDAuODAyNjA1IApMIDI0OC4zOTU3MjQgOTkuNzcwODczIApMIDI1MC4wMjcxNTQgMTAwLjk5MjY3NCAKTCAyNTEuNjU4NTg0IDEwNS4zMTc2NDkgCkwgMjUzLjI5MDAxNCAxMTIuNTMzNzYxIApMIDI1Ni41NTI4NzMgMTMwLjAzNjY0IApMIDI1OC4xODQzMDMgMTM3LjEyNDExMSAKTCAyNTkuODE1NzMzIDE0Mi4wOTU2OTEgCkwgMjYxLjQ0NzE2MyAxNDUuNDI0MDgyIApMIDI2My4wNzg1OTMgMTQ4LjI0NDc2OSAKTCAyNjQuNzEwMDIzIDE1MS43ODY0NTcgCkwgMjY2LjM0MTQ1MyAxNTYuNzkyNjI4IApMIDI2Ny45NzI4ODMgMTYzLjE3NTU5MiAKTCAyNzEuMjM1NzQyIDE3Ni42MDM3MDkgCkwgMjcyLjg2NzE3MiAxODIuMDU0Njg2IApMIDI3NC40OTg2MDIgMTg2LjU2MjA1MyAKTCAyNzcuNzYxNDYyIDE5NC41NTIwMjMgCkwgMjc5LjM5Mjg5MiAxOTguMzc4MDE0IApMIDI4MS4wMjQzMjIgMjAxLjc4MjI0OSAKTCAyODIuNjU1NzUxIDIwNC40NTEyNjkgCkwgMjg0LjI4NzE4MSAyMDYuMjMyNzMgCkwgMjg1LjkxODYxMSAyMDcuMTY5ODMzIApMIDI4Ny41NTAwNDEgMjA3LjUwMDYzMiAKTCAyODkuMTgxNDcxIDIwNy42NTQwMjUgCkwgMjkwLjgxMjkwMSAyMDguMTU1OTU3IApMIDI5Mi40NDQzMzEgMjA5LjM5Mzk2MiAKTCAyOTUuNzA3MTkgMjEzLjQ1MTUyNSAKTCAyOTcuMzM4NjIgMjE0Ljc3Njg5MSAKTCAyOTguOTcwMDUgMjE0LjM0MTU2NSAKTCAzMDAuNjAxNDggMjExLjQ5MjI4NSAKTCAzMDIuMjMyOTEgMjA2LjEwNzg4NCAKTCAzMDMuODY0MzQgMTk4LjU4MDI2NyAKTCAzMDUuNDk1NzcgMTg5LjYyMzcxNiAKTCAzMTAuMzkwMDU5IDE2MS4yNzcxOTggCkwgMzE2LjkxNTc3OSAxMjYuMjQxMTM3IApMIDMxOC41NDcyMDkgMTE1LjY5NjU0MSAKTCAzMjAuMTc4NjM5IDEwMy43MjU3MzEgCkwgMzIzLjQ0MTQ5OCA3Ny42OTY2OTcgCkwgMzI1LjA3MjkyOCA2Ni4yODE0NDMgCkwgMzI2LjcwNDM1OCA1Ny45ODgwODkgCkwgMzI4LjMzNTc4OCA1My43NDE4NjEgCkwgMzI5Ljk2NzIxOCA1My41NjggCkwgMzMxLjU5ODY0OCA1Ni43MTcyMjcgCkwgMzMzLjIzMDA3OCA2Mi4wOTg2ODQgCkwgMzM0Ljg2MTUwOCA2OC44MDE3NjYgCkwgMzM2LjQ5MjkzNyA3Ni41MTUxNzQgCkwgMzM4LjEyNDM2NyA4NS42OTAzOTMgCkwgMzM5Ljc1NTc5NyA5Ny4zMjgwMDcgCkwgMzQxLjM4NzIyNyAxMTIuMzk5NzU0IApMIDM0My4wMTg2NTcgMTMxLjE2OTUxNyAKTCAzNDYuMjgxNTE3IDE3NS42Nzc0NyAKTCAzNDcuOTEyOTQ3IDE5Ny43NTcyMTEgCkwgMzQ5LjU0NDM3NiAyMTcuNDU3MzIzIApMIDM1MS4xNzU4MDYgMjMzLjg1MzUyOSAKTCAzNTIuODA3MjM2IDI0Ni42OTQ5MjMgCkwgMzU0LjQzODY2NiAyNTYuMjE2Njc3IApMIDM1Ni4wNzAwOTYgMjYyLjkzNTI3MyAKTCAzNTcuNzAxNTI2IDI2Ny40ODU4MzggCkwgMzU5LjMzMjk1NiAyNzAuNTAxNzg4IApMIDM2MC45NjQzODYgMjcyLjUzOTYxNyAKTCAzNjIuNTk1ODE1IDI3NC4wNTU0NzkgCkwgMzY1Ljg1ODY3NSAyNzYuODgxMDU2IApMIDM2Ny40OTAxMDUgMjc4LjU5NzI0OSAKTCAzNzIuMzg0Mzk1IDI4NC4zMDI4NTIgCkwgMzc0LjAxNTgyNSAyODUuNjk5NjQzIApMIDM3NS42NDcyNTQgMjg2LjY0Njg5NCAKTCAzNzcuMjc4Njg0IDI4Ny4yMjQyMjIgCkwgMzgyLjE3Mjk3NCAyODguNDA1MjAzIApMIDM4My44MDQ0MDQgMjg5LjA0NDgzOSAKTCAzODcuMDY3MjY0IDI5MC43OTc2NTUgCkwgMzkwLjMzMDEyMyAyOTIuNjE0NzA1IApMIDM5MS45NjE1NTMgMjkzLjMzMTQ1NSAKTCAzOTMuNTkyOTgzIDI5My44ODM0NjMgCkwgMzk2Ljg1NTg0MyAyOTQuNjEwNDUyIApMIDM5OC40ODcyNzMgMjk0Ljg1OTg1NCAKTCAzOTguNDg3MjczIDI5NC44NTk4NTQgCiIgY2xpcC1wYXRoPSJ1cmwoI3A1NWI1NTMyMDJmKSIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzFmNzdiNDsgc3Ryb2tlLXdpZHRoOiAxLjU7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfMyI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA1Ny42IDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF80Ij4KICAgIDxwYXRoIGQ9Ik0gNDE0LjcyIDMwNy41ODQgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF81Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzYiPgogICAgPHBhdGggZD0iTSA1Ny42IDQxLjQ3MiAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICA8L2c+CiA8L2c+CiA8ZGVmcz4KICA8Y2xpcFBhdGggaWQ9InA1NWI1NTMyMDJmIj4KICAgPHJlY3QgeD0iNTcuNiIgeT0iNDEuNDcyIiB3aWR0aD0iMzU3LjEyIiBoZWlnaHQ9IjI2Ni4xMTIiLz4KICA8L2NsaXBQYXRoPgogPC9kZWZzPgo8L3N2Zz4K" alt="image" /></p>

<p>This graph look about the same as Liu's, but with minor differences. It
is difficult, though, to make a direct comparison. Liu also uses
Gaussian kernel smoothing, but does not provide any details about it.
For example, we do not know the bandwidth used to produce Liu's graphs.</p>

<p>We now try $c = 10$.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">387.47462091947494</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">newRowDistPDF</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">bandwidth</span>
<span class="mf">0.09578841832899217</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTI6NTk6MjguMzY5MzQ5PC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTU0MDkwYjhjNTkiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNTQwOTBiOGM1OSIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTU0MDkwYjhjNTkiIHg9IjEzOC43NjM2MzYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzAuODEyMDc0IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNTQwOTBiOGM1OSIgeD0iMjAzLjY5NDU0NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS43NDI5ODMgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNTQwOTBiOGM1OSIgeD0iMjY4LjYyNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MC42NzM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201NDA5MGI4YzU5IiB4PSIzMzMuNTU2MzY0IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI1LjYwNDgwMSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201NDA5MGI4YzU5IiB4PSIzOTguNDg3MjczIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkwLjUzNTcxIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9Im1hdHBsb3RsaWIuYXhpc18yIj4KICAgIDxnIGlkPSJ5dGlja18xIj4KICAgICA8ZyBpZD0ibGluZTJkXzciPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtMzc0NDYwNGU2OSIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMzc0NDYwNGU2OSIgeD0iNTcuNiIgeT0iMjk4LjQzNDM4IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzciPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDMwMi4yMzM1OTgpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfOCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTM3NDQ2MDRlNjkiIHg9IjU3LjYiIHk9IjI1MS4wODAxMTUiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOCI+CiAgICAgIDwhLS0gMC41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjU0Ljg3OTMzNCkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM1IiBkPSJNIDY5MSA0NjY2IApMIDMxNjkgNDY2NiAKTCAzMTY5IDQxMzQgCkwgMTI2OSA0MTM0IApMIDEyNjkgMjk5MSAKUSAxNDA2IDMwMzggMTU0MyAzMDYxIApRIDE2ODEgMzA4NCAxODE5IDMwODQgClEgMjYwMCAzMDg0IDMwNTYgMjY1NiAKUSAzNTEzIDIyMjggMzUxMyAxNDk3IApRIDM1MTMgNzQ0IDMwNDQgMzI2IApRIDI1NzUgLTkxIDE3MjIgLTkxIApRIDE0MjggLTkxIDExMjMgLTQxIApRIDgxOSA5IDQ5NCAxMDkgCkwgNDk0IDc0NCAKUSA3NzUgNTkxIDEwNzUgNTE2IApRIDEzNzUgNDQxIDE3MDkgNDQxIApRIDIyNTAgNDQxIDI1NjUgNzI1IApRIDI4ODEgMTAwOSAyODgxIDE0OTcgClEgMjg4MSAxOTg0IDI1NjUgMjI2OCAKUSAyMjUwIDI1NTMgMTcwOSAyNTUzIApRIDE0NTYgMjU1MyAxMjA0IDI0OTcgClEgOTUzIDI0NDEgNjkxIDIzMjIgCkwgNjkxIDQ2NjYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18zIj4KICAgICA8ZyBpZD0ibGluZTJkXzkiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20zNzQ0NjA0ZTY5IiB4PSI1Ny42IiB5PSIyMDMuNzI1ODUiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOSI+CiAgICAgIDwhLS0gMS4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjA3LjUyNTA2OSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTM3NDQ2MDRlNjkiIHg9IjU3LjYiIHk9IjE1Ni4zNzE1ODYiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTAiPgogICAgICA8IS0tIDEuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDE2MC4xNzA4MDQpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzUiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzUiPgogICAgIDxnIGlkPSJsaW5lMmRfMTEiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20zNzQ0NjA0ZTY5IiB4PSI1Ny42IiB5PSIxMDkuMDE3MzIxIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzExIj4KICAgICAgPCEtLSAyLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxMTIuODE2NTQpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzYiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20zNzQ0NjA0ZTY5IiB4PSI1Ny42IiB5PSI2MS42NjMwNTYiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTIiPgogICAgICA8IS0tIDIuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDY1LjQ2MjI3NSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9ImxpbmUyZF8xMyI+CiAgICA8cGF0aCBkPSJNIDczLjgzMjcyNyAyOTUuNDg4IApMIDgwLjM1ODQ0NyAyOTUuMjE1MjI2IApMIDk1LjA0MTMxNiAyOTQuMjMxODA0IApMIDEwOS43MjQxODUgMjkzLjAxNDI5NCAKTCAxMTQuNjE4NDc0IDI5Mi40MDEyMjEgCkwgMTE5LjUxMjc2NCAyOTEuNjAwNDM3IApMIDEyNC40MDcwNTMgMjkwLjY1NDE3MyAKTCAxMjcuNjY5OTEzIDI4OS44Njg3MyAKTCAxMzQuMTk1NjMzIDI4OC4xMjMxMDYgCkwgMTM3LjQ1ODQ5MiAyODcuNDcyMzE4IApMIDE0MC43MjEzNTIgMjg3LjAxMDU1MyAKTCAxNDUuNjE1NjQyIDI4Ni42Mjg0MDIgCkwgMTQ4Ljg3ODUwMiAyODYuMzE5NTY4IApMIDE1Mi4xNDEzNjEgMjg1LjcwNzk3NSAKTCAxNTUuNDA0MjIxIDI4NC43MTQ0NzEgCkwgMTU4LjY2NzA4MSAyODMuMzg0MDIgCkwgMTYxLjkyOTk0MSAyODEuNzg4NTU3IApMIDE2OC40NTU2NiAyNzguMjc1MTc4IApMIDE3MS43MTg1MiAyNzYuMzA0MDQ1IApMIDE3Ni42MTI4MSAyNzIuODUyMTMgCkwgMTg2LjQwMTM4OSAyNjUuNzcyMjc0IApMIDE4OS42NjQyNDkgMjYyLjkwNDA4OSAKTCAxOTIuOTI3MTA4IDI1OS41NzUwMzIgCkwgMTk0LjU1ODUzOCAyNTcuNTk2MzIyIApMIDE5Ni4xODk5NjggMjU1LjI1ODk0OCAKTCAxOTcuODIxMzk4IDI1Mi40NTQ4ODEgCkwgMTk5LjQ1MjgyOCAyNDkuMTQ5NDM2IApMIDIwMi43MTU2ODggMjQxLjQ0OTYxMiAKTCAyMDUuOTc4NTQ3IDIzMy41NzE2MzggCkwgMjA5LjI0MTQwNyAyMjYuNTMyMjE5IApMIDIxNC4xMzU2OTcgMjE3LjA2OTMyMyAKTCAyMTUuNzY3MTI3IDIxMy41NDQ1MTUgCkwgMjE3LjM5ODU1NiAyMDkuNTU1MjE4IApMIDIyMC42NjE0MTYgMjAwLjQ2MzIyNyAKTCAyMjMuOTI0Mjc2IDE5MC43OTI1NjQgCkwgMjI3LjE4NzEzNiAxODAuMzI0ODg2IApMIDIzMC40NDk5OTUgMTY5LjcxMTYyMSAKTCAyMzIuMDgxNDI1IDE2NS41MzIwNzQgCkwgMjMzLjcxMjg1NSAxNjIuNzYyNjE2IApMIDIzNS4zNDQyODUgMTYxLjQ2NTE5NiAKTCAyMzYuOTc1NzE1IDE2MS4yMTQ2NjkgCkwgMjM4LjYwNzE0NSAxNjEuMTk0NTc0IApMIDI0MC4yMzg1NzUgMTYwLjQxNzI0NiAKTCAyNDEuODcwMDA1IDE1Ny45ODYxOTIgCkwgMjQzLjUwMTQzNCAxNTMuMzI4MjAyIApMIDI0NS4xMzI4NjQgMTQ2LjMyNzc3NiAKTCAyNDYuNzY0Mjk0IDEzNy4zMTc3ODQgCkwgMjUwLjAyNzE1NCAxMTUuOTYxNzYyIApMIDI1My4yOTAwMTQgOTUuMDExMjUxIApMIDI1NC45MjE0NDQgODYuMTA3MzUxIApMIDI1Ni41NTI4NzMgNzguNjM0MjY1IApMIDI1OC4xODQzMDMgNzIuNTU1NTc5IApMIDI1OS44MTU3MzMgNjcuNTgwMDM0IApMIDI2MS40NDcxNjMgNjMuMzExMTIgCkwgMjYzLjA3ODU5MyA1OS41MDY2NDIgCkwgMjY0LjcxMDAyMyA1Ni4yODk2MjggCkwgMjY2LjM0MTQ1MyA1NC4xMjkwNzMgCkwgMjY3Ljk3Mjg4MyA1My41NjggCkwgMjY5LjYwNDMxMiA1NC44ODI4NSAKTCAyNzEuMjM1NzQyIDU3LjkwMjE2OSAKTCAyNzIuODY3MTcyIDYyLjA1NzQzIApMIDI3NC40OTg2MDIgNjYuNTU5NzEgCkwgMjc2LjEzMDAzMiA3MC41Njc1ODUgCkwgMjc3Ljc2MTQ2MiA3My4zMjQwMzcgCkwgMjc5LjM5Mjg5MiA3NC4zMzUyOCAKTCAyODEuMDI0MzIyIDczLjYxMTk2NSAKTCAyODQuMjg3MTgxIDcwLjE5OTM2MiAKTCAyODUuOTE4NjExIDY5LjkyNzMwNiAKTCAyODcuNTUwMDQxIDcxLjU2ODE2NyAKTCAyOTAuODEyOTAxIDc3LjcyMTU5MiAKTCAyOTIuNDQ0MzMxIDc5LjMxMzMwOCAKTCAyOTQuMDc1NzYxIDc4LjQ0NDAzNCAKTCAyOTUuNzA3MTkgNzUuMTk1MzAxIApMIDI5OC45NzAwNSA2NS45OTcyNjYgCkwgMzAwLjYwMTQ4IDYyLjY3MDU5NSAKTCAzMDIuMjMyOTEgNjEuMTg0MzQgCkwgMzAzLjg2NDM0IDYxLjQxNjczOCAKTCAzMDUuNDk1NzcgNjIuNzM1OTg5IApMIDMwNy4xMjcyIDY0LjM3MzcyMyAKTCAzMDguNzU4NjMgNjUuODA2MDUxIApMIDMxMi4wMjE0ODkgNjguMjM3MDkyIApMIDMxMy42NTI5MTkgNzAuMTExOTMxIApMIDMxNS4yODQzNDkgNzIuOTMyNjkzIApMIDMxNi45MTU3NzkgNzYuNjUyMzAyIApMIDMyMS44MTAwNjkgODkuMDQ5MTIgCkwgMzI1LjA3MjkyOCA5Ni42Nzg3ODcgCkwgMzI2LjcwNDM1OCAxMDEuMTk3NzA0IApMIDMyOC4zMzU3ODggMTA2LjU4MjY4NiAKTCAzMjkuOTY3MjE4IDExMi44MjAzMjMgCkwgMzMxLjU5ODY0OCAxMTkuNzQ4ODk4IApMIDMzNC44NjE1MDggMTM0Ljk3OTQ4IApMIDMzOC4xMjQzNjcgMTUwLjIwNzI3OSAKTCAzMzkuNzU1Nzk3IDE1Ni41OTk1ODcgCkwgMzQxLjM4NzIyNyAxNjEuNTY5MTg3IApMIDM0My4wMTg2NTcgMTY1LjA4MjA0NiAKTCAzNDQuNjUwMDg3IDE2Ny41NDQzOTYgCkwgMzQ2LjI4MTUxNyAxNjkuNjM5ODgzIApMIDM0Ny45MTI5NDcgMTcyLjA0MjE3MiAKTCAzNDkuNTQ0Mzc2IDE3NS4xNjMwNjMgCkwgMzUxLjE3NTgwNiAxNzkuMDYzNzM1IApMIDM1Mi44MDcyMzYgMTgzLjU1NzAzMSAKTCAzNTYuMDcwMDk2IDE5My41Njc5OTcgCkwgMzU3LjcwMTUyNiAxOTkuMTA4MTYxIApMIDM1OS4zMzI5NTYgMjA1LjIxNjI1MSAKTCAzNjAuOTY0Mzg2IDIxMS45Njc1ODIgCkwgMzY1Ljg1ODY3NSAyMzMuNzAyNTQ5IApMIDM2Ny40OTAxMDUgMjQwLjEwNzE2OCAKTCAzNjkuMTIxNTM1IDI0NS41Njg2MTQgCkwgMzcwLjc1Mjk2NSAyNDkuOTg4NzA1IApMIDM3Mi4zODQzOTUgMjUzLjQyNjU3MSAKTCAzNzQuMDE1ODI1IDI1Ni4wOTgxNjcgCkwgMzc4LjkxMDExNCAyNjIuOTYwODUxIApMIDM4Mi4xNzI5NzQgMjY4LjU4NTY0OSAKTCAzODMuODA0NDA0IDI3MS40MjQxNjIgCkwgMzg1LjQzNTgzNCAyNzMuOTc4NDY4IApMIDM4Ny4wNjcyNjQgMjc2LjE0NTc5IApMIDM4OC42OTg2OTMgMjc3Ljk3MDAxNyAKTCAzOTMuNTkyOTgzIDI4My4wMDc1IApMIDM5Ni44NTU4NDMgMjg3LjEyMjI2IApMIDM5OC40ODcyNzMgMjg5LjI1MjU1NyAKTCAzOTguNDg3MjczIDI4OS4yNTI1NTcgCiIgY2xpcC1wYXRoPSJ1cmwoI3BhYThlNDdhYjFiKSIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzFmNzdiNDsgc3Ryb2tlLXdpZHRoOiAxLjU7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfMyI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA1Ny42IDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF80Ij4KICAgIDxwYXRoIGQ9Ik0gNDE0LjcyIDMwNy41ODQgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF81Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzYiPgogICAgPHBhdGggZD0iTSA1Ny42IDQxLjQ3MiAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICA8L2c+CiA8L2c+CiA8ZGVmcz4KICA8Y2xpcFBhdGggaWQ9InBhYThlNDdhYjFiIj4KICAgPHJlY3QgeD0iNTcuNiIgeT0iNDEuNDcyIiB3aWR0aD0iMzU3LjEyIiBoZWlnaHQ9IjI2Ni4xMTIiLz4KICA8L2NsaXBQYXRoPgogPC9kZWZzPgo8L3N2Zz4K" alt="image" /></p>

<p>This graph also looks similar to Liu's. For comparison, Liu reported an
effective sample size of 300 in this case.</p>

<h1 id="amazon-reviews">Amazon reviews</h1>

<p><a href="https://doi.org/10.1214/aos/1032526949">Liu (1996)</a> only covers agents
with two possible actions, such as coins and thumbtacks. The IDP,
though, can handle agents whose range of possible actions is arbitrary.</p>

<p>Imagine, then, that we discover a seller on Amazon that has 50 products.
Their products have an average rating of 2.4 stars out of 5. Some
products have almost 100 ratings, while others have only a few. On
average, the products have 23 ratings each. In this case, the agents are
the products and the actions are the ratings that each product earns.
Each individual rating must be a whole number of stars between 1 and 5,
inclusive. Hence, each action has 5 possible outcomes. The file,
<code>reviews.csv</code>, contains all the data for this example.</p>

<p>To begin, we create the IDP model.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;reviews.csv&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">sheet</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="o">...</span>     <span class="n">rowCounts</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="o">...</span>         <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[:</span><span class="mi">5</span><span class="p">]]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sheet</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">)</span>
</code></pre>
</div>

<p>In this example, unlike the previous ones, when we try to create a
weighted simulation, we get an error.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;idp.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">395</span><span class="p">,</span> <span class="ow">in</span> <span class="n">addWeightedSims</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WeightedSim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
  <span class="n">File</span> <span class="s2">&quot;idp.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">585</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
  <span class="n">File</span> <span class="s2">&quot;idp.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">694</span><span class="p">,</span> <span class="ow">in</span> <span class="n">updateRowCounts</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">Simulation</span> <span class="n">weight</span> <span class="n">out</span> <span class="n">of</span> <span class="n">bounds</span><span class="o">.</span>
<span class="n">Try</span> <span class="n">adjusting</span> <span class="n">scale</span> <span class="n">factor</span> <span class="n">by</span> <span class="mf">28.773115195642152</span>
</code></pre>
</div>

<p>The reason for this error is that the simulation weight was too small
for the code to handle. The error message recommends that we correct for
this by adjusting the scale factor. Following the recommendation, we are
able to create simulations.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+=</span> <span class="mf">28.8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="c1"># took ~17s</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">7.841271686848992</span>
</code></pre>
</div>

<p>But now we have a new problem. The effective sample size is only
about 8. To fix this, we can adjust the column concentration.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+=</span> <span class="mf">28.8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">43.80517839891516</span>
</code></pre>
</div>

<p>This is a much better number, so we go ahead and generate even more
simulations.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">90000</span><span class="p">)</span> <span class="c1"># took ~2.5m</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">560.6096774185303</span>
</code></pre>
</div>

<p>We now have 100,000 simulations and an effective sample size of
about 561. We are ready to look at the statistical properties of this
model.</p>

<h2 id="new-products">New products</h2>

<p>Let us first consider a hypothetical new product from this seller. This
product can be characterized by the vector $\theta = (\theta_1, \ldots,
\theta_5)$, where $\theta_\ell$ is the unknown probability that the
product will receive an $\ell$-star rating. The long-term average rating
of this product over many reviews will be $\Theta = \sum_{\ell = 1}^5
\ell \cdot \theta_\ell$. This unknown quantity $\Theta$ is a measure of
the quality of the product. We can get the law of $\Theta$ as follows.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">avg</span><span class="p">(</span><span class="n">rowDist</span><span class="p">):</span>
<span class="o">...</span>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="n">rowDist</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">law</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowDistLaw</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">avg</span><span class="p">)</span> <span class="c1"># took ~40s</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">law</span><span class="o">.</span><span class="n">mean</span>
<span class="mf">2.535621660810854</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">law</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTU6MjY6NDguNzE3NDkwPC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTk2MTFjYzBlZDYiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTYxMWNjMGVkNiIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0yZSIgZD0iTSA2ODQgNzk0IApMIDEzNDQgNzk0IApMIDEzNDQgMCAKTCA2ODQgMCAKTCA2ODQgNzk0IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTk2MTFjYzBlZDYiIHg9IjExNC40MTQ1NDUiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMS41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDYuNDYyOTgzIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zNSIgZD0iTSA2OTEgNDY2NiAKTCAzMTY5IDQ2NjYgCkwgMzE2OSA0MTM0IApMIDEyNjkgNDEzNCAKTCAxMjY5IDI5OTEgClEgMTQwNiAzMDM4IDE1NDMgMzA2MSAKUSAxNjgxIDMwODQgMTgxOSAzMDg0IApRIDI2MDAgMzA4NCAzMDU2IDI2NTYgClEgMzUxMyAyMjI4IDM1MTMgMTQ5NyAKUSAzNTEzIDc0NCAzMDQ0IDMyNiAKUSAyNTc1IC05MSAxNzIyIC05MSAKUSAxNDI4IC05MSAxMTIzIC00MSAKUSA4MTkgOSA0OTQgMTA5IApMIDQ5NCA3NDQgClEgNzc1IDU5MSAxMDc1IDUxNiAKUSAxMzc1IDQ0MSAxNzA5IDQ0MSAKUSAyMjUwIDQ0MSAyNTY1IDcyNSAKUSAyODgxIDEwMDkgMjg4MSAxNDk3IApRIDI4ODEgMTk4NCAyNTY1IDIyNjggClEgMjI1MCAyNTUzIDE3MDkgMjU1MyAKUSAxNDU2IDI1NTMgMTIwNCAyNDk3IApRIDk1MyAyNDQxIDY5MSAyMzIyIApMIDY5MSA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTYxMWNjMGVkNiIgeD0iMTU0Ljk5NjM2NCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAyLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Ny4wNDQ4MDEgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTMyIiBkPSJNIDEyMjggNTMxIApMIDM0MzEgNTMxIApMIDM0MzEgMCAKTCA0NjkgMCAKTCA0NjkgNTMxIApRIDgyOCA5MDMgMTQ0OCAxNTI5IApRIDIwNjkgMjE1NiAyMjI4IDIzMzggClEgMjUzMSAyNjc4IDI2NTEgMjkxNCAKUSAyNzcyIDMxNTAgMjc3MiAzMzc4IApRIDI3NzIgMzc1MCAyNTExIDM5ODQgClEgMjI1MCA0MjE5IDE4MzEgNDIxOSAKUSAxNTM0IDQyMTkgMTIwNCA0MTE2IApRIDg3NSA0MDEzIDUwMCAzODAzIApMIDUwMCA0NDQxIApRIDg4MSA0NTk0IDEyMTIgNDY3MiAKUSAxNTQ0IDQ3NTAgMTgxOSA0NzUwIApRIDI1NDQgNDc1MCAyOTc1IDQzODcgClEgMzQwNiA0MDI1IDM0MDYgMzQxOSAKUSAzNDA2IDMxMzEgMzI5OCAyODczIApRIDMxOTEgMjYxNiAyOTA2IDIyNjYgClEgMjgyOCAyMTc1IDI0MDkgMTc0MiAKUSAxOTkxIDEzMDkgMTIyOCA1MzEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzQiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NjExY2MwZWQ2IiB4PSIxOTUuNTc4MTgyIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzQiPgogICAgICA8IS0tIDIuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg3LjYyNjYxOSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NjExY2MwZWQ2IiB4PSIyMzYuMTYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfNSI+CiAgICAgIDwhLS0gMy4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjguMjA4NDM3IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMyIgZD0iTSAyNTk3IDI1MTYgClEgMzA1MCAyNDE5IDMzMDQgMjExMiAKUSAzNTU5IDE4MDYgMzU1OSAxMzU2IApRIDM1NTkgNjY2IDMwODQgMjg3IApRIDI2MDkgLTkxIDE3MzQgLTkxIApRIDE0NDEgLTkxIDExMzAgLTMzIApRIDgxOSAyNSA0ODggMTQxIApMIDQ4OCA3NTAgClEgNzUwIDU5NyAxMDYyIDUxOSAKUSAxMzc1IDQ0MSAxNzE2IDQ0MSAKUSAyMzA5IDQ0MSAyNjIwIDY3NSAKUSAyOTMxIDkwOSAyOTMxIDEzNTYgClEgMjkzMSAxNzY5IDI2NDIgMjAwMSAKUSAyMzUzIDIyMzQgMTgzOCAyMjM0IApMIDEyOTQgMjIzNCAKTCAxMjk0IDI3NTMgCkwgMTg2MyAyNzUzIApRIDIzMjggMjc1MyAyNTc1IDI5MzkgClEgMjgyMiAzMTI1IDI4MjIgMzQ3NSAKUSAyODIyIDM4MzQgMjU2NyA0MDI2IApRIDIzMTMgNDIxOSAxODM4IDQyMTkgClEgMTU3OCA0MjE5IDEyODEgNDE2MiAKUSA5ODQgNDEwNiA2MjggMzk4OCAKTCA2MjggNDU1MCAKUSA5ODggNDY1MCAxMzAyIDQ3MDAgClEgMTYxNiA0NzUwIDE4OTQgNDc1MCAKUSAyNjEzIDQ3NTAgMzAzMSA0NDIzIApRIDM0NTAgNDA5NyAzNDUwIDM1NDEgClEgMzQ1MCAzMTUzIDMyMjggMjg4NiAKUSAzMDA2IDI2MTkgMjU5NyAyNTE2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNiI+CiAgICAgPGcgaWQ9ImxpbmUyZF82Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTYxMWNjMGVkNiIgeD0iMjc2Ljc0MTgxOCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF82Ij4KICAgICAgPCEtLSAzLjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2OC43OTAyNTYgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNyI+CiAgICAgPGcgaWQ9ImxpbmUyZF83Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTYxMWNjMGVkNiIgeD0iMzE3LjMyMzYzNiIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSA0LjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwOS4zNzIwNzQgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfOCI+CiAgICAgPGcgaWQ9ImxpbmUyZF84Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTYxMWNjMGVkNiIgeD0iMzU3LjkwNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF84Ij4KICAgICAgPCEtLSA0LjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0OS45NTM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfOSI+CiAgICAgPGcgaWQ9ImxpbmUyZF85Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTYxMWNjMGVkNiIgeD0iMzk4LjQ4NzI3MyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF85Ij4KICAgICAgPCEtLSA1LjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5MC41MzU3MSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibWF0cGxvdGxpYi5heGlzXzIiPgogICAgPGcgaWQ9Inl0aWNrXzEiPgogICAgIDxnIGlkPSJsaW5lMmRfMTAiPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtNDExOTJmOGIxMCIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNDExOTJmOGIxMCIgeD0iNTcuNiIgeT0iMjk1LjQ4ODk4NSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMC4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjk5LjI4ODIwMykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMiI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTQxMTkyZjhiMTAiIHg9IjU3LjYiIHk9IjI0MC44NTA5ODgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDAuMiAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDI0NC42NTAyMDcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI200MTE5MmY4YjEwIiB4PSI1Ny42IiB5PSIxODYuMjEyOTkyIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEyIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxOTAuMDEyMjExKSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM0IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEzIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNDExOTJmOGIxMCIgeD0iNTcuNiIgeT0iMTMxLjU3NDk5NiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMyI+CiAgICAgIDwhLS0gMC42IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTM1LjM3NDIxNSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzE0Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNDExOTJmOGIxMCIgeD0iNTcuNiIgeT0iNzYuOTM3IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzE0Ij4KICAgICAgPCEtLSAwLjggLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSA4MC43MzYyMTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zOCIgZD0iTSAyMDM0IDIyMTYgClEgMTU4NCAyMjE2IDEzMjYgMTk3NSAKUSAxMDY5IDE3MzQgMTA2OSAxMzEzIApRIDEwNjkgODkxIDEzMjYgNjUwIApRIDE1ODQgNDA5IDIwMzQgNDA5IApRIDI0ODQgNDA5IDI3NDMgNjUxIApRIDMwMDMgODk0IDMwMDMgMTMxMyAKUSAzMDAzIDE3MzQgMjc0NSAxOTc1IApRIDI0ODggMjIxNiAyMDM0IDIyMTYgCnoKTSAxNDAzIDI0ODQgClEgOTk3IDI1ODQgNzcwIDI4NjIgClEgNTQ0IDMxNDEgNTQ0IDM1NDEgClEgNTQ0IDQxMDAgOTQyIDQ0MjUgClEgMTM0MSA0NzUwIDIwMzQgNDc1MCAKUSAyNzMxIDQ3NTAgMzEyOCA0NDI1IApRIDM1MjUgNDEwMCAzNTI1IDM1NDEgClEgMzUyNSAzMTQxIDMyOTggMjg2MiAKUSAzMDcyIDI1ODQgMjY2OSAyNDg0IApRIDMxMjUgMjM3OCAzMzc5IDIwNjggClEgMzYzNCAxNzU5IDM2MzQgMTMxMyAKUSAzNjM0IDYzNCAzMjIwIDI3MSAKUSAyODA2IC05MSAyMDM0IC05MSAKUSAxMjYzIC05MSA4NDggMjcxIApRIDQzNCA2MzQgNDM0IDEzMTMgClEgNDM0IDE3NTkgNjkwIDIwNjggClEgOTQ3IDIzNzggMTQwMyAyNDg0IAp6Ck0gMTE3MiAzNDgxIApRIDExNzIgMzExOSAxMzk4IDI5MTYgClEgMTYyNSAyNzEzIDIwMzQgMjcxMyAKUSAyNDQxIDI3MTMgMjY3MCAyOTE2IApRIDI5MDAgMzExOSAyOTAwIDM0ODEgClEgMjkwMCAzODQ0IDI2NzAgNDA0NyAKUSAyNDQxIDQyNTAgMjAzNCA0MjUwIApRIDE2MjUgNDI1MCAxMzk4IDQwNDcgClEgMTE3MiAzODQ0IDExNzIgMzQ4MSAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzgiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJsaW5lMmRfMTUiPgogICAgPHBhdGggZD0iTSA3My44MzI3MjcgMjk1LjQ0Njk0MSAKTCA3OC43MjcwMTcgMjk1LjI2Nzk2MSAKTCA4MS45ODk4NzcgMjk0LjkxMzM2MyAKTCA4NS4yNTI3MzYgMjk0LjE5OTgxIApMIDg4LjUxNTU5NiAyOTMuMDMwMjAyIApMIDkxLjc3ODQ1NiAyOTEuNDIzNjE1IApMIDk1LjA0MTMxNiAyODkuNDQwNjY3IApMIDk4LjMwNDE3NSAyODcuMTAzNjU0IApMIDEwMS41NjcwMzUgMjg0LjQwODg2MiAKTCAxMDQuODI5ODk1IDI4MS4zNDkyODYgCkwgMTA5LjcyNDE4NSAyNzYuNDk2MjEgCkwgMTEyLjk4NzA0NCAyNzMuNjYwOTMzIApMIDExNi4yNDk5MDQgMjcwLjkzNTIwMSAKTCAxMTcuODgxMzM0IDI2OS4yNTMyNiAKTCAxMTkuNTEyNzY0IDI2Ny4xMDM5OTMgCkwgMTIxLjE0NDE5NCAyNjQuMzE4MDkzIApMIDEyMi43NzU2MjQgMjYwLjc4MTA5NCAKTCAxMjQuNDA3MDUzIDI1Ni40NTY4IApMIDEyNi4wMzg0ODMgMjUxLjQwMzc0NyAKTCAxMjkuMzAxMzQzIDIzOS44MjY2NyAKTCAxMzIuNTY0MjAzIDIyNy45NzUzOTcgCkwgMTM1LjgyNzA2MyAyMTcuMDM0NjMxIApMIDEzOS4wODk5MjIgMjA2LjE5MTMyOSAKTCAxNDIuMzUyNzgyIDE5NC40OTMyNjIgCkwgMTQ3LjI0NzA3MiAxNzUuOTU0NDg2IApMIDE0OC44Nzg1MDIgMTY4Ljk0MzE3NyAKTCAxNTAuNTA5OTMxIDE2MC43MzIwMzggCkwgMTUyLjE0MTM2MSAxNTAuNzcwMTk2IApMIDE1My43NzI3OTEgMTM4LjcxNTk5NSAKTCAxNTUuNDA0MjIxIDEyNC42MjkxOTUgCkwgMTYwLjI5ODUxMSA3OC4zNjA4MjMgCkwgMTYxLjkyOTk0MSA2Ni4xMDg5MDMgCkwgMTYzLjU2MTM3IDU3LjYzODAwNiAKTCAxNjUuMTkyOCA1My41NjggCkwgMTY2LjgyNDIzIDUzLjc5Nzk0NyAKTCAxNjguNDU1NjYgNTcuNTk4MTQgCkwgMTcwLjA4NzA5IDYzLjg5NjY3OSAKTCAxNzEuNzE4NTIgNzEuNjM1NDc3IApMIDE3NC45ODEzOCA4OC43MDU3NDkgCkwgMTgzLjEzODUyOSAxMzIuOTUzNjMxIApMIDE4NC43Njk5NTkgMTQwLjgyMjk5NiAKTCAxODYuNDAxMzg5IDE0Ny43MDY0NjQgCkwgMTg4LjAzMjgxOSAxNTMuNDAxNTc2IApMIDE4OS42NjQyNDkgMTU3LjgxNzA0MiAKTCAxOTEuMjk1Njc4IDE2MC45NjA1NSAKTCAxOTIuOTI3MTA4IDE2Mi45MTMxNzggCkwgMTk0LjU1ODUzOCAxNjMuODAzMjAxIApMIDE5Ni4xODk5NjggMTYzLjc3NzUzNCAKTCAxOTcuODIxMzk4IDE2Mi45NjQ5OTEgCkwgMTk5LjQ1MjgyOCAxNjEuNDM3MzI2IApMIDIwMS4wODQyNTggMTU5LjE4Nzc1NyAKTCAyMDIuNzE1Njg4IDE1Ni4xNDUwNjYgCkwgMjA0LjM0NzExNyAxNTIuMjIyNzM0IApMIDIwNS45Nzg1NDcgMTQ3LjM4MjYgCkwgMjA3LjYwOTk3NyAxNDEuNjg2ODE4IApMIDIxMC44NzI4MzcgMTI4LjU4MTIwNCAKTCAyMTQuMTM1Njk3IDExNS40MzM1MTMgCkwgMjE1Ljc2NzEyNyAxMDkuNjY5MTgyIApMIDIxNy4zOTg1NTYgMTA0LjY5Njg3NSAKTCAyMTkuMDI5OTg2IDEwMC41NTg2NDggCkwgMjIwLjY2MTQxNiA5Ny4yNDkzOTYgCkwgMjIyLjI5Mjg0NiA5NC44MTE2NjcgCkwgMjIzLjkyNDI3NiA5My40MDI5MDMgCkwgMjI1LjU1NTcwNiA5My4yOTQ2NTMgCkwgMjI3LjE4NzEzNiA5NC44MDE3NzcgCkwgMjI4LjgxODU2NiA5OC4xNzc2NTggCkwgMjMwLjQ0OTk5NSAxMDMuNTI1OTIyIApMIDIzMi4wODE0MjUgMTEwLjc2NTI3MyAKTCAyMzMuNzEyODU1IDExOS42NTQxNDggCkwgMjM1LjM0NDI4NSAxMjkuODUzMjU4IApMIDIzOC42MDcxNDUgMTUyLjY4ODU0MSAKTCAyNDEuODcwMDA1IDE3Ni4yMzgwNjkgCkwgMjQzLjUwMTQzNCAxODcuMjcxMTQ4IApMIDI0NS4xMzI4NjQgMTk3LjI5ODU4IApMIDI0Ni43NjQyOTQgMjA2LjA3NDcyIApMIDI0OC4zOTU3MjQgMjEzLjUzOTM3OSAKTCAyNTAuMDI3MTU0IDIxOS44MDg4NTkgCkwgMjUxLjY1ODU4NCAyMjUuMTAzNjQyIApMIDI1My4yOTAwMTQgMjI5LjY1ODIxNCAKTCAyNTQuOTIxNDQ0IDIzMy42NjE2MzggCkwgMjU2LjU1Mjg3MyAyMzcuMjQ1MyAKTCAyNTguMTg0MzAzIDI0MC40OTk1NDcgCkwgMjYxLjQ0NzE2MyAyNDYuMjY4NzgzIApMIDI2NC43MTAwMjMgMjUxLjI3NzA5NSAKTCAyNjcuOTcyODgzIDI1NS41Njk2NTMgCkwgMjY5LjYwNDMxMiAyNTcuNDMyNTY3IApMIDI3MS4yMzU3NDIgMjU5LjA5NjIyNSAKTCAyNzIuODY3MTcyIDI2MC41NTIwMjYgCkwgMjc0LjQ5ODYwMiAyNjEuNzk0NzAxIApMIDI3Ni4xMzAwMzIgMjYyLjgyOTM1MiAKTCAyNzcuNzYxNDYyIDI2My42NzgxOSAKTCAyODEuMDI0MzIyIDI2NS4wMDIyOTMgCkwgMjg0LjI4NzE4MSAyNjYuMjM3MTIzIApMIDI4Ny41NTAwNDEgMjY3Ljc3MDgwNiAKTCAyOTAuODEyOTAxIDI2OS42NDQxNjIgCkwgMjk1LjcwNzE5IDI3Mi41MzA2MjYgCkwgMjk4Ljk3MDA1IDI3NC4yMzA4MjUgCkwgMzAzLjg2NDM0IDI3Ni40ODkxMyAKTCAzMDguNzU4NjMgMjc4LjUwNTAwMSAKTCAzMTguNTQ3MjA5IDI4Mi4zNjQ3NDEgCkwgMzI4LjMzNTc4OCAyODYuMzM1MDM2IApMIDM0MS4zODcyMjcgMjkxLjQwNzU1NCAKTCAzNDQuNjUwMDg3IDI5Mi4zNjQ1MDMgCkwgMzQ3LjkxMjk0NyAyOTMuMDg2MTcxIApMIDM1MS4xNzU4MDYgMjkzLjYxNTQ0MSAKTCAzNTYuMDcwMDk2IDI5NC4xNjI1ODIgCkwgMzYyLjU5NTgxNSAyOTQuNjM2NTg3IApMIDM3Mi4zODQzOTUgMjk1LjExOTIyNSAKTCAzODIuMTcyOTc0IDI5NS4zOTQxNzYgCkwgMzk1LjIyNDQxMyAyOTUuNDg1NjQgCkwgMzk4LjQ4NzI3MyAyOTUuNDg4IApMIDM5OC40ODcyNzMgMjk1LjQ4OCAKIiBjbGlwLXBhdGg9InVybCgjcGRiODUyMTk4NTQpIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMWY3N2I0OyBzdHJva2Utd2lkdGg6IDEuNTsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF8zIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDU3LjYgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzQiPgogICAgPHBhdGggZD0iTSA0MTQuNzIgMzA3LjU4NCAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzUiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNDE0LjcyIDMwNy41ODQgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNiI+CiAgICA8cGF0aCBkPSJNIDU3LjYgNDEuNDcyIApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogIDwvZz4KIDwvZz4KIDxkZWZzPgogIDxjbGlwUGF0aCBpZD0icGRiODUyMTk4NTQiPgogICA8cmVjdCB4PSI1Ny42IiB5PSI0MS40NzIiIHdpZHRoPSIzNTcuMTIiIGhlaWdodD0iMjY2LjExMiIvPgogIDwvY2xpcFBhdGg+CiA8L2RlZnM+Cjwvc3ZnPgo=" alt="image" /></p>

<p>The average ratings of future products is $E[\Theta]$. According to the
above, this is about 2.5. But the graph shows a bimodal distribution. We
expect, then, that future products will tend to cluster around 2 and 3
stars.</p>

<h2 id="products-with-few-reviews">Products with few reviews</h2>

<p>We can do the same for products that already have ratings. Consider, for
instance, the product that occupies the last row of <code>reviews.csv</code>.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="mi">49</span><span class="p">]</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre>
</div>

<p>This product has a 3.5-star average rating, but only 2 reviews. To see
the effect of these 2 reviews on the expected long-term rating, we
compute as we did above.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">law</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowDistLaw</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="n">avg</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">law</span><span class="o">.</span><span class="n">mean</span>
<span class="mf">2.8256663976604957</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">law</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTU6MzE6MzYuNTk5ODAyPC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibWQ5OTAxZWJlNjkiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZDk5MDFlYmU2OSIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0yZSIgZD0iTSA2ODQgNzk0IApMIDEzNDQgNzk0IApMIDEzNDQgMCAKTCA2ODQgMCAKTCA2ODQgNzk0IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWQ5OTAxZWJlNjkiIHg9IjExNC40MTQ1NDUiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMS41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDYuNDYyOTgzIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zNSIgZD0iTSA2OTEgNDY2NiAKTCAzMTY5IDQ2NjYgCkwgMzE2OSA0MTM0IApMIDEyNjkgNDEzNCAKTCAxMjY5IDI5OTEgClEgMTQwNiAzMDM4IDE1NDMgMzA2MSAKUSAxNjgxIDMwODQgMTgxOSAzMDg0IApRIDI2MDAgMzA4NCAzMDU2IDI2NTYgClEgMzUxMyAyMjI4IDM1MTMgMTQ5NyAKUSAzNTEzIDc0NCAzMDQ0IDMyNiAKUSAyNTc1IC05MSAxNzIyIC05MSAKUSAxNDI4IC05MSAxMTIzIC00MSAKUSA4MTkgOSA0OTQgMTA5IApMIDQ5NCA3NDQgClEgNzc1IDU5MSAxMDc1IDUxNiAKUSAxMzc1IDQ0MSAxNzA5IDQ0MSAKUSAyMjUwIDQ0MSAyNTY1IDcyNSAKUSAyODgxIDEwMDkgMjg4MSAxNDk3IApRIDI4ODEgMTk4NCAyNTY1IDIyNjggClEgMjI1MCAyNTUzIDE3MDkgMjU1MyAKUSAxNDU2IDI1NTMgMTIwNCAyNDk3IApRIDk1MyAyNDQxIDY5MSAyMzIyIApMIDY5MSA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZDk5MDFlYmU2OSIgeD0iMTU0Ljk5NjM2NCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAyLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Ny4wNDQ4MDEgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTMyIiBkPSJNIDEyMjggNTMxIApMIDM0MzEgNTMxIApMIDM0MzEgMCAKTCA0NjkgMCAKTCA0NjkgNTMxIApRIDgyOCA5MDMgMTQ0OCAxNTI5IApRIDIwNjkgMjE1NiAyMjI4IDIzMzggClEgMjUzMSAyNjc4IDI2NTEgMjkxNCAKUSAyNzcyIDMxNTAgMjc3MiAzMzc4IApRIDI3NzIgMzc1MCAyNTExIDM5ODQgClEgMjI1MCA0MjE5IDE4MzEgNDIxOSAKUSAxNTM0IDQyMTkgMTIwNCA0MTE2IApRIDg3NSA0MDEzIDUwMCAzODAzIApMIDUwMCA0NDQxIApRIDg4MSA0NTk0IDEyMTIgNDY3MiAKUSAxNTQ0IDQ3NTAgMTgxOSA0NzUwIApRIDI1NDQgNDc1MCAyOTc1IDQzODcgClEgMzQwNiA0MDI1IDM0MDYgMzQxOSAKUSAzNDA2IDMxMzEgMzI5OCAyODczIApRIDMxOTEgMjYxNiAyOTA2IDIyNjYgClEgMjgyOCAyMTc1IDI0MDkgMTc0MiAKUSAxOTkxIDEzMDkgMTIyOCA1MzEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzQiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21kOTkwMWViZTY5IiB4PSIxOTUuNTc4MTgyIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzQiPgogICAgICA8IS0tIDIuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg3LjYyNjYxOSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21kOTkwMWViZTY5IiB4PSIyMzYuMTYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfNSI+CiAgICAgIDwhLS0gMy4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjguMjA4NDM3IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMyIgZD0iTSAyNTk3IDI1MTYgClEgMzA1MCAyNDE5IDMzMDQgMjExMiAKUSAzNTU5IDE4MDYgMzU1OSAxMzU2IApRIDM1NTkgNjY2IDMwODQgMjg3IApRIDI2MDkgLTkxIDE3MzQgLTkxIApRIDE0NDEgLTkxIDExMzAgLTMzIApRIDgxOSAyNSA0ODggMTQxIApMIDQ4OCA3NTAgClEgNzUwIDU5NyAxMDYyIDUxOSAKUSAxMzc1IDQ0MSAxNzE2IDQ0MSAKUSAyMzA5IDQ0MSAyNjIwIDY3NSAKUSAyOTMxIDkwOSAyOTMxIDEzNTYgClEgMjkzMSAxNzY5IDI2NDIgMjAwMSAKUSAyMzUzIDIyMzQgMTgzOCAyMjM0IApMIDEyOTQgMjIzNCAKTCAxMjk0IDI3NTMgCkwgMTg2MyAyNzUzIApRIDIzMjggMjc1MyAyNTc1IDI5MzkgClEgMjgyMiAzMTI1IDI4MjIgMzQ3NSAKUSAyODIyIDM4MzQgMjU2NyA0MDI2IApRIDIzMTMgNDIxOSAxODM4IDQyMTkgClEgMTU3OCA0MjE5IDEyODEgNDE2MiAKUSA5ODQgNDEwNiA2MjggMzk4OCAKTCA2MjggNDU1MCAKUSA5ODggNDY1MCAxMzAyIDQ3MDAgClEgMTYxNiA0NzUwIDE4OTQgNDc1MCAKUSAyNjEzIDQ3NTAgMzAzMSA0NDIzIApRIDM0NTAgNDA5NyAzNDUwIDM1NDEgClEgMzQ1MCAzMTUzIDMyMjggMjg4NiAKUSAzMDA2IDI2MTkgMjU5NyAyNTE2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNiI+CiAgICAgPGcgaWQ9ImxpbmUyZF82Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZDk5MDFlYmU2OSIgeD0iMjc2Ljc0MTgxOCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF82Ij4KICAgICAgPCEtLSAzLjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2OC43OTAyNTYgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNyI+CiAgICAgPGcgaWQ9ImxpbmUyZF83Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZDk5MDFlYmU2OSIgeD0iMzE3LjMyMzYzNiIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSA0LjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwOS4zNzIwNzQgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfOCI+CiAgICAgPGcgaWQ9ImxpbmUyZF84Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZDk5MDFlYmU2OSIgeD0iMzU3LjkwNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF84Ij4KICAgICAgPCEtLSA0LjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0OS45NTM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfOSI+CiAgICAgPGcgaWQ9ImxpbmUyZF85Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZDk5MDFlYmU2OSIgeD0iMzk4LjQ4NzI3MyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF85Ij4KICAgICAgPCEtLSA1LjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5MC41MzU3MSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibWF0cGxvdGxpYi5heGlzXzIiPgogICAgPGcgaWQ9Inl0aWNrXzEiPgogICAgIDxnIGlkPSJsaW5lMmRfMTAiPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtNTg5Y2JkZmFlOCIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNTg5Y2JkZmFlOCIgeD0iNTcuNiIgeT0iMjk1LjQ4ODAwNCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMC4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjk5LjI4NzIyMikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMiI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTU4OWNiZGZhZTgiIHg9IjU3LjYiIHk9IjI0Ny45NDIxMzgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDAuMiAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDI1MS43NDEzNTcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201ODljYmRmYWU4IiB4PSI1Ny42IiB5PSIyMDAuMzk2MjczIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEyIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyMDQuMTk1NDkyKSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM0IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEzIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNTg5Y2JkZmFlOCIgeD0iNTcuNiIgeT0iMTUyLjg1MDQwOCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMyI+CiAgICAgIDwhLS0gMC42IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTU2LjY0OTYyNikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzE0Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNTg5Y2JkZmFlOCIgeD0iNTcuNiIgeT0iMTA1LjMwNDU0MiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xNCI+CiAgICAgIDwhLS0gMC44IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTA5LjEwMzc2MSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM4IiBkPSJNIDIwMzQgMjIxNiAKUSAxNTg0IDIyMTYgMTMyNiAxOTc1IApRIDEwNjkgMTczNCAxMDY5IDEzMTMgClEgMTA2OSA4OTEgMTMyNiA2NTAgClEgMTU4NCA0MDkgMjAzNCA0MDkgClEgMjQ4NCA0MDkgMjc0MyA2NTEgClEgMzAwMyA4OTQgMzAwMyAxMzEzIApRIDMwMDMgMTczNCAyNzQ1IDE5NzUgClEgMjQ4OCAyMjE2IDIwMzQgMjIxNiAKegpNIDE0MDMgMjQ4NCAKUSA5OTcgMjU4NCA3NzAgMjg2MiAKUSA1NDQgMzE0MSA1NDQgMzU0MSAKUSA1NDQgNDEwMCA5NDIgNDQyNSAKUSAxMzQxIDQ3NTAgMjAzNCA0NzUwIApRIDI3MzEgNDc1MCAzMTI4IDQ0MjUgClEgMzUyNSA0MTAwIDM1MjUgMzU0MSAKUSAzNTI1IDMxNDEgMzI5OCAyODYyIApRIDMwNzIgMjU4NCAyNjY5IDI0ODQgClEgMzEyNSAyMzc4IDMzNzkgMjA2OCAKUSAzNjM0IDE3NTkgMzYzNCAxMzEzIApRIDM2MzQgNjM0IDMyMjAgMjcxIApRIDI4MDYgLTkxIDIwMzQgLTkxIApRIDEyNjMgLTkxIDg0OCAyNzEgClEgNDM0IDYzNCA0MzQgMTMxMyAKUSA0MzQgMTc1OSA2OTAgMjA2OCAKUSA5NDcgMjM3OCAxNDAzIDI0ODQgCnoKTSAxMTcyIDM0ODEgClEgMTE3MiAzMTE5IDEzOTggMjkxNiAKUSAxNjI1IDI3MTMgMjAzNCAyNzEzIApRIDI0NDEgMjcxMyAyNjcwIDI5MTYgClEgMjkwMCAzMTE5IDI5MDAgMzQ4MSAKUSAyOTAwIDM4NDQgMjY3MCA0MDQ3IApRIDI0NDEgNDI1MCAyMDM0IDQyNTAgClEgMTYyNSA0MjUwIDEzOTggNDA0NyAKUSAxMTcyIDM4NDQgMTE3MiAzNDgxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zOCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNiI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xNSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTU4OWNiZGZhZTgiIHg9IjU3LjYiIHk9IjU3Ljc1ODY3NyIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xNSI+CiAgICAgIDwhLS0gMS4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgNjEuNTU3ODk2KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibGluZTJkXzE2Ij4KICAgIDxwYXRoIGQ9Ik0gNzMuODMyNzI3IDI5NS40ODY4NDQgCkwgOTkuOTM1NjA1IDI5NS4zNzkwNjggCkwgMTA2LjQ2MTMyNSAyOTUuMjE0Mzk3IApMIDExMS4zNTU2MTQgMjk0Ljg5Mzc5NSAKTCAxMTQuNjE4NDc0IDI5NC40OTI3OSAKTCAxMTcuODgxMzM0IDI5My44NjY5OTIgCkwgMTIxLjE0NDE5NCAyOTIuOTU4MDUzIApMIDEyNC40MDcwNTMgMjkxLjczMjQyIApMIDEyNy42Njk5MTMgMjkwLjE4ODY1NSAKTCAxMzAuOTMyNzczIDI4OC4zMzYzNCAKTCAxMzQuMTk1NjMzIDI4Ni4xNDEzMjkgCkwgMTM1LjgyNzA2MyAyODQuODc2MjEyIApMIDEzNy40NTg0OTIgMjgzLjQ2MTE3MSAKTCAxMzkuMDg5OTIyIDI4MS44NTczNSAKTCAxNDAuNzIxMzUyIDI4MC4wMjA2MTMgCkwgMTQyLjM1Mjc4MiAyNzcuOTA1NzI3IApMIDE0My45ODQyMTIgMjc1LjQ3MTYxOCAKTCAxNDUuNjE1NjQyIDI3Mi42ODcwMDUgCkwgMTQ3LjI0NzA3MiAyNjkuNTM1NTkzIApMIDE0OC44Nzg1MDIgMjY2LjAxOTkxNSAKTCAxNTAuNTA5OTMxIDI2Mi4xNjMwODYgCkwgMTUzLjc3Mjc5MSAyNTMuNjEzNDE5IApMIDE1OC42NjcwODEgMjM5LjY4NjA5NCAKTCAxNjUuMTkyOCAyMjEuMjYxOTQxIApMIDE3MS43MTg1MiAyMDIuOTcyMzI0IApMIDE3OC4yNDQyMzkgMTg0LjEzNzQ5MSAKTCAxODEuNTA3MDk5IDE3NS41ODU1NDQgCkwgMTgzLjEzODUyOSAxNzEuODM5NTIzIApMIDE4NC43Njk5NTkgMTY4LjUzMTM4NyAKTCAxODYuNDAxMzg5IDE2NS42ODExNDUgCkwgMTg4LjAzMjgxOSAxNjMuMjY2MTg1IApMIDE4OS42NjQyNDkgMTYxLjIyMDk1NCAKTCAxOTIuOTI3MTA4IDE1Ny43OTg5MDEgCkwgMTk2LjE4OTk2OCAxNTQuMzM2MDE3IApMIDE5Ny44MjEzOTggMTUyLjIzNzU0MSAKTCAxOTkuNDUyODI4IDE0OS43NDAzNjEgCkwgMjAxLjA4NDI1OCAxNDYuNzY0MjQ2IApMIDIwMi43MTU2ODggMTQzLjI2MDEgCkwgMjA0LjM0NzExNyAxMzkuMjA3NzQxIApMIDIwNS45Nzg1NDcgMTM0LjYxMTE4IApMIDIwNy42MDk5NzcgMTI5LjQ5MzI0NSAKTCAyMDkuMjQxNDA3IDEyMy44OTEzMTUgCkwgMjEyLjUwNDI2NyAxMTEuNDQ5MTEyIApMIDIxNy4zOTg1NTYgOTAuOTE1MzIxIApMIDIyMC42NjE0MTYgNzcuNDM2OTk4IApMIDIyMi4yOTI4NDYgNzEuMjY4ODMzIApMIDIyMy45MjQyNzYgNjUuNzM4ODk3IApMIDIyNS41NTU3MDYgNjEuMDM4OTg5IApMIDIyNy4xODcxMzYgNTcuMzQ2Nzk0IApMIDIyOC44MTg1NjYgNTQuODE1OTU0IApMIDIzMC40NDk5OTUgNTMuNTY4IApMIDIzMi4wODE0MjUgNTMuNjg2NTM3IApMIDIzMy43MTI4NTUgNTUuMjEzNzEzIApMIDIzNS4zNDQyODUgNTguMTQ4Nzc5IApMIDIzNi45NzU3MTUgNjIuNDQ4NTE5IApMIDIzOC42MDcxNDUgNjguMDI5NDYgCkwgMjQwLjIzODU3NSA3NC43NzE4MzUgCkwgMjQxLjg3MDAwNSA4Mi41MjUzNDIgCkwgMjQzLjUwMTQzNCA5MS4xMTY1OTggCkwgMjQ2Ljc2NDI5NCAxMTAuMDU3MTM0IApMIDI1NC45MjE0NDQgMTU5LjQ1OTU0NCAKTCAyNTguMTg0MzAzIDE3Ny4zNzcyNjEgCkwgMjYxLjQ0NzE2MyAxOTMuNDc5NjQgCkwgMjY0LjcxMDAyMyAyMDcuNjAwODk0IApMIDI2Ni4zNDE0NTMgMjEzLjg5MzA4NyAKTCAyNjcuOTcyODgzIDIxOS42NjYwMiAKTCAyNjkuNjA0MzEyIDIyNC45MjAxOTkgCkwgMjcxLjIzNTc0MiAyMjkuNjYzODYyIApMIDI3Mi44NjcxNzIgMjMzLjkxNTk4NyAKTCAyNzQuNDk4NjAyIDIzNy43MDg2MDQgCkwgMjc2LjEzMDAzMiAyNDEuMDg3NTkgCkwgMjc3Ljc2MTQ2MiAyNDQuMTExNDQ0IApMIDI4MS4wMjQzMjIgMjQ5LjM2OTEzNSAKTCAyODQuMjg3MTgxIDI1NC4wMzc3NjEgCkwgMjk1LjcwNzE5IDI2OS43NDE5NTMgCkwgMjk4Ljk3MDA1IDI3My43MzIzODEgCkwgMzAyLjIzMjkxIDI3Ny4xNDQ0NSAKTCAzMDMuODY0MzQgMjc4LjYxMDY5NCAKTCAzMDUuNDk1NzcgMjc5LjkyMDg5OCAKTCAzMDguNzU4NjMgMjgyLjExOTYzNCAKTCAzMTIuMDIxNDg5IDI4My44NjM0MDQgCkwgMzE1LjI4NDM0OSAyODUuMjkxMDI4IApMIDMyMC4xNzg2MzkgMjg3LjEwNzc2OCAKTCAzMjkuOTY3MjE4IDI5MC40MjU4MSAKTCAzMzQuODYxNTA4IDI5MS45MjA2NzUgCkwgMzM4LjEyNDM2NyAyOTIuNzU1OTk5IApMIDM0MS4zODcyMjcgMjkzLjQyODQ0NyAKTCAzNDYuMjgxNTE3IDI5NC4xNTEzNzcgCkwgMzUxLjE3NTgwNiAyOTQuNjMxMjQgCkwgMzU3LjcwMTUyNiAyOTUuMDY0MjQzIApMIDM2NS44NTg2NzUgMjk1LjM2ODU1OCAKTCAzNzUuNjQ3MjU0IDI5NS40NzU2OTMgCkwgMzk4LjQ4NzI3MyAyOTUuNDg4IApMIDM5OC40ODcyNzMgMjk1LjQ4OCAKIiBjbGlwLXBhdGg9InVybCgjcGQ5NGU4MmMwMDkpIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMWY3N2I0OyBzdHJva2Utd2lkdGg6IDEuNTsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF8zIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDU3LjYgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzQiPgogICAgPHBhdGggZD0iTSA0MTQuNzIgMzA3LjU4NCAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzUiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNDE0LjcyIDMwNy41ODQgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNiI+CiAgICA8cGF0aCBkPSJNIDU3LjYgNDEuNDcyIApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogIDwvZz4KIDwvZz4KIDxkZWZzPgogIDxjbGlwUGF0aCBpZD0icGQ5NGU4MmMwMDkiPgogICA8cmVjdCB4PSI1Ny42IiB5PSI0MS40NzIiIHdpZHRoPSIzNTcuMTIiIGhlaWdodD0iMjY2LjExMiIvPgogIDwvY2xpcFBhdGg+CiA8L2RlZnM+Cjwvc3ZnPgo=" alt="image" /></p>

<p>Based on these 2 reviews, the expected long-term rating of this product
is about 2.83.</p>

<p>Similarly, we can consider the product with row index 25.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="mi">25</span><span class="p">]</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="n">_</span><span class="p">)</span>
<span class="mf">4.0625</span>
</code></pre>
</div>

<p>This product's average rating is higher than 4, but it only has 16
reviews. As above, we can see the effect of this as follows.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">law</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowDistLaw</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">avg</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">law</span><span class="o">.</span><span class="n">mean</span>
<span class="mf">3.7975047283049452</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">law</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzFUMTU6MzE6NTIuNDUyODI5PC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTgxYjUzNGU0NmYiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtODFiNTM0ZTQ2ZiIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0yZSIgZD0iTSA2ODQgNzk0IApMIDEzNDQgNzk0IApMIDEzNDQgMCAKTCA2ODQgMCAKTCA2ODQgNzk0IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTgxYjUzNGU0NmYiIHg9IjExNC40MTQ1NDUiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMS41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDYuNDYyOTgzIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zNSIgZD0iTSA2OTEgNDY2NiAKTCAzMTY5IDQ2NjYgCkwgMzE2OSA0MTM0IApMIDEyNjkgNDEzNCAKTCAxMjY5IDI5OTEgClEgMTQwNiAzMDM4IDE1NDMgMzA2MSAKUSAxNjgxIDMwODQgMTgxOSAzMDg0IApRIDI2MDAgMzA4NCAzMDU2IDI2NTYgClEgMzUxMyAyMjI4IDM1MTMgMTQ5NyAKUSAzNTEzIDc0NCAzMDQ0IDMyNiAKUSAyNTc1IC05MSAxNzIyIC05MSAKUSAxNDI4IC05MSAxMTIzIC00MSAKUSA4MTkgOSA0OTQgMTA5IApMIDQ5NCA3NDQgClEgNzc1IDU5MSAxMDc1IDUxNiAKUSAxMzc1IDQ0MSAxNzA5IDQ0MSAKUSAyMjUwIDQ0MSAyNTY1IDcyNSAKUSAyODgxIDEwMDkgMjg4MSAxNDk3IApRIDI4ODEgMTk4NCAyNTY1IDIyNjggClEgMjI1MCAyNTUzIDE3MDkgMjU1MyAKUSAxNDU2IDI1NTMgMTIwNCAyNDk3IApRIDk1MyAyNDQxIDY5MSAyMzIyIApMIDY5MSA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtODFiNTM0ZTQ2ZiIgeD0iMTU0Ljk5NjM2NCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAyLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Ny4wNDQ4MDEgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTMyIiBkPSJNIDEyMjggNTMxIApMIDM0MzEgNTMxIApMIDM0MzEgMCAKTCA0NjkgMCAKTCA0NjkgNTMxIApRIDgyOCA5MDMgMTQ0OCAxNTI5IApRIDIwNjkgMjE1NiAyMjI4IDIzMzggClEgMjUzMSAyNjc4IDI2NTEgMjkxNCAKUSAyNzcyIDMxNTAgMjc3MiAzMzc4IApRIDI3NzIgMzc1MCAyNTExIDM5ODQgClEgMjI1MCA0MjE5IDE4MzEgNDIxOSAKUSAxNTM0IDQyMTkgMTIwNCA0MTE2IApRIDg3NSA0MDEzIDUwMCAzODAzIApMIDUwMCA0NDQxIApRIDg4MSA0NTk0IDEyMTIgNDY3MiAKUSAxNTQ0IDQ3NTAgMTgxOSA0NzUwIApRIDI1NDQgNDc1MCAyOTc1IDQzODcgClEgMzQwNiA0MDI1IDM0MDYgMzQxOSAKUSAzNDA2IDMxMzEgMzI5OCAyODczIApRIDMxOTEgMjYxNiAyOTA2IDIyNjYgClEgMjgyOCAyMTc1IDI0MDkgMTc0MiAKUSAxOTkxIDEzMDkgMTIyOCA1MzEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzQiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI204MWI1MzRlNDZmIiB4PSIxOTUuNTc4MTgyIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzQiPgogICAgICA8IS0tIDIuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg3LjYyNjYxOSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI204MWI1MzRlNDZmIiB4PSIyMzYuMTYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfNSI+CiAgICAgIDwhLS0gMy4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjguMjA4NDM3IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMyIgZD0iTSAyNTk3IDI1MTYgClEgMzA1MCAyNDE5IDMzMDQgMjExMiAKUSAzNTU5IDE4MDYgMzU1OSAxMzU2IApRIDM1NTkgNjY2IDMwODQgMjg3IApRIDI2MDkgLTkxIDE3MzQgLTkxIApRIDE0NDEgLTkxIDExMzAgLTMzIApRIDgxOSAyNSA0ODggMTQxIApMIDQ4OCA3NTAgClEgNzUwIDU5NyAxMDYyIDUxOSAKUSAxMzc1IDQ0MSAxNzE2IDQ0MSAKUSAyMzA5IDQ0MSAyNjIwIDY3NSAKUSAyOTMxIDkwOSAyOTMxIDEzNTYgClEgMjkzMSAxNzY5IDI2NDIgMjAwMSAKUSAyMzUzIDIyMzQgMTgzOCAyMjM0IApMIDEyOTQgMjIzNCAKTCAxMjk0IDI3NTMgCkwgMTg2MyAyNzUzIApRIDIzMjggMjc1MyAyNTc1IDI5MzkgClEgMjgyMiAzMTI1IDI4MjIgMzQ3NSAKUSAyODIyIDM4MzQgMjU2NyA0MDI2IApRIDIzMTMgNDIxOSAxODM4IDQyMTkgClEgMTU3OCA0MjE5IDEyODEgNDE2MiAKUSA5ODQgNDEwNiA2MjggMzk4OCAKTCA2MjggNDU1MCAKUSA5ODggNDY1MCAxMzAyIDQ3MDAgClEgMTYxNiA0NzUwIDE4OTQgNDc1MCAKUSAyNjEzIDQ3NTAgMzAzMSA0NDIzIApRIDM0NTAgNDA5NyAzNDUwIDM1NDEgClEgMzQ1MCAzMTUzIDMyMjggMjg4NiAKUSAzMDA2IDI2MTkgMjU5NyAyNTE2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNiI+CiAgICAgPGcgaWQ9ImxpbmUyZF82Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtODFiNTM0ZTQ2ZiIgeD0iMjc2Ljc0MTgxOCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF82Ij4KICAgICAgPCEtLSAzLjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2OC43OTAyNTYgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNyI+CiAgICAgPGcgaWQ9ImxpbmUyZF83Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtODFiNTM0ZTQ2ZiIgeD0iMzE3LjMyMzYzNiIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSA0LjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwOS4zNzIwNzQgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfOCI+CiAgICAgPGcgaWQ9ImxpbmUyZF84Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtODFiNTM0ZTQ2ZiIgeD0iMzU3LjkwNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF84Ij4KICAgICAgPCEtLSA0LjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0OS45NTM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfOSI+CiAgICAgPGcgaWQ9ImxpbmUyZF85Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtODFiNTM0ZTQ2ZiIgeD0iMzk4LjQ4NzI3MyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF85Ij4KICAgICAgPCEtLSA1LjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5MC41MzU3MSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibWF0cGxvdGxpYi5heGlzXzIiPgogICAgPGcgaWQ9Inl0aWNrXzEiPgogICAgIDxnIGlkPSJsaW5lMmRfMTAiPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtYTUwYzEzMDk2MyIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYTUwYzEzMDk2MyIgeD0iNTcuNiIgeT0iMjk1LjQ4OCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMC4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjk5LjI4NzIxOSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMiI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWE1MGMxMzA5NjMiIHg9IjU3LjYiIHk9IjI2MS4xMDgwOSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMSI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjY0LjkwNzMwOCkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWE1MGMxMzA5NjMiIHg9IjU3LjYiIHk9IjIyNi43MjgxNzkiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTIiPgogICAgICA8IS0tIDAuNCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDIzMC41MjczOTgpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzQiPgogICAgIDxnIGlkPSJsaW5lMmRfMTMiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21hNTBjMTMwOTYzIiB4PSI1Ny42IiB5PSIxOTIuMzQ4MjY5IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEzIj4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxOTYuMTQ3NDg4KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzYiIGQ9Ik0gMjExMyAyNTg0IApRIDE2ODggMjU4NCAxNDM5IDIyOTMgClEgMTE5MSAyMDAzIDExOTEgMTQ5NyAKUSAxMTkxIDk5NCAxNDM5IDcwMSAKUSAxNjg4IDQwOSAyMTEzIDQwOSAKUSAyNTM4IDQwOSAyNzg2IDcwMSAKUSAzMDM0IDk5NCAzMDM0IDE0OTcgClEgMzAzNCAyMDAzIDI3ODYgMjI5MyAKUSAyNTM4IDI1ODQgMjExMyAyNTg0IAp6Ck0gMzM2NiA0NTYzIApMIDMzNjYgMzk4OCAKUSAzMTI4IDQxMDAgMjg4NiA0MTU5IApRIDI2NDQgNDIxOSAyNDA2IDQyMTkgClEgMTc4MSA0MjE5IDE0NTEgMzc5NyAKUSAxMTIyIDMzNzUgMTA3NSAyNTIyIApRIDEyNTkgMjc5NCAxNTM3IDI5MzkgClEgMTgxNiAzMDg0IDIxNTAgMzA4NCAKUSAyODUzIDMwODQgMzI2MSAyNjU3IApRIDM2NjkgMjIzMSAzNjY5IDE0OTcgClEgMzY2OSA3NzggMzI0NCAzNDMgClEgMjgxOSAtOTEgMjExMyAtOTEgClEgMTMwMyAtOTEgODc1IDUyOSAKUSA0NDcgMTE1MCA0NDcgMjMyOCAKUSA0NDcgMzQzNCA5NzIgNDA5MiAKUSAxNDk3IDQ3NTAgMjM4MSA0NzUwIApRIDI2MTkgNDc1MCAyODYxIDQ3MDMgClEgMzEwMyA0NjU2IDMzNjYgNDU2MyAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzYiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzUiPgogICAgIDxnIGlkPSJsaW5lMmRfMTQiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21hNTBjMTMwOTYzIiB4PSI1Ny42IiB5PSIxNTcuOTY4MzU5IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzE0Ij4KICAgICAgPCEtLSAwLjggLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxNjEuNzY3NTc3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzE1Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYTUwYzEzMDk2MyIgeD0iNTcuNiIgeT0iMTIzLjU4ODQ0OCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xNSI+CiAgICAgIDwhLS0gMS4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTI3LjM4NzY2Nykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xNiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWE1MGMxMzA5NjMiIHg9IjU3LjYiIHk9Ijg5LjIwODUzOCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xNiI+CiAgICAgIDwhLS0gMS4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgOTMuMDA3NzU3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja184Ij4KICAgICA8ZyBpZD0ibGluZTJkXzE3Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYTUwYzEzMDk2MyIgeD0iNTcuNiIgeT0iNTQuODI4NjI4IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzE3Ij4KICAgICAgPCEtLSAxLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSA1OC42Mjc4NDYpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJsaW5lMmRfMTgiPgogICAgPHBhdGggZD0iTSA3My44MzI3MjcgMjk1LjQ4OCAKTCAxOTEuMjk1Njc4IDI5NS40MDcyMjcgCkwgMTk2LjE4OTk2OCAyOTUuMTUyNDk2IApMIDE5OS40NTI4MjggMjk0Ljc3MDU2OCAKTCAyMDcuNjA5OTc3IDI5My41NTI4NzUgCkwgMjA5LjI0MTQwNyAyOTMuNTA2OTI2IApMIDIxMi41MDQyNjcgMjkzLjcyNzE4MSAKTCAyMTcuMzk4NTU2IDI5NC4yNzMzMzMgCkwgMjIwLjY2MTQxNiAyOTQuMjcwOTQxIApMIDIyMy45MjQyNzYgMjkzLjgzNzc2OCAKTCAyMjguODE4NTY2IDI5Mi43MjMxNCAKTCAyMzMuNzEyODU1IDI5MS40MzU0NDYgCkwgMjM1LjM0NDI4NSAyOTAuODc2NjQ1IApMIDIzNi45NzU3MTUgMjkwLjE1MTc3MyAKTCAyMzguNjA3MTQ1IDI4OS4xODA0NTMgCkwgMjQwLjIzODU3NSAyODcuODg1MzM1IApMIDI0MS44NzAwMDUgMjg2LjIwOTIwNSAKTCAyNDMuNTAxNDM0IDI4NC4xMzI4NTcgCkwgMjQ1LjEzMjg2NCAyODEuNjg3MTU1IApMIDI0OC4zOTU3MjQgMjc2LjAzMzIzIApMIDI1My4yOTAwMTQgMjY2LjkxNjYyNiAKTCAyNTQuOTIxNDQ0IDI2My42NjcxOTEgCkwgMjU2LjU1Mjg3MyAyNjAuMDg0MjMgCkwgMjU4LjE4NDMwMyAyNTUuOTgxMzk1IApMIDI1OS44MTU3MzMgMjUxLjIxMDcxNyAKTCAyNjEuNDQ3MTYzIDI0NS43MTIwNzYgCkwgMjYzLjA3ODU5MyAyMzkuNTQxMDIxIApMIDI2Ni4zNDE0NTMgMjI1Ljg5NTgyNiAKTCAyNzEuMjM1NzQyIDIwNC41ODUzNDEgCkwgMjcyLjg2NzE3MiAxOTYuOTI3OTU1IApMIDI3NC40OTg2MDIgMTg4LjMxMjMwNSAKTCAyNzYuMTMwMDMyIDE3OC4yMTEwMDMgCkwgMjc3Ljc2MTQ2MiAxNjYuMjMzNTYgCkwgMjc5LjM5Mjg5MiAxNTIuMjkyMjE4IApMIDI4Mi42NTU3NTEgMTIwLjIyNTE2MSAKTCAyODQuMjg3MTgxIDEwMy44Nzk0OTMgCkwgMjg1LjkxODYxMSA4OC44MDYwNTYgCkwgMjg3LjU1MDA0MSA3NS45ODU5IApMIDI4OS4xODE0NzEgNjYuMDQ5MjcxIApMIDI5MC44MTI5MDEgNTkuMTg2NTI1IApMIDI5Mi40NDQzMzEgNTUuMTg2NDM1IApMIDI5NC4wNzU3NjEgNTMuNTY4IApMIDI5NS43MDcxOSA1My43NDIwMDEgCkwgMjk3LjMzODYyIDU1LjE0MzY5IApMIDI5OC45NzAwNSA1Ny4zMDg0MDUgCkwgMzAyLjIzMjkxIDYyLjY3NzYzNiAKTCAzMDcuMTI3MiA3MS4zNTI3OTggCkwgMzA4Ljc1ODYzIDc0LjQ0MDAwOCAKTCAzMTAuMzkwMDU5IDc3LjgwNzA5MSAKTCAzMTIuMDIxNDg5IDgxLjYwNjQzOSAKTCAzMTMuNjUyOTE5IDg1Ljk3OTE2NiAKTCAzMTUuMjg0MzQ5IDkxLjAyMzc0IApMIDMxNi45MTU3NzkgOTYuNzc2ODk1IApMIDMxOC41NDcyMDkgMTAzLjIxNzkwNyAKTCAzMjAuMTc4NjM5IDExMC4yOTY4MjQgCkwgMzIxLjgxMDA2OSAxMTcuOTczMzk5IApMIDMyMy40NDE0OTggMTI2LjI0NTk2OCAKTCAzMjUuMDcyOTI4IDEzNS4xNTQ0MDcgCkwgMzI2LjcwNDM1OCAxNDQuNzU1ODY4IApMIDMyOS45NjcyMTggMTY2LjEyNjI0OSAKTCAzMzMuMjMwMDc4IDE4OS44ODMyNzkgCkwgMzM4LjEyNDM2NyAyMjYuMjU0OTY1IApMIDMzOS43NTU3OTcgMjM3LjM1OTA4IApMIDM0MS4zODcyMjcgMjQ3LjQ1MDEzMiAKTCAzNDMuMDE4NjU3IDI1Ni4zMTg4ODMgCkwgMzQ0LjY1MDA4NyAyNjMuODY0NTUyIApMIDM0Ni4yODE1MTcgMjcwLjEwMjUyNCAKTCAzNDcuOTEyOTQ3IDI3NS4xNDY5NjUgCkwgMzQ5LjU0NDM3NiAyNzkuMTc1NTYyIApMIDM1MS4xNzU4MDYgMjgyLjM4ODg4OSAKTCAzNTIuODA3MjM2IDI4NC45NzU4NTcgCkwgMzU0LjQzODY2NiAyODcuMDkxNjYgCkwgMzU2LjA3MDA5NiAyODguODQ5MjI3IApMIDM1Ny43MDE1MjYgMjkwLjMyMTY5NSAKTCAzNTkuMzMyOTU2IDI5MS41NTE5MTEgCkwgMzYwLjk2NDM4NiAyOTIuNTY0Njk4IApMIDM2Mi41OTU4MTUgMjkzLjM3ODEwMiAKTCAzNjQuMjI3MjQ1IDI5NC4wMTEwMjYgCkwgMzY1Ljg1ODY3NSAyOTQuNDg2MzUyIApMIDM2OS4xMjE1MzUgMjk1LjA3MDMyOSAKTCAzNzIuMzg0Mzk1IDI5NS4zMzYxNDEgCkwgMzc3LjI3ODY4NCAyOTUuNDYyODE1IApMIDM5NS4yMjQ0MTMgMjk1LjQ4Nzk5NyAKTCAzOTguNDg3MjczIDI5NS40ODggCkwgMzk4LjQ4NzI3MyAyOTUuNDg4IAoiIGNsaXAtcGF0aD0idXJsKCNwZWEzNDNiODJhYykiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMxZjc3YjQ7IHN0cm9rZS13aWR0aDogMS41OyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzMiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNTcuNiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNCI+CiAgICA8cGF0aCBkPSJNIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNSI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA0MTQuNzIgMzA3LjU4NCAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF82Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiA0MS40NzIgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgPC9nPgogPC9nPgogPGRlZnM+CiAgPGNsaXBQYXRoIGlkPSJwZWEzNDNiODJhYyI+CiAgIDxyZWN0IHg9IjU3LjYiIHk9IjQxLjQ3MiIgd2lkdGg9IjM1Ny4xMiIgaGVpZ2h0PSIyNjYuMTEyIi8+CiAgPC9jbGlwUGF0aD4KIDwvZGVmcz4KPC9zdmc+Cg==" alt="image" /></p>

<p>This time the effect is more pronounced, as it should be. Based on these
16 reviews, the model expects this product's long-term rating to be
about 3.8.</p>

<h1 id="video-game-leaderboards">Video game leaderboards</h1>

<p><strong><em>COMING SOON</em></strong></p>
</div>

                        <input id="mod-idp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-idp-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sa">r</span><span class="sd">&#39;&#39;&#39;Tools for working with iterated Dirichlet processes.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd"># Module description</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">Consider a situation in which there are several agents, all from the</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">same population. Each agent undertakes a sequence of actions. These</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">actions are chosen according to the agent&#39;s particular tendencies.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd">Although different agents have different tendencies, there may be</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">patterns in the population.</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">We observe a certain set of agents over a certain amount of time. Based</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">on these observations, we want to make probabilistic forecasts about two</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">things:</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">* The future behavior of the agents we have observed.</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">* The behavior of a new (unobserved) agent from the population.</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">An iterated Dirichlet process is a mathematical tool that can model</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">this. The file, `idp-paper-9.pdf`, gives the mathematical details. (In</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">this rest of this documentation, we refer to this file as the &quot;Paper.&quot;)</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">This module, `idp`, is a Python implementation of the iterated Dirichlet</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">process (IDP).</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">Below are four examples using the `idp` module.</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd"># The pressed penny machine</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">Imagine a pressed penny machine, like those found in museums or tourist</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">attractions. For a fee, the machine presses a penny into a commemorative</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">souvenir. Now imagine the machine is broken, so that it mangles all the</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">pennies we feed it. Each pressed penny it creates is mangled in its own</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">way. Each has its own probability of landing on heads when flipped. In</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">this situation, the agents are the pennies and the actions are the heads</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">and tails that they produce.</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">Now suppose we create seven mangled pennies and flip each one 5 times.</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">Suppose that the first four coins each result in 4 heads out of 5 flips.</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">The fifth coin results in 1 head, the sixth coin results in 4 heads, and</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">the seventh coin results in 3 heads. If we flip the fifth coin one more</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">time, what is the probability that it will land on heads? Looking only</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">at the past flips of the fifth coin, it seems biased towards tails.</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">Overall, though, the machine seems to make coins that are biased towards</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">heads. All seven coins could be heads-biased, and the fifth coin just</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">had an unlucky run. How should we balance these competing intuitions to</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">arrive at a probability?</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">One way to answer this is to model the situation with an IDP. We begin</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">by creating an instance of the `IDPModel` class and running 10,000</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">simulations.</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">```python</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">&gt;&gt;&gt; from idp import IDPModel</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(1, 1, 0.5,</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">...     [[5 - x, x] for x in [4, 4, 4, 4, 1, 4, 3]])</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000)</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">```</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">## New coins</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">With these simulations in place, the first question we ask is the</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">following. If we were to get a new coin from this machine, how would we</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">expect it to behave? The new coin would have some random probability of</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">heads, $\theta$. We can get the law (or distribution) of $\theta$ with</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">the `IDPModel.rowDistLaw` method.</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">```python</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">&gt;&gt;&gt; law = idpModel.rowDistLaw()</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">```</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">The probability that a new coin will land on heads on its first flip is</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">simply the mean of $\theta$.</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">```python</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">&gt;&gt;&gt; law.mean</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">0.656011735128012</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">```</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">The following will plot the cumulative distribution function of</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">$\theta$:</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="sd">```python</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">&gt;&gt;&gt; import numpy as np</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">&gt;&gt;&gt; import matplotlib.pyplot as plt</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">&gt;&gt;&gt; t = np.linspace(0, 1, 200)</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, law.cdf(t))</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">```</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">![image](images/coins_cdf.svg)</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">The random variable $\theta$ has a discrete component, so it does not</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">have a probability density function. But we can plot an approximate</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">density as follows:</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">```python</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, law.pdf(t))</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">```</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">![image](images/coins_pdf.svg)</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">The approximate density is computed by smoothing out the discrete point</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">masses. The degree of smoothing is determined by a parameter called the</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">&quot;bandwidth&quot;. (See `IDPModel.rowDistLaw` for details.) This bandwidth is</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">computed automatically. We can view the computed bandwidth, and we can</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">also set it manually.</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">```python</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">&gt;&gt;&gt; law.bandwidth</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">0.11677711975041316</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">&gt;&gt;&gt; law = idpModel.rowDistLaw(bandwidth=0.001)</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, law.pdf(t))</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">```</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">![image](images/coins_pdf_coarse.svg)</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">## Observed coins</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">Everything we did above can also be done for the seven coins that we</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">have already observed. Consider, for instance, the fifth coin. (Its</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">0-based index in the `IDPModel.rowCounts` property is 4). It has an</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">unknown probability of heads that we might denote by $\theta_4$. We can</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">view the distribution of $\theta_4$, given the flips we have already</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">observed.</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">```python</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">&gt;&gt;&gt; law = idpModel.rowDistLaw(4)</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, law.pdf(t))</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">```</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">![image](images/coins_pdf_4.svg)</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">We can also find the probability that the fifth coin, if flipped again,</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a><span class="sd">will land on heads:</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="sd">```python</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="sd">&gt;&gt;&gt; law.mean</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">0.4455686228426346</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="sd">```</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="sd">## Effective sample size</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="sd">The above probabilities and graphs are not calculated by direct</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="sd">simulation, but by using [importance</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">sampling](https://en.wikipedia.org/wiki/Importance_sampling). Although</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">the sample size is 10,000, the &quot;effective sample size&quot; is lower:</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a><span class="sd">```python</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="sd">6578.067134805476</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">```</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a><span class="sd">What this means is that the accuracy of our calculations is about the</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="sd">same as if we did 6,578 direct simulations.</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="sd"># Flicking thumbtacks</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">Imagine a box of 320 thumbtacks. We flick each thumbtack 9 times. If it</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">lands point up, we call it a success. Point down is a failure. Because</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="sd">of the imperfections, each thumbtack has its own probability of success.</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">The file, `tacks.csv`, contains the success and failure counts for this</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="sd">experiment. The data in `tacks.csv` is exactly the data considered in</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a><span class="sd">[Liu (1996)](https://doi.org/10.1214/aos/1032526949). (This data</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">originally came from an experiment by Beckett and Diaconis in 1994. In</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a><span class="sd">the original experiment, there were not 320 thumbtacks. Rather, there</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="sd">were 16 thumbtacks, 2 flickers, and 10 surfaces.)</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">To study this situation, we first create the model and perform 10,000</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">simulations.</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">```python</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a><span class="sd">&gt;&gt;&gt; import csv</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="sd">&gt;&gt;&gt; with open(&#39;tacks.csv&#39;) as f:</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">...     sheet = list(csv.reader(f))</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">...     rowCounts = [[int(value) for value in row] for row in sheet]</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(1, 2, 0.5, rowCounts)</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000) # took ~4m on a Macbook</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">243.581441084223</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">```</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a><span class="sd">Here, we use a row concentration parameter of $2$ and a base measure</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="sd">that assigns probability $1/2$ to both $0$ and $1$. This matches the</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="sd">distribution used by Liu. What we call the column concentration</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="sd">parameter is denoted by $c$ in Liu&#39;s analysis. Liu considers the cases</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">$c = 0.1$, $c = 1$, $c = 5$, and $c = 10$. Here, we are taking $c = 1$.</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">We also checked our effective sample size, which is a good habit</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">whenever we add new weighted simulations. For comparison, Liu reported</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">an effective sample size of 227 in the case $c = 1$.</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">We now look at the approximate density of the posterior probability of</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">success.</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">```python</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">&gt;&gt;&gt; law = idpModel.rowDistLaw()</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, law.pdf(t))</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">&gt;&gt;&gt; idpModel.bandwidth</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">0.10510725412303899</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">```</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">![image](images/tacks_pdf_1.svg)</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="sd">This graph look about the same as Liu&#39;s, but with minor differences. It</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="sd">is difficult, though, to make a direct comparison. Liu also uses</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">Gaussian kernel smoothing, but does not provide any details about it.</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="sd">For example, we do not know the bandwidth used to produce Liu&#39;s graphs.</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">We now try $c = 10$.</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">```python</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(10, 2, 0.5, rowCounts)</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000)</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">387.47462091947494</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, idpModel.newRowDistPDF(t))</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">&gt;&gt;&gt; idpModel.bandwidth</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">0.09578841832899217</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">```</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">![image](images/tacks_pdf_10.svg)</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">This graph also looks similar to Liu&#39;s. For comparison, Liu reported an</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">effective sample size of 300 in this case.</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd"># Amazon reviews</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">[Liu (1996)](https://doi.org/10.1214/aos/1032526949) only covers agents</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">with two possible actions, such as coins and thumbtacks. The IDP,</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">though, can handle agents whose range of possible actions is arbitrary.</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">Imagine, then, that we discover a seller on Amazon that has 50 products.</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">Their products have an average rating of 2.4 stars out of 5. Some</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">products have almost 100 ratings, while others have only a few. On</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">average, the products have 23 ratings each. In this case, the agents are</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">the products and the actions are the ratings that each product earns.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">Each individual rating must be a whole number of stars between 1 and 5,</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="sd">inclusive. Hence, each action has 5 possible outcomes. The file,</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="sd">`reviews.csv`, contains all the data for this example.</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="sd">To begin, we create the IDP model.</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">```python</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">&gt;&gt;&gt; with open(&#39;reviews.csv&#39;) as f:</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">...     sheet = list(csv.reader(f))</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">...     rowCounts = [[int(value)</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="sd">...         for value in row[:5]] for row in sheet[1:]]</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(1, 5, [0.2] * 5, rowCounts)</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="sd">```</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="sd">In this example, unlike the previous ones, when we try to create a</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">weighted simulation, we get an error.</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">```python</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(1)</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="sd">Traceback (most recent call last):</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="sd">  File &quot;idp.py&quot;, line 395, in addWeightedSims</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a><span class="sd">    self._weightedSims += [WeightedSim(self) for _ in range(num)]</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">  File &quot;idp.py&quot;, line 585, in __init__</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">    self.updateRowCounts()</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">  File &quot;idp.py&quot;, line 694, in updateRowCounts</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="sd">    raise ValueError(</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a><span class="sd">ValueError: Simulation weight out of bounds.</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a><span class="sd">Try adjusting scale factor by 28.773115195642152</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="sd">```</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="sd">The reason for this error is that the simulation weight was too small</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a><span class="sd">for the code to handle. The error message recommends that we correct for</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a><span class="sd">this by adjusting the scale factor. Following the recommendation, we are</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">able to create simulations.</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">```python</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="sd">&gt;&gt;&gt; idpModel.scale += 28.8</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000) # took ~17s</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a><span class="sd">7.841271686848992</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">```</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a><span class="sd">But now we have a new problem. The effective sample size is only</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="sd">about 8. To fix this, we can adjust the column concentration.</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">```python</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(10, 5, [0.2] * 5, rowCounts)</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">&gt;&gt;&gt; idpModel.scale += 28.8</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000)</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a><span class="sd">43.80517839891516</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a><span class="sd">```</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="sd">This is a much better number, so we go ahead and generate even more</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">simulations.</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">```python</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(90000) # took ~2.5m</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">560.6096774185303</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">```</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="sd">We now have 100,000 simulations and an effective sample size of</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">about 561. We are ready to look at the statistical properties of this</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a><span class="sd">model.</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a><span class="sd">## New products</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="sd">Let us first consider a hypothetical new product from this seller. This</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">product can be characterized by the vector $\theta = (\theta_1, \ldots,</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="sd">\theta_5)$, where $\theta_\ell$ is the unknown probability that the</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">product will receive an $\ell$-star rating. The long-term average rating</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">of this product over many reviews will be $\Theta = \sum_{\ell = 1}^5</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="sd">\ell \cdot \theta_\ell$. This unknown quantity $\Theta$ is a measure of</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="sd">the quality of the product. We can get the law of $\Theta$ as follows.</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">```python</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="sd">&gt;&gt;&gt; def avg(rowDist):</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">...    return np.average(range(1, 6), weights=rowDist)</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a><span class="sd">&gt;&gt;&gt; law = idpModel.rowDistLaw(None, avg) # took ~40s</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a><span class="sd">&gt;&gt;&gt; law.mean</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a><span class="sd">2.535621660810854</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="sd">&gt;&gt;&gt; t = np.linspace(1, 5, 200)</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, law.pdf(t))</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">```</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">![image](images/reviews_pdf.svg)</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a><span class="sd">The average ratings of future products is $E[\Theta]$. According to the</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a><span class="sd">above, this is about 2.5. But the graph shows a bimodal distribution. We</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a><span class="sd">expect, then, that future products will tend to cluster around 2 and 3</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a><span class="sd">stars.</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a><span class="sd">## Products with few reviews</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="sd">We can do the same for products that already have ratings. Consider, for</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a><span class="sd">instance, the product that occupies the last row of `reviews.csv`.</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">```python</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a><span class="sd">&gt;&gt;&gt; idpModel.rowCounts[49]</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a><span class="sd">(0, 0, 1, 1, 0)</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a><span class="sd">```</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a><span class="sd">This product has a 3.5-star average rating, but only 2 reviews. To see</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="sd">the effect of these 2 reviews on the expected long-term rating, we</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a><span class="sd">compute as we did above.</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">```python</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">&gt;&gt;&gt; law = idpModel.rowDistLaw(49, avg)</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a><span class="sd">&gt;&gt;&gt; law.mean</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="sd">2.8256663976604957</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, law.pdf(t))</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="sd">```</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">![image](images/reviews_pdf_49.svg)</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a><span class="sd">Based on these 2 reviews, the expected long-term rating of this product</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a><span class="sd">is about 2.83.</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="sd">Similarly, we can consider the product with row index 25.</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="sd">```python</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a><span class="sd">&gt;&gt;&gt; idpModel.rowCounts[25]</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">(0, 3, 0, 6, 7)</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a><span class="sd">&gt;&gt;&gt; np.average(range(1, 6), weights=_)</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">4.0625</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="sd">```</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">This product&#39;s average rating is higher than 4, but it only has 16</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">reviews. As above, we can see the effect of this as follows.</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">```python</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a><span class="sd">&gt;&gt;&gt; law = idpModel.rowDistLaw(25, avg)</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a><span class="sd">&gt;&gt;&gt; law.mean</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a><span class="sd">3.7975047283049452</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, law.pdf(t))</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a><span class="sd">```</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a><span class="sd">![image](images/reviews_pdf_25.svg)</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">This time the effect is more pronounced, as it should be. Based on these</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a><span class="sd">16 reviews, the model expects this product&#39;s long-term rating to be</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a><span class="sd">about 3.8.</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a><span class="sd"># Video game leaderboards</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="sd">***COMING SOON***</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choices</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="kn">from</span> <span class="nn">scipy.special</span> <span class="kn">import</span> <span class="n">gammaln</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">beta</span><span class="p">,</span> <span class="n">dirichlet</span><span class="p">,</span> <span class="n">gaussian_kde</span><span class="p">,</span> <span class="n">ecdf</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="kn">from</span> <span class="nn">statsmodels.distributions.empirical_distribution</span> <span class="kn">import</span> <span class="n">ECDFDiscrete</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Measure&#39;</span><span class="p">,</span> <span class="s1">&#39;IDPModel&#39;</span><span class="p">,</span> <span class="s1">&#39;WeightedSim&#39;</span><span class="p">]</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="k">def</span> <span class="nf">_betaFuncMult</span><span class="p">(</span><span class="n">alpha</span><span class="p">):</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>    <span class="sd">&#39;&#39;&#39;Computes and returns the value of the multivariate beta function,</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a><span class="sd">    evaluated at the given list of arguments.</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a><span class="sd">    **Arguments:**</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a><span class="sd">    * **alpha** (`list`[`float`]): The list of arguments for the</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a><span class="sd">        multivariate beta function.</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">gammaln</span><span class="p">(</span><span class="n">alpha</span><span class="p">))</span> <span class="o">-</span> <span class="n">gammaln</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">alpha</span><span class="p">)))</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="k">class</span> <span class="nc">Measure</span><span class="p">:</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;A finite, signed Borel measure on the real line.</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a><span class="sd">    `Measure` objects can be added to each other and multiplied on the</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a><span class="sd">    left by a `float`. These operations return new `Measure` objects.</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a><span class="sd">    When adding two instances, the `bandwidth` of the result is the</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="sd">    maximum of the bandwidths of the summands.</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cdf</span><span class="p">,</span> <span class="n">pdf</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">totalMass</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>        <span class="sd">&#39;&#39;&#39;Constructs a `Measure` object from the given arguments.</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span> <span class="o">=</span> <span class="n">cdf</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span> <span class="o">=</span> <span class="n">pdf</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="o">=</span> <span class="n">mean</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span> <span class="o">=</span> <span class="n">totalMass</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>    <span class="nd">@property</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>    <span class="k">def</span> <span class="nf">cdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`func`: The distribution function of the measure. If $\mu$</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a><span class="sd">        is the measure, then this is the function $t \mapsto</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a><span class="sd">        \mu((-\infty, t])$.</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>    <span class="nd">@property</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>    <span class="k">def</span> <span class="nf">pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>        <span class="sd">&#39;&#39;&#39;`func`: The density of the measure, which is the derivative</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a><span class="sd">        of `cdf`. If `cdf` is not differentiable, then an approximate</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="sd">        density should be provided.</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>    <span class="nd">@property</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>    <span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float` or `None`: If the mean is stored in the `Measure`</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a><span class="sd">        instance, then it should equal $\int_{-\infty}^\infty x \,</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="sd">        dF(x)$, where $F$ is the distribution function. The mean of the</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a><span class="sd">        sum of two `Measure` instances will be `None` if either mean is</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a><span class="sd">        `None`.</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>    <span class="nd">@property</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>    <span class="k">def</span> <span class="nf">totalMass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The total mass of the measure. If $\mu$ is the</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">        measure, then this $\mu(\mathbb{R})$.</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>    <span class="nd">@property</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>    <span class="k">def</span> <span class="nf">bandwidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>        <span class="sd">&#39;&#39;&#39;`float`: If `pdf` is an approximate density created with the</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a><span class="sd">        `gaussian_kde` function from the `scipy.stats` module, then this</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a><span class="sd">        is the bandwidth that was used to create it. Is 0 otherwise. See</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="sd">        `IDPModel.rowDistLaw` for more details.</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">factor</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">):</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>        <span class="k">def</span> <span class="nf">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>            <span class="k">return</span> <span class="n">scalar</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>        <span class="n">pdf</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bandwidth</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>        <span class="n">mean</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>            <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>            <span class="k">else</span> <span class="n">scalar</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>        <span class="p">)</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>        <span class="k">return</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>            <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">scalar</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>            <span class="n">pdf</span><span class="p">,</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>            <span class="n">mean</span><span class="p">,</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>            <span class="n">scalar</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>        <span class="p">)</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>        <span class="k">def</span> <span class="nf">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>        <span class="n">pdf</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bandwidth</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">bandwidth</span><span class="p">)</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>        <span class="n">mean</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>            <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">mean</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">mean</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>        <span class="p">)</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>        <span class="k">return</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>            <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>            <span class="n">pdf</span><span class="p">,</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>            <span class="n">mean</span><span class="p">,</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">totalMass</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>        <span class="p">)</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a><span class="k">class</span> <span class="nc">IDPModel</span><span class="p">:</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;An IDP model on the state space $S = \\{0, ..., L - 1\\}$.</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a><span class="sd">    The IDP model consists of both an IDP and some observed data. See</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a><span class="sd">    Section 9 of the Paper for details.</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colConc</span><span class="p">,</span> <span class="n">rowConc</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">):</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>        <span class="sd">&#39;&#39;&#39;The constructor first uses the given arguments to set the</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a><span class="sd">        corresponding properties. If a property returns a tuple or a</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a><span class="sd">        tuple of tuples, then the argument can be passed any</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a><span class="sd">        `array-like` object, such as a list or a list of lists.</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a><span class="sd">        For the `baseMeas` property, the corresponding argument can be</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a><span class="sd">        passed a single floating point value `p`, in which case the</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">        property will be set to `(1 - p, p)`.</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>        <span class="c1"># `baseMeas` and `rowCounts` are stored as ndarrays rather than</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>        <span class="c1"># lists, since vector addition fails for lists but works for</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>        <span class="c1"># ndarrays. This is important in the constructor of the</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>        <span class="c1"># `WeightedSim` class.</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">]</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a>        <span class="n">rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a>            <span class="s1">&#39;colConc&#39;</span><span class="p">:</span> <span class="n">colConc</span><span class="p">,</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>            <span class="s1">&#39;rowConc&#39;</span><span class="p">:</span> <span class="n">rowConc</span><span class="p">,</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>            <span class="s1">&#39;baseMeas&#39;</span><span class="p">:</span> <span class="n">baseMeas</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a>        <span class="p">}</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">rowCounts</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>    <span class="nd">@property</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>    <span class="k">def</span> <span class="nf">colConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The column concentration parameter. Should be</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a><span class="sd">        positive. Denoted by $\kappa$ in Section 9 of the Paper.</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>    <span class="nd">@property</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>    <span class="k">def</span> <span class="nf">rowConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The row concentration parameter. Should be</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a><span class="sd">        positive. Denoted by $\varepsilon$ in Section 9 of the Paper.</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>    <span class="nd">@property</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a>    <span class="k">def</span> <span class="nf">baseMeas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The base probability vector. Should be a</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a><span class="sd">        list of positive numbers that sum to 1. Denoted by</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a><span class="sd">        $\boldsymbol{p} = (p_0, \ldots, p_{L - 1})$ in Section 9 of the</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a><span class="sd">        Paper, where $p_\ell = \varrho(\{\ell\})$.</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">])</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>    <span class="nd">@property</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>    <span class="k">def</span> <span class="nf">rowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`int`)): The row counts for the observed</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a><span class="sd">        data. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a><span class="sd">        `rowCounts`[`row`][`state`] is denoted by $\overline{y}_{m\ell}$</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a><span class="sd">        in Section 9 of the Paper. It is the number of observed</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a><span class="sd">        instances of `state` in the given row of data.</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>    <span class="nd">@property</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>    <span class="k">def</span> <span class="nf">likelihoods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The prior likelihoods. If `row` equals</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a><span class="sd">        $m - 1$, then `likelihoods`[`row`] is denoted by</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a><span class="sd">        $\varrho_N(A_m)$ in Section 9 of the Paper. It is the prior</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a><span class="sd">        probability of seeing the row counts for the given row. This</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a><span class="sd">        property is computed by the constructor, and should not be</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a><span class="sd">        changed.</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">):</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>            <span class="n">rowConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>            <span class="n">denom</span> <span class="o">=</span> <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">)</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">):]:</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a>                    <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">row</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>                <span class="p">)</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>    <span class="nd">@property</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The scale factor to use for weighted simulations.</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a><span class="sd">        Denoted by $\log c$ in Section 9 of the Paper. Defaults to 0.</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a><span class="sd">        Altering this value runs the `WeightedSim.updateScale` method on</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a><span class="sd">        every simulation in the `weightedSims` property. If a</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a><span class="sd">        `ValueError` occurs in this process, then no changes will be</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a><span class="sd">        made, neither to the `scale` property, nor to any of the</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a><span class="sd">        simulations in the `weightedSims` property.</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>    <span class="nd">@scale</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>        <span class="n">oldVal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateScale</span><span class="p">()</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">oldVal</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>            <span class="k">raise</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a>    <span class="nd">@property</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>    <span class="k">def</span> <span class="nf">weightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`WeightedSim`): A tuple of distinct (and therefore</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a><span class="sd">        independent) `WeightedSim` instances. `weightedSims`[k] is</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a><span class="sd">        denoted by $(t^k, \boldsymbol{\theta}_M^{*, k})$ in Section 9 of</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a><span class="sd">        the Paper, and has total weight $V_k$. This property is empty if</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a><span class="sd">        the `addWeightedSims` method has never been run.</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a>    <span class="nd">@property</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a>    <span class="k">def</span> <span class="nf">ess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the sample</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a><span class="sd">        variance. Denoted by $K_e&#39;&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a>        <span class="n">numSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a>        <span class="k">if</span> <span class="n">numSims</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>        <span class="n">essPop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">essPop</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>        <span class="k">return</span> <span class="n">essPop</span> <span class="o">*</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="n">essPop</span><span class="o">/</span><span class="n">numSims</span><span class="p">)</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>    <span class="nd">@property</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>    <span class="k">def</span> <span class="nf">essPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the population</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a><span class="sd">        variance. Denoted by $K_e&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span>      <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a>        <span class="p">)</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a>    <span class="k">def</span> <span class="nf">addRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">):</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a>        <span class="sd">&#39;&#39;&#39;Adds new row counts to the `rowCounts` property and runs the</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a><span class="sd">        `WeightedSim.updateRowCounts` method on every simulation in the</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a><span class="sd">        `weightedSims` property. If a `ValueError` occurs in this</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a><span class="sd">        process, then no changes will be made, neither to the</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a><span class="sd">        `rowCounts` property, nor to any of the simulations in the</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a><span class="sd">        * **newRowCounts** (`array_like`): The additional row counts to</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a><span class="sd">            be added. Should be an array-like object (such as a list of</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a><span class="sd">            lists) with the same number of columns (states) as</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a><span class="sd">            `rowCounts`.</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a>        <span class="n">oldRowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">))</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">oldRowCounts</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a>            <span class="k">raise</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a>    <span class="k">def</span> <span class="nf">delRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numRows</span><span class="p">):</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a>        <span class="sd">&#39;&#39;&#39;Deletes the last `numRows` rows of the `rowCounts` property,</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a><span class="sd">        then runs the `WeightedSim.updateRowCounts` method on every</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a><span class="sd">        simulation in the `weightedSims` property.</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a><span class="sd">        * **numRows** (`int`): The number of rows to delete.</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[:</span><span class="o">-</span><span class="n">numRows</span><span class="p">]</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a>        <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>    <span class="k">def</span> <span class="nf">addWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>        <span class="sd">&#39;&#39;&#39;Creates new `WeightedSim` instances and adds them to the</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a><span class="sd">        </span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a><span class="sd">        * **num** (`int`): The number of distinct `WeightedSim`</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a><span class="sd">            instances to create. If zero or negative, no instances are</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a><span class="sd">            created.</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a>        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WeightedSim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a>    <span class="k">def</span> <span class="nf">clearWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a>        <span class="sd">&#39;&#39;&#39;Deletes all weighted simulations contained in the</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a>
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos">706</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos">707</span></a>
</span><span id="L-708"><a href="#L-708"><span class="linenos">708</span></a>    <span class="k">def</span> <span class="nf">_prior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping</span><span class="p">,</span> <span class="n">numSamples</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos">709</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Returns the pushforward of the Dirichlet distribution by the</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos">710</span></a><span class="sd">        given function. Used in the implementation of (8.24), (8.26),</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos">711</span></a><span class="sd">        (9.6), and the final displayed equation in Section 9 of the</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos">712</span></a><span class="sd">        paper. If an integer $\ell$ is passed to `mapping`, then the</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos">713</span></a><span class="sd">        function $\mu \mapsto \mu(\{\ell\})$ is used.</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos">714</span></a>
</span><span id="L-715"><a href="#L-715"><span class="linenos">715</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos">716</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">mapping</span><span class="p">):</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos">717</span></a>            <span class="n">prior</span> <span class="o">=</span> <span class="n">beta</span><span class="p">(</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos">718</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">][</span><span class="n">mapping</span><span class="p">],</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos">719</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">][</span><span class="n">mapping</span><span class="p">])</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos">720</span></a>            <span class="p">)</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos">721</span></a>            <span class="k">return</span> <span class="n">Measure</span><span class="p">(</span><span class="n">prior</span><span class="o">.</span><span class="n">cdf</span><span class="p">,</span> <span class="n">prior</span><span class="o">.</span><span class="n">pdf</span><span class="p">,</span> <span class="n">prior</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos">722</span></a>        <span class="n">rawSamples</span> <span class="o">=</span> <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos">723</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">],</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos">724</span></a>            <span class="n">numSamples</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos">725</span></a>        <span class="p">)</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos">726</span></a>        <span class="n">samples</span> <span class="o">=</span> <span class="p">[</span><span class="n">mapping</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span> <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">rawSamples</span><span class="p">]</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos">727</span></a>        <span class="n">pdf</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos">728</span></a>        <span class="k">return</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos">729</span></a>            <span class="n">ecdf</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="o">.</span><span class="n">evaluate</span><span class="p">,</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos">730</span></a>            <span class="n">pdf</span><span class="p">,</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos">731</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos">732</span></a>            <span class="n">pdf</span><span class="o">.</span><span class="n">factor</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos">733</span></a>        <span class="p">)</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos">734</span></a>
</span><span id="L-735"><a href="#L-735"><span class="linenos">735</span></a>    <span class="k">def</span> <span class="nf">rowDistLaw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rowNum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos">736</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Returns the law (or distribution) of a real-valued function</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos">737</span></a><span class="sd">        of a row distribution. If `mapping` is $\Phi$ and `rowNum` is</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos">738</span></a><span class="sd">        $m - 1$, then this method returns the law of the real-valued</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos">739</span></a><span class="sd">        random variable, $\Phi(\mu_m)$. If $M$ denotes the length of</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos">740</span></a><span class="sd">        `rowCounts`, then this method implements (8.10) in the Paper</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos">741</span></a><span class="sd">        when $m \le M$ and it implements (8.24) when $m &gt; M$.</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos">742</span></a>
</span><span id="L-743"><a href="#L-743"><span class="linenos">743</span></a><span class="sd">        The law of $\Phi(\mu_m)$ is a Borel probability measure on the</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos">744</span></a><span class="sd">        real line. This method therefore returns a `Measure` object.</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos">745</span></a><span class="sd">        However, the law of $\Phi(\mu_m)$ has a discrete component, so</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos">746</span></a><span class="sd">        it does not have a density. The `Measure.pdf` attribute of the</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos">747</span></a><span class="sd">        returned object is an approximate density, created with Gaussian</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos">748</span></a><span class="sd">        kernel density estimation (KDE). More specifically, it treats a</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos">749</span></a><span class="sd">        point mass $\delta_x$ as having a Gaussian density with mean $x$</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos">750</span></a><span class="sd">        and standard deviation $h$, where $h$ is the &quot;bandwidth&quot; of the</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos">751</span></a><span class="sd">        estimate.</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos">752</span></a>
</span><span id="L-753"><a href="#L-753"><span class="linenos">753</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos">754</span></a>
</span><span id="L-755"><a href="#L-755"><span class="linenos">755</span></a><span class="sd">        * **rowNum** (`int` or `None`): Passing `None` to this argument</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos">756</span></a><span class="sd">            is the same as passing the length of `rowCounts`.</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos">757</span></a><span class="sd">        * **mapping** (`func` or `int`): The function to apply to the</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos">758</span></a><span class="sd">            row distribution. Should be continuous and bounded. If an</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos">759</span></a><span class="sd">            integer $\ell$ is passed to `mapping`, then the function</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos">760</span></a><span class="sd">            $\mu \mapsto \mu(\{\ell\})$ is used.</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos">761</span></a><span class="sd">        * **bandwidth** (`float`): The bandwidth to use in the Gaussian</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos">762</span></a><span class="sd">            KDE. If omitted, the bandwidth will be calculated using</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos">763</span></a><span class="sd">            Scott&#39;s Rule. The calculated value can be retrieved by</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos">764</span></a><span class="sd">            accessing the `Measure.bandwidth` property of the returned</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos">765</span></a><span class="sd">            object. This argument is passed directly to the</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos">766</span></a><span class="sd">            `gaussian_kde` function in the `scipy.stats` module. See</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos">767</span></a><span class="sd">            that documentation for further details.</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos">768</span></a>
</span><span id="L-769"><a href="#L-769"><span class="linenos">769</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos">770</span></a>
</span><span id="L-771"><a href="#L-771"><span class="linenos">771</span></a><span class="sd">        * `Measure`: The distribution of $\Phi(\mu_m)$, which is a Borel</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos">772</span></a><span class="sd">            probability measure on the real line.</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos">773</span></a>
</span><span id="L-774"><a href="#L-774"><span class="linenos">774</span></a><span class="sd">        **Raises:**</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos">775</span></a>
</span><span id="L-776"><a href="#L-776"><span class="linenos">776</span></a><span class="sd">        * **ValueError**: If the `weightedSims` property is empty.</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos">777</span></a>
</span><span id="L-778"><a href="#L-778"><span class="linenos">778</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos">779</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos">780</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No weighted simulations found&#39;</span><span class="p">)</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos">781</span></a>
</span><span id="L-782"><a href="#L-782"><span class="linenos">782</span></a>        <span class="n">func</span> <span class="o">=</span> <span class="n">mapping</span> <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">meas</span><span class="p">:</span> <span class="n">meas</span><span class="p">[</span><span class="n">mapping</span><span class="p">]</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos">783</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos">784</span></a>        <span class="n">rowNum</span> <span class="o">=</span> <span class="n">numRows</span> <span class="k">if</span> <span class="n">rowNum</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">rowNum</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos">785</span></a>
</span><span id="L-786"><a href="#L-786"><span class="linenos">786</span></a>        <span class="c1"># Loop through all rows of the weighted sims unless a valid row</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos">787</span></a>        <span class="c1"># number is given.</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos">788</span></a>        <span class="k">if</span> <span class="n">rowNum</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos">789</span></a>            <span class="n">loopLength</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos">790</span></a>            <span class="n">loopRange</span> <span class="o">=</span> <span class="p">[</span><span class="n">rowNum</span><span class="p">]</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos">791</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos">792</span></a>            <span class="n">loopLength</span> <span class="o">=</span> <span class="n">numRows</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos">793</span></a>            <span class="n">loopRange</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">loopLength</span><span class="p">)</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos">794</span></a>
</span><span id="L-795"><a href="#L-795"><span class="linenos">795</span></a>        <span class="c1"># Created the list of weighted samples. If looping through all</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos">796</span></a>        <span class="c1"># rows, the `sample` list is ordered as</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos">797</span></a>        <span class="c1"># \[</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos">798</span></a>        <span class="c1">#   u_1^{*, 1}, \ldots, u_M^{*, 1},</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos">799</span></a>        <span class="c1">#   u_1^{*, 2}, \ldots, u_M^{*, 2},</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos">800</span></a>        <span class="c1">#   \ldots,</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos">801</span></a>        <span class="c1">#   u_1^{*, K}, \ldots, u_M^{*, K}</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos">802</span></a>        <span class="c1"># \]</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos">803</span></a>        <span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos">804</span></a>            <span class="n">func</span><span class="p">(</span><span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">m</span><span class="p">])</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos">805</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="c1"># outer loop</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos">806</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">loopRange</span>  <span class="c1"># inner loop</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos">807</span></a>        <span class="p">])</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos">808</span></a>        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos">809</span></a>            <span class="p">[</span><span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span><span class="p">]</span> <span class="o">*</span> <span class="n">loopLength</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos">810</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos">811</span></a>        <span class="p">])</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos">812</span></a>
</span><span id="L-813"><a href="#L-813"><span class="linenos">813</span></a>        <span class="c1"># Create the sample law</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos">814</span></a>        <span class="n">sampleCDF</span> <span class="o">=</span> <span class="n">ECDFDiscrete</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos">815</span></a>        <span class="n">samplePDF</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">bandwidth</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos">816</span></a>        <span class="n">sampleLaw</span> <span class="o">=</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos">817</span></a>            <span class="n">sampleCDF</span><span class="p">,</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos">818</span></a>            <span class="n">samplePDF</span><span class="p">,</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos">819</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">),</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos">820</span></a>            <span class="n">samplePDF</span><span class="o">.</span><span class="n">factor</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos">821</span></a>        <span class="p">)</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos">822</span></a>
</span><span id="L-823"><a href="#L-823"><span class="linenos">823</span></a>        <span class="c1"># If looking at a valid row number, return only the sample law</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos">824</span></a>        <span class="c1"># as in (8.10). Otherwise, return a mixture as in (8.24).</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos">825</span></a>        <span class="k">if</span> <span class="n">rowNum</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos">826</span></a>            <span class="k">return</span> <span class="n">sampleLaw</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos">827</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos">828</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos">829</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos">830</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">sampleLaw</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos">831</span></a>        <span class="p">)</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos">832</span></a>
</span><span id="L-833"><a href="#L-833"><span class="linenos">833</span></a><span class="k">class</span> <span class="nc">WeightedSim</span><span class="p">:</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos">834</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;A weighted simulation for an `IDPModel` instance.</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos">835</span></a>
</span><span id="L-836"><a href="#L-836"><span class="linenos">836</span></a><span class="sd">    In the Paper, a weighted simulation is determined by the pair $(t,</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos">837</span></a><span class="sd">    \boldsymbol{\theta}_M^*)$ and has total weight $V$.</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos">838</span></a>
</span><span id="L-839"><a href="#L-839"><span class="linenos">839</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos">840</span></a>
</span><span id="L-841"><a href="#L-841"><span class="linenos">841</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idpModel</span><span class="p">):</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos">842</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Uses the given argument to set the corresponding property,</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos">843</span></a><span class="sd">        then runs the `updateRowCounts` method.</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos">844</span></a>
</span><span id="L-845"><a href="#L-845"><span class="linenos">845</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos">846</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span> <span class="o">=</span> <span class="n">idpModel</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos">847</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="c1"># stored copy to detect changes</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos">848</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos">849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos">850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># the natural logarithm of the total weight</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos">851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos">852</span></a>
</span><span id="L-853"><a href="#L-853"><span class="linenos">853</span></a>    <span class="nd">@property</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos">854</span></a>    <span class="k">def</span> <span class="nf">idpModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos">855</span></a>        <span class="sd">&#39;&#39;&#39;`IDPModel`: The IDP model for which the weighted simulation</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos">856</span></a><span class="sd">        is being created.</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos">857</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos">858</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos">859</span></a>
</span><span id="L-860"><a href="#L-860"><span class="linenos">860</span></a>    <span class="nd">@property</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos">861</span></a>    <span class="k">def</span> <span class="nf">rowWeights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos">862</span></a>        <span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): The triangular array of row</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos">863</span></a><span class="sd">        weights for the weighted simulation. Denoted by $t$ in Section 9</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos">864</span></a><span class="sd">        of the Paper.</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos">865</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos">866</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">)</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos">867</span></a>
</span><span id="L-868"><a href="#L-868"><span class="linenos">868</span></a>    <span class="nd">@property</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos">869</span></a>    <span class="k">def</span> <span class="nf">rowDistSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos">870</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): A tuple of simulated row</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos">871</span></a><span class="sd">        distributions. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos">872</span></a><span class="sd">        `rowDistSims`[`row`][`state`] is denoted by $\theta_{m\ell}^*</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos">873</span></a><span class="sd">        = u_m^*(\{\ell\})$ in Section 9 of the Paper.</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos">874</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos">875</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos">876</span></a>
</span><span id="L-877"><a href="#L-877"><span class="linenos">877</span></a>    <span class="nd">@property</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos">878</span></a>    <span class="k">def</span> <span class="nf">totalWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos">879</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The total weight of the simulation. Denoted by $V$</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos">880</span></a><span class="sd">        in Section 9 of the Paper.</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos">881</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos">882</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos">883</span></a>
</span><span id="L-884"><a href="#L-884"><span class="linenos">884</span></a>    <span class="k">def</span> <span class="nf">updateRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos">885</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `rowWeights`, `rowDistSims`, and `totalWeight`</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos">886</span></a><span class="sd">        properties, if necessary, so that the number of rows in</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos">887</span></a><span class="sd">        `rowDistSims` is the same as the number of rows in the</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos">888</span></a><span class="sd">        `IDPModel.rowCounts` property of the associated `idpModel`</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos">889</span></a><span class="sd">        instance.</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos">890</span></a>
</span><span id="L-891"><a href="#L-891"><span class="linenos">891</span></a><span class="sd">        **Raises:**</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos">892</span></a>
</span><span id="L-893"><a href="#L-893"><span class="linenos">893</span></a><span class="sd">        * **ValueError**: If the computed value for the `totalWeight`</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos">894</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos">895</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos">896</span></a>
</span><span id="L-897"><a href="#L-897"><span class="linenos">897</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos">898</span></a>        <span class="c1"># If $L$ is the number of states in the IDP, then the case</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos">899</span></a>        <span class="c1"># $L = 2$ is separated from the case $2 &lt; L &lt; \infty$ to speed</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos">900</span></a>        <span class="c1"># up code execution.</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos">901</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos">902</span></a>        <span class="n">numStates</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos">903</span></a>
</span><span id="L-904"><a href="#L-904"><span class="linenos">904</span></a>        <span class="c1"># expand properties if row counts have been added</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos">905</span></a>        <span class="n">numOldSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos">906</span></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">counts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="n">numOldSims</span><span class="p">:]):</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos">907</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">numOldSims</span> <span class="o">+</span> <span class="n">_</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos">908</span></a>
</span><span id="L-909"><a href="#L-909"><span class="linenos">909</span></a>            <span class="c1"># build `rowWeights[m]`</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos">910</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos">911</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos">912</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos">913</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos">914</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos">915</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos">916</span></a>                    <span class="p">)</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos">917</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos">918</span></a>                    <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos">919</span></a>                    <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numStates</span><span class="p">):</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos">920</span></a>                        <span class="n">weight</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">state</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos">921</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos">922</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos">923</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos">924</span></a>            <span class="p">)</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos">925</span></a>
</span><span id="L-926"><a href="#L-926"><span class="linenos">926</span></a>            <span class="c1"># build `rowDistSims[m]`</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos">927</span></a>            <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos">928</span></a>            <span class="k">if</span> <span class="n">choice</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos">929</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">choice</span><span class="p">])</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos">930</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos">931</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos">932</span></a>                    <span class="n">rowDistSim</span> <span class="o">=</span> <span class="n">beta</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos">933</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos">934</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos">935</span></a>                    <span class="p">)</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos">936</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rowDistSim</span><span class="p">,</span> <span class="n">rowDistSim</span><span class="p">])</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos">937</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos">938</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos">939</span></a>                        <span class="c1"># vector sum fails for lists, works for ndarray</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos">940</span></a>                        <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos">941</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">counts</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos">942</span></a>                        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos">943</span></a>                    <span class="p">)</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos">944</span></a>
</span><span id="L-945"><a href="#L-945"><span class="linenos">945</span></a>            <span class="c1"># build `totalWeight`</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos">946</span></a>            <span class="c1">#</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos">947</span></a>            <span class="c1"># The m-th iteration of the `for` loop multiplies the</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos">948</span></a>            <span class="c1"># previous value of `totalWeight` by the (m + 1)-th factor</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos">949</span></a>            <span class="c1"># in the definition of $V$ in Section 9 of the Paper.</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos">950</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos">951</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos">952</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos">953</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos">954</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos">955</span></a>            <span class="p">)</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos">956</span></a>
</span><span id="L-957"><a href="#L-957"><span class="linenos">957</span></a>        <span class="c1"># check that total weight is not out of bounds</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos">958</span></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos">959</span></a>            <span class="n">adj</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos">960</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos">961</span></a>                <span class="s1">&#39;Simulation weight out of bounds.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos">962</span></a>                <span class="sa">f</span><span class="s1">&#39;Try adjusting scale factor by </span><span class="si">{</span><span class="n">adj</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos">963</span></a>            <span class="p">)</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos">964</span></a>
</span><span id="L-965"><a href="#L-965"><span class="linenos">965</span></a>        <span class="c1"># trim properties if row counts have been removed</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos">966</span></a>        <span class="k">if</span> <span class="n">numOldSims</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">):</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos">967</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos">968</span></a>                <span class="n">numOldSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos">969</span></a>            <span class="p">):</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos">970</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos">971</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos">972</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos">973</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos">974</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos">975</span></a>                <span class="p">)</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos">976</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos">977</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos">978</span></a>
</span><span id="L-979"><a href="#L-979"><span class="linenos">979</span></a>    <span class="k">def</span> <span class="nf">updateScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos">980</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `totalWeight` property, if necessary, to account</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos">981</span></a><span class="sd">        for a change in the `IDPModel.scale` property of the associated</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos">982</span></a><span class="sd">        `idpModel` instance.</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos">983</span></a>
</span><span id="L-984"><a href="#L-984"><span class="linenos">984</span></a><span class="sd">        **Raises:**</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos">985</span></a>
</span><span id="L-986"><a href="#L-986"><span class="linenos">986</span></a><span class="sd">        * **ValueError**: If the new value for the `totalWeight`</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos">987</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos">988</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos">989</span></a>
</span><span id="L-990"><a href="#L-990"><span class="linenos">990</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos">991</span></a>        <span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos">992</span></a>        <span class="k">if</span> <span class="n">diff</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos">993</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span> <span class="o">*</span> <span class="n">diff</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos">994</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos">995</span></a>            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos">996</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos">997</span></a>                    <span class="s1">&#39;Resulting simulation weight is out of bounds&#39;</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos">998</span></a>                <span class="p">)</span>
</span></pre></div>


            </section>
                <section id="Measure">
                            <input id="Measure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Measure</span>:

                <label class="view-source-button" for="Measure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Measure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Measure-405"><a href="#Measure-405"><span class="linenos">405</span></a><span class="k">class</span> <span class="nc">Measure</span><span class="p">:</span>
</span><span id="Measure-406"><a href="#Measure-406"><span class="linenos">406</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;A finite, signed Borel measure on the real line.</span>
</span><span id="Measure-407"><a href="#Measure-407"><span class="linenos">407</span></a>
</span><span id="Measure-408"><a href="#Measure-408"><span class="linenos">408</span></a><span class="sd">    `Measure` objects can be added to each other and multiplied on the</span>
</span><span id="Measure-409"><a href="#Measure-409"><span class="linenos">409</span></a><span class="sd">    left by a `float`. These operations return new `Measure` objects.</span>
</span><span id="Measure-410"><a href="#Measure-410"><span class="linenos">410</span></a><span class="sd">    When adding two instances, the `bandwidth` of the result is the</span>
</span><span id="Measure-411"><a href="#Measure-411"><span class="linenos">411</span></a><span class="sd">    maximum of the bandwidths of the summands.</span>
</span><span id="Measure-412"><a href="#Measure-412"><span class="linenos">412</span></a>
</span><span id="Measure-413"><a href="#Measure-413"><span class="linenos">413</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="Measure-414"><a href="#Measure-414"><span class="linenos">414</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cdf</span><span class="p">,</span> <span class="n">pdf</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">totalMass</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="Measure-415"><a href="#Measure-415"><span class="linenos">415</span></a>        <span class="sd">&#39;&#39;&#39;Constructs a `Measure` object from the given arguments.</span>
</span><span id="Measure-416"><a href="#Measure-416"><span class="linenos">416</span></a>
</span><span id="Measure-417"><a href="#Measure-417"><span class="linenos">417</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure-418"><a href="#Measure-418"><span class="linenos">418</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span> <span class="o">=</span> <span class="n">cdf</span>
</span><span id="Measure-419"><a href="#Measure-419"><span class="linenos">419</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span> <span class="o">=</span> <span class="n">pdf</span>
</span><span id="Measure-420"><a href="#Measure-420"><span class="linenos">420</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="o">=</span> <span class="n">mean</span>
</span><span id="Measure-421"><a href="#Measure-421"><span class="linenos">421</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span> <span class="o">=</span> <span class="n">totalMass</span>
</span><span id="Measure-422"><a href="#Measure-422"><span class="linenos">422</span></a>
</span><span id="Measure-423"><a href="#Measure-423"><span class="linenos">423</span></a>    <span class="nd">@property</span>
</span><span id="Measure-424"><a href="#Measure-424"><span class="linenos">424</span></a>    <span class="k">def</span> <span class="nf">cdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure-425"><a href="#Measure-425"><span class="linenos">425</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`func`: The distribution function of the measure. If $\mu$</span>
</span><span id="Measure-426"><a href="#Measure-426"><span class="linenos">426</span></a><span class="sd">        is the measure, then this is the function $t \mapsto</span>
</span><span id="Measure-427"><a href="#Measure-427"><span class="linenos">427</span></a><span class="sd">        \mu((-\infty, t])$.</span>
</span><span id="Measure-428"><a href="#Measure-428"><span class="linenos">428</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure-429"><a href="#Measure-429"><span class="linenos">429</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span>
</span><span id="Measure-430"><a href="#Measure-430"><span class="linenos">430</span></a>
</span><span id="Measure-431"><a href="#Measure-431"><span class="linenos">431</span></a>    <span class="nd">@property</span>
</span><span id="Measure-432"><a href="#Measure-432"><span class="linenos">432</span></a>    <span class="k">def</span> <span class="nf">pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure-433"><a href="#Measure-433"><span class="linenos">433</span></a>        <span class="sd">&#39;&#39;&#39;`func`: The density of the measure, which is the derivative</span>
</span><span id="Measure-434"><a href="#Measure-434"><span class="linenos">434</span></a><span class="sd">        of `cdf`. If `cdf` is not differentiable, then an approximate</span>
</span><span id="Measure-435"><a href="#Measure-435"><span class="linenos">435</span></a><span class="sd">        density should be provided.</span>
</span><span id="Measure-436"><a href="#Measure-436"><span class="linenos">436</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure-437"><a href="#Measure-437"><span class="linenos">437</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span>
</span><span id="Measure-438"><a href="#Measure-438"><span class="linenos">438</span></a>
</span><span id="Measure-439"><a href="#Measure-439"><span class="linenos">439</span></a>    <span class="nd">@property</span>
</span><span id="Measure-440"><a href="#Measure-440"><span class="linenos">440</span></a>    <span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure-441"><a href="#Measure-441"><span class="linenos">441</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float` or `None`: If the mean is stored in the `Measure`</span>
</span><span id="Measure-442"><a href="#Measure-442"><span class="linenos">442</span></a><span class="sd">        instance, then it should equal $\int_{-\infty}^\infty x \,</span>
</span><span id="Measure-443"><a href="#Measure-443"><span class="linenos">443</span></a><span class="sd">        dF(x)$, where $F$ is the distribution function. The mean of the</span>
</span><span id="Measure-444"><a href="#Measure-444"><span class="linenos">444</span></a><span class="sd">        sum of two `Measure` instances will be `None` if either mean is</span>
</span><span id="Measure-445"><a href="#Measure-445"><span class="linenos">445</span></a><span class="sd">        `None`.</span>
</span><span id="Measure-446"><a href="#Measure-446"><span class="linenos">446</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure-447"><a href="#Measure-447"><span class="linenos">447</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span>
</span><span id="Measure-448"><a href="#Measure-448"><span class="linenos">448</span></a>
</span><span id="Measure-449"><a href="#Measure-449"><span class="linenos">449</span></a>    <span class="nd">@property</span>
</span><span id="Measure-450"><a href="#Measure-450"><span class="linenos">450</span></a>    <span class="k">def</span> <span class="nf">totalMass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure-451"><a href="#Measure-451"><span class="linenos">451</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The total mass of the measure. If $\mu$ is the</span>
</span><span id="Measure-452"><a href="#Measure-452"><span class="linenos">452</span></a><span class="sd">        measure, then this $\mu(\mathbb{R})$.</span>
</span><span id="Measure-453"><a href="#Measure-453"><span class="linenos">453</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure-454"><a href="#Measure-454"><span class="linenos">454</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span>
</span><span id="Measure-455"><a href="#Measure-455"><span class="linenos">455</span></a>
</span><span id="Measure-456"><a href="#Measure-456"><span class="linenos">456</span></a>    <span class="nd">@property</span>
</span><span id="Measure-457"><a href="#Measure-457"><span class="linenos">457</span></a>    <span class="k">def</span> <span class="nf">bandwidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure-458"><a href="#Measure-458"><span class="linenos">458</span></a>        <span class="sd">&#39;&#39;&#39;`float`: If `pdf` is an approximate density created with the</span>
</span><span id="Measure-459"><a href="#Measure-459"><span class="linenos">459</span></a><span class="sd">        `gaussian_kde` function from the `scipy.stats` module, then this</span>
</span><span id="Measure-460"><a href="#Measure-460"><span class="linenos">460</span></a><span class="sd">        is the bandwidth that was used to create it. Is 0 otherwise. See</span>
</span><span id="Measure-461"><a href="#Measure-461"><span class="linenos">461</span></a><span class="sd">        `IDPModel.rowDistLaw` for more details.</span>
</span><span id="Measure-462"><a href="#Measure-462"><span class="linenos">462</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure-463"><a href="#Measure-463"><span class="linenos">463</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Measure-464"><a href="#Measure-464"><span class="linenos">464</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">factor</span>
</span><span id="Measure-465"><a href="#Measure-465"><span class="linenos">465</span></a>        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="Measure-466"><a href="#Measure-466"><span class="linenos">466</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="Measure-467"><a href="#Measure-467"><span class="linenos">467</span></a>
</span><span id="Measure-468"><a href="#Measure-468"><span class="linenos">468</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">):</span>
</span><span id="Measure-469"><a href="#Measure-469"><span class="linenos">469</span></a>        <span class="k">def</span> <span class="nf">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
</span><span id="Measure-470"><a href="#Measure-470"><span class="linenos">470</span></a>            <span class="k">return</span> <span class="n">scalar</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="Measure-471"><a href="#Measure-471"><span class="linenos">471</span></a>        <span class="n">pdf</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bandwidth</span>
</span><span id="Measure-472"><a href="#Measure-472"><span class="linenos">472</span></a>        <span class="n">mean</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Measure-473"><a href="#Measure-473"><span class="linenos">473</span></a>            <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="Measure-474"><a href="#Measure-474"><span class="linenos">474</span></a>            <span class="k">else</span> <span class="n">scalar</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span>
</span><span id="Measure-475"><a href="#Measure-475"><span class="linenos">475</span></a>        <span class="p">)</span>
</span><span id="Measure-476"><a href="#Measure-476"><span class="linenos">476</span></a>        <span class="k">return</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="Measure-477"><a href="#Measure-477"><span class="linenos">477</span></a>            <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">scalar</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
</span><span id="Measure-478"><a href="#Measure-478"><span class="linenos">478</span></a>            <span class="n">pdf</span><span class="p">,</span>
</span><span id="Measure-479"><a href="#Measure-479"><span class="linenos">479</span></a>            <span class="n">mean</span><span class="p">,</span>
</span><span id="Measure-480"><a href="#Measure-480"><span class="linenos">480</span></a>            <span class="n">scalar</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span>
</span><span id="Measure-481"><a href="#Measure-481"><span class="linenos">481</span></a>        <span class="p">)</span>
</span><span id="Measure-482"><a href="#Measure-482"><span class="linenos">482</span></a>
</span><span id="Measure-483"><a href="#Measure-483"><span class="linenos">483</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="Measure-484"><a href="#Measure-484"><span class="linenos">484</span></a>        <span class="k">def</span> <span class="nf">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
</span><span id="Measure-485"><a href="#Measure-485"><span class="linenos">485</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="Measure-486"><a href="#Measure-486"><span class="linenos">486</span></a>        <span class="n">pdf</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bandwidth</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">bandwidth</span><span class="p">)</span>
</span><span id="Measure-487"><a href="#Measure-487"><span class="linenos">487</span></a>        <span class="n">mean</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Measure-488"><a href="#Measure-488"><span class="linenos">488</span></a>            <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">mean</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="Measure-489"><a href="#Measure-489"><span class="linenos">489</span></a>            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">mean</span>
</span><span id="Measure-490"><a href="#Measure-490"><span class="linenos">490</span></a>        <span class="p">)</span>
</span><span id="Measure-491"><a href="#Measure-491"><span class="linenos">491</span></a>        <span class="k">return</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="Measure-492"><a href="#Measure-492"><span class="linenos">492</span></a>            <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
</span><span id="Measure-493"><a href="#Measure-493"><span class="linenos">493</span></a>            <span class="n">pdf</span><span class="p">,</span>
</span><span id="Measure-494"><a href="#Measure-494"><span class="linenos">494</span></a>            <span class="n">mean</span><span class="p">,</span>
</span><span id="Measure-495"><a href="#Measure-495"><span class="linenos">495</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">totalMass</span>
</span><span id="Measure-496"><a href="#Measure-496"><span class="linenos">496</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A finite, signed Borel measure on the real line.</p>

<p><code><a href="#Measure">Measure</a></code> objects can be added to each other and multiplied on the
left by a <code>float</code>. These operations return new <code><a href="#Measure">Measure</a></code> objects.
When adding two instances, the <code><a href="#Measure.bandwidth">bandwidth</a></code> of the result is the
maximum of the bandwidths of the summands.</p>
</div>


                            <div id="Measure.__init__" class="classattr">
                                        <input id="Measure.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Measure</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">cdf</span>, </span><span class="param"><span class="n">pdf</span>, </span><span class="param"><span class="n">mean</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">totalMass</span><span class="o">=</span><span class="mi">1</span></span>)</span>

                <label class="view-source-button" for="Measure.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Measure.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Measure.__init__-414"><a href="#Measure.__init__-414"><span class="linenos">414</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cdf</span><span class="p">,</span> <span class="n">pdf</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">totalMass</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="Measure.__init__-415"><a href="#Measure.__init__-415"><span class="linenos">415</span></a>        <span class="sd">&#39;&#39;&#39;Constructs a `Measure` object from the given arguments.</span>
</span><span id="Measure.__init__-416"><a href="#Measure.__init__-416"><span class="linenos">416</span></a>
</span><span id="Measure.__init__-417"><a href="#Measure.__init__-417"><span class="linenos">417</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure.__init__-418"><a href="#Measure.__init__-418"><span class="linenos">418</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span> <span class="o">=</span> <span class="n">cdf</span>
</span><span id="Measure.__init__-419"><a href="#Measure.__init__-419"><span class="linenos">419</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span> <span class="o">=</span> <span class="n">pdf</span>
</span><span id="Measure.__init__-420"><a href="#Measure.__init__-420"><span class="linenos">420</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="o">=</span> <span class="n">mean</span>
</span><span id="Measure.__init__-421"><a href="#Measure.__init__-421"><span class="linenos">421</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span> <span class="o">=</span> <span class="n">totalMass</span>
</span></pre></div>


            <div class="docstring"><p>Constructs a <code><a href="#Measure">Measure</a></code> object from the given arguments.</p>
</div>


                            </div>
                            <div id="Measure.cdf" class="classattr">
                                        <input id="Measure.cdf-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">cdf</span>

                <label class="view-source-button" for="Measure.cdf-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Measure.cdf"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Measure.cdf-423"><a href="#Measure.cdf-423"><span class="linenos">423</span></a>    <span class="nd">@property</span>
</span><span id="Measure.cdf-424"><a href="#Measure.cdf-424"><span class="linenos">424</span></a>    <span class="k">def</span> <span class="nf">cdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure.cdf-425"><a href="#Measure.cdf-425"><span class="linenos">425</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`func`: The distribution function of the measure. If $\mu$</span>
</span><span id="Measure.cdf-426"><a href="#Measure.cdf-426"><span class="linenos">426</span></a><span class="sd">        is the measure, then this is the function $t \mapsto</span>
</span><span id="Measure.cdf-427"><a href="#Measure.cdf-427"><span class="linenos">427</span></a><span class="sd">        \mu((-\infty, t])$.</span>
</span><span id="Measure.cdf-428"><a href="#Measure.cdf-428"><span class="linenos">428</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure.cdf-429"><a href="#Measure.cdf-429"><span class="linenos">429</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cdf</span>
</span></pre></div>


            <div class="docstring"><p><code>func</code>: The distribution function of the measure. If $\mu$
is the measure, then this is the function $t \mapsto
\mu((-\infty, t])$.</p>
</div>


                            </div>
                            <div id="Measure.pdf" class="classattr">
                                        <input id="Measure.pdf-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">pdf</span>

                <label class="view-source-button" for="Measure.pdf-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Measure.pdf"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Measure.pdf-431"><a href="#Measure.pdf-431"><span class="linenos">431</span></a>    <span class="nd">@property</span>
</span><span id="Measure.pdf-432"><a href="#Measure.pdf-432"><span class="linenos">432</span></a>    <span class="k">def</span> <span class="nf">pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure.pdf-433"><a href="#Measure.pdf-433"><span class="linenos">433</span></a>        <span class="sd">&#39;&#39;&#39;`func`: The density of the measure, which is the derivative</span>
</span><span id="Measure.pdf-434"><a href="#Measure.pdf-434"><span class="linenos">434</span></a><span class="sd">        of `cdf`. If `cdf` is not differentiable, then an approximate</span>
</span><span id="Measure.pdf-435"><a href="#Measure.pdf-435"><span class="linenos">435</span></a><span class="sd">        density should be provided.</span>
</span><span id="Measure.pdf-436"><a href="#Measure.pdf-436"><span class="linenos">436</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure.pdf-437"><a href="#Measure.pdf-437"><span class="linenos">437</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span>
</span></pre></div>


            <div class="docstring"><p><code>func</code>: The density of the measure, which is the derivative
of <code><a href="#Measure.cdf">cdf</a></code>. If <code><a href="#Measure.cdf">cdf</a></code> is not differentiable, then an approximate
density should be provided.</p>
</div>


                            </div>
                            <div id="Measure.mean" class="classattr">
                                        <input id="Measure.mean-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">mean</span>

                <label class="view-source-button" for="Measure.mean-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Measure.mean"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Measure.mean-439"><a href="#Measure.mean-439"><span class="linenos">439</span></a>    <span class="nd">@property</span>
</span><span id="Measure.mean-440"><a href="#Measure.mean-440"><span class="linenos">440</span></a>    <span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure.mean-441"><a href="#Measure.mean-441"><span class="linenos">441</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float` or `None`: If the mean is stored in the `Measure`</span>
</span><span id="Measure.mean-442"><a href="#Measure.mean-442"><span class="linenos">442</span></a><span class="sd">        instance, then it should equal $\int_{-\infty}^\infty x \,</span>
</span><span id="Measure.mean-443"><a href="#Measure.mean-443"><span class="linenos">443</span></a><span class="sd">        dF(x)$, where $F$ is the distribution function. The mean of the</span>
</span><span id="Measure.mean-444"><a href="#Measure.mean-444"><span class="linenos">444</span></a><span class="sd">        sum of two `Measure` instances will be `None` if either mean is</span>
</span><span id="Measure.mean-445"><a href="#Measure.mean-445"><span class="linenos">445</span></a><span class="sd">        `None`.</span>
</span><span id="Measure.mean-446"><a href="#Measure.mean-446"><span class="linenos">446</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure.mean-447"><a href="#Measure.mean-447"><span class="linenos">447</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code> or <code>None</code>: If the mean is stored in the <code><a href="#Measure">Measure</a></code>
instance, then it should equal $\int_{-\infty}^\infty x \,
dF(x)$, where $F$ is the distribution function. The mean of the
sum of two <code><a href="#Measure">Measure</a></code> instances will be <code>None</code> if either mean is
<code>None</code>.</p>
</div>


                            </div>
                            <div id="Measure.totalMass" class="classattr">
                                        <input id="Measure.totalMass-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">totalMass</span>

                <label class="view-source-button" for="Measure.totalMass-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Measure.totalMass"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Measure.totalMass-449"><a href="#Measure.totalMass-449"><span class="linenos">449</span></a>    <span class="nd">@property</span>
</span><span id="Measure.totalMass-450"><a href="#Measure.totalMass-450"><span class="linenos">450</span></a>    <span class="k">def</span> <span class="nf">totalMass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure.totalMass-451"><a href="#Measure.totalMass-451"><span class="linenos">451</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The total mass of the measure. If $\mu$ is the</span>
</span><span id="Measure.totalMass-452"><a href="#Measure.totalMass-452"><span class="linenos">452</span></a><span class="sd">        measure, then this $\mu(\mathbb{R})$.</span>
</span><span id="Measure.totalMass-453"><a href="#Measure.totalMass-453"><span class="linenos">453</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure.totalMass-454"><a href="#Measure.totalMass-454"><span class="linenos">454</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_totalMass</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The total mass of the measure. If $\mu$ is the
measure, then this $\mu(\mathbb{R})$.</p>
</div>


                            </div>
                            <div id="Measure.bandwidth" class="classattr">
                                        <input id="Measure.bandwidth-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">bandwidth</span>

                <label class="view-source-button" for="Measure.bandwidth-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Measure.bandwidth"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Measure.bandwidth-456"><a href="#Measure.bandwidth-456"><span class="linenos">456</span></a>    <span class="nd">@property</span>
</span><span id="Measure.bandwidth-457"><a href="#Measure.bandwidth-457"><span class="linenos">457</span></a>    <span class="k">def</span> <span class="nf">bandwidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Measure.bandwidth-458"><a href="#Measure.bandwidth-458"><span class="linenos">458</span></a>        <span class="sd">&#39;&#39;&#39;`float`: If `pdf` is an approximate density created with the</span>
</span><span id="Measure.bandwidth-459"><a href="#Measure.bandwidth-459"><span class="linenos">459</span></a><span class="sd">        `gaussian_kde` function from the `scipy.stats` module, then this</span>
</span><span id="Measure.bandwidth-460"><a href="#Measure.bandwidth-460"><span class="linenos">460</span></a><span class="sd">        is the bandwidth that was used to create it. Is 0 otherwise. See</span>
</span><span id="Measure.bandwidth-461"><a href="#Measure.bandwidth-461"><span class="linenos">461</span></a><span class="sd">        `IDPModel.rowDistLaw` for more details.</span>
</span><span id="Measure.bandwidth-462"><a href="#Measure.bandwidth-462"><span class="linenos">462</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Measure.bandwidth-463"><a href="#Measure.bandwidth-463"><span class="linenos">463</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Measure.bandwidth-464"><a href="#Measure.bandwidth-464"><span class="linenos">464</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">factor</span>
</span><span id="Measure.bandwidth-465"><a href="#Measure.bandwidth-465"><span class="linenos">465</span></a>        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="Measure.bandwidth-466"><a href="#Measure.bandwidth-466"><span class="linenos">466</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: If <code><a href="#Measure.pdf">pdf</a></code> is an approximate density created with the
<code>gaussian_kde</code> function from the <code>scipy.stats</code> module, then this
is the bandwidth that was used to create it. Is 0 otherwise. See
<code><a href="#IDPModel.rowDistLaw">IDPModel.rowDistLaw</a></code> for more details.</p>
</div>


                            </div>
                </section>
                <section id="IDPModel">
                            <input id="IDPModel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">IDPModel</span>:

                <label class="view-source-button" for="IDPModel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel-498"><a href="#IDPModel-498"><span class="linenos">498</span></a><span class="k">class</span> <span class="nc">IDPModel</span><span class="p">:</span>
</span><span id="IDPModel-499"><a href="#IDPModel-499"><span class="linenos">499</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;An IDP model on the state space $S = \\{0, ..., L - 1\\}$.</span>
</span><span id="IDPModel-500"><a href="#IDPModel-500"><span class="linenos">500</span></a>
</span><span id="IDPModel-501"><a href="#IDPModel-501"><span class="linenos">501</span></a><span class="sd">    The IDP model consists of both an IDP and some observed data. See</span>
</span><span id="IDPModel-502"><a href="#IDPModel-502"><span class="linenos">502</span></a><span class="sd">    Section 9 of the Paper for details.</span>
</span><span id="IDPModel-503"><a href="#IDPModel-503"><span class="linenos">503</span></a>
</span><span id="IDPModel-504"><a href="#IDPModel-504"><span class="linenos">504</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="IDPModel-505"><a href="#IDPModel-505"><span class="linenos">505</span></a>
</span><span id="IDPModel-506"><a href="#IDPModel-506"><span class="linenos">506</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colConc</span><span class="p">,</span> <span class="n">rowConc</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">):</span>
</span><span id="IDPModel-507"><a href="#IDPModel-507"><span class="linenos">507</span></a>        <span class="sd">&#39;&#39;&#39;The constructor first uses the given arguments to set the</span>
</span><span id="IDPModel-508"><a href="#IDPModel-508"><span class="linenos">508</span></a><span class="sd">        corresponding properties. If a property returns a tuple or a</span>
</span><span id="IDPModel-509"><a href="#IDPModel-509"><span class="linenos">509</span></a><span class="sd">        tuple of tuples, then the argument can be passed any</span>
</span><span id="IDPModel-510"><a href="#IDPModel-510"><span class="linenos">510</span></a><span class="sd">        `array-like` object, such as a list or a list of lists.</span>
</span><span id="IDPModel-511"><a href="#IDPModel-511"><span class="linenos">511</span></a>
</span><span id="IDPModel-512"><a href="#IDPModel-512"><span class="linenos">512</span></a><span class="sd">        For the `baseMeas` property, the corresponding argument can be</span>
</span><span id="IDPModel-513"><a href="#IDPModel-513"><span class="linenos">513</span></a><span class="sd">        passed a single floating point value `p`, in which case the</span>
</span><span id="IDPModel-514"><a href="#IDPModel-514"><span class="linenos">514</span></a><span class="sd">        property will be set to `(1 - p, p)`.</span>
</span><span id="IDPModel-515"><a href="#IDPModel-515"><span class="linenos">515</span></a>
</span><span id="IDPModel-516"><a href="#IDPModel-516"><span class="linenos">516</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-517"><a href="#IDPModel-517"><span class="linenos">517</span></a>        <span class="c1"># `baseMeas` and `rowCounts` are stored as ndarrays rather than</span>
</span><span id="IDPModel-518"><a href="#IDPModel-518"><span class="linenos">518</span></a>        <span class="c1"># lists, since vector addition fails for lists but works for</span>
</span><span id="IDPModel-519"><a href="#IDPModel-519"><span class="linenos">519</span></a>        <span class="c1"># ndarrays. This is important in the constructor of the</span>
</span><span id="IDPModel-520"><a href="#IDPModel-520"><span class="linenos">520</span></a>        <span class="c1"># `WeightedSim` class.</span>
</span><span id="IDPModel-521"><a href="#IDPModel-521"><span class="linenos">521</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="IDPModel-522"><a href="#IDPModel-522"><span class="linenos">522</span></a>
</span><span id="IDPModel-523"><a href="#IDPModel-523"><span class="linenos">523</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="IDPModel-524"><a href="#IDPModel-524"><span class="linenos">524</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">]</span>
</span><span id="IDPModel-525"><a href="#IDPModel-525"><span class="linenos">525</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="IDPModel-526"><a href="#IDPModel-526"><span class="linenos">526</span></a>        <span class="n">rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-527"><a href="#IDPModel-527"><span class="linenos">527</span></a>
</span><span id="IDPModel-528"><a href="#IDPModel-528"><span class="linenos">528</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="IDPModel-529"><a href="#IDPModel-529"><span class="linenos">529</span></a>            <span class="s1">&#39;colConc&#39;</span><span class="p">:</span> <span class="n">colConc</span><span class="p">,</span>
</span><span id="IDPModel-530"><a href="#IDPModel-530"><span class="linenos">530</span></a>            <span class="s1">&#39;rowConc&#39;</span><span class="p">:</span> <span class="n">rowConc</span><span class="p">,</span>
</span><span id="IDPModel-531"><a href="#IDPModel-531"><span class="linenos">531</span></a>            <span class="s1">&#39;baseMeas&#39;</span><span class="p">:</span> <span class="n">baseMeas</span>
</span><span id="IDPModel-532"><a href="#IDPModel-532"><span class="linenos">532</span></a>        <span class="p">}</span>
</span><span id="IDPModel-533"><a href="#IDPModel-533"><span class="linenos">533</span></a>
</span><span id="IDPModel-534"><a href="#IDPModel-534"><span class="linenos">534</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">rowCounts</span>
</span><span id="IDPModel-535"><a href="#IDPModel-535"><span class="linenos">535</span></a>
</span><span id="IDPModel-536"><a href="#IDPModel-536"><span class="linenos">536</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel-537"><a href="#IDPModel-537"><span class="linenos">537</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel-538"><a href="#IDPModel-538"><span class="linenos">538</span></a>
</span><span id="IDPModel-539"><a href="#IDPModel-539"><span class="linenos">539</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-540"><a href="#IDPModel-540"><span class="linenos">540</span></a>    <span class="k">def</span> <span class="nf">colConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-541"><a href="#IDPModel-541"><span class="linenos">541</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The column concentration parameter. Should be</span>
</span><span id="IDPModel-542"><a href="#IDPModel-542"><span class="linenos">542</span></a><span class="sd">        positive. Denoted by $\kappa$ in Section 9 of the Paper.</span>
</span><span id="IDPModel-543"><a href="#IDPModel-543"><span class="linenos">543</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-544"><a href="#IDPModel-544"><span class="linenos">544</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-545"><a href="#IDPModel-545"><span class="linenos">545</span></a>
</span><span id="IDPModel-546"><a href="#IDPModel-546"><span class="linenos">546</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-547"><a href="#IDPModel-547"><span class="linenos">547</span></a>    <span class="k">def</span> <span class="nf">rowConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-548"><a href="#IDPModel-548"><span class="linenos">548</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The row concentration parameter. Should be</span>
</span><span id="IDPModel-549"><a href="#IDPModel-549"><span class="linenos">549</span></a><span class="sd">        positive. Denoted by $\varepsilon$ in Section 9 of the Paper.</span>
</span><span id="IDPModel-550"><a href="#IDPModel-550"><span class="linenos">550</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-551"><a href="#IDPModel-551"><span class="linenos">551</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-552"><a href="#IDPModel-552"><span class="linenos">552</span></a>
</span><span id="IDPModel-553"><a href="#IDPModel-553"><span class="linenos">553</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-554"><a href="#IDPModel-554"><span class="linenos">554</span></a>    <span class="k">def</span> <span class="nf">baseMeas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-555"><a href="#IDPModel-555"><span class="linenos">555</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The base probability vector. Should be a</span>
</span><span id="IDPModel-556"><a href="#IDPModel-556"><span class="linenos">556</span></a><span class="sd">        list of positive numbers that sum to 1. Denoted by</span>
</span><span id="IDPModel-557"><a href="#IDPModel-557"><span class="linenos">557</span></a><span class="sd">        $\boldsymbol{p} = (p_0, \ldots, p_{L - 1})$ in Section 9 of the</span>
</span><span id="IDPModel-558"><a href="#IDPModel-558"><span class="linenos">558</span></a><span class="sd">        Paper, where $p_\ell = \varrho(\{\ell\})$.</span>
</span><span id="IDPModel-559"><a href="#IDPModel-559"><span class="linenos">559</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-560"><a href="#IDPModel-560"><span class="linenos">560</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">])</span>
</span><span id="IDPModel-561"><a href="#IDPModel-561"><span class="linenos">561</span></a>
</span><span id="IDPModel-562"><a href="#IDPModel-562"><span class="linenos">562</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-563"><a href="#IDPModel-563"><span class="linenos">563</span></a>    <span class="k">def</span> <span class="nf">rowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-564"><a href="#IDPModel-564"><span class="linenos">564</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`int`)): The row counts for the observed</span>
</span><span id="IDPModel-565"><a href="#IDPModel-565"><span class="linenos">565</span></a><span class="sd">        data. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="IDPModel-566"><a href="#IDPModel-566"><span class="linenos">566</span></a><span class="sd">        `rowCounts`[`row`][`state`] is denoted by $\overline{y}_{m\ell}$</span>
</span><span id="IDPModel-567"><a href="#IDPModel-567"><span class="linenos">567</span></a><span class="sd">        in Section 9 of the Paper. It is the number of observed</span>
</span><span id="IDPModel-568"><a href="#IDPModel-568"><span class="linenos">568</span></a><span class="sd">        instances of `state` in the given row of data.</span>
</span><span id="IDPModel-569"><a href="#IDPModel-569"><span class="linenos">569</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-570"><a href="#IDPModel-570"><span class="linenos">570</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-571"><a href="#IDPModel-571"><span class="linenos">571</span></a>
</span><span id="IDPModel-572"><a href="#IDPModel-572"><span class="linenos">572</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-573"><a href="#IDPModel-573"><span class="linenos">573</span></a>    <span class="k">def</span> <span class="nf">likelihoods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-574"><a href="#IDPModel-574"><span class="linenos">574</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The prior likelihoods. If `row` equals</span>
</span><span id="IDPModel-575"><a href="#IDPModel-575"><span class="linenos">575</span></a><span class="sd">        $m - 1$, then `likelihoods`[`row`] is denoted by</span>
</span><span id="IDPModel-576"><a href="#IDPModel-576"><span class="linenos">576</span></a><span class="sd">        $\varrho_N(A_m)$ in Section 9 of the Paper. It is the prior</span>
</span><span id="IDPModel-577"><a href="#IDPModel-577"><span class="linenos">577</span></a><span class="sd">        probability of seeing the row counts for the given row. This</span>
</span><span id="IDPModel-578"><a href="#IDPModel-578"><span class="linenos">578</span></a><span class="sd">        property is computed by the constructor, and should not be</span>
</span><span id="IDPModel-579"><a href="#IDPModel-579"><span class="linenos">579</span></a><span class="sd">        changed.</span>
</span><span id="IDPModel-580"><a href="#IDPModel-580"><span class="linenos">580</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-581"><a href="#IDPModel-581"><span class="linenos">581</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">):</span>
</span><span id="IDPModel-582"><a href="#IDPModel-582"><span class="linenos">582</span></a>            <span class="n">rowConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-583"><a href="#IDPModel-583"><span class="linenos">583</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="IDPModel-584"><a href="#IDPModel-584"><span class="linenos">584</span></a>            <span class="n">denom</span> <span class="o">=</span> <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">)</span>
</span><span id="IDPModel-585"><a href="#IDPModel-585"><span class="linenos">585</span></a>            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">):]:</span>
</span><span id="IDPModel-586"><a href="#IDPModel-586"><span class="linenos">586</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IDPModel-587"><a href="#IDPModel-587"><span class="linenos">587</span></a>                    <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">row</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span>
</span><span id="IDPModel-588"><a href="#IDPModel-588"><span class="linenos">588</span></a>                <span class="p">)</span>
</span><span id="IDPModel-589"><a href="#IDPModel-589"><span class="linenos">589</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span>
</span><span id="IDPModel-590"><a href="#IDPModel-590"><span class="linenos">590</span></a>
</span><span id="IDPModel-591"><a href="#IDPModel-591"><span class="linenos">591</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-592"><a href="#IDPModel-592"><span class="linenos">592</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-593"><a href="#IDPModel-593"><span class="linenos">593</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The scale factor to use for weighted simulations.</span>
</span><span id="IDPModel-594"><a href="#IDPModel-594"><span class="linenos">594</span></a><span class="sd">        Denoted by $\log c$ in Section 9 of the Paper. Defaults to 0.</span>
</span><span id="IDPModel-595"><a href="#IDPModel-595"><span class="linenos">595</span></a><span class="sd">        Altering this value runs the `WeightedSim.updateScale` method on</span>
</span><span id="IDPModel-596"><a href="#IDPModel-596"><span class="linenos">596</span></a><span class="sd">        every simulation in the `weightedSims` property. If a</span>
</span><span id="IDPModel-597"><a href="#IDPModel-597"><span class="linenos">597</span></a><span class="sd">        `ValueError` occurs in this process, then no changes will be</span>
</span><span id="IDPModel-598"><a href="#IDPModel-598"><span class="linenos">598</span></a><span class="sd">        made, neither to the `scale` property, nor to any of the</span>
</span><span id="IDPModel-599"><a href="#IDPModel-599"><span class="linenos">599</span></a><span class="sd">        simulations in the `weightedSims` property.</span>
</span><span id="IDPModel-600"><a href="#IDPModel-600"><span class="linenos">600</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-601"><a href="#IDPModel-601"><span class="linenos">601</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="IDPModel-602"><a href="#IDPModel-602"><span class="linenos">602</span></a>
</span><span id="IDPModel-603"><a href="#IDPModel-603"><span class="linenos">603</span></a>    <span class="nd">@scale</span><span class="o">.</span><span class="n">setter</span>
</span><span id="IDPModel-604"><a href="#IDPModel-604"><span class="linenos">604</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="IDPModel-605"><a href="#IDPModel-605"><span class="linenos">605</span></a>        <span class="n">oldVal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="IDPModel-606"><a href="#IDPModel-606"><span class="linenos">606</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="IDPModel-607"><a href="#IDPModel-607"><span class="linenos">607</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDPModel-608"><a href="#IDPModel-608"><span class="linenos">608</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-609"><a href="#IDPModel-609"><span class="linenos">609</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateScale</span><span class="p">()</span>
</span><span id="IDPModel-610"><a href="#IDPModel-610"><span class="linenos">610</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="IDPModel-611"><a href="#IDPModel-611"><span class="linenos">611</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">oldVal</span>
</span><span id="IDPModel-612"><a href="#IDPModel-612"><span class="linenos">612</span></a>            <span class="k">raise</span>
</span><span id="IDPModel-613"><a href="#IDPModel-613"><span class="linenos">613</span></a>
</span><span id="IDPModel-614"><a href="#IDPModel-614"><span class="linenos">614</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-615"><a href="#IDPModel-615"><span class="linenos">615</span></a>    <span class="k">def</span> <span class="nf">weightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-616"><a href="#IDPModel-616"><span class="linenos">616</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`WeightedSim`): A tuple of distinct (and therefore</span>
</span><span id="IDPModel-617"><a href="#IDPModel-617"><span class="linenos">617</span></a><span class="sd">        independent) `WeightedSim` instances. `weightedSims`[k] is</span>
</span><span id="IDPModel-618"><a href="#IDPModel-618"><span class="linenos">618</span></a><span class="sd">        denoted by $(t^k, \boldsymbol{\theta}_M^{*, k})$ in Section 9 of</span>
</span><span id="IDPModel-619"><a href="#IDPModel-619"><span class="linenos">619</span></a><span class="sd">        the Paper, and has total weight $V_k$. This property is empty if</span>
</span><span id="IDPModel-620"><a href="#IDPModel-620"><span class="linenos">620</span></a><span class="sd">        the `addWeightedSims` method has never been run.</span>
</span><span id="IDPModel-621"><a href="#IDPModel-621"><span class="linenos">621</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-622"><a href="#IDPModel-622"><span class="linenos">622</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel-623"><a href="#IDPModel-623"><span class="linenos">623</span></a>
</span><span id="IDPModel-624"><a href="#IDPModel-624"><span class="linenos">624</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-625"><a href="#IDPModel-625"><span class="linenos">625</span></a>    <span class="k">def</span> <span class="nf">ess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-626"><a href="#IDPModel-626"><span class="linenos">626</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the sample</span>
</span><span id="IDPModel-627"><a href="#IDPModel-627"><span class="linenos">627</span></a><span class="sd">        variance. Denoted by $K_e&#39;&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="IDPModel-628"><a href="#IDPModel-628"><span class="linenos">628</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-629"><a href="#IDPModel-629"><span class="linenos">629</span></a>        <span class="n">numSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel-630"><a href="#IDPModel-630"><span class="linenos">630</span></a>        <span class="k">if</span> <span class="n">numSims</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel-631"><a href="#IDPModel-631"><span class="linenos">631</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="IDPModel-632"><a href="#IDPModel-632"><span class="linenos">632</span></a>        <span class="n">essPop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">essPop</span>
</span><span id="IDPModel-633"><a href="#IDPModel-633"><span class="linenos">633</span></a>        <span class="k">return</span> <span class="n">essPop</span> <span class="o">*</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="n">essPop</span><span class="o">/</span><span class="n">numSims</span><span class="p">)</span>
</span><span id="IDPModel-634"><a href="#IDPModel-634"><span class="linenos">634</span></a>
</span><span id="IDPModel-635"><a href="#IDPModel-635"><span class="linenos">635</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-636"><a href="#IDPModel-636"><span class="linenos">636</span></a>    <span class="k">def</span> <span class="nf">essPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-637"><a href="#IDPModel-637"><span class="linenos">637</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the population</span>
</span><span id="IDPModel-638"><a href="#IDPModel-638"><span class="linenos">638</span></a><span class="sd">        variance. Denoted by $K_e&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="IDPModel-639"><a href="#IDPModel-639"><span class="linenos">639</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-640"><a href="#IDPModel-640"><span class="linenos">640</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel-641"><a href="#IDPModel-641"><span class="linenos">641</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="IDPModel-642"><a href="#IDPModel-642"><span class="linenos">642</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel-643"><a href="#IDPModel-643"><span class="linenos">643</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span>      <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span>
</span><span id="IDPModel-644"><a href="#IDPModel-644"><span class="linenos">644</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel-645"><a href="#IDPModel-645"><span class="linenos">645</span></a>        <span class="p">)</span>
</span><span id="IDPModel-646"><a href="#IDPModel-646"><span class="linenos">646</span></a>
</span><span id="IDPModel-647"><a href="#IDPModel-647"><span class="linenos">647</span></a>    <span class="k">def</span> <span class="nf">addRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">):</span>
</span><span id="IDPModel-648"><a href="#IDPModel-648"><span class="linenos">648</span></a>        <span class="sd">&#39;&#39;&#39;Adds new row counts to the `rowCounts` property and runs the</span>
</span><span id="IDPModel-649"><a href="#IDPModel-649"><span class="linenos">649</span></a><span class="sd">        `WeightedSim.updateRowCounts` method on every simulation in the</span>
</span><span id="IDPModel-650"><a href="#IDPModel-650"><span class="linenos">650</span></a><span class="sd">        `weightedSims` property. If a `ValueError` occurs in this</span>
</span><span id="IDPModel-651"><a href="#IDPModel-651"><span class="linenos">651</span></a><span class="sd">        process, then no changes will be made, neither to the</span>
</span><span id="IDPModel-652"><a href="#IDPModel-652"><span class="linenos">652</span></a><span class="sd">        `rowCounts` property, nor to any of the simulations in the</span>
</span><span id="IDPModel-653"><a href="#IDPModel-653"><span class="linenos">653</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel-654"><a href="#IDPModel-654"><span class="linenos">654</span></a>
</span><span id="IDPModel-655"><a href="#IDPModel-655"><span class="linenos">655</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-656"><a href="#IDPModel-656"><span class="linenos">656</span></a>
</span><span id="IDPModel-657"><a href="#IDPModel-657"><span class="linenos">657</span></a><span class="sd">        * **newRowCounts** (`array_like`): The additional row counts to</span>
</span><span id="IDPModel-658"><a href="#IDPModel-658"><span class="linenos">658</span></a><span class="sd">            be added. Should be an array-like object (such as a list of</span>
</span><span id="IDPModel-659"><a href="#IDPModel-659"><span class="linenos">659</span></a><span class="sd">            lists) with the same number of columns (states) as</span>
</span><span id="IDPModel-660"><a href="#IDPModel-660"><span class="linenos">660</span></a><span class="sd">            `rowCounts`.</span>
</span><span id="IDPModel-661"><a href="#IDPModel-661"><span class="linenos">661</span></a>
</span><span id="IDPModel-662"><a href="#IDPModel-662"><span class="linenos">662</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-663"><a href="#IDPModel-663"><span class="linenos">663</span></a>        <span class="n">oldRowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span>
</span><span id="IDPModel-664"><a href="#IDPModel-664"><span class="linenos">664</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">))</span>
</span><span id="IDPModel-665"><a href="#IDPModel-665"><span class="linenos">665</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDPModel-666"><a href="#IDPModel-666"><span class="linenos">666</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-667"><a href="#IDPModel-667"><span class="linenos">667</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel-668"><a href="#IDPModel-668"><span class="linenos">668</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="IDPModel-669"><a href="#IDPModel-669"><span class="linenos">669</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">oldRowCounts</span>
</span><span id="IDPModel-670"><a href="#IDPModel-670"><span class="linenos">670</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-671"><a href="#IDPModel-671"><span class="linenos">671</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel-672"><a href="#IDPModel-672"><span class="linenos">672</span></a>            <span class="k">raise</span>
</span><span id="IDPModel-673"><a href="#IDPModel-673"><span class="linenos">673</span></a>
</span><span id="IDPModel-674"><a href="#IDPModel-674"><span class="linenos">674</span></a>    <span class="k">def</span> <span class="nf">delRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numRows</span><span class="p">):</span>
</span><span id="IDPModel-675"><a href="#IDPModel-675"><span class="linenos">675</span></a>        <span class="sd">&#39;&#39;&#39;Deletes the last `numRows` rows of the `rowCounts` property,</span>
</span><span id="IDPModel-676"><a href="#IDPModel-676"><span class="linenos">676</span></a><span class="sd">        then runs the `WeightedSim.updateRowCounts` method on every</span>
</span><span id="IDPModel-677"><a href="#IDPModel-677"><span class="linenos">677</span></a><span class="sd">        simulation in the `weightedSims` property.</span>
</span><span id="IDPModel-678"><a href="#IDPModel-678"><span class="linenos">678</span></a>
</span><span id="IDPModel-679"><a href="#IDPModel-679"><span class="linenos">679</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-680"><a href="#IDPModel-680"><span class="linenos">680</span></a>
</span><span id="IDPModel-681"><a href="#IDPModel-681"><span class="linenos">681</span></a><span class="sd">        * **numRows** (`int`): The number of rows to delete.</span>
</span><span id="IDPModel-682"><a href="#IDPModel-682"><span class="linenos">682</span></a>
</span><span id="IDPModel-683"><a href="#IDPModel-683"><span class="linenos">683</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-684"><a href="#IDPModel-684"><span class="linenos">684</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[:</span><span class="o">-</span><span class="n">numRows</span><span class="p">]</span>
</span><span id="IDPModel-685"><a href="#IDPModel-685"><span class="linenos">685</span></a>        <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-686"><a href="#IDPModel-686"><span class="linenos">686</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel-687"><a href="#IDPModel-687"><span class="linenos">687</span></a>
</span><span id="IDPModel-688"><a href="#IDPModel-688"><span class="linenos">688</span></a>    <span class="k">def</span> <span class="nf">addWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span id="IDPModel-689"><a href="#IDPModel-689"><span class="linenos">689</span></a>        <span class="sd">&#39;&#39;&#39;Creates new `WeightedSim` instances and adds them to the</span>
</span><span id="IDPModel-690"><a href="#IDPModel-690"><span class="linenos">690</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel-691"><a href="#IDPModel-691"><span class="linenos">691</span></a>
</span><span id="IDPModel-692"><a href="#IDPModel-692"><span class="linenos">692</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-693"><a href="#IDPModel-693"><span class="linenos">693</span></a><span class="sd">        </span>
</span><span id="IDPModel-694"><a href="#IDPModel-694"><span class="linenos">694</span></a><span class="sd">        * **num** (`int`): The number of distinct `WeightedSim`</span>
</span><span id="IDPModel-695"><a href="#IDPModel-695"><span class="linenos">695</span></a><span class="sd">            instances to create. If zero or negative, no instances are</span>
</span><span id="IDPModel-696"><a href="#IDPModel-696"><span class="linenos">696</span></a><span class="sd">            created.</span>
</span><span id="IDPModel-697"><a href="#IDPModel-697"><span class="linenos">697</span></a>
</span><span id="IDPModel-698"><a href="#IDPModel-698"><span class="linenos">698</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-699"><a href="#IDPModel-699"><span class="linenos">699</span></a>        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel-700"><a href="#IDPModel-700"><span class="linenos">700</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WeightedSim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
</span><span id="IDPModel-701"><a href="#IDPModel-701"><span class="linenos">701</span></a>
</span><span id="IDPModel-702"><a href="#IDPModel-702"><span class="linenos">702</span></a>    <span class="k">def</span> <span class="nf">clearWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-703"><a href="#IDPModel-703"><span class="linenos">703</span></a>        <span class="sd">&#39;&#39;&#39;Deletes all weighted simulations contained in the</span>
</span><span id="IDPModel-704"><a href="#IDPModel-704"><span class="linenos">704</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel-705"><a href="#IDPModel-705"><span class="linenos">705</span></a>
</span><span id="IDPModel-706"><a href="#IDPModel-706"><span class="linenos">706</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-707"><a href="#IDPModel-707"><span class="linenos">707</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel-708"><a href="#IDPModel-708"><span class="linenos">708</span></a>
</span><span id="IDPModel-709"><a href="#IDPModel-709"><span class="linenos">709</span></a>    <span class="k">def</span> <span class="nf">_prior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping</span><span class="p">,</span> <span class="n">numSamples</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
</span><span id="IDPModel-710"><a href="#IDPModel-710"><span class="linenos">710</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Returns the pushforward of the Dirichlet distribution by the</span>
</span><span id="IDPModel-711"><a href="#IDPModel-711"><span class="linenos">711</span></a><span class="sd">        given function. Used in the implementation of (8.24), (8.26),</span>
</span><span id="IDPModel-712"><a href="#IDPModel-712"><span class="linenos">712</span></a><span class="sd">        (9.6), and the final displayed equation in Section 9 of the</span>
</span><span id="IDPModel-713"><a href="#IDPModel-713"><span class="linenos">713</span></a><span class="sd">        paper. If an integer $\ell$ is passed to `mapping`, then the</span>
</span><span id="IDPModel-714"><a href="#IDPModel-714"><span class="linenos">714</span></a><span class="sd">        function $\mu \mapsto \mu(\{\ell\})$ is used.</span>
</span><span id="IDPModel-715"><a href="#IDPModel-715"><span class="linenos">715</span></a>
</span><span id="IDPModel-716"><a href="#IDPModel-716"><span class="linenos">716</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-717"><a href="#IDPModel-717"><span class="linenos">717</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">mapping</span><span class="p">):</span>
</span><span id="IDPModel-718"><a href="#IDPModel-718"><span class="linenos">718</span></a>            <span class="n">prior</span> <span class="o">=</span> <span class="n">beta</span><span class="p">(</span>
</span><span id="IDPModel-719"><a href="#IDPModel-719"><span class="linenos">719</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">][</span><span class="n">mapping</span><span class="p">],</span>
</span><span id="IDPModel-720"><a href="#IDPModel-720"><span class="linenos">720</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">][</span><span class="n">mapping</span><span class="p">])</span>
</span><span id="IDPModel-721"><a href="#IDPModel-721"><span class="linenos">721</span></a>            <span class="p">)</span>
</span><span id="IDPModel-722"><a href="#IDPModel-722"><span class="linenos">722</span></a>            <span class="k">return</span> <span class="n">Measure</span><span class="p">(</span><span class="n">prior</span><span class="o">.</span><span class="n">cdf</span><span class="p">,</span> <span class="n">prior</span><span class="o">.</span><span class="n">pdf</span><span class="p">,</span> <span class="n">prior</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</span><span id="IDPModel-723"><a href="#IDPModel-723"><span class="linenos">723</span></a>        <span class="n">rawSamples</span> <span class="o">=</span> <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="IDPModel-724"><a href="#IDPModel-724"><span class="linenos">724</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">],</span>
</span><span id="IDPModel-725"><a href="#IDPModel-725"><span class="linenos">725</span></a>            <span class="n">numSamples</span>
</span><span id="IDPModel-726"><a href="#IDPModel-726"><span class="linenos">726</span></a>        <span class="p">)</span>
</span><span id="IDPModel-727"><a href="#IDPModel-727"><span class="linenos">727</span></a>        <span class="n">samples</span> <span class="o">=</span> <span class="p">[</span><span class="n">mapping</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span> <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">rawSamples</span><span class="p">]</span>
</span><span id="IDPModel-728"><a href="#IDPModel-728"><span class="linenos">728</span></a>        <span class="n">pdf</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
</span><span id="IDPModel-729"><a href="#IDPModel-729"><span class="linenos">729</span></a>        <span class="k">return</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="IDPModel-730"><a href="#IDPModel-730"><span class="linenos">730</span></a>            <span class="n">ecdf</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="o">.</span><span class="n">evaluate</span><span class="p">,</span>
</span><span id="IDPModel-731"><a href="#IDPModel-731"><span class="linenos">731</span></a>            <span class="n">pdf</span><span class="p">,</span>
</span><span id="IDPModel-732"><a href="#IDPModel-732"><span class="linenos">732</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span>
</span><span id="IDPModel-733"><a href="#IDPModel-733"><span class="linenos">733</span></a>            <span class="n">pdf</span><span class="o">.</span><span class="n">factor</span>
</span><span id="IDPModel-734"><a href="#IDPModel-734"><span class="linenos">734</span></a>        <span class="p">)</span>
</span><span id="IDPModel-735"><a href="#IDPModel-735"><span class="linenos">735</span></a>
</span><span id="IDPModel-736"><a href="#IDPModel-736"><span class="linenos">736</span></a>    <span class="k">def</span> <span class="nf">rowDistLaw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rowNum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="IDPModel-737"><a href="#IDPModel-737"><span class="linenos">737</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Returns the law (or distribution) of a real-valued function</span>
</span><span id="IDPModel-738"><a href="#IDPModel-738"><span class="linenos">738</span></a><span class="sd">        of a row distribution. If `mapping` is $\Phi$ and `rowNum` is</span>
</span><span id="IDPModel-739"><a href="#IDPModel-739"><span class="linenos">739</span></a><span class="sd">        $m - 1$, then this method returns the law of the real-valued</span>
</span><span id="IDPModel-740"><a href="#IDPModel-740"><span class="linenos">740</span></a><span class="sd">        random variable, $\Phi(\mu_m)$. If $M$ denotes the length of</span>
</span><span id="IDPModel-741"><a href="#IDPModel-741"><span class="linenos">741</span></a><span class="sd">        `rowCounts`, then this method implements (8.10) in the Paper</span>
</span><span id="IDPModel-742"><a href="#IDPModel-742"><span class="linenos">742</span></a><span class="sd">        when $m \le M$ and it implements (8.24) when $m &gt; M$.</span>
</span><span id="IDPModel-743"><a href="#IDPModel-743"><span class="linenos">743</span></a>
</span><span id="IDPModel-744"><a href="#IDPModel-744"><span class="linenos">744</span></a><span class="sd">        The law of $\Phi(\mu_m)$ is a Borel probability measure on the</span>
</span><span id="IDPModel-745"><a href="#IDPModel-745"><span class="linenos">745</span></a><span class="sd">        real line. This method therefore returns a `Measure` object.</span>
</span><span id="IDPModel-746"><a href="#IDPModel-746"><span class="linenos">746</span></a><span class="sd">        However, the law of $\Phi(\mu_m)$ has a discrete component, so</span>
</span><span id="IDPModel-747"><a href="#IDPModel-747"><span class="linenos">747</span></a><span class="sd">        it does not have a density. The `Measure.pdf` attribute of the</span>
</span><span id="IDPModel-748"><a href="#IDPModel-748"><span class="linenos">748</span></a><span class="sd">        returned object is an approximate density, created with Gaussian</span>
</span><span id="IDPModel-749"><a href="#IDPModel-749"><span class="linenos">749</span></a><span class="sd">        kernel density estimation (KDE). More specifically, it treats a</span>
</span><span id="IDPModel-750"><a href="#IDPModel-750"><span class="linenos">750</span></a><span class="sd">        point mass $\delta_x$ as having a Gaussian density with mean $x$</span>
</span><span id="IDPModel-751"><a href="#IDPModel-751"><span class="linenos">751</span></a><span class="sd">        and standard deviation $h$, where $h$ is the &quot;bandwidth&quot; of the</span>
</span><span id="IDPModel-752"><a href="#IDPModel-752"><span class="linenos">752</span></a><span class="sd">        estimate.</span>
</span><span id="IDPModel-753"><a href="#IDPModel-753"><span class="linenos">753</span></a>
</span><span id="IDPModel-754"><a href="#IDPModel-754"><span class="linenos">754</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-755"><a href="#IDPModel-755"><span class="linenos">755</span></a>
</span><span id="IDPModel-756"><a href="#IDPModel-756"><span class="linenos">756</span></a><span class="sd">        * **rowNum** (`int` or `None`): Passing `None` to this argument</span>
</span><span id="IDPModel-757"><a href="#IDPModel-757"><span class="linenos">757</span></a><span class="sd">            is the same as passing the length of `rowCounts`.</span>
</span><span id="IDPModel-758"><a href="#IDPModel-758"><span class="linenos">758</span></a><span class="sd">        * **mapping** (`func` or `int`): The function to apply to the</span>
</span><span id="IDPModel-759"><a href="#IDPModel-759"><span class="linenos">759</span></a><span class="sd">            row distribution. Should be continuous and bounded. If an</span>
</span><span id="IDPModel-760"><a href="#IDPModel-760"><span class="linenos">760</span></a><span class="sd">            integer $\ell$ is passed to `mapping`, then the function</span>
</span><span id="IDPModel-761"><a href="#IDPModel-761"><span class="linenos">761</span></a><span class="sd">            $\mu \mapsto \mu(\{\ell\})$ is used.</span>
</span><span id="IDPModel-762"><a href="#IDPModel-762"><span class="linenos">762</span></a><span class="sd">        * **bandwidth** (`float`): The bandwidth to use in the Gaussian</span>
</span><span id="IDPModel-763"><a href="#IDPModel-763"><span class="linenos">763</span></a><span class="sd">            KDE. If omitted, the bandwidth will be calculated using</span>
</span><span id="IDPModel-764"><a href="#IDPModel-764"><span class="linenos">764</span></a><span class="sd">            Scott&#39;s Rule. The calculated value can be retrieved by</span>
</span><span id="IDPModel-765"><a href="#IDPModel-765"><span class="linenos">765</span></a><span class="sd">            accessing the `Measure.bandwidth` property of the returned</span>
</span><span id="IDPModel-766"><a href="#IDPModel-766"><span class="linenos">766</span></a><span class="sd">            object. This argument is passed directly to the</span>
</span><span id="IDPModel-767"><a href="#IDPModel-767"><span class="linenos">767</span></a><span class="sd">            `gaussian_kde` function in the `scipy.stats` module. See</span>
</span><span id="IDPModel-768"><a href="#IDPModel-768"><span class="linenos">768</span></a><span class="sd">            that documentation for further details.</span>
</span><span id="IDPModel-769"><a href="#IDPModel-769"><span class="linenos">769</span></a>
</span><span id="IDPModel-770"><a href="#IDPModel-770"><span class="linenos">770</span></a><span class="sd">        **Returns:**</span>
</span><span id="IDPModel-771"><a href="#IDPModel-771"><span class="linenos">771</span></a>
</span><span id="IDPModel-772"><a href="#IDPModel-772"><span class="linenos">772</span></a><span class="sd">        * `Measure`: The distribution of $\Phi(\mu_m)$, which is a Borel</span>
</span><span id="IDPModel-773"><a href="#IDPModel-773"><span class="linenos">773</span></a><span class="sd">            probability measure on the real line.</span>
</span><span id="IDPModel-774"><a href="#IDPModel-774"><span class="linenos">774</span></a>
</span><span id="IDPModel-775"><a href="#IDPModel-775"><span class="linenos">775</span></a><span class="sd">        **Raises:**</span>
</span><span id="IDPModel-776"><a href="#IDPModel-776"><span class="linenos">776</span></a>
</span><span id="IDPModel-777"><a href="#IDPModel-777"><span class="linenos">777</span></a><span class="sd">        * **ValueError**: If the `weightedSims` property is empty.</span>
</span><span id="IDPModel-778"><a href="#IDPModel-778"><span class="linenos">778</span></a>
</span><span id="IDPModel-779"><a href="#IDPModel-779"><span class="linenos">779</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-780"><a href="#IDPModel-780"><span class="linenos">780</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-781"><a href="#IDPModel-781"><span class="linenos">781</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No weighted simulations found&#39;</span><span class="p">)</span>
</span><span id="IDPModel-782"><a href="#IDPModel-782"><span class="linenos">782</span></a>
</span><span id="IDPModel-783"><a href="#IDPModel-783"><span class="linenos">783</span></a>        <span class="n">func</span> <span class="o">=</span> <span class="n">mapping</span> <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">meas</span><span class="p">:</span> <span class="n">meas</span><span class="p">[</span><span class="n">mapping</span><span class="p">]</span>
</span><span id="IDPModel-784"><a href="#IDPModel-784"><span class="linenos">784</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-785"><a href="#IDPModel-785"><span class="linenos">785</span></a>        <span class="n">rowNum</span> <span class="o">=</span> <span class="n">numRows</span> <span class="k">if</span> <span class="n">rowNum</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">rowNum</span>
</span><span id="IDPModel-786"><a href="#IDPModel-786"><span class="linenos">786</span></a>
</span><span id="IDPModel-787"><a href="#IDPModel-787"><span class="linenos">787</span></a>        <span class="c1"># Loop through all rows of the weighted sims unless a valid row</span>
</span><span id="IDPModel-788"><a href="#IDPModel-788"><span class="linenos">788</span></a>        <span class="c1"># number is given.</span>
</span><span id="IDPModel-789"><a href="#IDPModel-789"><span class="linenos">789</span></a>        <span class="k">if</span> <span class="n">rowNum</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="IDPModel-790"><a href="#IDPModel-790"><span class="linenos">790</span></a>            <span class="n">loopLength</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="IDPModel-791"><a href="#IDPModel-791"><span class="linenos">791</span></a>            <span class="n">loopRange</span> <span class="o">=</span> <span class="p">[</span><span class="n">rowNum</span><span class="p">]</span>
</span><span id="IDPModel-792"><a href="#IDPModel-792"><span class="linenos">792</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IDPModel-793"><a href="#IDPModel-793"><span class="linenos">793</span></a>            <span class="n">loopLength</span> <span class="o">=</span> <span class="n">numRows</span>
</span><span id="IDPModel-794"><a href="#IDPModel-794"><span class="linenos">794</span></a>            <span class="n">loopRange</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">loopLength</span><span class="p">)</span>
</span><span id="IDPModel-795"><a href="#IDPModel-795"><span class="linenos">795</span></a>
</span><span id="IDPModel-796"><a href="#IDPModel-796"><span class="linenos">796</span></a>        <span class="c1"># Created the list of weighted samples. If looping through all</span>
</span><span id="IDPModel-797"><a href="#IDPModel-797"><span class="linenos">797</span></a>        <span class="c1"># rows, the `sample` list is ordered as</span>
</span><span id="IDPModel-798"><a href="#IDPModel-798"><span class="linenos">798</span></a>        <span class="c1"># \[</span>
</span><span id="IDPModel-799"><a href="#IDPModel-799"><span class="linenos">799</span></a>        <span class="c1">#   u_1^{*, 1}, \ldots, u_M^{*, 1},</span>
</span><span id="IDPModel-800"><a href="#IDPModel-800"><span class="linenos">800</span></a>        <span class="c1">#   u_1^{*, 2}, \ldots, u_M^{*, 2},</span>
</span><span id="IDPModel-801"><a href="#IDPModel-801"><span class="linenos">801</span></a>        <span class="c1">#   \ldots,</span>
</span><span id="IDPModel-802"><a href="#IDPModel-802"><span class="linenos">802</span></a>        <span class="c1">#   u_1^{*, K}, \ldots, u_M^{*, K}</span>
</span><span id="IDPModel-803"><a href="#IDPModel-803"><span class="linenos">803</span></a>        <span class="c1"># \]</span>
</span><span id="IDPModel-804"><a href="#IDPModel-804"><span class="linenos">804</span></a>        <span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
</span><span id="IDPModel-805"><a href="#IDPModel-805"><span class="linenos">805</span></a>            <span class="n">func</span><span class="p">(</span><span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">m</span><span class="p">])</span>
</span><span id="IDPModel-806"><a href="#IDPModel-806"><span class="linenos">806</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="c1"># outer loop</span>
</span><span id="IDPModel-807"><a href="#IDPModel-807"><span class="linenos">807</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">loopRange</span>  <span class="c1"># inner loop</span>
</span><span id="IDPModel-808"><a href="#IDPModel-808"><span class="linenos">808</span></a>        <span class="p">])</span>
</span><span id="IDPModel-809"><a href="#IDPModel-809"><span class="linenos">809</span></a>        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
</span><span id="IDPModel-810"><a href="#IDPModel-810"><span class="linenos">810</span></a>            <span class="p">[</span><span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span><span class="p">]</span> <span class="o">*</span> <span class="n">loopLength</span>
</span><span id="IDPModel-811"><a href="#IDPModel-811"><span class="linenos">811</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="IDPModel-812"><a href="#IDPModel-812"><span class="linenos">812</span></a>        <span class="p">])</span>
</span><span id="IDPModel-813"><a href="#IDPModel-813"><span class="linenos">813</span></a>
</span><span id="IDPModel-814"><a href="#IDPModel-814"><span class="linenos">814</span></a>        <span class="c1"># Create the sample law</span>
</span><span id="IDPModel-815"><a href="#IDPModel-815"><span class="linenos">815</span></a>        <span class="n">sampleCDF</span> <span class="o">=</span> <span class="n">ECDFDiscrete</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="IDPModel-816"><a href="#IDPModel-816"><span class="linenos">816</span></a>        <span class="n">samplePDF</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">bandwidth</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="IDPModel-817"><a href="#IDPModel-817"><span class="linenos">817</span></a>        <span class="n">sampleLaw</span> <span class="o">=</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="IDPModel-818"><a href="#IDPModel-818"><span class="linenos">818</span></a>            <span class="n">sampleCDF</span><span class="p">,</span>
</span><span id="IDPModel-819"><a href="#IDPModel-819"><span class="linenos">819</span></a>            <span class="n">samplePDF</span><span class="p">,</span>
</span><span id="IDPModel-820"><a href="#IDPModel-820"><span class="linenos">820</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">),</span>
</span><span id="IDPModel-821"><a href="#IDPModel-821"><span class="linenos">821</span></a>            <span class="n">samplePDF</span><span class="o">.</span><span class="n">factor</span>
</span><span id="IDPModel-822"><a href="#IDPModel-822"><span class="linenos">822</span></a>        <span class="p">)</span>
</span><span id="IDPModel-823"><a href="#IDPModel-823"><span class="linenos">823</span></a>
</span><span id="IDPModel-824"><a href="#IDPModel-824"><span class="linenos">824</span></a>        <span class="c1"># If looking at a valid row number, return only the sample law</span>
</span><span id="IDPModel-825"><a href="#IDPModel-825"><span class="linenos">825</span></a>        <span class="c1"># as in (8.10). Otherwise, return a mixture as in (8.24).</span>
</span><span id="IDPModel-826"><a href="#IDPModel-826"><span class="linenos">826</span></a>        <span class="k">if</span> <span class="n">rowNum</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="IDPModel-827"><a href="#IDPModel-827"><span class="linenos">827</span></a>            <span class="k">return</span> <span class="n">sampleLaw</span>
</span><span id="IDPModel-828"><a href="#IDPModel-828"><span class="linenos">828</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-829"><a href="#IDPModel-829"><span class="linenos">829</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel-830"><a href="#IDPModel-830"><span class="linenos">830</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="o">+</span>
</span><span id="IDPModel-831"><a href="#IDPModel-831"><span class="linenos">831</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">sampleLaw</span>
</span><span id="IDPModel-832"><a href="#IDPModel-832"><span class="linenos">832</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>An IDP model on the state space $S = \{0, ..., L - 1\}$.</p>

<p>The IDP model consists of both an IDP and some observed data. See
Section 9 of the Paper for details.</p>
</div>


                            <div id="IDPModel.__init__" class="classattr">
                                        <input id="IDPModel.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">IDPModel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">colConc</span>, </span><span class="param"><span class="n">rowConc</span>, </span><span class="param"><span class="n">baseMeas</span>, </span><span class="param"><span class="n">rowCounts</span></span>)</span>

                <label class="view-source-button" for="IDPModel.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.__init__-506"><a href="#IDPModel.__init__-506"><span class="linenos">506</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colConc</span><span class="p">,</span> <span class="n">rowConc</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">):</span>
</span><span id="IDPModel.__init__-507"><a href="#IDPModel.__init__-507"><span class="linenos">507</span></a>        <span class="sd">&#39;&#39;&#39;The constructor first uses the given arguments to set the</span>
</span><span id="IDPModel.__init__-508"><a href="#IDPModel.__init__-508"><span class="linenos">508</span></a><span class="sd">        corresponding properties. If a property returns a tuple or a</span>
</span><span id="IDPModel.__init__-509"><a href="#IDPModel.__init__-509"><span class="linenos">509</span></a><span class="sd">        tuple of tuples, then the argument can be passed any</span>
</span><span id="IDPModel.__init__-510"><a href="#IDPModel.__init__-510"><span class="linenos">510</span></a><span class="sd">        `array-like` object, such as a list or a list of lists.</span>
</span><span id="IDPModel.__init__-511"><a href="#IDPModel.__init__-511"><span class="linenos">511</span></a>
</span><span id="IDPModel.__init__-512"><a href="#IDPModel.__init__-512"><span class="linenos">512</span></a><span class="sd">        For the `baseMeas` property, the corresponding argument can be</span>
</span><span id="IDPModel.__init__-513"><a href="#IDPModel.__init__-513"><span class="linenos">513</span></a><span class="sd">        passed a single floating point value `p`, in which case the</span>
</span><span id="IDPModel.__init__-514"><a href="#IDPModel.__init__-514"><span class="linenos">514</span></a><span class="sd">        property will be set to `(1 - p, p)`.</span>
</span><span id="IDPModel.__init__-515"><a href="#IDPModel.__init__-515"><span class="linenos">515</span></a>
</span><span id="IDPModel.__init__-516"><a href="#IDPModel.__init__-516"><span class="linenos">516</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.__init__-517"><a href="#IDPModel.__init__-517"><span class="linenos">517</span></a>        <span class="c1"># `baseMeas` and `rowCounts` are stored as ndarrays rather than</span>
</span><span id="IDPModel.__init__-518"><a href="#IDPModel.__init__-518"><span class="linenos">518</span></a>        <span class="c1"># lists, since vector addition fails for lists but works for</span>
</span><span id="IDPModel.__init__-519"><a href="#IDPModel.__init__-519"><span class="linenos">519</span></a>        <span class="c1"># ndarrays. This is important in the constructor of the</span>
</span><span id="IDPModel.__init__-520"><a href="#IDPModel.__init__-520"><span class="linenos">520</span></a>        <span class="c1"># `WeightedSim` class.</span>
</span><span id="IDPModel.__init__-521"><a href="#IDPModel.__init__-521"><span class="linenos">521</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="IDPModel.__init__-522"><a href="#IDPModel.__init__-522"><span class="linenos">522</span></a>
</span><span id="IDPModel.__init__-523"><a href="#IDPModel.__init__-523"><span class="linenos">523</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="IDPModel.__init__-524"><a href="#IDPModel.__init__-524"><span class="linenos">524</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">]</span>
</span><span id="IDPModel.__init__-525"><a href="#IDPModel.__init__-525"><span class="linenos">525</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="IDPModel.__init__-526"><a href="#IDPModel.__init__-526"><span class="linenos">526</span></a>        <span class="n">rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="IDPModel.__init__-527"><a href="#IDPModel.__init__-527"><span class="linenos">527</span></a>
</span><span id="IDPModel.__init__-528"><a href="#IDPModel.__init__-528"><span class="linenos">528</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="IDPModel.__init__-529"><a href="#IDPModel.__init__-529"><span class="linenos">529</span></a>            <span class="s1">&#39;colConc&#39;</span><span class="p">:</span> <span class="n">colConc</span><span class="p">,</span>
</span><span id="IDPModel.__init__-530"><a href="#IDPModel.__init__-530"><span class="linenos">530</span></a>            <span class="s1">&#39;rowConc&#39;</span><span class="p">:</span> <span class="n">rowConc</span><span class="p">,</span>
</span><span id="IDPModel.__init__-531"><a href="#IDPModel.__init__-531"><span class="linenos">531</span></a>            <span class="s1">&#39;baseMeas&#39;</span><span class="p">:</span> <span class="n">baseMeas</span>
</span><span id="IDPModel.__init__-532"><a href="#IDPModel.__init__-532"><span class="linenos">532</span></a>        <span class="p">}</span>
</span><span id="IDPModel.__init__-533"><a href="#IDPModel.__init__-533"><span class="linenos">533</span></a>
</span><span id="IDPModel.__init__-534"><a href="#IDPModel.__init__-534"><span class="linenos">534</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">rowCounts</span>
</span><span id="IDPModel.__init__-535"><a href="#IDPModel.__init__-535"><span class="linenos">535</span></a>
</span><span id="IDPModel.__init__-536"><a href="#IDPModel.__init__-536"><span class="linenos">536</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel.__init__-537"><a href="#IDPModel.__init__-537"><span class="linenos">537</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>The constructor first uses the given arguments to set the
corresponding properties. If a property returns a tuple or a
tuple of tuples, then the argument can be passed any
<code>array-like</code> object, such as a list or a list of lists.</p>

<p>For the <code><a href="#IDPModel.baseMeas">baseMeas</a></code> property, the corresponding argument can be
passed a single floating point value <code>p</code>, in which case the
property will be set to <code>(1 - p, p)</code>.</p>
</div>


                            </div>
                            <div id="IDPModel.colConc" class="classattr">
                                        <input id="IDPModel.colConc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">colConc</span>

                <label class="view-source-button" for="IDPModel.colConc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.colConc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.colConc-539"><a href="#IDPModel.colConc-539"><span class="linenos">539</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.colConc-540"><a href="#IDPModel.colConc-540"><span class="linenos">540</span></a>    <span class="k">def</span> <span class="nf">colConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.colConc-541"><a href="#IDPModel.colConc-541"><span class="linenos">541</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The column concentration parameter. Should be</span>
</span><span id="IDPModel.colConc-542"><a href="#IDPModel.colConc-542"><span class="linenos">542</span></a><span class="sd">        positive. Denoted by $\kappa$ in Section 9 of the Paper.</span>
</span><span id="IDPModel.colConc-543"><a href="#IDPModel.colConc-543"><span class="linenos">543</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.colConc-544"><a href="#IDPModel.colConc-544"><span class="linenos">544</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The column concentration parameter. Should be
positive. Denoted by $\kappa$ in Section 9 of the Paper.</p>
</div>


                            </div>
                            <div id="IDPModel.rowConc" class="classattr">
                                        <input id="IDPModel.rowConc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rowConc</span>

                <label class="view-source-button" for="IDPModel.rowConc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.rowConc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.rowConc-546"><a href="#IDPModel.rowConc-546"><span class="linenos">546</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.rowConc-547"><a href="#IDPModel.rowConc-547"><span class="linenos">547</span></a>    <span class="k">def</span> <span class="nf">rowConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.rowConc-548"><a href="#IDPModel.rowConc-548"><span class="linenos">548</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The row concentration parameter. Should be</span>
</span><span id="IDPModel.rowConc-549"><a href="#IDPModel.rowConc-549"><span class="linenos">549</span></a><span class="sd">        positive. Denoted by $\varepsilon$ in Section 9 of the Paper.</span>
</span><span id="IDPModel.rowConc-550"><a href="#IDPModel.rowConc-550"><span class="linenos">550</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.rowConc-551"><a href="#IDPModel.rowConc-551"><span class="linenos">551</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The row concentration parameter. Should be
positive. Denoted by $\varepsilon$ in Section 9 of the Paper.</p>
</div>


                            </div>
                            <div id="IDPModel.baseMeas" class="classattr">
                                        <input id="IDPModel.baseMeas-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">baseMeas</span>

                <label class="view-source-button" for="IDPModel.baseMeas-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.baseMeas"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.baseMeas-553"><a href="#IDPModel.baseMeas-553"><span class="linenos">553</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.baseMeas-554"><a href="#IDPModel.baseMeas-554"><span class="linenos">554</span></a>    <span class="k">def</span> <span class="nf">baseMeas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.baseMeas-555"><a href="#IDPModel.baseMeas-555"><span class="linenos">555</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The base probability vector. Should be a</span>
</span><span id="IDPModel.baseMeas-556"><a href="#IDPModel.baseMeas-556"><span class="linenos">556</span></a><span class="sd">        list of positive numbers that sum to 1. Denoted by</span>
</span><span id="IDPModel.baseMeas-557"><a href="#IDPModel.baseMeas-557"><span class="linenos">557</span></a><span class="sd">        $\boldsymbol{p} = (p_0, \ldots, p_{L - 1})$ in Section 9 of the</span>
</span><span id="IDPModel.baseMeas-558"><a href="#IDPModel.baseMeas-558"><span class="linenos">558</span></a><span class="sd">        Paper, where $p_\ell = \varrho(\{\ell\})$.</span>
</span><span id="IDPModel.baseMeas-559"><a href="#IDPModel.baseMeas-559"><span class="linenos">559</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.baseMeas-560"><a href="#IDPModel.baseMeas-560"><span class="linenos">560</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>float</code>): The base probability vector. Should be a
list of positive numbers that sum to 1. Denoted by
$\boldsymbol{p} = (p_0, \ldots, p_{L - 1})$ in Section 9 of the
Paper, where $p_\ell = \varrho({\ell})$.</p>
</div>


                            </div>
                            <div id="IDPModel.rowCounts" class="classattr">
                                        <input id="IDPModel.rowCounts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rowCounts</span>

                <label class="view-source-button" for="IDPModel.rowCounts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.rowCounts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.rowCounts-562"><a href="#IDPModel.rowCounts-562"><span class="linenos">562</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.rowCounts-563"><a href="#IDPModel.rowCounts-563"><span class="linenos">563</span></a>    <span class="k">def</span> <span class="nf">rowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.rowCounts-564"><a href="#IDPModel.rowCounts-564"><span class="linenos">564</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`int`)): The row counts for the observed</span>
</span><span id="IDPModel.rowCounts-565"><a href="#IDPModel.rowCounts-565"><span class="linenos">565</span></a><span class="sd">        data. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="IDPModel.rowCounts-566"><a href="#IDPModel.rowCounts-566"><span class="linenos">566</span></a><span class="sd">        `rowCounts`[`row`][`state`] is denoted by $\overline{y}_{m\ell}$</span>
</span><span id="IDPModel.rowCounts-567"><a href="#IDPModel.rowCounts-567"><span class="linenos">567</span></a><span class="sd">        in Section 9 of the Paper. It is the number of observed</span>
</span><span id="IDPModel.rowCounts-568"><a href="#IDPModel.rowCounts-568"><span class="linenos">568</span></a><span class="sd">        instances of `state` in the given row of data.</span>
</span><span id="IDPModel.rowCounts-569"><a href="#IDPModel.rowCounts-569"><span class="linenos">569</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.rowCounts-570"><a href="#IDPModel.rowCounts-570"><span class="linenos">570</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>tuple</code>(<code>int</code>)): The row counts for the observed
data. If <code>row</code> is $m - 1$ and <code>state</code> is $\ell$, then
<code><a href="#IDPModel.rowCounts">rowCounts</a></code>[<code>row</code>][<code>state</code>] is denoted by $\overline{y}_{m\ell}$
in Section 9 of the Paper. It is the number of observed
instances of <code>state</code> in the given row of data.</p>
</div>


                            </div>
                            <div id="IDPModel.likelihoods" class="classattr">
                                        <input id="IDPModel.likelihoods-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">likelihoods</span>

                <label class="view-source-button" for="IDPModel.likelihoods-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.likelihoods"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.likelihoods-572"><a href="#IDPModel.likelihoods-572"><span class="linenos">572</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.likelihoods-573"><a href="#IDPModel.likelihoods-573"><span class="linenos">573</span></a>    <span class="k">def</span> <span class="nf">likelihoods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.likelihoods-574"><a href="#IDPModel.likelihoods-574"><span class="linenos">574</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The prior likelihoods. If `row` equals</span>
</span><span id="IDPModel.likelihoods-575"><a href="#IDPModel.likelihoods-575"><span class="linenos">575</span></a><span class="sd">        $m - 1$, then `likelihoods`[`row`] is denoted by</span>
</span><span id="IDPModel.likelihoods-576"><a href="#IDPModel.likelihoods-576"><span class="linenos">576</span></a><span class="sd">        $\varrho_N(A_m)$ in Section 9 of the Paper. It is the prior</span>
</span><span id="IDPModel.likelihoods-577"><a href="#IDPModel.likelihoods-577"><span class="linenos">577</span></a><span class="sd">        probability of seeing the row counts for the given row. This</span>
</span><span id="IDPModel.likelihoods-578"><a href="#IDPModel.likelihoods-578"><span class="linenos">578</span></a><span class="sd">        property is computed by the constructor, and should not be</span>
</span><span id="IDPModel.likelihoods-579"><a href="#IDPModel.likelihoods-579"><span class="linenos">579</span></a><span class="sd">        changed.</span>
</span><span id="IDPModel.likelihoods-580"><a href="#IDPModel.likelihoods-580"><span class="linenos">580</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.likelihoods-581"><a href="#IDPModel.likelihoods-581"><span class="linenos">581</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">):</span>
</span><span id="IDPModel.likelihoods-582"><a href="#IDPModel.likelihoods-582"><span class="linenos">582</span></a>            <span class="n">rowConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel.likelihoods-583"><a href="#IDPModel.likelihoods-583"><span class="linenos">583</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="IDPModel.likelihoods-584"><a href="#IDPModel.likelihoods-584"><span class="linenos">584</span></a>            <span class="n">denom</span> <span class="o">=</span> <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">)</span>
</span><span id="IDPModel.likelihoods-585"><a href="#IDPModel.likelihoods-585"><span class="linenos">585</span></a>            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">):]:</span>
</span><span id="IDPModel.likelihoods-586"><a href="#IDPModel.likelihoods-586"><span class="linenos">586</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IDPModel.likelihoods-587"><a href="#IDPModel.likelihoods-587"><span class="linenos">587</span></a>                    <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">row</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span>
</span><span id="IDPModel.likelihoods-588"><a href="#IDPModel.likelihoods-588"><span class="linenos">588</span></a>                <span class="p">)</span>
</span><span id="IDPModel.likelihoods-589"><a href="#IDPModel.likelihoods-589"><span class="linenos">589</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>float</code>): The prior likelihoods. If <code>row</code> equals
$m - 1$, then <code><a href="#IDPModel.likelihoods">likelihoods</a></code>[<code>row</code>] is denoted by
$\varrho_N(A_m)$ in Section 9 of the Paper. It is the prior
probability of seeing the row counts for the given row. This
property is computed by the constructor, and should not be
changed.</p>
</div>


                            </div>
                            <div id="IDPModel.scale" class="classattr">
                                        <input id="IDPModel.scale-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">scale</span>

                <label class="view-source-button" for="IDPModel.scale-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.scale"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.scale-591"><a href="#IDPModel.scale-591"><span class="linenos">591</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.scale-592"><a href="#IDPModel.scale-592"><span class="linenos">592</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.scale-593"><a href="#IDPModel.scale-593"><span class="linenos">593</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The scale factor to use for weighted simulations.</span>
</span><span id="IDPModel.scale-594"><a href="#IDPModel.scale-594"><span class="linenos">594</span></a><span class="sd">        Denoted by $\log c$ in Section 9 of the Paper. Defaults to 0.</span>
</span><span id="IDPModel.scale-595"><a href="#IDPModel.scale-595"><span class="linenos">595</span></a><span class="sd">        Altering this value runs the `WeightedSim.updateScale` method on</span>
</span><span id="IDPModel.scale-596"><a href="#IDPModel.scale-596"><span class="linenos">596</span></a><span class="sd">        every simulation in the `weightedSims` property. If a</span>
</span><span id="IDPModel.scale-597"><a href="#IDPModel.scale-597"><span class="linenos">597</span></a><span class="sd">        `ValueError` occurs in this process, then no changes will be</span>
</span><span id="IDPModel.scale-598"><a href="#IDPModel.scale-598"><span class="linenos">598</span></a><span class="sd">        made, neither to the `scale` property, nor to any of the</span>
</span><span id="IDPModel.scale-599"><a href="#IDPModel.scale-599"><span class="linenos">599</span></a><span class="sd">        simulations in the `weightedSims` property.</span>
</span><span id="IDPModel.scale-600"><a href="#IDPModel.scale-600"><span class="linenos">600</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.scale-601"><a href="#IDPModel.scale-601"><span class="linenos">601</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The scale factor to use for weighted simulations.
Denoted by $\log c$ in Section 9 of the Paper. Defaults to 0.
Altering this value runs the <code><a href="#WeightedSim.updateScale">WeightedSim.updateScale</a></code> method on
every simulation in the <code><a href="#IDPModel.weightedSims">weightedSims</a></code> property. If a
<code>ValueError</code> occurs in this process, then no changes will be
made, neither to the <code><a href="#IDPModel.scale">scale</a></code> property, nor to any of the
simulations in the <code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>
</div>


                            </div>
                            <div id="IDPModel.weightedSims" class="classattr">
                                        <input id="IDPModel.weightedSims-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">weightedSims</span>

                <label class="view-source-button" for="IDPModel.weightedSims-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.weightedSims"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.weightedSims-614"><a href="#IDPModel.weightedSims-614"><span class="linenos">614</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.weightedSims-615"><a href="#IDPModel.weightedSims-615"><span class="linenos">615</span></a>    <span class="k">def</span> <span class="nf">weightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.weightedSims-616"><a href="#IDPModel.weightedSims-616"><span class="linenos">616</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`WeightedSim`): A tuple of distinct (and therefore</span>
</span><span id="IDPModel.weightedSims-617"><a href="#IDPModel.weightedSims-617"><span class="linenos">617</span></a><span class="sd">        independent) `WeightedSim` instances. `weightedSims`[k] is</span>
</span><span id="IDPModel.weightedSims-618"><a href="#IDPModel.weightedSims-618"><span class="linenos">618</span></a><span class="sd">        denoted by $(t^k, \boldsymbol{\theta}_M^{*, k})$ in Section 9 of</span>
</span><span id="IDPModel.weightedSims-619"><a href="#IDPModel.weightedSims-619"><span class="linenos">619</span></a><span class="sd">        the Paper, and has total weight $V_k$. This property is empty if</span>
</span><span id="IDPModel.weightedSims-620"><a href="#IDPModel.weightedSims-620"><span class="linenos">620</span></a><span class="sd">        the `addWeightedSims` method has never been run.</span>
</span><span id="IDPModel.weightedSims-621"><a href="#IDPModel.weightedSims-621"><span class="linenos">621</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.weightedSims-622"><a href="#IDPModel.weightedSims-622"><span class="linenos">622</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code><a href="#WeightedSim">WeightedSim</a></code>): A tuple of distinct (and therefore
independent) <code><a href="#WeightedSim">WeightedSim</a></code> instances. <code><a href="#IDPModel.weightedSims">weightedSims</a></code>[k] is
denoted by $(t^k, \boldsymbol{\theta}_M^{*, k})$ in Section 9 of
the Paper, and has total weight $V_k$. This property is empty if
the <code><a href="#IDPModel.addWeightedSims">addWeightedSims</a></code> method has never been run.</p>
</div>


                            </div>
                            <div id="IDPModel.ess" class="classattr">
                                        <input id="IDPModel.ess-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">ess</span>

                <label class="view-source-button" for="IDPModel.ess-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.ess"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.ess-624"><a href="#IDPModel.ess-624"><span class="linenos">624</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.ess-625"><a href="#IDPModel.ess-625"><span class="linenos">625</span></a>    <span class="k">def</span> <span class="nf">ess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.ess-626"><a href="#IDPModel.ess-626"><span class="linenos">626</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the sample</span>
</span><span id="IDPModel.ess-627"><a href="#IDPModel.ess-627"><span class="linenos">627</span></a><span class="sd">        variance. Denoted by $K_e&#39;&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="IDPModel.ess-628"><a href="#IDPModel.ess-628"><span class="linenos">628</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.ess-629"><a href="#IDPModel.ess-629"><span class="linenos">629</span></a>        <span class="n">numSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel.ess-630"><a href="#IDPModel.ess-630"><span class="linenos">630</span></a>        <span class="k">if</span> <span class="n">numSims</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel.ess-631"><a href="#IDPModel.ess-631"><span class="linenos">631</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="IDPModel.ess-632"><a href="#IDPModel.ess-632"><span class="linenos">632</span></a>        <span class="n">essPop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">essPop</span>
</span><span id="IDPModel.ess-633"><a href="#IDPModel.ess-633"><span class="linenos">633</span></a>        <span class="k">return</span> <span class="n">essPop</span> <span class="o">*</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="n">essPop</span><span class="o">/</span><span class="n">numSims</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The effective sample size, approximated with the sample
variance. Denoted by $K_e''$ in Section 7.2 of the Paper.</p>
</div>


                            </div>
                            <div id="IDPModel.essPop" class="classattr">
                                        <input id="IDPModel.essPop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">essPop</span>

                <label class="view-source-button" for="IDPModel.essPop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.essPop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.essPop-635"><a href="#IDPModel.essPop-635"><span class="linenos">635</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.essPop-636"><a href="#IDPModel.essPop-636"><span class="linenos">636</span></a>    <span class="k">def</span> <span class="nf">essPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.essPop-637"><a href="#IDPModel.essPop-637"><span class="linenos">637</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the population</span>
</span><span id="IDPModel.essPop-638"><a href="#IDPModel.essPop-638"><span class="linenos">638</span></a><span class="sd">        variance. Denoted by $K_e&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="IDPModel.essPop-639"><a href="#IDPModel.essPop-639"><span class="linenos">639</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.essPop-640"><a href="#IDPModel.essPop-640"><span class="linenos">640</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel.essPop-641"><a href="#IDPModel.essPop-641"><span class="linenos">641</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="IDPModel.essPop-642"><a href="#IDPModel.essPop-642"><span class="linenos">642</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel.essPop-643"><a href="#IDPModel.essPop-643"><span class="linenos">643</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span>      <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span>
</span><span id="IDPModel.essPop-644"><a href="#IDPModel.essPop-644"><span class="linenos">644</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel.essPop-645"><a href="#IDPModel.essPop-645"><span class="linenos">645</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The effective sample size, approximated with the population
variance. Denoted by $K_e'$ in Section 7.2 of the Paper.</p>
</div>


                            </div>
                            <div id="IDPModel.addRowCounts" class="classattr">
                                        <input id="IDPModel.addRowCounts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addRowCounts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">newRowCounts</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.addRowCounts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.addRowCounts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.addRowCounts-647"><a href="#IDPModel.addRowCounts-647"><span class="linenos">647</span></a>    <span class="k">def</span> <span class="nf">addRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">):</span>
</span><span id="IDPModel.addRowCounts-648"><a href="#IDPModel.addRowCounts-648"><span class="linenos">648</span></a>        <span class="sd">&#39;&#39;&#39;Adds new row counts to the `rowCounts` property and runs the</span>
</span><span id="IDPModel.addRowCounts-649"><a href="#IDPModel.addRowCounts-649"><span class="linenos">649</span></a><span class="sd">        `WeightedSim.updateRowCounts` method on every simulation in the</span>
</span><span id="IDPModel.addRowCounts-650"><a href="#IDPModel.addRowCounts-650"><span class="linenos">650</span></a><span class="sd">        `weightedSims` property. If a `ValueError` occurs in this</span>
</span><span id="IDPModel.addRowCounts-651"><a href="#IDPModel.addRowCounts-651"><span class="linenos">651</span></a><span class="sd">        process, then no changes will be made, neither to the</span>
</span><span id="IDPModel.addRowCounts-652"><a href="#IDPModel.addRowCounts-652"><span class="linenos">652</span></a><span class="sd">        `rowCounts` property, nor to any of the simulations in the</span>
</span><span id="IDPModel.addRowCounts-653"><a href="#IDPModel.addRowCounts-653"><span class="linenos">653</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel.addRowCounts-654"><a href="#IDPModel.addRowCounts-654"><span class="linenos">654</span></a>
</span><span id="IDPModel.addRowCounts-655"><a href="#IDPModel.addRowCounts-655"><span class="linenos">655</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.addRowCounts-656"><a href="#IDPModel.addRowCounts-656"><span class="linenos">656</span></a>
</span><span id="IDPModel.addRowCounts-657"><a href="#IDPModel.addRowCounts-657"><span class="linenos">657</span></a><span class="sd">        * **newRowCounts** (`array_like`): The additional row counts to</span>
</span><span id="IDPModel.addRowCounts-658"><a href="#IDPModel.addRowCounts-658"><span class="linenos">658</span></a><span class="sd">            be added. Should be an array-like object (such as a list of</span>
</span><span id="IDPModel.addRowCounts-659"><a href="#IDPModel.addRowCounts-659"><span class="linenos">659</span></a><span class="sd">            lists) with the same number of columns (states) as</span>
</span><span id="IDPModel.addRowCounts-660"><a href="#IDPModel.addRowCounts-660"><span class="linenos">660</span></a><span class="sd">            `rowCounts`.</span>
</span><span id="IDPModel.addRowCounts-661"><a href="#IDPModel.addRowCounts-661"><span class="linenos">661</span></a>
</span><span id="IDPModel.addRowCounts-662"><a href="#IDPModel.addRowCounts-662"><span class="linenos">662</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.addRowCounts-663"><a href="#IDPModel.addRowCounts-663"><span class="linenos">663</span></a>        <span class="n">oldRowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span>
</span><span id="IDPModel.addRowCounts-664"><a href="#IDPModel.addRowCounts-664"><span class="linenos">664</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">))</span>
</span><span id="IDPModel.addRowCounts-665"><a href="#IDPModel.addRowCounts-665"><span class="linenos">665</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDPModel.addRowCounts-666"><a href="#IDPModel.addRowCounts-666"><span class="linenos">666</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel.addRowCounts-667"><a href="#IDPModel.addRowCounts-667"><span class="linenos">667</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel.addRowCounts-668"><a href="#IDPModel.addRowCounts-668"><span class="linenos">668</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="IDPModel.addRowCounts-669"><a href="#IDPModel.addRowCounts-669"><span class="linenos">669</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">oldRowCounts</span>
</span><span id="IDPModel.addRowCounts-670"><a href="#IDPModel.addRowCounts-670"><span class="linenos">670</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel.addRowCounts-671"><a href="#IDPModel.addRowCounts-671"><span class="linenos">671</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel.addRowCounts-672"><a href="#IDPModel.addRowCounts-672"><span class="linenos">672</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Adds new row counts to the <code><a href="#IDPModel.rowCounts">rowCounts</a></code> property and runs the
<code><a href="#WeightedSim.updateRowCounts">WeightedSim.updateRowCounts</a></code> method on every simulation in the
<code><a href="#IDPModel.weightedSims">weightedSims</a></code> property. If a <code>ValueError</code> occurs in this
process, then no changes will be made, neither to the
<code><a href="#IDPModel.rowCounts">rowCounts</a></code> property, nor to any of the simulations in the
<code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>newRowCounts</strong> (<code>array_like</code>): The additional row counts to
be added. Should be an array-like object (such as a list of
lists) with the same number of columns (states) as
<code><a href="#IDPModel.rowCounts">rowCounts</a></code>.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.delRowCounts" class="classattr">
                                        <input id="IDPModel.delRowCounts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delRowCounts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">numRows</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.delRowCounts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.delRowCounts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.delRowCounts-674"><a href="#IDPModel.delRowCounts-674"><span class="linenos">674</span></a>    <span class="k">def</span> <span class="nf">delRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numRows</span><span class="p">):</span>
</span><span id="IDPModel.delRowCounts-675"><a href="#IDPModel.delRowCounts-675"><span class="linenos">675</span></a>        <span class="sd">&#39;&#39;&#39;Deletes the last `numRows` rows of the `rowCounts` property,</span>
</span><span id="IDPModel.delRowCounts-676"><a href="#IDPModel.delRowCounts-676"><span class="linenos">676</span></a><span class="sd">        then runs the `WeightedSim.updateRowCounts` method on every</span>
</span><span id="IDPModel.delRowCounts-677"><a href="#IDPModel.delRowCounts-677"><span class="linenos">677</span></a><span class="sd">        simulation in the `weightedSims` property.</span>
</span><span id="IDPModel.delRowCounts-678"><a href="#IDPModel.delRowCounts-678"><span class="linenos">678</span></a>
</span><span id="IDPModel.delRowCounts-679"><a href="#IDPModel.delRowCounts-679"><span class="linenos">679</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.delRowCounts-680"><a href="#IDPModel.delRowCounts-680"><span class="linenos">680</span></a>
</span><span id="IDPModel.delRowCounts-681"><a href="#IDPModel.delRowCounts-681"><span class="linenos">681</span></a><span class="sd">        * **numRows** (`int`): The number of rows to delete.</span>
</span><span id="IDPModel.delRowCounts-682"><a href="#IDPModel.delRowCounts-682"><span class="linenos">682</span></a>
</span><span id="IDPModel.delRowCounts-683"><a href="#IDPModel.delRowCounts-683"><span class="linenos">683</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.delRowCounts-684"><a href="#IDPModel.delRowCounts-684"><span class="linenos">684</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[:</span><span class="o">-</span><span class="n">numRows</span><span class="p">]</span>
</span><span id="IDPModel.delRowCounts-685"><a href="#IDPModel.delRowCounts-685"><span class="linenos">685</span></a>        <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel.delRowCounts-686"><a href="#IDPModel.delRowCounts-686"><span class="linenos">686</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Deletes the last <code>numRows</code> rows of the <code><a href="#IDPModel.rowCounts">rowCounts</a></code> property,
then runs the <code><a href="#WeightedSim.updateRowCounts">WeightedSim.updateRowCounts</a></code> method on every
simulation in the <code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>numRows</strong> (<code>int</code>): The number of rows to delete.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.addWeightedSims" class="classattr">
                                        <input id="IDPModel.addWeightedSims-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addWeightedSims</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">num</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.addWeightedSims-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.addWeightedSims"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.addWeightedSims-688"><a href="#IDPModel.addWeightedSims-688"><span class="linenos">688</span></a>    <span class="k">def</span> <span class="nf">addWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span id="IDPModel.addWeightedSims-689"><a href="#IDPModel.addWeightedSims-689"><span class="linenos">689</span></a>        <span class="sd">&#39;&#39;&#39;Creates new `WeightedSim` instances and adds them to the</span>
</span><span id="IDPModel.addWeightedSims-690"><a href="#IDPModel.addWeightedSims-690"><span class="linenos">690</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel.addWeightedSims-691"><a href="#IDPModel.addWeightedSims-691"><span class="linenos">691</span></a>
</span><span id="IDPModel.addWeightedSims-692"><a href="#IDPModel.addWeightedSims-692"><span class="linenos">692</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.addWeightedSims-693"><a href="#IDPModel.addWeightedSims-693"><span class="linenos">693</span></a><span class="sd">        </span>
</span><span id="IDPModel.addWeightedSims-694"><a href="#IDPModel.addWeightedSims-694"><span class="linenos">694</span></a><span class="sd">        * **num** (`int`): The number of distinct `WeightedSim`</span>
</span><span id="IDPModel.addWeightedSims-695"><a href="#IDPModel.addWeightedSims-695"><span class="linenos">695</span></a><span class="sd">            instances to create. If zero or negative, no instances are</span>
</span><span id="IDPModel.addWeightedSims-696"><a href="#IDPModel.addWeightedSims-696"><span class="linenos">696</span></a><span class="sd">            created.</span>
</span><span id="IDPModel.addWeightedSims-697"><a href="#IDPModel.addWeightedSims-697"><span class="linenos">697</span></a>
</span><span id="IDPModel.addWeightedSims-698"><a href="#IDPModel.addWeightedSims-698"><span class="linenos">698</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.addWeightedSims-699"><a href="#IDPModel.addWeightedSims-699"><span class="linenos">699</span></a>        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel.addWeightedSims-700"><a href="#IDPModel.addWeightedSims-700"><span class="linenos">700</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WeightedSim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
</span></pre></div>


            <div class="docstring"><p>Creates new <code><a href="#WeightedSim">WeightedSim</a></code> instances and adds them to the
<code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>num</strong> (<code>int</code>): The number of distinct <code><a href="#WeightedSim">WeightedSim</a></code>
instances to create. If zero or negative, no instances are
created.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.clearWeightedSims" class="classattr">
                                        <input id="IDPModel.clearWeightedSims-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clearWeightedSims</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.clearWeightedSims-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.clearWeightedSims"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.clearWeightedSims-702"><a href="#IDPModel.clearWeightedSims-702"><span class="linenos">702</span></a>    <span class="k">def</span> <span class="nf">clearWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.clearWeightedSims-703"><a href="#IDPModel.clearWeightedSims-703"><span class="linenos">703</span></a>        <span class="sd">&#39;&#39;&#39;Deletes all weighted simulations contained in the</span>
</span><span id="IDPModel.clearWeightedSims-704"><a href="#IDPModel.clearWeightedSims-704"><span class="linenos">704</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel.clearWeightedSims-705"><a href="#IDPModel.clearWeightedSims-705"><span class="linenos">705</span></a>
</span><span id="IDPModel.clearWeightedSims-706"><a href="#IDPModel.clearWeightedSims-706"><span class="linenos">706</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.clearWeightedSims-707"><a href="#IDPModel.clearWeightedSims-707"><span class="linenos">707</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Deletes all weighted simulations contained in the
<code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>
</div>


                            </div>
                            <div id="IDPModel.rowDistLaw" class="classattr">
                                        <input id="IDPModel.rowDistLaw-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rowDistLaw</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">rowNum</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">mapping</span><span class="o">=</span><span class="mi">1</span>, </span><span class="param"><span class="n">bandwidth</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.rowDistLaw-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.rowDistLaw"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.rowDistLaw-736"><a href="#IDPModel.rowDistLaw-736"><span class="linenos">736</span></a>    <span class="k">def</span> <span class="nf">rowDistLaw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rowNum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="IDPModel.rowDistLaw-737"><a href="#IDPModel.rowDistLaw-737"><span class="linenos">737</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Returns the law (or distribution) of a real-valued function</span>
</span><span id="IDPModel.rowDistLaw-738"><a href="#IDPModel.rowDistLaw-738"><span class="linenos">738</span></a><span class="sd">        of a row distribution. If `mapping` is $\Phi$ and `rowNum` is</span>
</span><span id="IDPModel.rowDistLaw-739"><a href="#IDPModel.rowDistLaw-739"><span class="linenos">739</span></a><span class="sd">        $m - 1$, then this method returns the law of the real-valued</span>
</span><span id="IDPModel.rowDistLaw-740"><a href="#IDPModel.rowDistLaw-740"><span class="linenos">740</span></a><span class="sd">        random variable, $\Phi(\mu_m)$. If $M$ denotes the length of</span>
</span><span id="IDPModel.rowDistLaw-741"><a href="#IDPModel.rowDistLaw-741"><span class="linenos">741</span></a><span class="sd">        `rowCounts`, then this method implements (8.10) in the Paper</span>
</span><span id="IDPModel.rowDistLaw-742"><a href="#IDPModel.rowDistLaw-742"><span class="linenos">742</span></a><span class="sd">        when $m \le M$ and it implements (8.24) when $m &gt; M$.</span>
</span><span id="IDPModel.rowDistLaw-743"><a href="#IDPModel.rowDistLaw-743"><span class="linenos">743</span></a>
</span><span id="IDPModel.rowDistLaw-744"><a href="#IDPModel.rowDistLaw-744"><span class="linenos">744</span></a><span class="sd">        The law of $\Phi(\mu_m)$ is a Borel probability measure on the</span>
</span><span id="IDPModel.rowDistLaw-745"><a href="#IDPModel.rowDistLaw-745"><span class="linenos">745</span></a><span class="sd">        real line. This method therefore returns a `Measure` object.</span>
</span><span id="IDPModel.rowDistLaw-746"><a href="#IDPModel.rowDistLaw-746"><span class="linenos">746</span></a><span class="sd">        However, the law of $\Phi(\mu_m)$ has a discrete component, so</span>
</span><span id="IDPModel.rowDistLaw-747"><a href="#IDPModel.rowDistLaw-747"><span class="linenos">747</span></a><span class="sd">        it does not have a density. The `Measure.pdf` attribute of the</span>
</span><span id="IDPModel.rowDistLaw-748"><a href="#IDPModel.rowDistLaw-748"><span class="linenos">748</span></a><span class="sd">        returned object is an approximate density, created with Gaussian</span>
</span><span id="IDPModel.rowDistLaw-749"><a href="#IDPModel.rowDistLaw-749"><span class="linenos">749</span></a><span class="sd">        kernel density estimation (KDE). More specifically, it treats a</span>
</span><span id="IDPModel.rowDistLaw-750"><a href="#IDPModel.rowDistLaw-750"><span class="linenos">750</span></a><span class="sd">        point mass $\delta_x$ as having a Gaussian density with mean $x$</span>
</span><span id="IDPModel.rowDistLaw-751"><a href="#IDPModel.rowDistLaw-751"><span class="linenos">751</span></a><span class="sd">        and standard deviation $h$, where $h$ is the &quot;bandwidth&quot; of the</span>
</span><span id="IDPModel.rowDistLaw-752"><a href="#IDPModel.rowDistLaw-752"><span class="linenos">752</span></a><span class="sd">        estimate.</span>
</span><span id="IDPModel.rowDistLaw-753"><a href="#IDPModel.rowDistLaw-753"><span class="linenos">753</span></a>
</span><span id="IDPModel.rowDistLaw-754"><a href="#IDPModel.rowDistLaw-754"><span class="linenos">754</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.rowDistLaw-755"><a href="#IDPModel.rowDistLaw-755"><span class="linenos">755</span></a>
</span><span id="IDPModel.rowDistLaw-756"><a href="#IDPModel.rowDistLaw-756"><span class="linenos">756</span></a><span class="sd">        * **rowNum** (`int` or `None`): Passing `None` to this argument</span>
</span><span id="IDPModel.rowDistLaw-757"><a href="#IDPModel.rowDistLaw-757"><span class="linenos">757</span></a><span class="sd">            is the same as passing the length of `rowCounts`.</span>
</span><span id="IDPModel.rowDistLaw-758"><a href="#IDPModel.rowDistLaw-758"><span class="linenos">758</span></a><span class="sd">        * **mapping** (`func` or `int`): The function to apply to the</span>
</span><span id="IDPModel.rowDistLaw-759"><a href="#IDPModel.rowDistLaw-759"><span class="linenos">759</span></a><span class="sd">            row distribution. Should be continuous and bounded. If an</span>
</span><span id="IDPModel.rowDistLaw-760"><a href="#IDPModel.rowDistLaw-760"><span class="linenos">760</span></a><span class="sd">            integer $\ell$ is passed to `mapping`, then the function</span>
</span><span id="IDPModel.rowDistLaw-761"><a href="#IDPModel.rowDistLaw-761"><span class="linenos">761</span></a><span class="sd">            $\mu \mapsto \mu(\{\ell\})$ is used.</span>
</span><span id="IDPModel.rowDistLaw-762"><a href="#IDPModel.rowDistLaw-762"><span class="linenos">762</span></a><span class="sd">        * **bandwidth** (`float`): The bandwidth to use in the Gaussian</span>
</span><span id="IDPModel.rowDistLaw-763"><a href="#IDPModel.rowDistLaw-763"><span class="linenos">763</span></a><span class="sd">            KDE. If omitted, the bandwidth will be calculated using</span>
</span><span id="IDPModel.rowDistLaw-764"><a href="#IDPModel.rowDistLaw-764"><span class="linenos">764</span></a><span class="sd">            Scott&#39;s Rule. The calculated value can be retrieved by</span>
</span><span id="IDPModel.rowDistLaw-765"><a href="#IDPModel.rowDistLaw-765"><span class="linenos">765</span></a><span class="sd">            accessing the `Measure.bandwidth` property of the returned</span>
</span><span id="IDPModel.rowDistLaw-766"><a href="#IDPModel.rowDistLaw-766"><span class="linenos">766</span></a><span class="sd">            object. This argument is passed directly to the</span>
</span><span id="IDPModel.rowDistLaw-767"><a href="#IDPModel.rowDistLaw-767"><span class="linenos">767</span></a><span class="sd">            `gaussian_kde` function in the `scipy.stats` module. See</span>
</span><span id="IDPModel.rowDistLaw-768"><a href="#IDPModel.rowDistLaw-768"><span class="linenos">768</span></a><span class="sd">            that documentation for further details.</span>
</span><span id="IDPModel.rowDistLaw-769"><a href="#IDPModel.rowDistLaw-769"><span class="linenos">769</span></a>
</span><span id="IDPModel.rowDistLaw-770"><a href="#IDPModel.rowDistLaw-770"><span class="linenos">770</span></a><span class="sd">        **Returns:**</span>
</span><span id="IDPModel.rowDistLaw-771"><a href="#IDPModel.rowDistLaw-771"><span class="linenos">771</span></a>
</span><span id="IDPModel.rowDistLaw-772"><a href="#IDPModel.rowDistLaw-772"><span class="linenos">772</span></a><span class="sd">        * `Measure`: The distribution of $\Phi(\mu_m)$, which is a Borel</span>
</span><span id="IDPModel.rowDistLaw-773"><a href="#IDPModel.rowDistLaw-773"><span class="linenos">773</span></a><span class="sd">            probability measure on the real line.</span>
</span><span id="IDPModel.rowDistLaw-774"><a href="#IDPModel.rowDistLaw-774"><span class="linenos">774</span></a>
</span><span id="IDPModel.rowDistLaw-775"><a href="#IDPModel.rowDistLaw-775"><span class="linenos">775</span></a><span class="sd">        **Raises:**</span>
</span><span id="IDPModel.rowDistLaw-776"><a href="#IDPModel.rowDistLaw-776"><span class="linenos">776</span></a>
</span><span id="IDPModel.rowDistLaw-777"><a href="#IDPModel.rowDistLaw-777"><span class="linenos">777</span></a><span class="sd">        * **ValueError**: If the `weightedSims` property is empty.</span>
</span><span id="IDPModel.rowDistLaw-778"><a href="#IDPModel.rowDistLaw-778"><span class="linenos">778</span></a>
</span><span id="IDPModel.rowDistLaw-779"><a href="#IDPModel.rowDistLaw-779"><span class="linenos">779</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.rowDistLaw-780"><a href="#IDPModel.rowDistLaw-780"><span class="linenos">780</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel.rowDistLaw-781"><a href="#IDPModel.rowDistLaw-781"><span class="linenos">781</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No weighted simulations found&#39;</span><span class="p">)</span>
</span><span id="IDPModel.rowDistLaw-782"><a href="#IDPModel.rowDistLaw-782"><span class="linenos">782</span></a>
</span><span id="IDPModel.rowDistLaw-783"><a href="#IDPModel.rowDistLaw-783"><span class="linenos">783</span></a>        <span class="n">func</span> <span class="o">=</span> <span class="n">mapping</span> <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">meas</span><span class="p">:</span> <span class="n">meas</span><span class="p">[</span><span class="n">mapping</span><span class="p">]</span>
</span><span id="IDPModel.rowDistLaw-784"><a href="#IDPModel.rowDistLaw-784"><span class="linenos">784</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel.rowDistLaw-785"><a href="#IDPModel.rowDistLaw-785"><span class="linenos">785</span></a>        <span class="n">rowNum</span> <span class="o">=</span> <span class="n">numRows</span> <span class="k">if</span> <span class="n">rowNum</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">rowNum</span>
</span><span id="IDPModel.rowDistLaw-786"><a href="#IDPModel.rowDistLaw-786"><span class="linenos">786</span></a>
</span><span id="IDPModel.rowDistLaw-787"><a href="#IDPModel.rowDistLaw-787"><span class="linenos">787</span></a>        <span class="c1"># Loop through all rows of the weighted sims unless a valid row</span>
</span><span id="IDPModel.rowDistLaw-788"><a href="#IDPModel.rowDistLaw-788"><span class="linenos">788</span></a>        <span class="c1"># number is given.</span>
</span><span id="IDPModel.rowDistLaw-789"><a href="#IDPModel.rowDistLaw-789"><span class="linenos">789</span></a>        <span class="k">if</span> <span class="n">rowNum</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="IDPModel.rowDistLaw-790"><a href="#IDPModel.rowDistLaw-790"><span class="linenos">790</span></a>            <span class="n">loopLength</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="IDPModel.rowDistLaw-791"><a href="#IDPModel.rowDistLaw-791"><span class="linenos">791</span></a>            <span class="n">loopRange</span> <span class="o">=</span> <span class="p">[</span><span class="n">rowNum</span><span class="p">]</span>
</span><span id="IDPModel.rowDistLaw-792"><a href="#IDPModel.rowDistLaw-792"><span class="linenos">792</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IDPModel.rowDistLaw-793"><a href="#IDPModel.rowDistLaw-793"><span class="linenos">793</span></a>            <span class="n">loopLength</span> <span class="o">=</span> <span class="n">numRows</span>
</span><span id="IDPModel.rowDistLaw-794"><a href="#IDPModel.rowDistLaw-794"><span class="linenos">794</span></a>            <span class="n">loopRange</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">loopLength</span><span class="p">)</span>
</span><span id="IDPModel.rowDistLaw-795"><a href="#IDPModel.rowDistLaw-795"><span class="linenos">795</span></a>
</span><span id="IDPModel.rowDistLaw-796"><a href="#IDPModel.rowDistLaw-796"><span class="linenos">796</span></a>        <span class="c1"># Created the list of weighted samples. If looping through all</span>
</span><span id="IDPModel.rowDistLaw-797"><a href="#IDPModel.rowDistLaw-797"><span class="linenos">797</span></a>        <span class="c1"># rows, the `sample` list is ordered as</span>
</span><span id="IDPModel.rowDistLaw-798"><a href="#IDPModel.rowDistLaw-798"><span class="linenos">798</span></a>        <span class="c1"># \[</span>
</span><span id="IDPModel.rowDistLaw-799"><a href="#IDPModel.rowDistLaw-799"><span class="linenos">799</span></a>        <span class="c1">#   u_1^{*, 1}, \ldots, u_M^{*, 1},</span>
</span><span id="IDPModel.rowDistLaw-800"><a href="#IDPModel.rowDistLaw-800"><span class="linenos">800</span></a>        <span class="c1">#   u_1^{*, 2}, \ldots, u_M^{*, 2},</span>
</span><span id="IDPModel.rowDistLaw-801"><a href="#IDPModel.rowDistLaw-801"><span class="linenos">801</span></a>        <span class="c1">#   \ldots,</span>
</span><span id="IDPModel.rowDistLaw-802"><a href="#IDPModel.rowDistLaw-802"><span class="linenos">802</span></a>        <span class="c1">#   u_1^{*, K}, \ldots, u_M^{*, K}</span>
</span><span id="IDPModel.rowDistLaw-803"><a href="#IDPModel.rowDistLaw-803"><span class="linenos">803</span></a>        <span class="c1"># \]</span>
</span><span id="IDPModel.rowDistLaw-804"><a href="#IDPModel.rowDistLaw-804"><span class="linenos">804</span></a>        <span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
</span><span id="IDPModel.rowDistLaw-805"><a href="#IDPModel.rowDistLaw-805"><span class="linenos">805</span></a>            <span class="n">func</span><span class="p">(</span><span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">m</span><span class="p">])</span>
</span><span id="IDPModel.rowDistLaw-806"><a href="#IDPModel.rowDistLaw-806"><span class="linenos">806</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="c1"># outer loop</span>
</span><span id="IDPModel.rowDistLaw-807"><a href="#IDPModel.rowDistLaw-807"><span class="linenos">807</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">loopRange</span>  <span class="c1"># inner loop</span>
</span><span id="IDPModel.rowDistLaw-808"><a href="#IDPModel.rowDistLaw-808"><span class="linenos">808</span></a>        <span class="p">])</span>
</span><span id="IDPModel.rowDistLaw-809"><a href="#IDPModel.rowDistLaw-809"><span class="linenos">809</span></a>        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
</span><span id="IDPModel.rowDistLaw-810"><a href="#IDPModel.rowDistLaw-810"><span class="linenos">810</span></a>            <span class="p">[</span><span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span><span class="p">]</span> <span class="o">*</span> <span class="n">loopLength</span>
</span><span id="IDPModel.rowDistLaw-811"><a href="#IDPModel.rowDistLaw-811"><span class="linenos">811</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="IDPModel.rowDistLaw-812"><a href="#IDPModel.rowDistLaw-812"><span class="linenos">812</span></a>        <span class="p">])</span>
</span><span id="IDPModel.rowDistLaw-813"><a href="#IDPModel.rowDistLaw-813"><span class="linenos">813</span></a>
</span><span id="IDPModel.rowDistLaw-814"><a href="#IDPModel.rowDistLaw-814"><span class="linenos">814</span></a>        <span class="c1"># Create the sample law</span>
</span><span id="IDPModel.rowDistLaw-815"><a href="#IDPModel.rowDistLaw-815"><span class="linenos">815</span></a>        <span class="n">sampleCDF</span> <span class="o">=</span> <span class="n">ECDFDiscrete</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="IDPModel.rowDistLaw-816"><a href="#IDPModel.rowDistLaw-816"><span class="linenos">816</span></a>        <span class="n">samplePDF</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">bandwidth</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="IDPModel.rowDistLaw-817"><a href="#IDPModel.rowDistLaw-817"><span class="linenos">817</span></a>        <span class="n">sampleLaw</span> <span class="o">=</span> <span class="n">Measure</span><span class="p">(</span>
</span><span id="IDPModel.rowDistLaw-818"><a href="#IDPModel.rowDistLaw-818"><span class="linenos">818</span></a>            <span class="n">sampleCDF</span><span class="p">,</span>
</span><span id="IDPModel.rowDistLaw-819"><a href="#IDPModel.rowDistLaw-819"><span class="linenos">819</span></a>            <span class="n">samplePDF</span><span class="p">,</span>
</span><span id="IDPModel.rowDistLaw-820"><a href="#IDPModel.rowDistLaw-820"><span class="linenos">820</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">),</span>
</span><span id="IDPModel.rowDistLaw-821"><a href="#IDPModel.rowDistLaw-821"><span class="linenos">821</span></a>            <span class="n">samplePDF</span><span class="o">.</span><span class="n">factor</span>
</span><span id="IDPModel.rowDistLaw-822"><a href="#IDPModel.rowDistLaw-822"><span class="linenos">822</span></a>        <span class="p">)</span>
</span><span id="IDPModel.rowDistLaw-823"><a href="#IDPModel.rowDistLaw-823"><span class="linenos">823</span></a>
</span><span id="IDPModel.rowDistLaw-824"><a href="#IDPModel.rowDistLaw-824"><span class="linenos">824</span></a>        <span class="c1"># If looking at a valid row number, return only the sample law</span>
</span><span id="IDPModel.rowDistLaw-825"><a href="#IDPModel.rowDistLaw-825"><span class="linenos">825</span></a>        <span class="c1"># as in (8.10). Otherwise, return a mixture as in (8.24).</span>
</span><span id="IDPModel.rowDistLaw-826"><a href="#IDPModel.rowDistLaw-826"><span class="linenos">826</span></a>        <span class="k">if</span> <span class="n">rowNum</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="IDPModel.rowDistLaw-827"><a href="#IDPModel.rowDistLaw-827"><span class="linenos">827</span></a>            <span class="k">return</span> <span class="n">sampleLaw</span>
</span><span id="IDPModel.rowDistLaw-828"><a href="#IDPModel.rowDistLaw-828"><span class="linenos">828</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel.rowDistLaw-829"><a href="#IDPModel.rowDistLaw-829"><span class="linenos">829</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel.rowDistLaw-830"><a href="#IDPModel.rowDistLaw-830"><span class="linenos">830</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="o">+</span>
</span><span id="IDPModel.rowDistLaw-831"><a href="#IDPModel.rowDistLaw-831"><span class="linenos">831</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">sampleLaw</span>
</span><span id="IDPModel.rowDistLaw-832"><a href="#IDPModel.rowDistLaw-832"><span class="linenos">832</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the law (or distribution) of a real-valued function
of a row distribution. If <code>mapping</code> is $\Phi$ and <code>rowNum</code> is
$m - 1$, then this method returns the law of the real-valued
random variable, $\Phi(\mu_m)$. If $M$ denotes the length of
<code><a href="#IDPModel.rowCounts">rowCounts</a></code>, then this method implements (8.10) in the Paper
when $m \le M$ and it implements (8.24) when $m &gt; M$.</p>

<p>The law of $\Phi(\mu_m)$ is a Borel probability measure on the
real line. This method therefore returns a <code><a href="#Measure">Measure</a></code> object.
However, the law of $\Phi(\mu_m)$ has a discrete component, so
it does not have a density. The <code><a href="#Measure.pdf">Measure.pdf</a></code> attribute of the
returned object is an approximate density, created with Gaussian
kernel density estimation (KDE). More specifically, it treats a
point mass $\delta_x$ as having a Gaussian density with mean $x$
and standard deviation $h$, where $h$ is the "bandwidth" of the
estimate.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>rowNum</strong> (<code>int</code> or <code>None</code>): Passing <code>None</code> to this argument
is the same as passing the length of <code><a href="#IDPModel.rowCounts">rowCounts</a></code>.</li>
<li><strong>mapping</strong> (<code>func</code> or <code>int</code>): The function to apply to the
row distribution. Should be continuous and bounded. If an
integer $\ell$ is passed to <code>mapping</code>, then the function
$\mu \mapsto \mu({\ell})$ is used.</li>
<li><strong>bandwidth</strong> (<code>float</code>): The bandwidth to use in the Gaussian
KDE. If omitted, the bandwidth will be calculated using
Scott's Rule. The calculated value can be retrieved by
accessing the <code><a href="#Measure.bandwidth">Measure.bandwidth</a></code> property of the returned
object. This argument is passed directly to the
<code>gaussian_kde</code> function in the <code>scipy.stats</code> module. See
that documentation for further details.</li>
</ul>

<p><strong>Returns:</strong></p>

<ul>
<li><code><a href="#Measure">Measure</a></code>: The distribution of $\Phi(\mu_m)$, which is a Borel
probability measure on the real line.</li>
</ul>

<p><strong>Raises:</strong></p>

<ul>
<li><strong>ValueError</strong>: If the <code><a href="#IDPModel.weightedSims">weightedSims</a></code> property is empty.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="WeightedSim">
                            <input id="WeightedSim-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">WeightedSim</span>:

                <label class="view-source-button" for="WeightedSim-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim-834"><a href="#WeightedSim-834"><span class="linenos">834</span></a><span class="k">class</span> <span class="nc">WeightedSim</span><span class="p">:</span>
</span><span id="WeightedSim-835"><a href="#WeightedSim-835"><span class="linenos">835</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;A weighted simulation for an `IDPModel` instance.</span>
</span><span id="WeightedSim-836"><a href="#WeightedSim-836"><span class="linenos">836</span></a>
</span><span id="WeightedSim-837"><a href="#WeightedSim-837"><span class="linenos">837</span></a><span class="sd">    In the Paper, a weighted simulation is determined by the pair $(t,</span>
</span><span id="WeightedSim-838"><a href="#WeightedSim-838"><span class="linenos">838</span></a><span class="sd">    \boldsymbol{\theta}_M^*)$ and has total weight $V$.</span>
</span><span id="WeightedSim-839"><a href="#WeightedSim-839"><span class="linenos">839</span></a>
</span><span id="WeightedSim-840"><a href="#WeightedSim-840"><span class="linenos">840</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="WeightedSim-841"><a href="#WeightedSim-841"><span class="linenos">841</span></a>
</span><span id="WeightedSim-842"><a href="#WeightedSim-842"><span class="linenos">842</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idpModel</span><span class="p">):</span>
</span><span id="WeightedSim-843"><a href="#WeightedSim-843"><span class="linenos">843</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Uses the given argument to set the corresponding property,</span>
</span><span id="WeightedSim-844"><a href="#WeightedSim-844"><span class="linenos">844</span></a><span class="sd">        then runs the `updateRowCounts` method.</span>
</span><span id="WeightedSim-845"><a href="#WeightedSim-845"><span class="linenos">845</span></a>
</span><span id="WeightedSim-846"><a href="#WeightedSim-846"><span class="linenos">846</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-847"><a href="#WeightedSim-847"><span class="linenos">847</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span> <span class="o">=</span> <span class="n">idpModel</span>
</span><span id="WeightedSim-848"><a href="#WeightedSim-848"><span class="linenos">848</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="c1"># stored copy to detect changes</span>
</span><span id="WeightedSim-849"><a href="#WeightedSim-849"><span class="linenos">849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WeightedSim-850"><a href="#WeightedSim-850"><span class="linenos">850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WeightedSim-851"><a href="#WeightedSim-851"><span class="linenos">851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># the natural logarithm of the total weight</span>
</span><span id="WeightedSim-852"><a href="#WeightedSim-852"><span class="linenos">852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="WeightedSim-853"><a href="#WeightedSim-853"><span class="linenos">853</span></a>
</span><span id="WeightedSim-854"><a href="#WeightedSim-854"><span class="linenos">854</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim-855"><a href="#WeightedSim-855"><span class="linenos">855</span></a>    <span class="k">def</span> <span class="nf">idpModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-856"><a href="#WeightedSim-856"><span class="linenos">856</span></a>        <span class="sd">&#39;&#39;&#39;`IDPModel`: The IDP model for which the weighted simulation</span>
</span><span id="WeightedSim-857"><a href="#WeightedSim-857"><span class="linenos">857</span></a><span class="sd">        is being created.</span>
</span><span id="WeightedSim-858"><a href="#WeightedSim-858"><span class="linenos">858</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-859"><a href="#WeightedSim-859"><span class="linenos">859</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span>
</span><span id="WeightedSim-860"><a href="#WeightedSim-860"><span class="linenos">860</span></a>
</span><span id="WeightedSim-861"><a href="#WeightedSim-861"><span class="linenos">861</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim-862"><a href="#WeightedSim-862"><span class="linenos">862</span></a>    <span class="k">def</span> <span class="nf">rowWeights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-863"><a href="#WeightedSim-863"><span class="linenos">863</span></a>        <span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): The triangular array of row</span>
</span><span id="WeightedSim-864"><a href="#WeightedSim-864"><span class="linenos">864</span></a><span class="sd">        weights for the weighted simulation. Denoted by $t$ in Section 9</span>
</span><span id="WeightedSim-865"><a href="#WeightedSim-865"><span class="linenos">865</span></a><span class="sd">        of the Paper.</span>
</span><span id="WeightedSim-866"><a href="#WeightedSim-866"><span class="linenos">866</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-867"><a href="#WeightedSim-867"><span class="linenos">867</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">)</span>
</span><span id="WeightedSim-868"><a href="#WeightedSim-868"><span class="linenos">868</span></a>
</span><span id="WeightedSim-869"><a href="#WeightedSim-869"><span class="linenos">869</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim-870"><a href="#WeightedSim-870"><span class="linenos">870</span></a>    <span class="k">def</span> <span class="nf">rowDistSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-871"><a href="#WeightedSim-871"><span class="linenos">871</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): A tuple of simulated row</span>
</span><span id="WeightedSim-872"><a href="#WeightedSim-872"><span class="linenos">872</span></a><span class="sd">        distributions. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="WeightedSim-873"><a href="#WeightedSim-873"><span class="linenos">873</span></a><span class="sd">        `rowDistSims`[`row`][`state`] is denoted by $\theta_{m\ell}^*</span>
</span><span id="WeightedSim-874"><a href="#WeightedSim-874"><span class="linenos">874</span></a><span class="sd">        = u_m^*(\{\ell\})$ in Section 9 of the Paper.</span>
</span><span id="WeightedSim-875"><a href="#WeightedSim-875"><span class="linenos">875</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-876"><a href="#WeightedSim-876"><span class="linenos">876</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="WeightedSim-877"><a href="#WeightedSim-877"><span class="linenos">877</span></a>
</span><span id="WeightedSim-878"><a href="#WeightedSim-878"><span class="linenos">878</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim-879"><a href="#WeightedSim-879"><span class="linenos">879</span></a>    <span class="k">def</span> <span class="nf">totalWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-880"><a href="#WeightedSim-880"><span class="linenos">880</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The total weight of the simulation. Denoted by $V$</span>
</span><span id="WeightedSim-881"><a href="#WeightedSim-881"><span class="linenos">881</span></a><span class="sd">        in Section 9 of the Paper.</span>
</span><span id="WeightedSim-882"><a href="#WeightedSim-882"><span class="linenos">882</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-883"><a href="#WeightedSim-883"><span class="linenos">883</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span>
</span><span id="WeightedSim-884"><a href="#WeightedSim-884"><span class="linenos">884</span></a>
</span><span id="WeightedSim-885"><a href="#WeightedSim-885"><span class="linenos">885</span></a>    <span class="k">def</span> <span class="nf">updateRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-886"><a href="#WeightedSim-886"><span class="linenos">886</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `rowWeights`, `rowDistSims`, and `totalWeight`</span>
</span><span id="WeightedSim-887"><a href="#WeightedSim-887"><span class="linenos">887</span></a><span class="sd">        properties, if necessary, so that the number of rows in</span>
</span><span id="WeightedSim-888"><a href="#WeightedSim-888"><span class="linenos">888</span></a><span class="sd">        `rowDistSims` is the same as the number of rows in the</span>
</span><span id="WeightedSim-889"><a href="#WeightedSim-889"><span class="linenos">889</span></a><span class="sd">        `IDPModel.rowCounts` property of the associated `idpModel`</span>
</span><span id="WeightedSim-890"><a href="#WeightedSim-890"><span class="linenos">890</span></a><span class="sd">        instance.</span>
</span><span id="WeightedSim-891"><a href="#WeightedSim-891"><span class="linenos">891</span></a>
</span><span id="WeightedSim-892"><a href="#WeightedSim-892"><span class="linenos">892</span></a><span class="sd">        **Raises:**</span>
</span><span id="WeightedSim-893"><a href="#WeightedSim-893"><span class="linenos">893</span></a>
</span><span id="WeightedSim-894"><a href="#WeightedSim-894"><span class="linenos">894</span></a><span class="sd">        * **ValueError**: If the computed value for the `totalWeight`</span>
</span><span id="WeightedSim-895"><a href="#WeightedSim-895"><span class="linenos">895</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="WeightedSim-896"><a href="#WeightedSim-896"><span class="linenos">896</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="WeightedSim-897"><a href="#WeightedSim-897"><span class="linenos">897</span></a>
</span><span id="WeightedSim-898"><a href="#WeightedSim-898"><span class="linenos">898</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-899"><a href="#WeightedSim-899"><span class="linenos">899</span></a>        <span class="c1"># If $L$ is the number of states in the IDP, then the case</span>
</span><span id="WeightedSim-900"><a href="#WeightedSim-900"><span class="linenos">900</span></a>        <span class="c1"># $L = 2$ is separated from the case $2 &lt; L &lt; \infty$ to speed</span>
</span><span id="WeightedSim-901"><a href="#WeightedSim-901"><span class="linenos">901</span></a>        <span class="c1"># up code execution.</span>
</span><span id="WeightedSim-902"><a href="#WeightedSim-902"><span class="linenos">902</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="WeightedSim-903"><a href="#WeightedSim-903"><span class="linenos">903</span></a>        <span class="n">numStates</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="WeightedSim-904"><a href="#WeightedSim-904"><span class="linenos">904</span></a>
</span><span id="WeightedSim-905"><a href="#WeightedSim-905"><span class="linenos">905</span></a>        <span class="c1"># expand properties if row counts have been added</span>
</span><span id="WeightedSim-906"><a href="#WeightedSim-906"><span class="linenos">906</span></a>        <span class="n">numOldSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="WeightedSim-907"><a href="#WeightedSim-907"><span class="linenos">907</span></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">counts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="n">numOldSims</span><span class="p">:]):</span>
</span><span id="WeightedSim-908"><a href="#WeightedSim-908"><span class="linenos">908</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">numOldSims</span> <span class="o">+</span> <span class="n">_</span>
</span><span id="WeightedSim-909"><a href="#WeightedSim-909"><span class="linenos">909</span></a>
</span><span id="WeightedSim-910"><a href="#WeightedSim-910"><span class="linenos">910</span></a>            <span class="c1"># build `rowWeights[m]`</span>
</span><span id="WeightedSim-911"><a href="#WeightedSim-911"><span class="linenos">911</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="WeightedSim-912"><a href="#WeightedSim-912"><span class="linenos">912</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="WeightedSim-913"><a href="#WeightedSim-913"><span class="linenos">913</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="WeightedSim-914"><a href="#WeightedSim-914"><span class="linenos">914</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim-915"><a href="#WeightedSim-915"><span class="linenos">915</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span>
</span><span id="WeightedSim-916"><a href="#WeightedSim-916"><span class="linenos">916</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim-917"><a href="#WeightedSim-917"><span class="linenos">917</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim-918"><a href="#WeightedSim-918"><span class="linenos">918</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim-919"><a href="#WeightedSim-919"><span class="linenos">919</span></a>                    <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim-920"><a href="#WeightedSim-920"><span class="linenos">920</span></a>                    <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numStates</span><span class="p">):</span>
</span><span id="WeightedSim-921"><a href="#WeightedSim-921"><span class="linenos">921</span></a>                        <span class="n">weight</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">state</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="WeightedSim-922"><a href="#WeightedSim-922"><span class="linenos">922</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
</span><span id="WeightedSim-923"><a href="#WeightedSim-923"><span class="linenos">923</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim-924"><a href="#WeightedSim-924"><span class="linenos">924</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
</span><span id="WeightedSim-925"><a href="#WeightedSim-925"><span class="linenos">925</span></a>            <span class="p">)</span>
</span><span id="WeightedSim-926"><a href="#WeightedSim-926"><span class="linenos">926</span></a>
</span><span id="WeightedSim-927"><a href="#WeightedSim-927"><span class="linenos">927</span></a>            <span class="c1"># build `rowDistSims[m]`</span>
</span><span id="WeightedSim-928"><a href="#WeightedSim-928"><span class="linenos">928</span></a>            <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim-929"><a href="#WeightedSim-929"><span class="linenos">929</span></a>            <span class="k">if</span> <span class="n">choice</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
</span><span id="WeightedSim-930"><a href="#WeightedSim-930"><span class="linenos">930</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">choice</span><span class="p">])</span>
</span><span id="WeightedSim-931"><a href="#WeightedSim-931"><span class="linenos">931</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim-932"><a href="#WeightedSim-932"><span class="linenos">932</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="WeightedSim-933"><a href="#WeightedSim-933"><span class="linenos">933</span></a>                    <span class="n">rowDistSim</span> <span class="o">=</span> <span class="n">beta</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="WeightedSim-934"><a href="#WeightedSim-934"><span class="linenos">934</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="WeightedSim-935"><a href="#WeightedSim-935"><span class="linenos">935</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim-936"><a href="#WeightedSim-936"><span class="linenos">936</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim-937"><a href="#WeightedSim-937"><span class="linenos">937</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rowDistSim</span><span class="p">,</span> <span class="n">rowDistSim</span><span class="p">])</span>
</span><span id="WeightedSim-938"><a href="#WeightedSim-938"><span class="linenos">938</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim-939"><a href="#WeightedSim-939"><span class="linenos">939</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim-940"><a href="#WeightedSim-940"><span class="linenos">940</span></a>                        <span class="c1"># vector sum fails for lists, works for ndarray</span>
</span><span id="WeightedSim-941"><a href="#WeightedSim-941"><span class="linenos">941</span></a>                        <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="WeightedSim-942"><a href="#WeightedSim-942"><span class="linenos">942</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">counts</span>
</span><span id="WeightedSim-943"><a href="#WeightedSim-943"><span class="linenos">943</span></a>                        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim-944"><a href="#WeightedSim-944"><span class="linenos">944</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim-945"><a href="#WeightedSim-945"><span class="linenos">945</span></a>
</span><span id="WeightedSim-946"><a href="#WeightedSim-946"><span class="linenos">946</span></a>            <span class="c1"># build `totalWeight`</span>
</span><span id="WeightedSim-947"><a href="#WeightedSim-947"><span class="linenos">947</span></a>            <span class="c1">#</span>
</span><span id="WeightedSim-948"><a href="#WeightedSim-948"><span class="linenos">948</span></a>            <span class="c1"># The m-th iteration of the `for` loop multiplies the</span>
</span><span id="WeightedSim-949"><a href="#WeightedSim-949"><span class="linenos">949</span></a>            <span class="c1"># previous value of `totalWeight` by the (m + 1)-th factor</span>
</span><span id="WeightedSim-950"><a href="#WeightedSim-950"><span class="linenos">950</span></a>            <span class="c1"># in the definition of $V$ in Section 9 of the Paper.</span>
</span><span id="WeightedSim-951"><a href="#WeightedSim-951"><span class="linenos">951</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="WeightedSim-952"><a href="#WeightedSim-952"><span class="linenos">952</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="WeightedSim-953"><a href="#WeightedSim-953"><span class="linenos">953</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="WeightedSim-954"><a href="#WeightedSim-954"><span class="linenos">954</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="WeightedSim-955"><a href="#WeightedSim-955"><span class="linenos">955</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="WeightedSim-956"><a href="#WeightedSim-956"><span class="linenos">956</span></a>            <span class="p">)</span>
</span><span id="WeightedSim-957"><a href="#WeightedSim-957"><span class="linenos">957</span></a>
</span><span id="WeightedSim-958"><a href="#WeightedSim-958"><span class="linenos">958</span></a>        <span class="c1"># check that total weight is not out of bounds</span>
</span><span id="WeightedSim-959"><a href="#WeightedSim-959"><span class="linenos">959</span></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="WeightedSim-960"><a href="#WeightedSim-960"><span class="linenos">960</span></a>            <span class="n">adj</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="WeightedSim-961"><a href="#WeightedSim-961"><span class="linenos">961</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="WeightedSim-962"><a href="#WeightedSim-962"><span class="linenos">962</span></a>                <span class="s1">&#39;Simulation weight out of bounds.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="WeightedSim-963"><a href="#WeightedSim-963"><span class="linenos">963</span></a>                <span class="sa">f</span><span class="s1">&#39;Try adjusting scale factor by </span><span class="si">{</span><span class="n">adj</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="WeightedSim-964"><a href="#WeightedSim-964"><span class="linenos">964</span></a>            <span class="p">)</span>
</span><span id="WeightedSim-965"><a href="#WeightedSim-965"><span class="linenos">965</span></a>
</span><span id="WeightedSim-966"><a href="#WeightedSim-966"><span class="linenos">966</span></a>        <span class="c1"># trim properties if row counts have been removed</span>
</span><span id="WeightedSim-967"><a href="#WeightedSim-967"><span class="linenos">967</span></a>        <span class="k">if</span> <span class="n">numOldSims</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">):</span>
</span><span id="WeightedSim-968"><a href="#WeightedSim-968"><span class="linenos">968</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
</span><span id="WeightedSim-969"><a href="#WeightedSim-969"><span class="linenos">969</span></a>                <span class="n">numOldSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="WeightedSim-970"><a href="#WeightedSim-970"><span class="linenos">970</span></a>            <span class="p">):</span>
</span><span id="WeightedSim-971"><a href="#WeightedSim-971"><span class="linenos">971</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="WeightedSim-972"><a href="#WeightedSim-972"><span class="linenos">972</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="WeightedSim-973"><a href="#WeightedSim-973"><span class="linenos">973</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="WeightedSim-974"><a href="#WeightedSim-974"><span class="linenos">974</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="WeightedSim-975"><a href="#WeightedSim-975"><span class="linenos">975</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="WeightedSim-976"><a href="#WeightedSim-976"><span class="linenos">976</span></a>                <span class="p">)</span>
</span><span id="WeightedSim-977"><a href="#WeightedSim-977"><span class="linenos">977</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim-978"><a href="#WeightedSim-978"><span class="linenos">978</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim-979"><a href="#WeightedSim-979"><span class="linenos">979</span></a>
</span><span id="WeightedSim-980"><a href="#WeightedSim-980"><span class="linenos">980</span></a>    <span class="k">def</span> <span class="nf">updateScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-981"><a href="#WeightedSim-981"><span class="linenos">981</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `totalWeight` property, if necessary, to account</span>
</span><span id="WeightedSim-982"><a href="#WeightedSim-982"><span class="linenos">982</span></a><span class="sd">        for a change in the `IDPModel.scale` property of the associated</span>
</span><span id="WeightedSim-983"><a href="#WeightedSim-983"><span class="linenos">983</span></a><span class="sd">        `idpModel` instance.</span>
</span><span id="WeightedSim-984"><a href="#WeightedSim-984"><span class="linenos">984</span></a>
</span><span id="WeightedSim-985"><a href="#WeightedSim-985"><span class="linenos">985</span></a><span class="sd">        **Raises:**</span>
</span><span id="WeightedSim-986"><a href="#WeightedSim-986"><span class="linenos">986</span></a>
</span><span id="WeightedSim-987"><a href="#WeightedSim-987"><span class="linenos">987</span></a><span class="sd">        * **ValueError**: If the new value for the `totalWeight`</span>
</span><span id="WeightedSim-988"><a href="#WeightedSim-988"><span class="linenos">988</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="WeightedSim-989"><a href="#WeightedSim-989"><span class="linenos">989</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="WeightedSim-990"><a href="#WeightedSim-990"><span class="linenos">990</span></a>
</span><span id="WeightedSim-991"><a href="#WeightedSim-991"><span class="linenos">991</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-992"><a href="#WeightedSim-992"><span class="linenos">992</span></a>        <span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="WeightedSim-993"><a href="#WeightedSim-993"><span class="linenos">993</span></a>        <span class="k">if</span> <span class="n">diff</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="WeightedSim-994"><a href="#WeightedSim-994"><span class="linenos">994</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span> <span class="o">*</span> <span class="n">diff</span>
</span><span id="WeightedSim-995"><a href="#WeightedSim-995"><span class="linenos">995</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span>
</span><span id="WeightedSim-996"><a href="#WeightedSim-996"><span class="linenos">996</span></a>            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="WeightedSim-997"><a href="#WeightedSim-997"><span class="linenos">997</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="WeightedSim-998"><a href="#WeightedSim-998"><span class="linenos">998</span></a>                    <span class="s1">&#39;Resulting simulation weight is out of bounds&#39;</span>
</span><span id="WeightedSim-999"><a href="#WeightedSim-999"><span class="linenos">999</span></a>                <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A weighted simulation for an <code><a href="#IDPModel">IDPModel</a></code> instance.</p>

<p>In the Paper, a weighted simulation is determined by the pair $(t,
\boldsymbol{\theta}_M^*)$ and has total weight $V$.</p>
</div>


                            <div id="WeightedSim.__init__" class="classattr">
                                        <input id="WeightedSim.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">WeightedSim</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">idpModel</span></span>)</span>

                <label class="view-source-button" for="WeightedSim.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.__init__-842"><a href="#WeightedSim.__init__-842"><span class="linenos">842</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idpModel</span><span class="p">):</span>
</span><span id="WeightedSim.__init__-843"><a href="#WeightedSim.__init__-843"><span class="linenos">843</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Uses the given argument to set the corresponding property,</span>
</span><span id="WeightedSim.__init__-844"><a href="#WeightedSim.__init__-844"><span class="linenos">844</span></a><span class="sd">        then runs the `updateRowCounts` method.</span>
</span><span id="WeightedSim.__init__-845"><a href="#WeightedSim.__init__-845"><span class="linenos">845</span></a>
</span><span id="WeightedSim.__init__-846"><a href="#WeightedSim.__init__-846"><span class="linenos">846</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.__init__-847"><a href="#WeightedSim.__init__-847"><span class="linenos">847</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span> <span class="o">=</span> <span class="n">idpModel</span>
</span><span id="WeightedSim.__init__-848"><a href="#WeightedSim.__init__-848"><span class="linenos">848</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="c1"># stored copy to detect changes</span>
</span><span id="WeightedSim.__init__-849"><a href="#WeightedSim.__init__-849"><span class="linenos">849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WeightedSim.__init__-850"><a href="#WeightedSim.__init__-850"><span class="linenos">850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WeightedSim.__init__-851"><a href="#WeightedSim.__init__-851"><span class="linenos">851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># the natural logarithm of the total weight</span>
</span><span id="WeightedSim.__init__-852"><a href="#WeightedSim.__init__-852"><span class="linenos">852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Uses the given argument to set the corresponding property,
then runs the <code><a href="#WeightedSim.updateRowCounts">updateRowCounts</a></code> method.</p>
</div>


                            </div>
                            <div id="WeightedSim.idpModel" class="classattr">
                                        <input id="WeightedSim.idpModel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">idpModel</span>

                <label class="view-source-button" for="WeightedSim.idpModel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.idpModel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.idpModel-854"><a href="#WeightedSim.idpModel-854"><span class="linenos">854</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim.idpModel-855"><a href="#WeightedSim.idpModel-855"><span class="linenos">855</span></a>    <span class="k">def</span> <span class="nf">idpModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.idpModel-856"><a href="#WeightedSim.idpModel-856"><span class="linenos">856</span></a>        <span class="sd">&#39;&#39;&#39;`IDPModel`: The IDP model for which the weighted simulation</span>
</span><span id="WeightedSim.idpModel-857"><a href="#WeightedSim.idpModel-857"><span class="linenos">857</span></a><span class="sd">        is being created.</span>
</span><span id="WeightedSim.idpModel-858"><a href="#WeightedSim.idpModel-858"><span class="linenos">858</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.idpModel-859"><a href="#WeightedSim.idpModel-859"><span class="linenos">859</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span>
</span></pre></div>


            <div class="docstring"><p><code><a href="#IDPModel">IDPModel</a></code>: The IDP model for which the weighted simulation
is being created.</p>
</div>


                            </div>
                            <div id="WeightedSim.rowWeights" class="classattr">
                                        <input id="WeightedSim.rowWeights-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rowWeights</span>

                <label class="view-source-button" for="WeightedSim.rowWeights-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.rowWeights"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.rowWeights-861"><a href="#WeightedSim.rowWeights-861"><span class="linenos">861</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim.rowWeights-862"><a href="#WeightedSim.rowWeights-862"><span class="linenos">862</span></a>    <span class="k">def</span> <span class="nf">rowWeights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.rowWeights-863"><a href="#WeightedSim.rowWeights-863"><span class="linenos">863</span></a>        <span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): The triangular array of row</span>
</span><span id="WeightedSim.rowWeights-864"><a href="#WeightedSim.rowWeights-864"><span class="linenos">864</span></a><span class="sd">        weights for the weighted simulation. Denoted by $t$ in Section 9</span>
</span><span id="WeightedSim.rowWeights-865"><a href="#WeightedSim.rowWeights-865"><span class="linenos">865</span></a><span class="sd">        of the Paper.</span>
</span><span id="WeightedSim.rowWeights-866"><a href="#WeightedSim.rowWeights-866"><span class="linenos">866</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.rowWeights-867"><a href="#WeightedSim.rowWeights-867"><span class="linenos">867</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>tuple</code>(<code>float</code>)): The triangular array of row
weights for the weighted simulation. Denoted by $t$ in Section 9
of the Paper.</p>
</div>


                            </div>
                            <div id="WeightedSim.rowDistSims" class="classattr">
                                        <input id="WeightedSim.rowDistSims-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rowDistSims</span>

                <label class="view-source-button" for="WeightedSim.rowDistSims-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.rowDistSims"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.rowDistSims-869"><a href="#WeightedSim.rowDistSims-869"><span class="linenos">869</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim.rowDistSims-870"><a href="#WeightedSim.rowDistSims-870"><span class="linenos">870</span></a>    <span class="k">def</span> <span class="nf">rowDistSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.rowDistSims-871"><a href="#WeightedSim.rowDistSims-871"><span class="linenos">871</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): A tuple of simulated row</span>
</span><span id="WeightedSim.rowDistSims-872"><a href="#WeightedSim.rowDistSims-872"><span class="linenos">872</span></a><span class="sd">        distributions. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="WeightedSim.rowDistSims-873"><a href="#WeightedSim.rowDistSims-873"><span class="linenos">873</span></a><span class="sd">        `rowDistSims`[`row`][`state`] is denoted by $\theta_{m\ell}^*</span>
</span><span id="WeightedSim.rowDistSims-874"><a href="#WeightedSim.rowDistSims-874"><span class="linenos">874</span></a><span class="sd">        = u_m^*(\{\ell\})$ in Section 9 of the Paper.</span>
</span><span id="WeightedSim.rowDistSims-875"><a href="#WeightedSim.rowDistSims-875"><span class="linenos">875</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.rowDistSims-876"><a href="#WeightedSim.rowDistSims-876"><span class="linenos">876</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>tuple</code>(<code>float</code>)): A tuple of simulated row
distributions. If <code>row</code> is $m - 1$ and <code>state</code> is $\ell$, then
<code><a href="#WeightedSim.rowDistSims">rowDistSims</a></code>[<code>row</code>][<code>state</code>] is denoted by $\theta_{m\ell}^*
= u_m^*({\ell})$ in Section 9 of the Paper.</p>
</div>


                            </div>
                            <div id="WeightedSim.totalWeight" class="classattr">
                                        <input id="WeightedSim.totalWeight-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">totalWeight</span>

                <label class="view-source-button" for="WeightedSim.totalWeight-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.totalWeight"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.totalWeight-878"><a href="#WeightedSim.totalWeight-878"><span class="linenos">878</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim.totalWeight-879"><a href="#WeightedSim.totalWeight-879"><span class="linenos">879</span></a>    <span class="k">def</span> <span class="nf">totalWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.totalWeight-880"><a href="#WeightedSim.totalWeight-880"><span class="linenos">880</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The total weight of the simulation. Denoted by $V$</span>
</span><span id="WeightedSim.totalWeight-881"><a href="#WeightedSim.totalWeight-881"><span class="linenos">881</span></a><span class="sd">        in Section 9 of the Paper.</span>
</span><span id="WeightedSim.totalWeight-882"><a href="#WeightedSim.totalWeight-882"><span class="linenos">882</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.totalWeight-883"><a href="#WeightedSim.totalWeight-883"><span class="linenos">883</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The total weight of the simulation. Denoted by $V$
in Section 9 of the Paper.</p>
</div>


                            </div>
                            <div id="WeightedSim.updateRowCounts" class="classattr">
                                        <input id="WeightedSim.updateRowCounts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">updateRowCounts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="WeightedSim.updateRowCounts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.updateRowCounts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.updateRowCounts-885"><a href="#WeightedSim.updateRowCounts-885"><span class="linenos">885</span></a>    <span class="k">def</span> <span class="nf">updateRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-886"><a href="#WeightedSim.updateRowCounts-886"><span class="linenos">886</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `rowWeights`, `rowDistSims`, and `totalWeight`</span>
</span><span id="WeightedSim.updateRowCounts-887"><a href="#WeightedSim.updateRowCounts-887"><span class="linenos">887</span></a><span class="sd">        properties, if necessary, so that the number of rows in</span>
</span><span id="WeightedSim.updateRowCounts-888"><a href="#WeightedSim.updateRowCounts-888"><span class="linenos">888</span></a><span class="sd">        `rowDistSims` is the same as the number of rows in the</span>
</span><span id="WeightedSim.updateRowCounts-889"><a href="#WeightedSim.updateRowCounts-889"><span class="linenos">889</span></a><span class="sd">        `IDPModel.rowCounts` property of the associated `idpModel`</span>
</span><span id="WeightedSim.updateRowCounts-890"><a href="#WeightedSim.updateRowCounts-890"><span class="linenos">890</span></a><span class="sd">        instance.</span>
</span><span id="WeightedSim.updateRowCounts-891"><a href="#WeightedSim.updateRowCounts-891"><span class="linenos">891</span></a>
</span><span id="WeightedSim.updateRowCounts-892"><a href="#WeightedSim.updateRowCounts-892"><span class="linenos">892</span></a><span class="sd">        **Raises:**</span>
</span><span id="WeightedSim.updateRowCounts-893"><a href="#WeightedSim.updateRowCounts-893"><span class="linenos">893</span></a>
</span><span id="WeightedSim.updateRowCounts-894"><a href="#WeightedSim.updateRowCounts-894"><span class="linenos">894</span></a><span class="sd">        * **ValueError**: If the computed value for the `totalWeight`</span>
</span><span id="WeightedSim.updateRowCounts-895"><a href="#WeightedSim.updateRowCounts-895"><span class="linenos">895</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="WeightedSim.updateRowCounts-896"><a href="#WeightedSim.updateRowCounts-896"><span class="linenos">896</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="WeightedSim.updateRowCounts-897"><a href="#WeightedSim.updateRowCounts-897"><span class="linenos">897</span></a>
</span><span id="WeightedSim.updateRowCounts-898"><a href="#WeightedSim.updateRowCounts-898"><span class="linenos">898</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.updateRowCounts-899"><a href="#WeightedSim.updateRowCounts-899"><span class="linenos">899</span></a>        <span class="c1"># If $L$ is the number of states in the IDP, then the case</span>
</span><span id="WeightedSim.updateRowCounts-900"><a href="#WeightedSim.updateRowCounts-900"><span class="linenos">900</span></a>        <span class="c1"># $L = 2$ is separated from the case $2 &lt; L &lt; \infty$ to speed</span>
</span><span id="WeightedSim.updateRowCounts-901"><a href="#WeightedSim.updateRowCounts-901"><span class="linenos">901</span></a>        <span class="c1"># up code execution.</span>
</span><span id="WeightedSim.updateRowCounts-902"><a href="#WeightedSim.updateRowCounts-902"><span class="linenos">902</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-903"><a href="#WeightedSim.updateRowCounts-903"><span class="linenos">903</span></a>        <span class="n">numStates</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-904"><a href="#WeightedSim.updateRowCounts-904"><span class="linenos">904</span></a>
</span><span id="WeightedSim.updateRowCounts-905"><a href="#WeightedSim.updateRowCounts-905"><span class="linenos">905</span></a>        <span class="c1"># expand properties if row counts have been added</span>
</span><span id="WeightedSim.updateRowCounts-906"><a href="#WeightedSim.updateRowCounts-906"><span class="linenos">906</span></a>        <span class="n">numOldSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-907"><a href="#WeightedSim.updateRowCounts-907"><span class="linenos">907</span></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">counts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="n">numOldSims</span><span class="p">:]):</span>
</span><span id="WeightedSim.updateRowCounts-908"><a href="#WeightedSim.updateRowCounts-908"><span class="linenos">908</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">numOldSims</span> <span class="o">+</span> <span class="n">_</span>
</span><span id="WeightedSim.updateRowCounts-909"><a href="#WeightedSim.updateRowCounts-909"><span class="linenos">909</span></a>
</span><span id="WeightedSim.updateRowCounts-910"><a href="#WeightedSim.updateRowCounts-910"><span class="linenos">910</span></a>            <span class="c1"># build `rowWeights[m]`</span>
</span><span id="WeightedSim.updateRowCounts-911"><a href="#WeightedSim.updateRowCounts-911"><span class="linenos">911</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="WeightedSim.updateRowCounts-912"><a href="#WeightedSim.updateRowCounts-912"><span class="linenos">912</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-913"><a href="#WeightedSim.updateRowCounts-913"><span class="linenos">913</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-914"><a href="#WeightedSim.updateRowCounts-914"><span class="linenos">914</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-915"><a href="#WeightedSim.updateRowCounts-915"><span class="linenos">915</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span>
</span><span id="WeightedSim.updateRowCounts-916"><a href="#WeightedSim.updateRowCounts-916"><span class="linenos">916</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-917"><a href="#WeightedSim.updateRowCounts-917"><span class="linenos">917</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-918"><a href="#WeightedSim.updateRowCounts-918"><span class="linenos">918</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-919"><a href="#WeightedSim.updateRowCounts-919"><span class="linenos">919</span></a>                    <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-920"><a href="#WeightedSim.updateRowCounts-920"><span class="linenos">920</span></a>                    <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numStates</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-921"><a href="#WeightedSim.updateRowCounts-921"><span class="linenos">921</span></a>                        <span class="n">weight</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">state</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-922"><a href="#WeightedSim.updateRowCounts-922"><span class="linenos">922</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-923"><a href="#WeightedSim.updateRowCounts-923"><span class="linenos">923</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-924"><a href="#WeightedSim.updateRowCounts-924"><span class="linenos">924</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-925"><a href="#WeightedSim.updateRowCounts-925"><span class="linenos">925</span></a>            <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-926"><a href="#WeightedSim.updateRowCounts-926"><span class="linenos">926</span></a>
</span><span id="WeightedSim.updateRowCounts-927"><a href="#WeightedSim.updateRowCounts-927"><span class="linenos">927</span></a>            <span class="c1"># build `rowDistSims[m]`</span>
</span><span id="WeightedSim.updateRowCounts-928"><a href="#WeightedSim.updateRowCounts-928"><span class="linenos">928</span></a>            <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-929"><a href="#WeightedSim.updateRowCounts-929"><span class="linenos">929</span></a>            <span class="k">if</span> <span class="n">choice</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-930"><a href="#WeightedSim.updateRowCounts-930"><span class="linenos">930</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">choice</span><span class="p">])</span>
</span><span id="WeightedSim.updateRowCounts-931"><a href="#WeightedSim.updateRowCounts-931"><span class="linenos">931</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-932"><a href="#WeightedSim.updateRowCounts-932"><span class="linenos">932</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-933"><a href="#WeightedSim.updateRowCounts-933"><span class="linenos">933</span></a>                    <span class="n">rowDistSim</span> <span class="o">=</span> <span class="n">beta</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-934"><a href="#WeightedSim.updateRowCounts-934"><span class="linenos">934</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="WeightedSim.updateRowCounts-935"><a href="#WeightedSim.updateRowCounts-935"><span class="linenos">935</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-936"><a href="#WeightedSim.updateRowCounts-936"><span class="linenos">936</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-937"><a href="#WeightedSim.updateRowCounts-937"><span class="linenos">937</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rowDistSim</span><span class="p">,</span> <span class="n">rowDistSim</span><span class="p">])</span>
</span><span id="WeightedSim.updateRowCounts-938"><a href="#WeightedSim.updateRowCounts-938"><span class="linenos">938</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-939"><a href="#WeightedSim.updateRowCounts-939"><span class="linenos">939</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-940"><a href="#WeightedSim.updateRowCounts-940"><span class="linenos">940</span></a>                        <span class="c1"># vector sum fails for lists, works for ndarray</span>
</span><span id="WeightedSim.updateRowCounts-941"><a href="#WeightedSim.updateRowCounts-941"><span class="linenos">941</span></a>                        <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-942"><a href="#WeightedSim.updateRowCounts-942"><span class="linenos">942</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">counts</span>
</span><span id="WeightedSim.updateRowCounts-943"><a href="#WeightedSim.updateRowCounts-943"><span class="linenos">943</span></a>                        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-944"><a href="#WeightedSim.updateRowCounts-944"><span class="linenos">944</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-945"><a href="#WeightedSim.updateRowCounts-945"><span class="linenos">945</span></a>
</span><span id="WeightedSim.updateRowCounts-946"><a href="#WeightedSim.updateRowCounts-946"><span class="linenos">946</span></a>            <span class="c1"># build `totalWeight`</span>
</span><span id="WeightedSim.updateRowCounts-947"><a href="#WeightedSim.updateRowCounts-947"><span class="linenos">947</span></a>            <span class="c1">#</span>
</span><span id="WeightedSim.updateRowCounts-948"><a href="#WeightedSim.updateRowCounts-948"><span class="linenos">948</span></a>            <span class="c1"># The m-th iteration of the `for` loop multiplies the</span>
</span><span id="WeightedSim.updateRowCounts-949"><a href="#WeightedSim.updateRowCounts-949"><span class="linenos">949</span></a>            <span class="c1"># previous value of `totalWeight` by the (m + 1)-th factor</span>
</span><span id="WeightedSim.updateRowCounts-950"><a href="#WeightedSim.updateRowCounts-950"><span class="linenos">950</span></a>            <span class="c1"># in the definition of $V$ in Section 9 of the Paper.</span>
</span><span id="WeightedSim.updateRowCounts-951"><a href="#WeightedSim.updateRowCounts-951"><span class="linenos">951</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-952"><a href="#WeightedSim.updateRowCounts-952"><span class="linenos">952</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-953"><a href="#WeightedSim.updateRowCounts-953"><span class="linenos">953</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="WeightedSim.updateRowCounts-954"><a href="#WeightedSim.updateRowCounts-954"><span class="linenos">954</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-955"><a href="#WeightedSim.updateRowCounts-955"><span class="linenos">955</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="WeightedSim.updateRowCounts-956"><a href="#WeightedSim.updateRowCounts-956"><span class="linenos">956</span></a>            <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-957"><a href="#WeightedSim.updateRowCounts-957"><span class="linenos">957</span></a>
</span><span id="WeightedSim.updateRowCounts-958"><a href="#WeightedSim.updateRowCounts-958"><span class="linenos">958</span></a>        <span class="c1"># check that total weight is not out of bounds</span>
</span><span id="WeightedSim.updateRowCounts-959"><a href="#WeightedSim.updateRowCounts-959"><span class="linenos">959</span></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-960"><a href="#WeightedSim.updateRowCounts-960"><span class="linenos">960</span></a>            <span class="n">adj</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-961"><a href="#WeightedSim.updateRowCounts-961"><span class="linenos">961</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-962"><a href="#WeightedSim.updateRowCounts-962"><span class="linenos">962</span></a>                <span class="s1">&#39;Simulation weight out of bounds.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-963"><a href="#WeightedSim.updateRowCounts-963"><span class="linenos">963</span></a>                <span class="sa">f</span><span class="s1">&#39;Try adjusting scale factor by </span><span class="si">{</span><span class="n">adj</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="WeightedSim.updateRowCounts-964"><a href="#WeightedSim.updateRowCounts-964"><span class="linenos">964</span></a>            <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-965"><a href="#WeightedSim.updateRowCounts-965"><span class="linenos">965</span></a>
</span><span id="WeightedSim.updateRowCounts-966"><a href="#WeightedSim.updateRowCounts-966"><span class="linenos">966</span></a>        <span class="c1"># trim properties if row counts have been removed</span>
</span><span id="WeightedSim.updateRowCounts-967"><a href="#WeightedSim.updateRowCounts-967"><span class="linenos">967</span></a>        <span class="k">if</span> <span class="n">numOldSims</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-968"><a href="#WeightedSim.updateRowCounts-968"><span class="linenos">968</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-969"><a href="#WeightedSim.updateRowCounts-969"><span class="linenos">969</span></a>                <span class="n">numOldSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="WeightedSim.updateRowCounts-970"><a href="#WeightedSim.updateRowCounts-970"><span class="linenos">970</span></a>            <span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-971"><a href="#WeightedSim.updateRowCounts-971"><span class="linenos">971</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-972"><a href="#WeightedSim.updateRowCounts-972"><span class="linenos">972</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-973"><a href="#WeightedSim.updateRowCounts-973"><span class="linenos">973</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="WeightedSim.updateRowCounts-974"><a href="#WeightedSim.updateRowCounts-974"><span class="linenos">974</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-975"><a href="#WeightedSim.updateRowCounts-975"><span class="linenos">975</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="WeightedSim.updateRowCounts-976"><a href="#WeightedSim.updateRowCounts-976"><span class="linenos">976</span></a>                <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-977"><a href="#WeightedSim.updateRowCounts-977"><span class="linenos">977</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-978"><a href="#WeightedSim.updateRowCounts-978"><span class="linenos">978</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Updates the <code><a href="#WeightedSim.rowWeights">rowWeights</a></code>, <code><a href="#WeightedSim.rowDistSims">rowDistSims</a></code>, and <code><a href="#WeightedSim.totalWeight">totalWeight</a></code>
properties, if necessary, so that the number of rows in
<code><a href="#WeightedSim.rowDistSims">rowDistSims</a></code> is the same as the number of rows in the
<code><a href="#IDPModel.rowCounts">IDPModel.rowCounts</a></code> property of the associated <code><a href="#WeightedSim.idpModel">idpModel</a></code>
instance.</p>

<p><strong>Raises:</strong></p>

<ul>
<li><strong>ValueError</strong>: If the computed value for the <code><a href="#WeightedSim.totalWeight">totalWeight</a></code>
property is so small or so large that it evaluates to <code>0.0</code>
or <code>np.inf</code>.</li>
</ul>
</div>


                            </div>
                            <div id="WeightedSim.updateScale" class="classattr">
                                        <input id="WeightedSim.updateScale-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">updateScale</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="WeightedSim.updateScale-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.updateScale"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.updateScale-980"><a href="#WeightedSim.updateScale-980"><span class="linenos">980</span></a>    <span class="k">def</span> <span class="nf">updateScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.updateScale-981"><a href="#WeightedSim.updateScale-981"><span class="linenos">981</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `totalWeight` property, if necessary, to account</span>
</span><span id="WeightedSim.updateScale-982"><a href="#WeightedSim.updateScale-982"><span class="linenos">982</span></a><span class="sd">        for a change in the `IDPModel.scale` property of the associated</span>
</span><span id="WeightedSim.updateScale-983"><a href="#WeightedSim.updateScale-983"><span class="linenos">983</span></a><span class="sd">        `idpModel` instance.</span>
</span><span id="WeightedSim.updateScale-984"><a href="#WeightedSim.updateScale-984"><span class="linenos">984</span></a>
</span><span id="WeightedSim.updateScale-985"><a href="#WeightedSim.updateScale-985"><span class="linenos">985</span></a><span class="sd">        **Raises:**</span>
</span><span id="WeightedSim.updateScale-986"><a href="#WeightedSim.updateScale-986"><span class="linenos">986</span></a>
</span><span id="WeightedSim.updateScale-987"><a href="#WeightedSim.updateScale-987"><span class="linenos">987</span></a><span class="sd">        * **ValueError**: If the new value for the `totalWeight`</span>
</span><span id="WeightedSim.updateScale-988"><a href="#WeightedSim.updateScale-988"><span class="linenos">988</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="WeightedSim.updateScale-989"><a href="#WeightedSim.updateScale-989"><span class="linenos">989</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="WeightedSim.updateScale-990"><a href="#WeightedSim.updateScale-990"><span class="linenos">990</span></a>
</span><span id="WeightedSim.updateScale-991"><a href="#WeightedSim.updateScale-991"><span class="linenos">991</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.updateScale-992"><a href="#WeightedSim.updateScale-992"><span class="linenos">992</span></a>        <span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="WeightedSim.updateScale-993"><a href="#WeightedSim.updateScale-993"><span class="linenos">993</span></a>        <span class="k">if</span> <span class="n">diff</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="WeightedSim.updateScale-994"><a href="#WeightedSim.updateScale-994"><span class="linenos">994</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span> <span class="o">*</span> <span class="n">diff</span>
</span><span id="WeightedSim.updateScale-995"><a href="#WeightedSim.updateScale-995"><span class="linenos">995</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span>
</span><span id="WeightedSim.updateScale-996"><a href="#WeightedSim.updateScale-996"><span class="linenos">996</span></a>            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="WeightedSim.updateScale-997"><a href="#WeightedSim.updateScale-997"><span class="linenos">997</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="WeightedSim.updateScale-998"><a href="#WeightedSim.updateScale-998"><span class="linenos">998</span></a>                    <span class="s1">&#39;Resulting simulation weight is out of bounds&#39;</span>
</span><span id="WeightedSim.updateScale-999"><a href="#WeightedSim.updateScale-999"><span class="linenos">999</span></a>                <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Updates the <code><a href="#WeightedSim.totalWeight">totalWeight</a></code> property, if necessary, to account
for a change in the <code><a href="#IDPModel.scale">IDPModel.scale</a></code> property of the associated
<code><a href="#WeightedSim.idpModel">idpModel</a></code> instance.</p>

<p><strong>Raises:</strong></p>

<ul>
<li><strong>ValueError</strong>: If the new value for the <code><a href="#WeightedSim.totalWeight">totalWeight</a></code>
property is so small or so large that it evaluates to <code>0.0</code>
or <code>np.inf</code>.</li>
</ul>
</div>


                            </div>
                </section>
    </main>
</body>
</html>
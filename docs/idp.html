<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>idp API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
        overflow-y: hidden;
    }
</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>


            <h2>Contents</h2>
            <ul>
  <li><a href="#module-description">Module description</a></li>
  <li><a href="#examples">Examples</a>
  <ul>
    <li><a href="#pressed-penny-machines">Pressed penny machines</a></li>
    <li><a href="#flicking-thumbtacks">Flicking thumbtacks</a></li>
    <li><a href="#amazon-reviews">Amazon reviews</a></li>
    <li><a href="#video-game-leaderboards">Video game leaderboards</a></li>
  </ul></li>
</ul>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#IDPModel">IDPModel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#IDPModel.__init__">IDPModel</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.colConc">colConc</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.rowConc">rowConc</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.baseMeas">baseMeas</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.rowCounts">rowCounts</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.likelihoods">likelihoods</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.scale">scale</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.weightedSims">weightedSims</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.ess">ess</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.essPop">essPop</a>
                        </li>
                        <li>
                                <a class="variable" href="#IDPModel.bandwidth">bandwidth</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.addRowCounts">addRowCounts</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.delRowCounts">delRowCounts</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.addWeightedSims">addWeightedSims</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.clearWeightedSims">clearWeightedSims</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.postProb">postProb</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.meanRDGcdf">meanRDGcdf</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.meanRDGpdf">meanRDGpdf</a>
                        </li>
                        <li>
                                <a class="function" href="#IDPModel.simRowDist">simRowDist</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#WeightedSim">WeightedSim</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#WeightedSim.__init__">WeightedSim</a>
                        </li>
                        <li>
                                <a class="variable" href="#WeightedSim.idpModel">idpModel</a>
                        </li>
                        <li>
                                <a class="variable" href="#WeightedSim.rowWeights">rowWeights</a>
                        </li>
                        <li>
                                <a class="variable" href="#WeightedSim.rowDistSims">rowDistSims</a>
                        </li>
                        <li>
                                <a class="variable" href="#WeightedSim.totalWeight">totalWeight</a>
                        </li>
                        <li>
                                <a class="function" href="#WeightedSim.updateRowCounts">updateRowCounts</a>
                        </li>
                        <li>
                                <a class="function" href="#WeightedSim.updateScale">updateScale</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
idp    </h1>

                        <div class="docstring"><p>Tools for working with iterated Dirichlet processes.</p>

<h1 id="module-description">Module description</h1>

<p>Consider a situation in which there are several agents, all from the
same population. Each agent undertakes a sequence of actions. These
actions are chosen according to the agent's particular tendencies.
Although different agents have different tendencies, there may be
patterns in the population.</p>

<p>We observe a certain set of agents over a certain amount of time. Based
on these observations, we want to make probabilistic forecasts about two
things:</p>

<ul>
<li>The future behavior of the agents we have observed.</li>
<li>The behavior of a new (unobserved) agent from the population.</li>
</ul>

<p>An iterated Dirichlet process is a mathematical tool that can model
this. The file, <code>idp-paper-9.pdf</code>, gives the mathematical details. (In
this rest of this documentation, we refer to this file as the "Paper.")
This module, <code><a href="">idp</a></code>, is a Python implementation of the iterated Dirichlet
process (IDP).</p>

<h1 id="examples">Examples</h1>

<h2 id="pressed-penny-machines">Pressed penny machines</h2>

<p>Imagine a pressed penny machine, like those found in museums or tourist
attractions. For a fee, the machine presses a penny into a commemorative
souvenir. Now imagine the machine is broken, so that it mangles all the
pennies we feed it. Each pressed penny it creates is mangled in its own
way. Each has its own probability of landing on heads when flipped. In
this situation, the agents are the pennies and the actions are the heads
and tails that they produce.</p>

<p>Now suppose we create seven mangled pennies and flip each one 5 times.
Suppose that the first four coins each result in 4 heads out of 5 flips.
The fifth coin results in 1 head, the sixth coin results in 4 heads, and
the seventh coin results in 3 heads. If we flip the fifth coin one more
time, what is the probability that it will land on heads? Looking only
at the past flips of the fifth coin, it seems biased towards tails.
Overall, though, the machine seems to make coins that are biased towards
heads. All seven coins could be heads-biased, and the fifth coin just
had an unlucky run. How should we balance these competing intuitions to
arrive at a probability?</p>

<p>One way to answer this is to model the situation with an IDP. We can do
this with the <code><a href="#IDPModel">IDPModel</a></code> class as follows:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">idp</span> <span class="kn">import</span> <span class="n">IDPModel</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span>
<span class="o">...</span>     <span class="p">[[</span><span class="mi">5</span> <span class="o">-</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
</code></pre>
</div>

<p>Next, we run 10,000 weighted simulations and use them to estimate the
probability that the fifth coin, if flipped again, will land on heads:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">postProb</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="mf">0.4381490163838421</span>
</code></pre>
</div>

<p>Likewise, we can estimate the same probability for the first and seventh
coins:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">postProb</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="mf">0.7240808961723293</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">postProb</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="mf">0.6791451999003222</span>
</code></pre>
</div>

<p>These probabilities are not calculated by direct simulation, but by
using <a href="https://en.wikipedia.org/wiki/Importance_sampling">importance
sampling</a>.
Although the sample size is 10,000, the "effective sample size" is
lower:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">6590.874508839897</span>
</code></pre>
</div>

<p>What this means is that the accuracy of our calculations is about the
same as if we did 6,591 direct simulations.</p>

<p>Above, we looked at the seven coins that were already flipped. Now, let
us consider a hypothetical new coin from the machine. We first estimate
the probability that this new coin will land on heads. To do this, we
can use any argument larger than the highest index in our observed data.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">postProb</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="mf">0.6541807830266262</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">postProb</span><span class="p">(</span><span class="mi">47586</span><span class="p">)</span>
<span class="mf">0.6541807830266262</span>
</code></pre>
</div>

<p>If the new coin from the machine has probability of heads $\theta$, then
$\theta$ is a random variable taking values in $[0, 1]$. The following
will plot the cumulative distribution function of $\theta$:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">meanRDGcdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzBUMDk6NDY6MDYuNDMyNDA5PC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTViMmE5M2JiOTMiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNWIyYTkzYmI5MyIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTViMmE5M2JiOTMiIHg9IjEzOC43NjM2MzYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzAuODEyMDc0IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNWIyYTkzYmI5MyIgeD0iMjAzLjY5NDU0NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS43NDI5ODMgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtNWIyYTkzYmI5MyIgeD0iMjY4LjYyNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MC42NzM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201YjJhOTNiYjkzIiB4PSIzMzMuNTU2MzY0IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI1LjYwNDgwMSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI201YjJhOTNiYjkzIiB4PSIzOTguNDg3MjczIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkwLjUzNTcxIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9Im1hdHBsb3RsaWIuYXhpc18yIj4KICAgIDxnIGlkPSJ5dGlja18xIj4KICAgICA8ZyBpZD0ibGluZTJkXzciPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtMDMxNDkyYWEyNCIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDMxNDkyYWEyNCIgeD0iNTcuNiIgeT0iMjk1LjQ4OCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSAwLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyOTkuMjg3MjE5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18yIj4KICAgICA8ZyBpZD0ibGluZTJkXzgiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20wMzE0OTJhYTI0IiB4PSI1Ny42IiB5PSIyNDcuMTA0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzgiPgogICAgICA8IS0tIDAuMiAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDI1MC45MDMyMTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfOSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTAzMTQ5MmFhMjQiIHg9IjU3LjYiIHk9IjE5OC43MiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF85Ij4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyMDIuNTE5MjE5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM0IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEwIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDMxNDkyYWEyNCIgeD0iNTcuNiIgeT0iMTUwLjMzNiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMC42IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTU0LjEzNTIxOSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTAzMTQ5MmFhMjQiIHg9IjU3LjYiIHk9IjEwMS45NTIiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDEwNS43NTEyMTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzgiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzYiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20wMzE0OTJhYTI0IiB4PSI1Ny42IiB5PSI1My41NjgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTIiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDU3LjM2NzIxOSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9ImxpbmUyZF8xMyI+CiAgICA8cGF0aCBkPSJNIDczLjgzMjcyNyAyOTUuNDg4IApMIDc1LjQ2NDE1NyAyOTQuMDgyNTgzIApMIDc4LjcyNzAxNyAyOTIuOTI1NzIgCkwgODEuOTg5ODc3IDI5MS45Nzc3MzEgCkwgOTEuNzc4NDU2IDI4OS41NzE2MyAKTCAxMjYuMDM4NDgzIDI4Mi4yMjI1NiAKTCAxMzUuODI3MDYzIDI4MC4zNTEzMjggCkwgMTQyLjM1Mjc4MiAyNzkuMTM0NTU2IApMIDE0NS42MTU2NDIgMjc4LjQxNDgyMyAKTCAxNTIuMTQxMzYxIDI3Ny4xNTc3OCAKTCAxNjYuODI0MjMgMjc0LjE2ODk3IApMIDE5Ny44MjEzOTggMjY3LjY4MjgxMyAKTCAyMTcuMzk4NTU2IDI2Mi45NjM3OSAKTCAyMjIuMjkyODQ2IDI2MS40MTY2MTIgCkwgMjI1LjU1NTcwNiAyNjAuMzU4ODExIApMIDIzMi4wODE0MjUgMjU4LjE2NDMzIApMIDIzOC42MDcxNDUgMjU1LjIxNjU5NyAKTCAyNDAuMjM4NTc1IDI1NC41NTUzIApMIDI0NS4xMzI4NjQgMjUxLjk5Njk3MiAKTCAyNTAuMDI3MTU0IDI0OC43Njc3MDMgCkwgMjUxLjY1ODU4NCAyNDcuODI4NDE1IApMIDI1NC45MjE0NDQgMjQ1LjQ4MTUgCkwgMjU5LjgxNTczMyAyNDEuMTk4NTYyIApMIDI2MS40NDcxNjMgMjM5LjY4ODA1IApMIDI2My4wNzg1OTMgMjM4LjM4MDAzNyAKTCAyNjQuNzEwMDIzIDIzNi45MTk3OTggCkwgMjY3Ljk3Mjg4MyAyMzMuNTY4MzI1IApMIDI2OS42MDQzMTIgMjMxLjQ2NzcxMyAKTCAyNzEuMjM1NzQyIDIyOS41NTgwODIgCkwgMjc5LjM5Mjg5MiAyMTguMTUwMDMyIApMIDI4Mi42NTU3NTEgMjEzLjQzNTgyMSAKTCAyODQuMjg3MTgxIDIxMC4zMjY2NyAKTCAyODUuOTE4NjExIDIwNy42NzY4NTkgCkwgMjg5LjE4MTQ3MSAyMDEuNDM0ODQ2IApMIDI5MC44MTI5MDEgMTk3LjU4OTk5NyAKTCAyOTQuMDc1NzYxIDE5MC43Njk5MjEgCkwgMjk3LjMzODYyIDE4NC41OTE3MDIgCkwgMjk4Ljk3MDA1IDE4MC41Mjc3NTIgCkwgMzAwLjYwMTQ4IDE3Ny4wOTAxNzEgCkwgMzAyLjIzMjkxIDE3My4zMDQyMTQgCkwgMzA4Ljc1ODYzIDE1OS41NzUxMTUgCkwgMzEwLjM5MDA1OSAxNTUuNjM0OTY3IApMIDMxNS4yODQzNDkgMTQ1LjM4MDk1OCAKTCAzMTYuOTE1Nzc5IDE0MS4wNTIxNzUgCkwgMzE4LjU0NzIwOSAxMzguMDEzNTg3IApMIDMyNS4wNzI5MjggMTIzLjU2MDkwNSAKTCAzMjYuNzA0MzU4IDExOS43NzUyNzQgCkwgMzI4LjMzNTc4OCAxMTYuNTk1NzUzIApMIDMyOS45NjcyMTggMTEyLjg3NzM2IApMIDMzMy4yMzAwNzggMTA2LjA3ODM0MSAKTCAzMzYuNDkyOTM3IDEwMC40ODc0MzggCkwgMzM5Ljc1NTc5NyA5NS40ODQ1MzcgCkwgMzQxLjM4NzIyNyA5Mi42ODI1NTggCkwgMzQzLjAxODY1NyA5MC4yMDg1MTQgCkwgMzQ2LjI4MTUxNyA4NS41NjIzNTUgCkwgMzQ3LjkxMjk0NyA4My4yODExNTIgCkwgMzUxLjE3NTgwNiA3OS4zNzg3MDIgCkwgMzU0LjQzODY2NiA3NS43MjQyNTIgCkwgMzU5LjMzMjk1NiA3MS4xMjYwMjYgCkwgMzYyLjU5NTgxNSA2OC40Njc5MjQgCkwgMzY0LjIyNzI0NSA2Ny4yOTQ1NjggCkwgMzY3LjQ5MDEwNSA2NS4zOTIyNjQgCkwgMzcwLjc1Mjk2NSA2My42MzczOTIgCkwgMzc0LjAxNTgyNSA2Mi4yMTUyMTggCkwgMzc4LjkxMDExNCA2MC4zNzA2MzIgCkwgMzgzLjgwNDQwNCA1OC44MDE1ODggCkwgMzk1LjIyNDQxMyA1NS41OTY0NDQgCkwgMzk2Ljg1NTg0MyA1NC45NjcwMzQgCkwgMzk4LjQ4NzI3MyA1My41NjggCkwgMzk4LjQ4NzI3MyA1My41NjggCiIgY2xpcC1wYXRoPSJ1cmwoI3A1MDQ2NGZlYzRhKSIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzFmNzdiNDsgc3Ryb2tlLXdpZHRoOiAxLjU7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfMyI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA1Ny42IDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF80Ij4KICAgIDxwYXRoIGQ9Ik0gNDE0LjcyIDMwNy41ODQgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF81Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzYiPgogICAgPHBhdGggZD0iTSA1Ny42IDQxLjQ3MiAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICA8L2c+CiA8L2c+CiA8ZGVmcz4KICA8Y2xpcFBhdGggaWQ9InA1MDQ2NGZlYzRhIj4KICAgPHJlY3QgeD0iNTcuNiIgeT0iNDEuNDcyIiB3aWR0aD0iMzU3LjEyIiBoZWlnaHQ9IjI2Ni4xMTIiLz4KICA8L2NsaXBQYXRoPgogPC9kZWZzPgo8L3N2Zz4K" alt="image" /></p>

<p>The random variable $\theta$ has a discrete component, so it does not
have a probability density function. But we can plot an approximate
density as follows:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">meanRDGpdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzBUMDk6NDY6MDguOTA2Mzc2PC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTEwNzQyOWYyYmYiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMTA3NDI5ZjJiZiIgeD0iNzIuMTg0NzM1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMjMzMTcyIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTEwNzQyOWYyYmYiIHg9IjEzNy43NzQ4NDEiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjkuODIzMjc4IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMTA3NDI5ZjJiZiIgeD0iMjAzLjM2NDk0NyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS40MTMzODQgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMTA3NDI5ZjJiZiIgeD0iMjY4Ljk1NTA1MyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MS4wMDM0OTEgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20xMDc0MjlmMmJmIiB4PSIzMzQuNTQ1MTU5IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI2LjU5MzU5NyAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20xMDc0MjlmMmJmIiB4PSI0MDAuMTM1MjY1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkyLjE4MzcwMyAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzEiIGQ9Ik0gNzk0IDUzMSAKTCAxODI1IDUzMSAKTCAxODI1IDQwOTEgCkwgNzAzIDM4NjYgCkwgNzAzIDQ0NDEgCkwgMTgxOSA0NjY2IApMIDI0NTAgNDY2NiAKTCAyNDUwIDUzMSAKTCAzNDgxIDUzMSAKTCAzNDgxIDAgCkwgNzk0IDAgCkwgNzk0IDUzMSAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMiI+CiAgICA8ZyBpZD0ieXRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF83Ij4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibWUxNDhkNWEyNTkiIGQ9Ik0gMCAwIApMIC0zLjUgMCAKIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2RlZnM+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWUxNDhkNWEyNTkiIHg9IjU3LjYiIHk9IjI3My44MDc3MzYiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfNyI+CiAgICAgIDwhLS0gMC41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjc3LjYwNjk1NSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM1IiBkPSJNIDY5MSA0NjY2IApMIDMxNjkgNDY2NiAKTCAzMTY5IDQxMzQgCkwgMTI2OSA0MTM0IApMIDEyNjkgMjk5MSAKUSAxNDA2IDMwMzggMTU0MyAzMDYxIApRIDE2ODEgMzA4NCAxODE5IDMwODQgClEgMjYwMCAzMDg0IDMwNTYgMjY1NiAKUSAzNTEzIDIyMjggMzUxMyAxNDk3IApRIDM1MTMgNzQ0IDMwNDQgMzI2IApRIDI1NzUgLTkxIDE3MjIgLTkxIApRIDE0MjggLTkxIDExMjMgLTQxIApRIDgxOSA5IDQ5NCAxMDkgCkwgNDk0IDc0NCAKUSA3NzUgNTkxIDEwNzUgNTE2IApRIDEzNzUgNDQxIDE3MDkgNDQxIApRIDIyNTAgNDQxIDI1NjUgNzI1IApRIDI4ODEgMTAwOSAyODgxIDE0OTcgClEgMjg4MSAxOTg0IDI1NjUgMjI2OCAKUSAyMjUwIDI1NTMgMTcwOSAyNTUzIApRIDE0NTYgMjU1MyAxMjA0IDI0OTcgClEgOTUzIDI0NDEgNjkxIDIzMjIgCkwgNjkxIDQ2NjYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18yIj4KICAgICA8ZyBpZD0ibGluZTJkXzgiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21lMTQ4ZDVhMjU5IiB4PSI1Ny42IiB5PSIyMjguODgwMjE3IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzgiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDIzMi42Nzk0MzYpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfOSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWUxNDhkNWEyNTkiIHg9IjU3LjYiIHk9IjE4My45NTI2OTgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOSI+CiAgICAgIDwhLS0gMS41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTg3Ljc1MTkxNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWUxNDhkNWEyNTkiIHg9IjU3LjYiIHk9IjEzOS4wMjUxNzkiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTAiPgogICAgICA8IS0tIDIuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDE0Mi44MjQzOTgpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzUiPgogICAgIDxnIGlkPSJsaW5lMmRfMTEiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21lMTQ4ZDVhMjU5IiB4PSI1Ny42IiB5PSI5NC4wOTc2NiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMSI+CiAgICAgIDwhLS0gMi41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgOTcuODk2ODc5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEyIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZTE0OGQ1YTI1OSIgeD0iNTcuNiIgeT0iNDkuMTcwMTQxIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEyIj4KICAgICAgPCEtLSAzLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSA1Mi45NjkzNikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTMzIiBkPSJNIDI1OTcgMjUxNiAKUSAzMDUwIDI0MTkgMzMwNCAyMTEyIApRIDM1NTkgMTgwNiAzNTU5IDEzNTYgClEgMzU1OSA2NjYgMzA4NCAyODcgClEgMjYwOSAtOTEgMTczNCAtOTEgClEgMTQ0MSAtOTEgMTEzMCAtMzMgClEgODE5IDI1IDQ4OCAxNDEgCkwgNDg4IDc1MCAKUSA3NTAgNTk3IDEwNjIgNTE5IApRIDEzNzUgNDQxIDE3MTYgNDQxIApRIDIzMDkgNDQxIDI2MjAgNjc1IApRIDI5MzEgOTA5IDI5MzEgMTM1NiAKUSAyOTMxIDE3NjkgMjY0MiAyMDAxIApRIDIzNTMgMjIzNCAxODM4IDIyMzQgCkwgMTI5NCAyMjM0IApMIDEyOTQgMjc1MyAKTCAxODYzIDI3NTMgClEgMjMyOCAyNzUzIDI1NzUgMjkzOSAKUSAyODIyIDMxMjUgMjgyMiAzNDc1IApRIDI4MjIgMzgzNCAyNTY3IDQwMjYgClEgMjMxMyA0MjE5IDE4MzggNDIxOSAKUSAxNTc4IDQyMTkgMTI4MSA0MTYyIApRIDk4NCA0MTA2IDYyOCAzOTg4IApMIDYyOCA0NTUwIApRIDk4OCA0NjUwIDEzMDIgNDcwMCAKUSAxNjE2IDQ3NTAgMTg5NCA0NzUwIApRIDI2MTMgNDc1MCAzMDMxIDQ0MjMgClEgMzQ1MCA0MDk3IDM0NTAgMzU0MSAKUSAzNDUwIDMxNTMgMzIyOCAyODg2IApRIDMwMDYgMjYxOSAyNTk3IDI1MTYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibGluZTJkXzEzIj4KICAgIDxwYXRoIGQ9Ik0gNzMuODMyNzI3IDI2My43MzUwOTggCkwgNzUuNDgwNzIgMjc3LjQ1MjMwOSAKTCA3Ny4xMjg3MTMgMjgyLjk0ODE3OSAKTCA3OC43NzY3MDUgMjg1Ljg0NTI4NCAKTCA4MC40MjQ2OTggMjg3LjU3OTkzNSAKTCA4Mi4wNzI2OSAyODguNzE0MjU2IApMIDgzLjcyMDY4MyAyODkuNTE1Mjg0IApMIDg3LjAxNjY2OCAyOTAuNjExMjgzIApMIDkwLjMxMjY1MyAyOTEuMzg2MjIzIApMIDk1LjI1NjYzMSAyOTIuMjYzMjU2IApMIDk4LjU1MjYxNyAyOTIuNjg1MTA2IApMIDEwMS44NDg2MDIgMjkyLjkzNjI0MiAKTCAxMDUuMTQ0NTg3IDI5Mi45OTk5MSAKTCAxMTMuMzg0NTUgMjkyLjk5MTkzOSAKTCAxMTYuNjgwNTM1IDI5My4yODQwMTQgCkwgMTIxLjYyNDUxMyAyOTQuMDMzNDAxIApMIDEyOC4yMTY0ODQgMjk1LjA0NzE5OSAKTCAxMzEuNTEyNDY5IDI5NS4zNjkzNDMgCkwgMTM0LjgwODQ1NCAyOTUuNDg4IApMIDEzOS43NTI0MzIgMjk1LjMyNjQ0IApMIDE1OS41MjgzNDMgMjk0LjE4MjMgCkwgMTgyLjYwMDI0IDI5My44MDg2ODMgCkwgMTg1Ljg5NjIyNSAyOTMuNDU4NDM2IApMIDE5Mi40ODgxOTYgMjkyLjQxNjI5OSAKTCAyMDAuNzI4MTU5IDI5MC45OTYzNDYgCkwgMjA0LjAyNDE0NCAyOTAuMjY1ODUgCkwgMjA3LjMyMDEyOSAyODkuMjgyNDk5IApMIDIxMC42MTYxMTQgMjg3Ljk0NjQ2IApMIDIxMy45MTIxIDI4Ni4yNTU2OSAKTCAyMTcuMjA4MDg1IDI4NC4yOTA5MTggCkwgMjIwLjUwNDA3IDI4Mi4wODc2OTIgCkwgMjIzLjgwMDA1NSAyNzkuNTI4Njk0IApMIDIyNS40NDgwNDggMjc4LjA1MDAzNSAKTCAyMjcuMDk2MDQxIDI3Ni40MTE0NzQgCkwgMjMwLjM5MjAyNiAyNzIuNjUyMDYzIApMIDIzMy42ODgwMTEgMjY4LjMzNTEzNiAKTCAyMzYuOTgzOTk2IDI2My40OTcxNTYgCkwgMjQwLjI3OTk4MiAyNTcuOTk5MDk0IApMIDI0My41NzU5NjcgMjUxLjcyNTcwMSAKTCAyNDYuODcxOTUyIDI0NC43NTY0MDQgCkwgMjUwLjE2NzkzNyAyMzcuMjI4MTYxIApMIDI1My40NjM5MjIgMjI5LjE3OTEzNCAKTCAyNTYuNzU5OTA4IDIyMC41NTA0ODkgCkwgMjYwLjA1NTg5MyAyMTEuMTIwNTE4IApMIDI2My4zNTE4NzggMjAwLjQ5MDQ1MyAKTCAyNjYuNjQ3ODYzIDE4OC40ODI2NzkgCkwgMjcxLjU5MTg0MSAxNjguODc1OTMgCkwgMjc2LjUzNTgxOSAxNDguMzk5NzExIApMIDI3OS44MzE4MDQgMTMzLjUwOTI4NSAKTCAyODQuNzc1NzgyIDEwOS4wNDM0NDEgCkwgMjg4LjA3MTc2NyA5My40NDE4NTIgCkwgMjg5LjcxOTc2IDg2LjYzOTY5NCAKTCAyOTEuMzY3NzUzIDgwLjc0Njc5MSAKTCAyOTMuMDE1NzQ1IDc1LjgxOTU0MiAKTCAyOTQuNjYzNzM4IDcxLjgxNDYyNCAKTCAyOTYuMzExNzMxIDY4LjYxNTExNCAKTCAyOTcuOTU5NzIzIDY2LjA2NDU1MSAKTCAyOTkuNjA3NzE2IDYzLjk5NzU2NiAKTCAzMDEuMjU1NzA4IDYyLjI2MjA2OSAKTCAzMDQuNTUxNjk0IDU5LjMyODU4MSAKTCAzMDcuODQ3Njc5IDU2Ljc2OTYyIApMIDMwOS40OTU2NzEgNTUuNjYxNTA1IApMIDMxMS4xNDM2NjQgNTQuNzM4OTM3IApMIDMxMi43OTE2NTcgNTQuMDU3ODU4IApMIDMxNC40Mzk2NDkgNTMuNjU5MTgxIApMIDMxNi4wODc2NDIgNTMuNTY4IApMIDMxNy43MzU2MzUgNTMuODA1NjggCkwgMzE5LjM4MzYyNyA1NC40MDk4MzcgCkwgMzIxLjAzMTYyIDU1LjQ1MzU1OSAKTCAzMjIuNjc5NjEyIDU3LjA1NDU0NSAKTCAzMjQuMzI3NjA1IDU5LjM2NzA5NSAKTCAzMjUuOTc1NTk4IDYyLjU1NTAxNCAKTCAzMjcuNjIzNTkgNjYuNzUwMjczIApMIDMyOS4yNzE1ODMgNzIuMDA4OTQ0IApMIDMzMC45MTk1NzUgNzguMjc5NTc3IApMIDMzMi41Njc1NjggODUuMzk3NDk0IApMIDMzNS44NjM1NTMgMTAxLjEzMjA5OSAKTCAzNDAuODA3NTMxIDEyNC44NjE3ODMgCkwgMzU4LjkzNTQ1IDIwNy40NzU3MzIgCkwgMzYyLjIzMTQzNSAyMjEuNTk0MzY5IApMIDM2NS41Mjc0MiAyMzQuODQ1NDk5IApMIDM2OC44MjM0MDYgMjQ2LjgzNzgzMiAKTCAzNzAuNDcxMzk4IDI1Mi4yMzc2NyAKTCAzNzIuMTE5MzkxIDI1Ny4xOTg3NjEgCkwgMzczLjc2NzM4MyAyNjEuNzEzMjU2IApMIDM3NS40MTUzNzYgMjY1Ljc4OTc5MiAKTCAzNzcuMDYzMzY5IDI2OS40NDc5NDYgCkwgMzc4LjcxMTM2MSAyNzIuNzExNDAyIApMIDM4MC4zNTkzNTQgMjc1LjYwMTU1NiAKTCAzODIuMDA3MzQ3IDI3OC4xMzI3NzMgCkwgMzgzLjY1NTMzOSAyODAuMzA5Njg3IApMIDM4NS4zMDMzMzIgMjgyLjEyNTk2OSAKTCAzODYuOTUxMzI0IDI4My41NjI4NzkgCkwgMzg4LjU5OTMxNyAyODQuNTg0NzAxIApMIDM5MC4yNDczMSAyODUuMTI2NjAzIApMIDM5MS44OTUzMDIgMjg1LjA2Njc3NSAKTCAzOTMuNTQzMjk1IDI4NC4xNjI1IApMIDM5NS4xOTEyODcgMjgxLjg4MTg0NCAKTCAzOTYuODM5MjggMjc2LjgyMjU4NiAKTCAzOTguNDg3MjczIDI2My4zOTc2NzUgCkwgMzk4LjQ4NzI3MyAyNjMuMzk3Njc1IAoiIGNsaXAtcGF0aD0idXJsKCNwZjZkYmNiNTJjYikiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMxZjc3YjQ7IHN0cm9rZS13aWR0aDogMS41OyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzMiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNTcuNiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNCI+CiAgICA8cGF0aCBkPSJNIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNSI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA0MTQuNzIgMzA3LjU4NCAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF82Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiA0MS40NzIgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgPC9nPgogPC9nPgogPGRlZnM+CiAgPGNsaXBQYXRoIGlkPSJwZjZkYmNiNTJjYiI+CiAgIDxyZWN0IHg9IjU3LjYiIHk9IjQxLjQ3MiIgd2lkdGg9IjM1Ny4xMiIgaGVpZ2h0PSIyNjYuMTEyIi8+CiAgPC9jbGlwUGF0aD4KIDwvZGVmcz4KPC9zdmc+Cg==" alt="image" /></p>

<p>The approximate density is computed by smoothing out the discrete point
masses. The degree of smoothing is determined by a parameter called the
"bandwidth". (See <code><a href="#IDPModel.meanRDGpdf">IDPModel.meanRDGpdf</a></code> for details.) This bandwidth is
computed automatically. We can view the bandwidth that was used most
recently, and we can also set the bandwidth manually.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">bandwidth</span>
<span class="mf">0.11673170321052885</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">meanRDGpdf</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzBUMDk6NDY6MTIuMzc4ODExPC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibWJmMTQ4OTRjNmMiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmYxNDg5NGM2YyIgeD0iNzIuMTg0NzM1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMjMzMTcyIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWJmMTQ4OTRjNmMiIHg9IjEzNy43NzQ4NDEiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjkuODIzMjc4IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmYxNDg5NGM2YyIgeD0iMjAzLjM2NDk0NyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS40MTMzODQgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmYxNDg5NGM2YyIgeD0iMjY4Ljk1NTA1MyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MS4wMDM0OTEgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21iZjE0ODk0YzZjIiB4PSIzMzQuNTQ1MTU5IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI2LjU5MzU5NyAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21iZjE0ODk0YzZjIiB4PSI0MDAuMTM1MjY1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkyLjE4MzcwMyAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzEiIGQ9Ik0gNzk0IDUzMSAKTCAxODI1IDUzMSAKTCAxODI1IDQwOTEgCkwgNzAzIDM4NjYgCkwgNzAzIDQ0NDEgCkwgMTgxOSA0NjY2IApMIDI0NTAgNDY2NiAKTCAyNDUwIDUzMSAKTCAzNDgxIDUzMSAKTCAzNDgxIDAgCkwgNzk0IDAgCkwgNzk0IDUzMSAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMiI+CiAgICA8ZyBpZD0ieXRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF83Ij4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTgzNjYxY2ViZjEiIGQ9Ik0gMCAwIApMIC0zLjUgMCAKIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2RlZnM+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTgzNjYxY2ViZjEiIHg9IjU3LjYiIHk9IjMwMS42NDQwMzciIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfNyI+CiAgICAgIDwhLS0gMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDQuMjM3NSAzMDUuNDQzMjU2KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfOCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTgzNjYxY2ViZjEiIHg9IjU3LjYiIHk9IjI0My40NTAzNDgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOCI+CiAgICAgIDwhLS0gMSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDQuMjM3NSAyNDcuMjQ5NTY3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMSIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfOSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTgzNjYxY2ViZjEiIHg9IjU3LjYiIHk9IjE4NS4yNTY2NTkiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOSI+CiAgICAgIDwhLS0gMiAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDQuMjM3NSAxODkuMDU1ODc3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzQiPgogICAgIDxnIGlkPSJsaW5lMmRfMTAiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI204MzY2MWNlYmYxIiB4PSI1Ny42IiB5PSIxMjcuMDYyOTY5IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEwIj4KICAgICAgPCEtLSAzIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NC4yMzc1IDEzMC44NjIxODgpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMyIgZD0iTSAyNTk3IDI1MTYgClEgMzA1MCAyNDE5IDMzMDQgMjExMiAKUSAzNTU5IDE4MDYgMzU1OSAxMzU2IApRIDM1NTkgNjY2IDMwODQgMjg3IApRIDI2MDkgLTkxIDE3MzQgLTkxIApRIDE0NDEgLTkxIDExMzAgLTMzIApRIDgxOSAyNSA0ODggMTQxIApMIDQ4OCA3NTAgClEgNzUwIDU5NyAxMDYyIDUxOSAKUSAxMzc1IDQ0MSAxNzE2IDQ0MSAKUSAyMzA5IDQ0MSAyNjIwIDY3NSAKUSAyOTMxIDkwOSAyOTMxIDEzNTYgClEgMjkzMSAxNzY5IDI2NDIgMjAwMSAKUSAyMzUzIDIyMzQgMTgzOCAyMjM0IApMIDEyOTQgMjIzNCAKTCAxMjk0IDI3NTMgCkwgMTg2MyAyNzUzIApRIDIzMjggMjc1MyAyNTc1IDI5MzkgClEgMjgyMiAzMTI1IDI4MjIgMzQ3NSAKUSAyODIyIDM4MzQgMjU2NyA0MDI2IApRIDIzMTMgNDIxOSAxODM4IDQyMTkgClEgMTU3OCA0MjE5IDEyODEgNDE2MiAKUSA5ODQgNDEwNiA2MjggMzk4OCAKTCA2MjggNDU1MCAKUSA5ODggNDY1MCAxMzAyIDQ3MDAgClEgMTYxNiA0NzUwIDE4OTQgNDc1MCAKUSAyNjEzIDQ3NTAgMzAzMSA0NDIzIApRIDM0NTAgNDA5NyAzNDUwIDM1NDEgClEgMzQ1MCAzMTUzIDMyMjggMjg4NiAKUSAzMDA2IDI2MTkgMjU5NyAyNTE2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzExIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtODM2NjFjZWJmMSIgeD0iNTcuNiIgeT0iNjguODY5MjgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ0LjIzNzUgNzIuNjY4NDk5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgPHBhdGggZD0iTSA3My44MzI3MjcgMjY2LjY3OTIyMyAKTCA3NS40ODA3MiAyNzYuMzUxNzM5IApMIDc3LjEyODcxMyAyNzYuODU5NDYxIApMIDc4Ljc3NjcwNSAyODAuNTIzMDkxIApMIDgwLjQyNDY5OCAyNzYuODg3ODM0IApMIDgyLjA3MjY5IDI4MS4yNTc1NjkgCkwgODMuNzIwNjgzIDI4Mi40OTE4NzYgCkwgODcuMDE2NjY4IDI3OS45MDkyMjYgCkwgODguNjY0NjYxIDI4MS40NjU4NSAKTCA5MC4zMTI2NTMgMjg1LjE3MTQzIApMIDkxLjk2MDY0NiAyODcuMTEyNDg4IApMIDkzLjYwODYzOSAyNzguNjA2MzU1IApMIDk1LjI1NjYzMSAyNzguMzc3NTA5IApMIDk2LjkwNDYyNCAyODUuNzQ1OTczIApMIDk4LjU1MjYxNyAyOTAuMDIzNzM1IApMIDEwMC4yMDA2MDkgMjg3Ljk1NTUxNyAKTCAxMDEuODQ4NjAyIDI4Mi4xNTU2NTIgCkwgMTA1LjE0NDU4NyAyODQuMTk0Mjc3IApMIDEwNi43OTI1OCAyODYuNjMwMTgzIApMIDEwOC40NDA1NzIgMjg2Ljk0MTQ4IApMIDExMC4wODg1NjUgMjg3Ljg2MzkxMyAKTCAxMTEuNzM2NTU3IDI3OS41NTAxMDcgCkwgMTEzLjM4NDU1IDI3OS42NDg2MjMgCkwgMTE1LjAzMjU0MyAyODMuOTU4NjUgCkwgMTE2LjY4MDUzNSAyODQuMjY5NTEzIApMIDExOC4zMjg1MjggMjg1Ljk1MTg5NCAKTCAxMTkuOTc2NTIxIDI4OC4xNTg3NDMgCkwgMTIxLjYyNDUxMyAyODUuNTk2NzE0IApMIDEyMy4yNzI1MDYgMjg4LjkzNDQ1MSAKTCAxMjQuOTIwNDk4IDI5MS4yNDA4NyAKTCAxMjYuNTY4NDkxIDI3OS4zMjM4MiAKTCAxMjguMjE2NDg0IDI4OS4wMDQ3MzQgCkwgMTMxLjUxMjQ2OSAyODguOTM4NDI3IApMIDEzMy4xNjA0NjEgMjgxLjc1ODYyNiAKTCAxMzQuODA4NDU0IDI5MC45MjkxNTIgCkwgMTM2LjQ1NjQ0NyAyODguODgzNzc4IApMIDEzOC4xMDQ0MzkgMjgzLjU0Mzg4MiAKTCAxMzkuNzUyNDMyIDI5Mi45MTEyMSAKTCAxNDEuNDAwNDI1IDI4Ni4xMDk5NjIgCkwgMTQzLjA0ODQxNyAyODIuNTA0OTg0IApMIDE0NC42OTY0MSAyODUuMDkzOTkzIApMIDE0Ni4zNDQ0MDIgMjkzLjA4NDM1MiAKTCAxNDcuOTkyMzk1IDI4Mi40MzAxODYgCkwgMTQ5LjY0MDM4OCAyODkuOTc2NjUgCkwgMTUxLjI4ODM4IDI4OC4xNDM0MDQgCkwgMTUyLjkzNjM3MyAyODYuNjYxMjgxIApMIDE1NC41ODQzNjUgMjgyLjg3Mjg4NCAKTCAxNTYuMjMyMzU4IDI4OS4wMTU5MTYgCkwgMTU3Ljg4MDM1MSAyODQuNDEzMTE2IApMIDE2MS4xNzYzMzYgMjg5Ljc3NDQ2OCAKTCAxNjIuODI0MzI5IDI4NS43MTg2MTggCkwgMTY0LjQ3MjMyMSAyODcuNjAxMDQ0IApMIDE2Ni4xMjAzMTQgMjg3LjcxMjMxNSAKTCAxNjcuNzY4MzA2IDI5NS40ODggCkwgMTY5LjQxNjI5OSAyODEuODMyMDY4IApMIDE3MS4wNjQyOTIgMjkzLjYzODE2OCAKTCAxNzIuNzEyMjg0IDI4Ny40NzA3NzYgCkwgMTc0LjM2MDI3NyAyODguMDY3OTk1IApMIDE3Ni4wMDgyNjkgMjg0LjE0MDk3NSAKTCAxNzcuNjU2MjYyIDI4Ny45NDI2MDYgCkwgMTc5LjMwNDI1NSAyODkuODQ0MzY2IApMIDE4MC45NTIyNDcgMjg2LjA3Mjk3IApMIDE4Mi42MDAyNCAyNzguNjIzNTE4IApMIDE4NC4yNDgyMzMgMjg5LjM0ODI1MSAKTCAxODUuODk2MjI1IDI4OS45NTY0MjQgCkwgMTg3LjU0NDIxOCAyODQuODc4MjEzIApMIDE4OS4xOTIyMSAyODguOTE1ODA1IApMIDE5MC44NDAyMDMgMjg1LjEyMzc4MyAKTCAxOTIuNDg4MTk2IDI4My4xMDkzMjggCkwgMTk0LjEzNjE4OCAyNzAuMDk2NDE0IApMIDE5NS43ODQxODEgMjg5LjI3MDAzMiAKTCAxOTcuNDMyMTc0IDI4NC4xMDU2OTMgCkwgMTk5LjA4MDE2NiAyODMuODg3MDQ3IApMIDIwMC43MjgxNTkgMjgzLjE1MDg0OSAKTCAyMDIuMzc2MTUxIDI4My40MzcyODEgCkwgMjA0LjAyNDE0NCAyODIuNzc4NTkzIApMIDIwNS42NzIxMzcgMjg2LjIyMjE3NyAKTCAyMDcuMzIwMTI5IDI4OC42NjM2NTQgCkwgMjA4Ljk2ODEyMiAyODUuMDA0MTI2IApMIDIxMC42MTYxMTQgMjg0LjE0MTc1NyAKTCAyMTIuMjY0MTA3IDI3MS42MTM5NjYgCkwgMjEzLjkxMjEgMjkxLjExNTE1NCAKTCAyMTUuNTYwMDkyIDI3OS4xMDUzMzUgCkwgMjE3LjIwODA4NSAyNzEuNzcxMjg3IApMIDIxOC44NTYwNzggMjg1LjIyNDI5OCAKTCAyMjAuNTA0MDcgMjY3Ljk0NzIzMiAKTCAyMjIuMTUyMDYzIDI4OS4yODUzNzEgCkwgMjIzLjgwMDA1NSAyNzMuMDE1NDIyIApMIDIyNy4wOTYwNDEgMjgwLjkzOTgzOCAKTCAyMjguNzQ0MDMzIDI4Mi41NzQ5NiAKTCAyMzAuMzkyMDI2IDI4NS4xMTYwODggCkwgMjMyLjA0MDAxOCAyNzYuNjk4NjQ0IApMIDIzMy42ODgwMTEgMjY0LjU3MTE5NyAKTCAyMzUuMzM2MDA0IDI1OC45NTM1MzUgCkwgMjM2Ljk4Mzk5NiAyNjEuODgxNzk2IApMIDIzOC42MzE5ODkgMjc2LjI3MzYxIApMIDI0MC4yNzk5ODIgMjY0LjA2NTgwMiAKTCAyNDEuOTI3OTc0IDI2NC45MDAzMzggCkwgMjQzLjU3NTk2NyAyNTMuMzkzMTcgCkwgMjQ1LjIyMzk1OSAyMjguNzYyNTQ4IApMIDI0Ni44NzE5NTIgMjM2Ljg1NzQ4MyAKTCAyNDguNTE5OTQ1IDIzMy4yMDU1MiAKTCAyNTAuMTY3OTM3IDI2Ni40MTIzMjMgCkwgMjUxLjgxNTkzIDI2Ni44NTE1MTUgCkwgMjUzLjQ2MzkyMiAyNjguNDUyMjMgCkwgMjU1LjExMTkxNSAyMDQuMTkzNjA3IApMIDI1Ni43NTk5MDggMjMwLjQ3NzYyIApMIDI1OC40MDc5IDIzMi4zMjQ1ODggCkwgMjYwLjA1NTg5MyAxOTMuMjc0NjIyIApMIDI2MS43MDM4ODYgMjIwLjM4MjQ1MyAKTCAyNjMuMzUxODc4IDIyNy4xMDQ3NCAKTCAyNjQuOTk5ODcxIDIyNy4xMjczNTUgCkwgMjY2LjY0Nzg2MyAyNDAuNjk2NDQxIApMIDI2OC4yOTU4NTYgMjI3LjY1NjQ2NyAKTCAyNjkuOTQzODQ5IDIwMy4wMjU4NCAKTCAyNzEuNTkxODQxIDIwNS45NTE2NDEgCkwgMjczLjIzOTgzNCAxNTkuNTE1MDkxIApMIDI3NC44ODc4MjYgMTk2LjQ2Mjk4OSAKTCAyNzYuNTM1ODE5IDI0OC4yMDgwODkgCkwgMjc4LjE4MzgxMiAyMjAuMzEzMzQzIApMIDI3OS44MzE4MDQgMTY3LjAwMTM0MyAKTCAyODEuNDc5Nzk3IDEzNS43Nzc4NTkgCkwgMjgzLjEyNzc5IDE2NS41OTAxNjUgCkwgMjg0Ljc3NTc4MiAxNzUuMjI4NjQ2IApMIDI4Ni40MjM3NzUgMjEzLjA0OTM1MSAKTCAyODguMDcxNzY3IDE1OS45NjMxMSAKTCAyODkuNzE5NzYgMTE5LjA5NjA0NyAKTCAyOTEuMzY3NzUzIDEyNy43MzU1NDkgCkwgMjkzLjAxNTc0NSA4Mi4yMjQxMTQgCkwgMjk0LjY2MzczOCAxMjEuMTE0MjAzIApMIDI5Ni4zMTE3MzEgMTU0LjAzNzk1IApMIDI5Ny45NTk3MjMgNTMuNTY4IApMIDI5OS42MDc3MTYgMjAyLjUyMjY3NyAKTCAzMDEuMjU1NzA4IDE0NS4xODI3OSAKTCAzMDIuOTAzNzAxIDEzNS42NTg5NTYgCkwgMzA0LjU1MTY5NCA5Ny4yNTY4OTYgCkwgMzA2LjE5OTY4NiAxMjEuNjA1NTkyIApMIDMwNy44NDc2NzkgMTgyLjQzODg3NyAKTCAzMDkuNDk1NjcxIDExNy40MjYzMzUgCkwgMzExLjE0MzY2NCAxNTUuNTI3NDU1IApMIDMxMi43OTE2NTcgMTQ3LjE5NDA1OCAKTCAzMTQuNDM5NjQ5IDE0Ni4wODE0NjEgCkwgMzE2LjA4NzY0MiAxNzguNzAwMjM1IApMIDMxNy43MzU2MzUgMTI3LjQzNzYwMSAKTCAzMTkuMzgzNjI3IDEzNS42ODMzMzkgCkwgMzIxLjAzMTYyIDEyMi4zMjMxMDQgCkwgMzIyLjY3OTYxMiAyMDUuMzEzNDEzIApMIDMyNC4zMjc2MDUgMTcxLjA2OTY3NSAKTCAzMjUuOTc1NTk4IDkxLjA0NTI1IApMIDMyNy42MjM1OSAxMzEuMzI0NDU2IApMIDMyOS4yNzE1ODMgMTI2LjQ5NDUxNCAKTCAzMzAuOTE5NTc1IDE0Ny4wNTE4MjIgCkwgMzMyLjU2NzU2OCAxOTUuMjMxOTg0IApMIDMzNC4yMTU1NjEgMTYyLjI0NjI0NSAKTCAzMzUuODYzNTUzIDE2NS44OTI4MTIgCkwgMzM3LjUxMTU0NiAxODYuNTM0NzYyIApMIDMzOS4xNTk1MzkgMTQwLjAwMzAwOCAKTCAzNDAuODA3NTMxIDE2Ny4yODE0NzQgCkwgMzQyLjQ1NTUyNCAxMjUuNjY2MTQ2IApMIDM0NC4xMDM1MTYgMjE5LjAwMzcwNCAKTCAzNDUuNzUxNTA5IDE5OS42MzU3MDQgCkwgMzQ3LjM5OTUwMiAxOTYuOTE4Mjc0IApMIDM0OS4wNDc0OTQgMTYwLjk2MDkwNCAKTCAzNTAuNjk1NDg3IDIyNy4yNTk2MTcgCkwgMzUyLjM0MzQ3OSAyMzQuMzgwMDQ3IApMIDM1My45OTE0NzIgMjA0LjcyOTEyIApMIDM1NS42Mzk0NjUgMjAxLjExNzEgCkwgMzU3LjI4NzQ1NyAxODYuOTgxNSAKTCAzNTguOTM1NDUgMjI3LjI4NDY3NSAKTCAzNjAuNTgzNDQzIDIzNi4wOTcxNDMgCkwgMzYyLjIzMTQzNSAyNDEuNTcxMTE3IApMIDM2My44Nzk0MjggMjU3LjE3NDYxNiAKTCAzNjUuNTI3NDIgMjQ3LjIyNDA0NSAKTCAzNjcuMTc1NDEzIDI2Ni4wMDI4ODkgCkwgMzY4LjgyMzQwNiAyNjIuNjc1ODg0IApMIDM3MC40NzEzOTggMjY5Ljc5MTQ4MyAKTCAzNzIuMTE5MzkxIDI2Ny4zNzY2MzEgCkwgMzczLjc2NzM4MyAyNjAuMjM3NDQ1IApMIDM3NS40MTUzNzYgMjU4Ljc3MzUwOCAKTCAzNzcuMDYzMzY5IDI2Ny45OTM1IApMIDM3OC43MTEzNjEgMjczLjUzMTU4OSAKTCAzODAuMzU5MzU0IDI3Ni4wNjc2MiAKTCAzODIuMDA3MzQ3IDI3My4wNDk0MiAKTCAzODMuNjU1MzM5IDI3OC44NjEyMjUgCkwgMzg1LjMwMzMzMiAyNzkuMjAxMDY1IApMIDM4Ni45NTEzMjQgMjgxLjQ4ODI2NiAKTCAzODguNTk5MzE3IDI3OS44MTA5MjggCkwgMzkwLjI0NzMxIDI4MC45NDY3OTkgCkwgMzkxLjg5NTMwMiAyODEuNTE5NDAzIApMIDM5My41NDMyOTUgMjc5Ljc1NTQ5NCAKTCAzOTUuMTkxMjg3IDI3OC4yNTMyOTMgCkwgMzk2LjgzOTI4IDI3NS43OTYwMjMgCkwgMzk4LjQ4NzI3MyAyNjcuNjM0NjkyIApMIDM5OC40ODcyNzMgMjY3LjYzNDY5MiAKIiBjbGlwLXBhdGg9InVybCgjcGY4YzBjOTFkNjMpIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMWY3N2I0OyBzdHJva2Utd2lkdGg6IDEuNTsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF8zIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDU3LjYgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzQiPgogICAgPHBhdGggZD0iTSA0MTQuNzIgMzA3LjU4NCAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzUiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNDE0LjcyIDMwNy41ODQgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNiI+CiAgICA8cGF0aCBkPSJNIDU3LjYgNDEuNDcyIApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogIDwvZz4KIDwvZz4KIDxkZWZzPgogIDxjbGlwUGF0aCBpZD0icGY4YzBjOTFkNjMiPgogICA8cmVjdCB4PSI1Ny42IiB5PSI0MS40NzIiIHdpZHRoPSIzNTcuMTIiIGhlaWdodD0iMjY2LjExMiIvPgogIDwvY2xpcFBhdGg+CiA8L2RlZnM+Cjwvc3ZnPgo=" alt="image" /></p>

<h2 id="flicking-thumbtacks">Flicking thumbtacks</h2>

<p>Imagine a box of 320 thumbtacks. We flick each thumbtack 9 times. If it
lands point up, we call it a success. Point down is a failure. Because
of the imperfections, each thumbtack has its own probability of success.
The file, <code>tacks.csv</code>, contains the success and failure counts for this
experiment. The data in <code>tacks.csv</code> is exactly the data considered in
<a href="https://doi.org/10.1214/aos/1032526949">Liu (1996)</a>. (This data
originally came from an experiment by Beckett and Diaconis in 1994. In
the original experiment, there were not 320 thumbtacks. Rather, there
were 16 thumbtacks, 2 flickers, and 10 surfaces.)</p>

<p>To study this situation, we first create the model and perform 10,000
simulations.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">csv</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tacks.csv&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">sheet</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="o">...</span>     <span class="n">rowCounts</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sheet</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="c1"># took ~4m on a Macbook</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">152.9149187791142</span>
</code></pre>
</div>

<p>Here, we use a row concentration parameter of $2$ and a base measure
that assigns probability $1/2$ to both $0$ and $1$. This matches the
distribution used by Liu. What we call the column concentration
parameter is denoted by $c$ in Liu's analysis. Liu considers the cases
$c = 0.1$, $c = 1$, $c = 5$, and $c = 10$. Here, we are taking $c = 1$.</p>

<p>We also checked our effective sample size, which is a good habit
whenever we add new weighted simulations. For comparison, Liu reported
an effective sample size of 227 in the case $c = 1$.</p>

<p>We now look at the approximate density of the posterior probability of
success.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">meanRDGpdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">bandwidth</span>
<span class="mf">0.11536431167041011</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzBUMDk6NTc6NDUuODg3MDE5PC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibWJjMmFmODY3MmIiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmMyYWY4NjcyYiIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWJjMmFmODY3MmIiIHg9IjEzOC43NjM2MzYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzAuODEyMDc0IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmMyYWY4NjcyYiIgeD0iMjAzLjY5NDU0NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS43NDI5ODMgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmMyYWY4NjcyYiIgeD0iMjY4LjYyNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MC42NzM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21iYzJhZjg2NzJiIiB4PSIzMzMuNTU2MzY0IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI1LjYwNDgwMSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21iYzJhZjg2NzJiIiB4PSIzOTguNDg3MjczIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkwLjUzNTcxIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9Im1hdHBsb3RsaWIuYXhpc18yIj4KICAgIDxnIGlkPSJ5dGlja18xIj4KICAgICA8ZyBpZD0ibGluZTJkXzciPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtOTU4NDEzYWI2YiIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTU4NDEzYWI2YiIgeD0iNTcuNiIgeT0iMjk1LjY4MDkzMSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSAwLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyOTkuNDgwMTQ5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18yIj4KICAgICA8ZyBpZD0ibGluZTJkXzgiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NTg0MTNhYjZiIiB4PSI1Ny42IiB5PSIyNjUuMjM1ODQyIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzgiPgogICAgICA8IS0tIDAuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDI2OS4wMzUwNikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM1IiBkPSJNIDY5MSA0NjY2IApMIDMxNjkgNDY2NiAKTCAzMTY5IDQxMzQgCkwgMTI2OSA0MTM0IApMIDEyNjkgMjk5MSAKUSAxNDA2IDMwMzggMTU0MyAzMDYxIApRIDE2ODEgMzA4NCAxODE5IDMwODQgClEgMjYwMCAzMDg0IDMwNTYgMjY1NiAKUSAzNTEzIDIyMjggMzUxMyAxNDk3IApRIDM1MTMgNzQ0IDMwNDQgMzI2IApRIDI1NzUgLTkxIDE3MjIgLTkxIApRIDE0MjggLTkxIDExMjMgLTQxIApRIDgxOSA5IDQ5NCAxMDkgCkwgNDk0IDc0NCAKUSA3NzUgNTkxIDEwNzUgNTE2IApRIDEzNzUgNDQxIDE3MDkgNDQxIApRIDIyNTAgNDQxIDI1NjUgNzI1IApRIDI4ODEgMTAwOSAyODgxIDE0OTcgClEgMjg4MSAxOTg0IDI1NjUgMjI2OCAKUSAyMjUwIDI1NTMgMTcwOSAyNTUzIApRIDE0NTYgMjU1MyAxMjA0IDI0OTcgClEgOTUzIDI0NDEgNjkxIDIzMjIgCkwgNjkxIDQ2NjYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja18zIj4KICAgICA8ZyBpZD0ibGluZTJkXzkiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NTg0MTNhYjZiIiB4PSI1Ny42IiB5PSIyMzQuNzkwNzUzIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzkiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDIzOC41ODk5NzEpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzQiPgogICAgIDxnIGlkPSJsaW5lMmRfMTAiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NTg0MTNhYjZiIiB4PSI1Ny42IiB5PSIyMDQuMzQ1NjY0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEwIj4KICAgICAgPCEtLSAxLjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyMDguMTQ0ODgyKSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzExIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTU4NDEzYWI2YiIgeD0iNTcuNiIgeT0iMTczLjkwMDU3NSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMSI+CiAgICAgIDwhLS0gMi4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTc3LjY5OTc5Mykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNiI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTk1ODQxM2FiNmIiIHg9IjU3LjYiIHk9IjE0My40NTU0ODYiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTIiPgogICAgICA8IS0tIDIuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDE0Ny4yNTQ3MDQpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzUiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzciPgogICAgIDxnIGlkPSJsaW5lMmRfMTMiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NTg0MTNhYjZiIiB4PSI1Ny42IiB5PSIxMTMuMDEwMzk3IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEzIj4KICAgICAgPCEtLSAzLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxMTYuODA5NjE1KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzMiIGQ9Ik0gMjU5NyAyNTE2IApRIDMwNTAgMjQxOSAzMzA0IDIxMTIgClEgMzU1OSAxODA2IDM1NTkgMTM1NiAKUSAzNTU5IDY2NiAzMDg0IDI4NyAKUSAyNjA5IC05MSAxNzM0IC05MSAKUSAxNDQxIC05MSAxMTMwIC0zMyAKUSA4MTkgMjUgNDg4IDE0MSAKTCA0ODggNzUwIApRIDc1MCA1OTcgMTA2MiA1MTkgClEgMTM3NSA0NDEgMTcxNiA0NDEgClEgMjMwOSA0NDEgMjYyMCA2NzUgClEgMjkzMSA5MDkgMjkzMSAxMzU2IApRIDI5MzEgMTc2OSAyNjQyIDIwMDEgClEgMjM1MyAyMjM0IDE4MzggMjIzNCAKTCAxMjk0IDIyMzQgCkwgMTI5NCAyNzUzIApMIDE4NjMgMjc1MyAKUSAyMzI4IDI3NTMgMjU3NSAyOTM5IApRIDI4MjIgMzEyNSAyODIyIDM0NzUgClEgMjgyMiAzODM0IDI1NjcgNDAyNiAKUSAyMzEzIDQyMTkgMTgzOCA0MjE5IApRIDE1NzggNDIxOSAxMjgxIDQxNjIgClEgOTg0IDQxMDYgNjI4IDM5ODggCkwgNjI4IDQ1NTAgClEgOTg4IDQ2NTAgMTMwMiA0NzAwIApRIDE2MTYgNDc1MCAxODk0IDQ3NTAgClEgMjYxMyA0NzUwIDMwMzEgNDQyMyAKUSAzNDUwIDQwOTcgMzQ1MCAzNTQxIApRIDM0NTAgMzE1MyAzMjI4IDI4ODYgClEgMzAwNiAyNjE5IDI1OTcgMjUxNiAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMzIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzgiPgogICAgIDxnIGlkPSJsaW5lMmRfMTQiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NTg0MTNhYjZiIiB4PSI1Ny42IiB5PSI4Mi41NjUzMDgiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTQiPgogICAgICA8IS0tIDMuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDg2LjM2NDUyNikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfOSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xNSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTk1ODQxM2FiNmIiIHg9IjU3LjYiIHk9IjUyLjEyMDIxOSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xNSI+CiAgICAgIDwhLS0gNC4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgNTUuOTE5NDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibGluZTJkXzE2Ij4KICAgIDxwYXRoIGQ9Ik0gNzMuODMyNzI3IDI5NS40ODggCkwgODguNTE1NTk2IDI5NS4zNjk2MDcgCkwgMTE0LjYxODQ3NCAyOTQuNzU1MTk4IApMIDExOS41MTI3NjQgMjk0Ljc1MTgwNCAKTCAxMjYuMDM4NDgzIDI5NC44MjU5MjEgCkwgMTQ1LjYxNTY0MiAyOTQuMTQ0NTk0IApMIDE0OC44Nzg1MDIgMjkzLjcyNzg2NCAKTCAxNTIuMTQxMzYxIDI5My4xMjU2MjMgCkwgMTYwLjI5ODUxMSAyOTEuMzY3OTMzIApMIDE2My41NjEzNyAyOTEuMDgxMjUyIApMIDE3MS43MTg1MiAyOTAuODk2ODEgCkwgMTc0Ljk4MTM4IDI5MC4zODA0ODUgCkwgMTc2LjYxMjgxIDI4OS45NzQwMjQgCkwgMTc5Ljg3NTY2OSAyODguODExOTk0IApMIDE4OS42NjQyNDkgMjg0LjM2NDYyNyAKTCAxOTIuOTI3MTA4IDI4Mi42MDY5MTMgCkwgMTk2LjE4OTk2OCAyODAuNjc1NjMzIApMIDE5OS40NTI4MjggMjc5LjA1OTQ1NyAKTCAyMDIuNzE1Njg4IDI3Ny40OTQxMiAKTCAyMDQuMzQ3MTE3IDI3Ni4zMjg2NTggCkwgMjA1Ljk3ODU0NyAyNzQuNjAxOTE2IApMIDIwNy42MDk5NzcgMjcyLjA4Mzc1NyAKTCAyMDkuMjQxNDA3IDI2OC41ODIyMTMgCkwgMjEwLjg3MjgzNyAyNjMuOTYwMDcxIApMIDIxMi41MDQyNjcgMjU4LjEzNjQ0MiAKTCAyMTQuMTM1Njk3IDI1MS4wOTIxNzcgCkwgMjE1Ljc2NzEyNyAyNDIuOTAyMzc2IApMIDIxOS4wMjk5ODYgMjI0LjE4MzE2NCAKTCAyMjIuMjkyODQ2IDIwNS43NDg1NzkgCkwgMjIzLjkyNDI3NiAxOTcuODk3MzQxIApMIDIyNS41NTU3MDYgMTkxLjEyNTUwNyAKTCAyMzAuNDQ5OTk1IDE3Mi43MDAzNjkgCkwgMjMyLjA4MTQyNSAxNjUuMTM2MjI1IApMIDIzMy43MTI4NTUgMTU2LjE1Mzk0MiAKTCAyMzUuMzQ0Mjg1IDE0NS42OTg3MTggCkwgMjM4LjYwNzE0NSAxMjEuNzQxODg4IApMIDI0MC4yMzg1NzUgMTA5LjgyMjA3OSAKTCAyNDEuODcwMDA1IDk5LjQ0MjA1NiAKTCAyNDMuNTAxNDM0IDkxLjY5OTY1NSAKTCAyNDUuMTMyODY0IDg3LjI5ODI1IApMIDI0Ni43NjQyOTQgODYuMzYzMzI1IApMIDI0OC4zOTU3MjQgODguNDU5NDA3IApMIDI1MC4wMjcxNTQgOTIuNzQ1NTMzIApMIDI1My4yOTAwMTQgMTAzLjY1MDg0MyAKTCAyNTQuOTIxNDQ0IDEwOC4zOTkxNTkgCkwgMjU4LjE4NDMwMyAxMTUuODE0MzcyIApMIDI1OS44MTU3MzMgMTIwLjU1NjM0MyAKTCAyNjEuNDQ3MTYzIDEyNy45MzM4MzYgCkwgMjYzLjA3ODU5MyAxMzguNjY5OTk3IApMIDI2NC43MTAwMjMgMTUyLjE4Njc3OSAKTCAyNjYuMzQxNDUzIDE2Ni43MjY5ODggCkwgMjY3Ljk3Mjg4MyAxODAuMDgyODMyIApMIDI2OS42MDQzMTIgMTkwLjUwNTIyOCAKTCAyNzEuMjM1NzQyIDE5Ny4zMjE3ODEgCkwgMjcyLjg2NzE3MiAyMDEuMDMxODE3IApMIDI3NC40OTg2MDIgMjAyLjk0MzQ4NSAKTCAyNzYuMTMwMDMyIDIwNC41ODQ4MjYgCkwgMjc3Ljc2MTQ2MiAyMDcuMTM3MjY2IApMIDI3OS4zOTI4OTIgMjExLjA3ODk0OCAKTCAyODQuMjg3MTgxIDIyNi4zODU1NjEgCkwgMjg1LjkxODYxMSAyMzAuMDk5MDE4IApMIDI4Ny41NTAwNDEgMjMyLjUwNTk0MSAKTCAyODkuMTgxNDcxIDIzMy43OTczMTkgCkwgMjkwLjgxMjkwMSAyMzQuMjg5Nzk0IApMIDI5Mi40NDQzMzEgMjM0LjIxMDIxNSAKTCAyOTQuMDc1NzYxIDIzMy42MTUwNTkgCkwgMjk1LjcwNzE5IDIzMi40NTI1NDIgCkwgMjk3LjMzODYyIDIzMC42NzUyNzMgCkwgMjk4Ljk3MDA1IDIyOC4yOTE4NDcgCkwgMzAwLjYwMTQ4IDIyNS4zMTQyNzggCkwgMzAyLjIzMjkxIDIyMS42NTYxNzkgCkwgMzAzLjg2NDM0IDIxNy4wODU0NjYgCkwgMzA1LjQ5NTc3IDIxMS4yOTg2ODQgCkwgMzA3LjEyNzIgMjA0LjA5MzYzMyAKTCAzMDguNzU4NjMgMTk1LjUzOTk5NCAKTCAzMTYuOTE1Nzc5IDE0Ny42OTY4OTQgCkwgMzE4LjU0NzIwOSAxMzcuNTAzMjEzIApMIDMyMC4xNzg2MzkgMTI1Ljc3NzY2NiAKTCAzMjEuODEwMDY5IDExMi4yNjczNTUgCkwgMzI1LjA3MjkyOCA4Mi44NDQ0ODEgCkwgMzI2LjcwNDM1OCA2OS44OTIxNDkgCkwgMzI4LjMzNTc4OCA2MC4xNjMyNzQgCkwgMzI5Ljk2NzIxOCA1NC42MTUxMDUgCkwgMzMxLjU5ODY0OCA1My41NjggCkwgMzMzLjIzMDA3OCA1Ni44NTkxNTggCkwgMzM0Ljg2MTUwOCA2NC4xMDExNzcgCkwgMzM2LjQ5MjkzNyA3NC44OTM4MjIgCkwgMzM4LjEyNDM2NyA4OC44OTg3NDQgCkwgMzM5Ljc1NTc5NyAxMDUuNzY1MjA5IApMIDM0MS4zODcyMjcgMTI0Ljk2NjUxMiAKTCAzNDYuMjgxNTE3IDE4Ni43MTMxODkgCkwgMzQ3LjkxMjk0NyAyMDQuNjU3MDgyIApMIDM0OS41NDQzNzYgMjE5Ljg2NDk1NiAKTCAzNTEuMTc1ODA2IDIzMi4yOTAwMzIgCkwgMzUyLjgwNzIzNiAyNDIuMzU5MTgxIApMIDM1NC40Mzg2NjYgMjUwLjY5Mzc4OCAKTCAzNTYuMDcwMDk2IDI1Ny44Mjk2MDcgCkwgMzU3LjcwMTUyNiAyNjQuMDY3ODU5IApMIDM1OS4zMzI5NTYgMjY5LjQ4OTI1OCAKTCAzNjAuOTY0Mzg2IDI3NC4wNjU5MjkgCkwgMzYyLjU5NTgxNSAyNzcuNzc0ODg1IApMIDM2NC4yMjcyNDUgMjgwLjY1MzI2IApMIDM2NS44NTg2NzUgMjgyLjc5NDg2MiAKTCAzNjcuNDkwMTA1IDI4NC4zMjMwMTIgCkwgMzY5LjEyMTUzNSAyODUuMzcxMzY4IApMIDM3MC43NTI5NjUgMjg2LjA3OTk0MiAKTCAzNzcuMjc4Njg0IDI4OC4xNzc5MzggCkwgMzgwLjU0MTU0NCAyODkuNjg4MTA2IApMIDM4My44MDQ0MDQgMjkxLjIxODI1OSAKTCAzODcuMDY3MjY0IDI5Mi40NjQwMjQgCkwgMzkwLjMzMDEyMyAyOTMuMzk2Njc2IApMIDM5My41OTI5ODMgMjk0LjA5MTg5NyAKTCAzOTguNDg3MjczIDI5NC44NDAzNzcgCkwgMzk4LjQ4NzI3MyAyOTQuODQwMzc3IAoiIGNsaXAtcGF0aD0idXJsKCNwNDQ4OWQ3MTZmOCkiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMxZjc3YjQ7IHN0cm9rZS13aWR0aDogMS41OyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzMiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNTcuNiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNCI+CiAgICA8cGF0aCBkPSJNIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNSI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA0MTQuNzIgMzA3LjU4NCAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF82Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiA0MS40NzIgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgPC9nPgogPC9nPgogPGRlZnM+CiAgPGNsaXBQYXRoIGlkPSJwNDQ4OWQ3MTZmOCI+CiAgIDxyZWN0IHg9IjU3LjYiIHk9IjQxLjQ3MiIgd2lkdGg9IjM1Ny4xMiIgaGVpZ2h0PSIyNjYuMTEyIi8+CiAgPC9jbGlwUGF0aD4KIDwvZGVmcz4KPC9zdmc+Cg==" alt="image" /></p>

<p>This graph look about the same as Liu's, but with minor differences. It
is difficult, though, to make a direct comparison. Liu also uses
Gaussian kernel smoothing, but does not provide any details about it.
For example, we do not know the bandwidth used to produce Liu's graphs.</p>

<p>We now try $c = 10$.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">380.0956178035554</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">meanRDGpdf</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">bandwidth</span>
<span class="mf">0.09615748053800711</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzBUMTA6MDc6MDIuMjA5OTUwPC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibWJkZDc1OTU4MWUiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmRkNzU5NTgxZSIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMmUiIGQ9Ik0gNjg0IDc5NCAKTCAxMzQ0IDc5NCAKTCAxMzQ0IDAgCkwgNjg0IDAgCkwgNjg0IDc5NCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWJkZDc1OTU4MWUiIHg9IjEzOC43NjM2MzYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzAuODEyMDc0IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMiIgZD0iTSAxMjI4IDUzMSAKTCAzNDMxIDUzMSAKTCAzNDMxIDAgCkwgNDY5IDAgCkwgNDY5IDUzMSAKUSA4MjggOTAzIDE0NDggMTUyOSAKUSAyMDY5IDIxNTYgMjIyOCAyMzM4IApRIDI1MzEgMjY3OCAyNjUxIDI5MTQgClEgMjc3MiAzMTUwIDI3NzIgMzM3OCAKUSAyNzcyIDM3NTAgMjUxMSAzOTg0IApRIDIyNTAgNDIxOSAxODMxIDQyMTkgClEgMTUzNCA0MjE5IDEyMDQgNDExNiAKUSA4NzUgNDAxMyA1MDAgMzgwMyAKTCA1MDAgNDQ0MSAKUSA4ODEgNDU5NCAxMjEyIDQ2NzIgClEgMTU0NCA0NzUwIDE4MTkgNDc1MCAKUSAyNTQ0IDQ3NTAgMjk3NSA0Mzg3IApRIDM0MDYgNDAyNSAzNDA2IDM0MTkgClEgMzQwNiAzMTMxIDMyOTggMjg3MyAKUSAzMTkxIDI2MTYgMjkwNiAyMjY2IApRIDI4MjggMjE3NSAyNDA5IDE3NDIgClEgMTk5MSAxMzA5IDEyMjggNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmRkNzU5NTgxZSIgeD0iMjAzLjY5NDU0NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAwLjQgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS43NDI5ODMgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtYmRkNzU5NTgxZSIgeD0iMjY4LjYyNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MC42NzM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM2IiBkPSJNIDIxMTMgMjU4NCAKUSAxNjg4IDI1ODQgMTQzOSAyMjkzIApRIDExOTEgMjAwMyAxMTkxIDE0OTcgClEgMTE5MSA5OTQgMTQzOSA3MDEgClEgMTY4OCA0MDkgMjExMyA0MDkgClEgMjUzOCA0MDkgMjc4NiA3MDEgClEgMzAzNCA5OTQgMzAzNCAxNDk3IApRIDMwMzQgMjAwMyAyNzg2IDIyOTMgClEgMjUzOCAyNTg0IDIxMTMgMjU4NCAKegpNIDMzNjYgNDU2MyAKTCAzMzY2IDM5ODggClEgMzEyOCA0MTAwIDI4ODYgNDE1OSAKUSAyNjQ0IDQyMTkgMjQwNiA0MjE5IApRIDE3ODEgNDIxOSAxNDUxIDM3OTcgClEgMTEyMiAzMzc1IDEwNzUgMjUyMiAKUSAxMjU5IDI3OTQgMTUzNyAyOTM5IApRIDE4MTYgMzA4NCAyMTUwIDMwODQgClEgMjg1MyAzMDg0IDMyNjEgMjY1NyAKUSAzNjY5IDIyMzEgMzY2OSAxNDk3IApRIDM2NjkgNzc4IDMyNDQgMzQzIApRIDI4MTkgLTkxIDIxMTMgLTkxIApRIDEzMDMgLTkxIDg3NSA1MjkgClEgNDQ3IDExNTAgNDQ3IDIzMjggClEgNDQ3IDM0MzQgOTcyIDQwOTIgClEgMTQ5NyA0NzUwIDIzODEgNDc1MCAKUSAyNjE5IDQ3NTAgMjg2MSA0NzAzIApRIDMxMDMgNDY1NiAzMzY2IDQ1NjMgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM2IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21iZGQ3NTk1ODFlIiB4PSIzMzMuNTU2MzY0IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDAuOCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI1LjYwNDgwMSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21iZGQ3NTk1ODFlIiB4PSIzOTguNDg3MjczIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzkwLjUzNTcxIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9Im1hdHBsb3RsaWIuYXhpc18yIj4KICAgIDxnIGlkPSJ5dGlja18xIj4KICAgICA8ZyBpZD0ibGluZTJkXzciPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtMDIzODY1YjllZiIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDIzODY1YjllZiIgeD0iNTcuNiIgeT0iMjk4LjIyMDY0MSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSAwLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAzMDIuMDE5ODYpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfOCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTAyMzg2NWI5ZWYiIHg9IjU3LjYiIHk9IjI1NC44MzY5OTEiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOCI+CiAgICAgIDwhLS0gMC41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjU4LjYzNjIxKSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzUiIGQ9Ik0gNjkxIDQ2NjYgCkwgMzE2OSA0NjY2IApMIDMxNjkgNDEzNCAKTCAxMjY5IDQxMzQgCkwgMTI2OSAyOTkxIApRIDE0MDYgMzAzOCAxNTQzIDMwNjEgClEgMTY4MSAzMDg0IDE4MTkgMzA4NCAKUSAyNjAwIDMwODQgMzA1NiAyNjU2IApRIDM1MTMgMjIyOCAzNTEzIDE0OTcgClEgMzUxMyA3NDQgMzA0NCAzMjYgClEgMjU3NSAtOTEgMTcyMiAtOTEgClEgMTQyOCAtOTEgMTEyMyAtNDEgClEgODE5IDkgNDk0IDEwOSAKTCA0OTQgNzQ0IApRIDc3NSA1OTEgMTA3NSA1MTYgClEgMTM3NSA0NDEgMTcwOSA0NDEgClEgMjI1MCA0NDEgMjU2NSA3MjUgClEgMjg4MSAxMDA5IDI4ODEgMTQ5NyAKUSAyODgxIDE5ODQgMjU2NSAyMjY4IApRIDIyNTAgMjU1MyAxNzA5IDI1NTMgClEgMTQ1NiAyNTUzIDEyMDQgMjQ5NyAKUSA5NTMgMjQ0MSA2OTEgMjMyMiAKTCA2OTEgNDY2NiAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzUiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfOSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTAyMzg2NWI5ZWYiIHg9IjU3LjYiIHk9IjIxMS40NTMzNDIiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOSI+CiAgICAgIDwhLS0gMS4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjE1LjI1MjU2KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEwIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDIzODY1YjllZiIgeD0iNTcuNiIgeT0iMTY4LjA2OTY5MiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMS41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTcxLjg2ODkxMSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTAyMzg2NWI5ZWYiIHg9IjU3LjYiIHk9IjEyNC42ODYwNDIiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDIuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDEyOC40ODUyNjEpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzYiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20wMjM4NjViOWVmIiB4PSI1Ny42IiB5PSI4MS4zMDIzOTMiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTIiPgogICAgICA8IS0tIDIuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDg1LjEwMTYxMikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgIDwvZz4KICAgPGcgaWQ9ImxpbmUyZF8xMyI+CiAgICA8cGF0aCBkPSJNIDczLjgzMjcyNyAyOTUuNDg4IApMIDkwLjE0NzAyNiAyOTQuODgzMzUxIApMIDEwMS41NjcwMzUgMjk0LjA1ODg1MyAKTCAxMDkuNzI0MTg1IDI5My4yNTQ0NTEgCkwgMTE0LjYxODQ3NCAyOTIuNTkxODk2IApMIDEyMS4xNDQxOTQgMjkxLjUzMDgxMSAKTCAxMjQuNDA3MDUzIDI5MS4yNTkxODUgCkwgMTI5LjMwMTM0MyAyOTAuOTYxMjcyIApMIDEzMi41NjQyMDMgMjkwLjQwOTM4NCAKTCAxMzUuODI3MDYzIDI4OS40ODIwNSAKTCAxNDIuMzUyNzgyIDI4Ny4zMTk1NyAKTCAxNDUuNjE1NjQyIDI4Ni40NTg5NzMgCkwgMTQ4Ljg3ODUwMiAyODUuNzQ2ODI4IApMIDE1Mi4xNDEzNjEgMjg1LjI0MTc3OCAKTCAxNTcuMDM1NjUxIDI4NC43NDM5NjIgCkwgMTU4LjY2NzA4MSAyODQuMzA3Mzk4IApMIDE2MC4yOTg1MTEgMjgzLjU2NDUzNiAKTCAxNjEuOTI5OTQxIDI4Mi41MjE3MjQgCkwgMTY1LjE5MjggMjgwLjA3MjkwMiAKTCAxNjYuODI0MjMgMjc5LjAxNTkxNyAKTCAxNjguNDU1NjYgMjc4LjE5Mzg5MyAKTCAxNzMuMzQ5OTUgMjc2LjMyMTQxNyAKTCAxNzQuOTgxMzggMjc1LjUwMzQ5MSAKTCAxNzYuNjEyODEgMjc0LjQ5NTE1NSAKTCAxNzguMjQ0MjM5IDI3My4zMDk4OTQgCkwgMTgxLjUwNzA5OSAyNzAuNTUzOTE1IApMIDE4OC4wMzI4MTkgMjY0LjU3NTc3MyAKTCAxOTEuMjk1Njc4IDI2MS4zMDg0MTUgCkwgMTk3LjgyMTM5OCAyNTQuMjUxNjQ2IApMIDIwMS4wODQyNTggMjUwLjkzOTY1OSAKTCAyMDIuNzE1Njg4IDI0OC45NTQyMTQgCkwgMjA0LjM0NzExNyAyNDYuNTk5NzU0IApMIDIwNy42MDk5NzcgMjQxLjA4Nzg5MiAKTCAyMDkuMjQxNDA3IDIzOC4xMDQ1NzIgCkwgMjEwLjg3MjgzNyAyMzQuODAyNDAxIApMIDIxMi41MDQyNjcgMjMwLjgwOTcyNyAKTCAyMTQuMTM1Njk3IDIyNS43OTgwNjcgCkwgMjE1Ljc2NzEyNyAyMTkuNzk1MDIgCkwgMjE3LjM5ODU1NiAyMTMuMzU0MzE5IApMIDIxOS4wMjk5ODYgMjA3LjQxMjAzNSAKTCAyMjAuNjYxNDE2IDIwMi44NTUwNTIgCkwgMjIyLjI5Mjg0NiAyMDAuMDM5ODkgCkwgMjIzLjkyNDI3NiAxOTguNTYyNDkgCkwgMjI1LjU1NTcwNiAxOTcuNDMzNDE5IApMIDIyNy4xODcxMzYgMTk1LjU1OTQzNiAKTCAyMjguODE4NTY2IDE5Mi4yNTE1MDkgCkwgMjMwLjQ0OTk5NSAxODcuNDg3MTkzIApMIDIzNS4zNDQyODUgMTcwLjczMDA1MiAKTCAyNDEuODcwMDA1IDE1MS42NTk2NDYgCkwgMjQ2Ljc2NDI5NCAxMzQuNjA2Mjk4IApMIDI1MC4wMjcxNTQgMTI0LjkzNTIyOCAKTCAyNTYuNTUyODczIDEwNi40MjUyNyAKTCAyNTguMTg0MzAzIDEwMi44OTIxNCAKTCAyNTkuODE1NzMzIDEwMC4xOTk3OTMgCkwgMjYxLjQ0NzE2MyA5OC4yNzYwMjEgCkwgMjYzLjA3ODU5MyA5Ni45OTQzNzYgCkwgMjY0LjcxMDAyMyA5Ni4yMjA3MTUgCkwgMjY3Ljk3Mjg4MyA5NS4yMjkzMTIgCkwgMjY5LjYwNDMxMiA5NC4yNjgwNiAKTCAyNzEuMjM1NzQyIDkyLjYzNzk2NiAKTCAyNzQuNDk4NjAyIDg4LjIzNzM1MSAKTCAyNzYuMTMwMDMyIDg2LjQ2MzU0OSAKTCAyNzcuNzYxNDYyIDg1LjQ5MTcyIApMIDI3OS4zOTI4OTIgODUuMzYzMjcxIApMIDI4MS4wMjQzMjIgODUuOTA3MzE5IApMIDI4NC4yODcxODEgODcuODkxMDAxIApMIDI4NS45MTg2MTEgODguNDcxNTAzIApMIDI4Ny41NTAwNDEgODcuODU0OTI1IApMIDI4OS4xODE0NzEgODUuMjI2NzQ0IApMIDI5MC44MTI5MDEgODAuMTAzMzQgCkwgMjkyLjQ0NDMzMSA3Mi43NzI5OTEgCkwgMjk0LjA3NTc2MSA2NC41MTIyMTggCkwgMjk1LjcwNzE5IDU3LjM3ODU1MSAKTCAyOTcuMzM4NjIgNTMuNTY4IApMIDI5OC45NzAwNSA1NC41NjYwNDYgCkwgMzAwLjYwMTQ4IDYwLjUwMzk2NiAKTCAzMDIuMjMyOTEgNzAuMDkxNzI5IApMIDMwNS40OTU3NyA5MS42MDI4NTUgCkwgMzA3LjEyNzIgOTkuODYxMTA3IApMIDMwOC43NTg2MyAxMDUuMzQzNTcxIApMIDMxMC4zOTAwNTkgMTA4LjIxNjI0MyAKTCAzMTIuMDIxNDg5IDEwOS4xNzcwNzggCkwgMzEzLjY1MjkxOSAxMDkuMjI2NDI1IApMIDMxNS4yODQzNDkgMTA5LjQzOTA4MyAKTCAzMTYuOTE1Nzc5IDExMC42ODc3NDEgCkwgMzE4LjU0NzIwOSAxMTMuMzY1MTcxIApMIDMyMC4xNzg2MzkgMTE3LjI1NTE1MiAKTCAzMjMuNDQxNDk4IDEyNS43NzAzMTEgCkwgMzI1LjA3MjkyOCAxMjguOTI1OTI2IApMIDMyNi43MDQzNTggMTMwLjgyMDA3NSAKTCAzMjguMzM1Nzg4IDEzMS40MjQzNzUgCkwgMzI5Ljk2NzIxOCAxMzAuOTI3MDg2IApMIDMzMy4yMzAwNzggMTI4LjYwMzAyOSAKTCAzMzQuODYxNTA4IDEyOC40MzQxOTQgCkwgMzM2LjQ5MjkzNyAxMzAuMjA5OTE4IApMIDMzOC4xMjQzNjcgMTM0LjU5NDAzMSAKTCAzMzkuNzU1Nzk3IDE0MS42ODAzNzcgCkwgMzQxLjM4NzIyNyAxNTAuOTAyNjE2IApMIDM0NC42NTAwODcgMTcxLjIwMDUzNSAKTCAzNDYuMjgxNTE3IDE3OS45NTQzMjUgCkwgMzQ3LjkxMjk0NyAxODYuOTg2MTA4IApMIDM0OS41NDQzNzYgMTkyLjU1MDYzMSAKTCAzNTIuODA3MjM2IDIwMi4zMDU3MDYgCkwgMzU0LjQzODY2NiAyMDcuNzY5MzYzIApMIDM1OS4zMzI5NTYgMjI1LjQ3OTMyNCAKTCAzNjAuOTY0Mzg2IDIzMC40Njc0NzkgCkwgMzYyLjU5NTgxNSAyMzQuNzk4NzU2IApMIDM2NS44NTg2NzUgMjQyLjQzMzUzMyAKTCAzNjkuMTIxNTM1IDI0OS42OTI1MzUgCkwgMzcwLjc1Mjk2NSAyNTMuMDk0MTE0IApMIDM3Mi4zODQzOTUgMjU2LjIxMzM2MiAKTCAzNzQuMDE1ODI1IDI1OS4wMDA0MzMgCkwgMzc1LjY0NzI1NCAyNjEuNDU3NDE1IApMIDM3OC45MTAxMTQgMjY1LjY1OTUxOCAKTCAzODIuMTcyOTc0IDI2OS43NzYxNjUgCkwgMzg3LjA2NzI2NCAyNzYuNTYzOTA0IApMIDM4OC42OTg2OTMgMjc4LjU1NDA0NCAKTCAzOTAuMzMwMTIzIDI4MC4yODY3OTMgCkwgMzk1LjIyNDQxMyAyODUuMTQyMjc4IApMIDM5OC40ODcyNzMgMjg5LjAxMzk0OSAKTCAzOTguNDg3MjczIDI4OS4wMTM5NDkgCiIgY2xpcC1wYXRoPSJ1cmwoI3BkODFhYjFmYjYwKSIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzFmNzdiNDsgc3Ryb2tlLXdpZHRoOiAxLjU7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfMyI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA1Ny42IDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF80Ij4KICAgIDxwYXRoIGQ9Ik0gNDE0LjcyIDMwNy41ODQgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF81Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzYiPgogICAgPHBhdGggZD0iTSA1Ny42IDQxLjQ3MiAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICA8L2c+CiA8L2c+CiA8ZGVmcz4KICA8Y2xpcFBhdGggaWQ9InBkODFhYjFmYjYwIj4KICAgPHJlY3QgeD0iNTcuNiIgeT0iNDEuNDcyIiB3aWR0aD0iMzU3LjEyIiBoZWlnaHQ9IjI2Ni4xMTIiLz4KICA8L2NsaXBQYXRoPgogPC9kZWZzPgo8L3N2Zz4K" alt="image" /></p>

<p>This graph also looks similar to Liu's. For comparison, Liu reported an
effective sample size of 300 in this case.</p>

<h2 id="amazon-reviews">Amazon reviews</h2>

<p><a href="https://doi.org/10.1214/aos/1032526949">Liu (1996)</a> only covers agents
with two possible actions, such as coins and thumbtacks. The IDP,
though, can handle agents whose range of possible actions is arbitrary.</p>

<p>Imagine, then, that we discover a seller on Amazon that has 50 products.
Their products have an average rating of 2.4 stars out of 5. Some
products have almost 100 ratings, while others have only a few. On
average, the products have 23 ratings each. In this case, the agents are
the products and the actions are the ratings that each product earns.
Each individual rating must be a whole number of stars between 1 and 5,
inclusive. Hence, each action has 5 possible outcomes. The file,
<code>reviews.csv</code>, contains all the data for this example.</p>

<p>To begin, we create the IDP model.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;reviews.csv&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">sheet</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="o">...</span>     <span class="n">rowCounts</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="o">...</span>         <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[:</span><span class="mi">5</span><span class="p">]]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sheet</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">)</span>
</code></pre>
</div>

<p>In this example, unlike the previous ones, when we try to create a
weighted simulation, we get an error.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;idp.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">395</span><span class="p">,</span> <span class="ow">in</span> <span class="n">addWeightedSims</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WeightedSim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
  <span class="n">File</span> <span class="s2">&quot;idp.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">585</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
  <span class="n">File</span> <span class="s2">&quot;idp.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">694</span><span class="p">,</span> <span class="ow">in</span> <span class="n">updateRowCounts</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">Simulation</span> <span class="n">weight</span> <span class="n">out</span> <span class="n">of</span> <span class="n">bounds</span><span class="o">.</span>
<span class="n">Try</span> <span class="n">adjusting</span> <span class="n">scale</span> <span class="n">factor</span> <span class="n">by</span> <span class="mf">28.773115195642152</span>
</code></pre>
</div>

<p>The reason for this error is that the simulation weight was too small
for the code to handle. The error message recommends that we correct for
this by adjusting the scale factor. Following the recommendation, we are
able to create simulations.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+=</span> <span class="mf">28.8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="c1"># took ~17s</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">7.841271686848992</span>
</code></pre>
</div>

<p>But now we have a new problem. The effective sample size is only
about 8. To fix this, we can adjust the column concentration.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span> <span class="o">=</span> <span class="n">IDPModel</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+=</span> <span class="mf">28.8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">60.753058312442704</span>
</code></pre>
</div>

<p>This is a much better number, so we go ahead and generate even more
simulations.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">addWeightedSims</span><span class="p">(</span><span class="mi">90000</span><span class="p">)</span> <span class="c1"># took ~2.5m</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">ess</span>
<span class="mf">344.71978471859825</span>
</code></pre>
</div>

<p>We now have 100,000 simulations and an effective sample size of
about 345. We are ready to look at the statistical properties of this
model. Let us first consider a hypothetical new product from this
seller.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">idpModel</span><span class="o">.</span><span class="n">postProb</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span> <span class="c1"># took ~1m</span>
<span class="p">[</span><span class="mf">0.2761966514182088</span><span class="p">,</span>
 <span class="mf">0.24530376792548603</span><span class="p">,</span>
 <span class="mf">0.23357331407467244</span><span class="p">,</span>
 <span class="mf">0.15908773141793714</span><span class="p">,</span>
 <span class="mf">0.08583853516368677</span><span class="p">]</span>
</code></pre>
</div>

<p>These numbers are the expected review frequencies for the new product.
For instance, we expect about 15.9% of the reviews for the new product
to be 4-star reviews. Using these, we can compute the expected average
rating of a new product.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="n">_</span><span class="p">)</span>
<span class="mf">2.533067730983403</span>
</code></pre>
</div>

<h3 id="products-with-few-reviews">Products with few reviews</h3>

<p>Consider the product that occupies the last row of <code>reviews.csv</code>.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="mi">49</span><span class="p">]</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre>
</div>

<p>This product has a 3.5 average rating, but only 2 reviews. To see the
effect of these 2 reviews on the expected long-term rating, we compute
as we did above.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">idpModel</span><span class="o">.</span><span class="n">postProb</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="p">[</span><span class="mf">0.1801415747561264</span><span class="p">,</span>
 <span class="mf">0.20160306349376322</span><span class="p">,</span>
 <span class="mf">0.2726928799647673</span><span class="p">,</span>
 <span class="mf">0.2672355123734726</span><span class="p">,</span>
 <span class="mf">0.07832696941186464</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="n">_</span><span class="p">)</span>
<span class="mf">2.862003238191184</span>
</code></pre>
</div>

<p>Based on these 2 reviews, the expected long-term rating of this product
is about 2.86.</p>

<p>Similarly, we can consider the product with row index 25.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="mi">25</span><span class="p">]</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="n">_</span><span class="p">)</span>
<span class="mf">4.0625</span>
</code></pre>
</div>

<p>This product's average rating is higher than 4, but it only has 16
reviews. As above, we can see the effect of this as follows.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">idpModel</span><span class="o">.</span><span class="n">postProb</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="p">[</span><span class="mf">0.04922117599491753</span><span class="p">,</span>
 <span class="mf">0.1952254233996257</span><span class="p">,</span>
 <span class="mf">0.04941084806597564</span><span class="p">,</span>
 <span class="mf">0.33072171075167844</span><span class="p">,</span>
 <span class="mf">0.3754208417877854</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="n">_</span><span class="p">)</span>
<span class="mf">3.787895618937802</span>
</code></pre>
</div>

<p>This time the effect is more pronounced, as it should be. Based on these
16 reviews, the model expects this product's long-term rating to be
about 3.79.</p>

<h3 id="rating-distributions">Rating distributions</h3>

<p>We saw above that a new product is expected to have a long-term rating
of about 2.53. If we wish to simulate a new product, we can do that as
follows.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">simRowDist</span><span class="p">()</span>
<span class="p">[</span><span class="mf">0.3700511656488211</span><span class="p">,</span>
 <span class="mf">0.28793080435280305</span><span class="p">,</span>
 <span class="mf">0.11220074971323332</span><span class="p">,</span>
 <span class="mf">0.2031461493683579</span><span class="p">,</span>
 <span class="mf">0.02667113091678458</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="n">_</span><span class="p">)</span>
<span class="mf">2.2284552755514815</span>
</code></pre>
</div>

<p>Our simulated product turned out to have a below-average rating. To see
the distribution of all possible new product ratings, we can simulate
100 new products.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">fmean</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sample</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="n">idpModel</span><span class="o">.</span><span class="n">simRowDist</span><span class="p">())</span>
<span class="o">...</span>     <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span> <span class="c1"># took ~3m</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fmean</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
<span class="mf">2.5289729704892396</span>
</code></pre>
</div>

<p>We can now view the cumulative distribution function of these new
product ratings.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">ecdf</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ecdf</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzBUMTE6MDQ6MzAuNzMyMzQwPC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibTA3ZDA1YmIxZTYiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDdkMDViYjFlNiIgeD0iOTYuNjQwMzM1IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDEuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODguNjg4NzcyIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0yZSIgZD0iTSA2ODQgNzk0IApMIDEzNDQgNzk0IApMIDEzNDQgMCAKTCA2ODQgMCAKTCA2ODQgNzk0IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zNSIgZD0iTSA2OTEgNDY2NiAKTCAzMTY5IDQ2NjYgCkwgMzE2OSA0MTM0IApMIDEyNjkgNDEzNCAKTCAxMjY5IDI5OTEgClEgMTQwNiAzMDM4IDE1NDMgMzA2MSAKUSAxNjgxIDMwODQgMTgxOSAzMDg0IApRIDI2MDAgMzA4NCAzMDU2IDI2NTYgClEgMzUxMyAyMjI4IDM1MTMgMTQ5NyAKUSAzNTEzIDc0NCAzMDQ0IDMyNiAKUSAyNTc1IC05MSAxNzIyIC05MSAKUSAxNDI4IC05MSAxMTIzIC00MSAKUSA4MTkgOSA0OTQgMTA5IApMIDQ5NCA3NDQgClEgNzc1IDU5MSAxMDc1IDUxNiAKUSAxMzc1IDQ0MSAxNzA5IDQ0MSAKUSAyMjUwIDQ0MSAyNTY1IDcyNSAKUSAyODgxIDEwMDkgMjg4MSAxNDk3IApRIDI4ODEgMTk4NCAyNTY1IDIyNjggClEgMjI1MCAyNTUzIDE3MDkgMjU1MyAKUSAxNDU2IDI1NTMgMTIwNCAyNDk3IApRIDk1MyAyNDQxIDY5MSAyMzIyIApMIDY5MSA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMiI+CiAgICAgPGcgaWQ9ImxpbmUyZF8yIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDdkMDViYjFlNiIgeD0iMTUzLjk3MzYwOCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8yIj4KICAgICAgPCEtLSAyLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Ni4wMjIwNDUgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTMyIiBkPSJNIDEyMjggNTMxIApMIDM0MzEgNTMxIApMIDM0MzEgMCAKTCA0NjkgMCAKTCA0NjkgNTMxIApRIDgyOCA5MDMgMTQ0OCAxNTI5IApRIDIwNjkgMjE1NiAyMjI4IDIzMzggClEgMjUzMSAyNjc4IDI2NTEgMjkxNCAKUSAyNzcyIDMxNTAgMjc3MiAzMzc4IApRIDI3NzIgMzc1MCAyNTExIDM5ODQgClEgMjI1MCA0MjE5IDE4MzEgNDIxOSAKUSAxNTM0IDQyMTkgMTIwNCA0MTE2IApRIDg3NSA0MDEzIDUwMCAzODAzIApMIDUwMCA0NDQxIApRIDg4MSA0NTk0IDEyMTIgNDY3MiAKUSAxNTQ0IDQ3NTAgMTgxOSA0NzUwIApRIDI1NDQgNDc1MCAyOTc1IDQzODcgClEgMzQwNiA0MDI1IDM0MDYgMzQxOSAKUSAzNDA2IDMxMzEgMzI5OCAyODczIApRIDMxOTEgMjYxNiAyOTA2IDIyNjYgClEgMjgyOCAyMTc1IDI0MDkgMTc0MiAKUSAxOTkxIDEzMDkgMTIyOCA1MzEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTMwIiBkPSJNIDIwMzQgNDI1MCAKUSAxNTQ3IDQyNTAgMTMwMSAzNzcwIApRIDEwNTYgMzI5MSAxMDU2IDIzMjggClEgMTA1NiAxMzY5IDEzMDEgODg5IApRIDE1NDcgNDA5IDIwMzQgNDA5IApRIDI1MjUgNDA5IDI3NzAgODg5IApRIDMwMTYgMTM2OSAzMDE2IDIzMjggClEgMzAxNiAzMjkxIDI3NzAgMzc3MCAKUSAyNTI1IDQyNTAgMjAzNCA0MjUwIAp6Ck0gMjAzNCA0NzUwIApRIDI4MTkgNDc1MCAzMjMzIDQxMjkgClEgMzY0NyAzNTA5IDM2NDcgMjMyOCAKUSAzNjQ3IDExNTAgMzIzMyA1MjkgClEgMjgxOSAtOTEgMjAzNCAtOTEgClEgMTI1MCAtOTEgODM2IDUyOSAKUSA0MjIgMTE1MCA0MjIgMjMyOCAKUSA0MjIgMzUwOSA4MzYgNDEyOSAKUSAxMjUwIDQ3NTAgMjAzNCA0NzUwIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDdkMDViYjFlNiIgeD0iMjExLjMwNjg4MSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAyLjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwMy4zNTUzMTggMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzIiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNCI+CiAgICAgPGcgaWQ9ImxpbmUyZF80Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtMDdkMDViYjFlNiIgeD0iMjY4LjY0MDE1NCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF80Ij4KICAgICAgPCEtLSAzLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MC42ODg1OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTMzIiBkPSJNIDI1OTcgMjUxNiAKUSAzMDUwIDI0MTkgMzMwNCAyMTEyIApRIDM1NTkgMTgwNiAzNTU5IDEzNTYgClEgMzU1OSA2NjYgMzA4NCAyODcgClEgMjYwOSAtOTEgMTczNCAtOTEgClEgMTQ0MSAtOTEgMTEzMCAtMzMgClEgODE5IDI1IDQ4OCAxNDEgCkwgNDg4IDc1MCAKUSA3NTAgNTk3IDEwNjIgNTE5IApRIDEzNzUgNDQxIDE3MTYgNDQxIApRIDIzMDkgNDQxIDI2MjAgNjc1IApRIDI5MzEgOTA5IDI5MzEgMTM1NiAKUSAyOTMxIDE3NjkgMjY0MiAyMDAxIApRIDIzNTMgMjIzNCAxODM4IDIyMzQgCkwgMTI5NCAyMjM0IApMIDEyOTQgMjc1MyAKTCAxODYzIDI3NTMgClEgMjMyOCAyNzUzIDI1NzUgMjkzOSAKUSAyODIyIDMxMjUgMjgyMiAzNDc1IApRIDI4MjIgMzgzNCAyNTY3IDQwMjYgClEgMjMxMyA0MjE5IDE4MzggNDIxOSAKUSAxNTc4IDQyMTkgMTI4MSA0MTYyIApRIDk4NCA0MTA2IDYyOCAzOTg4IApMIDYyOCA0NTUwIApRIDk4OCA0NjUwIDEzMDIgNDcwMCAKUSAxNjE2IDQ3NTAgMTg5NCA0NzUwIApRIDI2MTMgNDc1MCAzMDMxIDQ0MjMgClEgMzQ1MCA0MDk3IDM0NTAgMzU0MSAKUSAzNDUwIDMxNTMgMzIyOCAyODg2IApRIDMwMDYgMjYxOSAyNTk3IDI1MTYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20wN2QwNWJiMWU2IiB4PSIzMjUuOTczNDI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzUiPgogICAgICA8IS0tIDMuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE4LjAyMTg2NSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzYiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI20wN2QwNWJiMWU2IiB4PSIzODMuMzA2NzAxIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzYiPgogICAgICA8IS0tIDQuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzc1LjM1NTEzOCAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzQiIGQ9Ik0gMjQxOSA0MTE2IApMIDgyNSAxNjI1IApMIDI0MTkgMTYyNSAKTCAyNDE5IDQxMTYgCnoKTSAyMjUzIDQ2NjYgCkwgMzA0NyA0NjY2IApMIDMwNDcgMTYyNSAKTCAzNzEzIDE2MjUgCkwgMzcxMyAxMTAwIApMIDMwNDcgMTEwMCAKTCAzMDQ3IDAgCkwgMjQxOSAwIApMIDI0MTkgMTEwMCAKTCAzMTMgMTEwMCAKTCAzMTMgMTcwOSAKTCAyMjUzIDQ2NjYgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibWF0cGxvdGxpYi5heGlzXzIiPgogICAgPGcgaWQ9Inl0aWNrXzEiPgogICAgIDxnIGlkPSJsaW5lMmRfNyI+CiAgICAgIDxkZWZzPgogICAgICAgPHBhdGggaWQ9Im05NTRjNGQwMDdlIiBkPSJNIDAgMCAKTCAtMy41IDAgCiIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9kZWZzPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NTRjNGQwMDdlIiB4PSI1Ny42IiB5PSIyOTUuNDg4IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzciPgogICAgICA8IS0tIDAuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDI5OS4yODcyMTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfOCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTk1NGM0ZDAwN2UiIHg9IjU3LjYiIHk9IjI0Ny4xMDQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfOCI+CiAgICAgIDwhLS0gMC4yIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjUwLjkwMzIxOSkgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF85Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTU0YzRkMDA3ZSIgeD0iNTcuNiIgeT0iMTk4LjcyIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzkiPgogICAgICA8IS0tIDAuNCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDIwMi41MTkyMTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzQiPgogICAgIDxnIGlkPSJsaW5lMmRfMTAiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NTRjNGQwMDdlIiB4PSI1Ny42IiB5PSIxNTAuMzM2IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEwIj4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxNTQuMTM1MjE5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzYiIGQ9Ik0gMjExMyAyNTg0IApRIDE2ODggMjU4NCAxNDM5IDIyOTMgClEgMTE5MSAyMDAzIDExOTEgMTQ5NyAKUSAxMTkxIDk5NCAxNDM5IDcwMSAKUSAxNjg4IDQwOSAyMTEzIDQwOSAKUSAyNTM4IDQwOSAyNzg2IDcwMSAKUSAzMDM0IDk5NCAzMDM0IDE0OTcgClEgMzAzNCAyMDAzIDI3ODYgMjI5MyAKUSAyNTM4IDI1ODQgMjExMyAyNTg0IAp6Ck0gMzM2NiA0NTYzIApMIDMzNjYgMzk4OCAKUSAzMTI4IDQxMDAgMjg4NiA0MTU5IApRIDI2NDQgNDIxOSAyNDA2IDQyMTkgClEgMTc4MSA0MjE5IDE0NTEgMzc5NyAKUSAxMTIyIDMzNzUgMTA3NSAyNTIyIApRIDEyNTkgMjc5NCAxNTM3IDI5MzkgClEgMTgxNiAzMDg0IDIxNTAgMzA4NCAKUSAyODUzIDMwODQgMzI2MSAyNjU3IApRIDM2NjkgMjIzMSAzNjY5IDE0OTcgClEgMzY2OSA3NzggMzI0NCAzNDMgClEgMjgxOSAtOTEgMjExMyAtOTEgClEgMTMwMyAtOTEgODc1IDUyOSAKUSA0NDcgMTE1MCA0NDcgMjMyOCAKUSA0NDcgMzQzNCA5NzIgNDA5MiAKUSAxNDk3IDQ3NTAgMjM4MSA0NzUwIApRIDI2MTkgNDc1MCAyODYxIDQ3MDMgClEgMzEwMyA0NjU2IDMzNjYgNDU2MyAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzYiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzUiPgogICAgIDxnIGlkPSJsaW5lMmRfMTEiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI205NTRjNGQwMDdlIiB4PSI1Ny42IiB5PSIxMDEuOTUyIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzExIj4KICAgICAgPCEtLSAwLjggLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxMDUuNzUxMjE5KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzgiIGQ9Ik0gMjAzNCAyMjE2IApRIDE1ODQgMjIxNiAxMzI2IDE5NzUgClEgMTA2OSAxNzM0IDEwNjkgMTMxMyAKUSAxMDY5IDg5MSAxMzI2IDY1MCAKUSAxNTg0IDQwOSAyMDM0IDQwOSAKUSAyNDg0IDQwOSAyNzQzIDY1MSAKUSAzMDAzIDg5NCAzMDAzIDEzMTMgClEgMzAwMyAxNzM0IDI3NDUgMTk3NSAKUSAyNDg4IDIyMTYgMjAzNCAyMjE2IAp6Ck0gMTQwMyAyNDg0IApRIDk5NyAyNTg0IDc3MCAyODYyIApRIDU0NCAzMTQxIDU0NCAzNTQxIApRIDU0NCA0MTAwIDk0MiA0NDI1IApRIDEzNDEgNDc1MCAyMDM0IDQ3NTAgClEgMjczMSA0NzUwIDMxMjggNDQyNSAKUSAzNTI1IDQxMDAgMzUyNSAzNTQxIApRIDM1MjUgMzE0MSAzMjk4IDI4NjIgClEgMzA3MiAyNTg0IDI2NjkgMjQ4NCAKUSAzMTI1IDIzNzggMzM3OSAyMDY4IApRIDM2MzQgMTc1OSAzNjM0IDEzMTMgClEgMzYzNCA2MzQgMzIyMCAyNzEgClEgMjgwNiAtOTEgMjAzNCAtOTEgClEgMTI2MyAtOTEgODQ4IDI3MSAKUSA0MzQgNjM0IDQzNCAxMzEzIApRIDQzNCAxNzU5IDY5MCAyMDY4IApRIDk0NyAyMzc4IDE0MDMgMjQ4NCAKegpNIDExNzIgMzQ4MSAKUSAxMTcyIDMxMTkgMTM5OCAyOTE2IApRIDE2MjUgMjcxMyAyMDM0IDI3MTMgClEgMjQ0MSAyNzEzIDI2NzAgMjkxNiAKUSAyOTAwIDMxMTkgMjkwMCAzNDgxIApRIDI5MDAgMzg0NCAyNjcwIDQwNDcgClEgMjQ0MSA0MjUwIDIwMzQgNDI1MCAKUSAxNjI1IDQyNTAgMTM5OCA0MDQ3IApRIDExNzIgMzg0NCAxMTcyIDM0ODEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM4IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja182Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEyIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtOTU0YzRkMDA3ZSIgeD0iNTcuNiIgeT0iNTMuNTY4IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEyIj4KICAgICAgPCEtLSAxLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSA1Ny4zNjcyMTkpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJsaW5lMmRfMTMiPgogICAgPHBhdGggZD0iTSA3My44MzI3MjcgMjk1LjQ4OCAKTCA4OC41ODk3NTIgMjk1LjQ4OCAKTCA4OC41ODk3NTIgMjkzLjA2ODggCkwgOTUuOTk0MzggMjkzLjA2ODggCkwgOTUuOTk0MzggMjkwLjY0OTYgCkwgMTAzLjc3NjIyNiAyOTAuNjQ5NiAKTCAxMDMuNzc2MjI2IDI4OC4yMzA0IApMIDExMi42MDA4ODUgMjg4LjIzMDQgCkwgMTEyLjYwMDg4NSAyODUuODExMiAKTCAxMjMuNTk0MDUyIDI4NS44MTEyIApMIDEyMy41OTQwNTIgMjgzLjM5MiAKTCAxMzAuODcwODIgMjgzLjM5MiAKTCAxMzAuODcwODIgMjgwLjk3MjggCkwgMTMzLjYzOTg3IDI4MC45NzI4IApMIDEzMy42Mzk4NyAyNzguNTUzNiAKTCAxNDQuMTU0MjQgMjc4LjU1MzYgCkwgMTQ0LjE1NDI0IDI3Ni4xMzQ0IApMIDE0Ni4zNTQwNjQgMjc2LjEzNDQgCkwgMTQ2LjM1NDA2NCAyNzMuNzE1MiAKTCAxNDguMTY1NDkyIDI3My43MTUyIApMIDE0OC4xNjU0OTIgMjcxLjI5NiAKTCAxNTEuMjE5Nzg3IDI3MS4yOTYgCkwgMTUxLjIxOTc4NyAyNjguODc2OCAKTCAxNTEuMzczNTg3IDI2OC44NzY4IApMIDE1MS4zNzM1ODcgMjY2LjQ1NzYgCkwgMTUyLjAyMTIyNCAyNjYuNDU3NiAKTCAxNTIuMDIxMjI0IDI2NC4wMzg0IApMIDE1My42NjU0ODkgMjY0LjAzODQgCkwgMTUzLjY2NTQ4OSAyNjEuNjE5MiAKTCAxNTUuNTEyNDc0IDI2MS42MTkyIApMIDE1NS41MTI0NzQgMjU5LjIgCkwgMTU1Ljc4MTE1NSAyNTkuMiAKTCAxNTUuNzgxMTU1IDI1Ni43ODA4IApMIDE1Ny40MjU5MzggMjU2Ljc4MDggCkwgMTU3LjQ3NTU1MyAyNTEuOTQyNCAKTCAxNjEuMzE4MTY4IDI1MS45NDI0IApMIDE2MS4zMTgxNjggMjQ5LjUyMzIgCkwgMTYzLjYxMjY0IDI0OS41MjMyIApMIDE2My42MTI2NCAyNDcuMTA0IApMIDE2My45NDM2NjQgMjQ3LjEwNCAKTCAxNjMuOTQzNjY0IDI0Mi4yNjU2IApMIDE2NS4yOTEzOTggMjQyLjI2NTYgCkwgMTY1LjI5MTM5OCAyMzkuODQ2NCAKTCAxNjYuMjM3MzE1IDIzOS44NDY0IApMIDE2Ni4yNzg5MjYgMjM1LjAwOCAKTCAxNjcuNDAwODEzIDIzNS4wMDggCkwgMTY3LjQwMDgxMyAyMzIuNTg4OCAKTCAxNzAuOTQwMTg0IDIzMi41ODg4IApMIDE3MC45NDAxODQgMjMwLjE2OTYgCkwgMTcxLjA4MjQ3NCAyMzAuMTY5NiAKTCAxNzEuMTg5Mjk5IDIyNS4zMzEyIApMIDE3Mi41OTE4NjUgMjI1LjMzMTIgCkwgMTcyLjU5MTg2NSAyMjIuOTEyIApMIDE3My4yNDk4NDMgMjIyLjkxMiAKTCAxNzMuMjQ5ODQzIDIyMC40OTI4IApMIDE3My40MzY5NzYgMjIwLjQ5MjggCkwgMTczLjQzNjk3NiAyMTguMDczNiAKTCAxNzQuNDczNDY5IDIxOC4wNzM2IApMIDE3NC40NzM0NjkgMjE1LjY1NDQgCkwgMTc2LjAyNTYxMyAyMTUuNjU0NCAKTCAxNzYuMDk5ODMyIDIxMC44MTYgCkwgMTc2LjQ5MjY1OCAyMTAuODE2IApMIDE3Ni40OTI2NTggMjA4LjM5NjggCkwgMTc4LjI2OTQxMSAyMDguMzk2OCAKTCAxNzguMjY5NDExIDIwNS45Nzc2IApMIDE3OS4zNjI5NyAyMDUuOTc3NiAKTCAxNzkuMzkwNjI5IDIwMS4xMzkyIApMIDE4MC40NzIyMSAyMDEuMTM5MiAKTCAxODAuNDcyMjEgMTk4LjcyIApMIDE4Mi4xNjkxOSAxOTguNzIgCkwgMTgyLjE2OTE5IDE5Ni4zMDA4IApMIDE4Mi41Mjc2MDYgMTk2LjMwMDggCkwgMTgyLjUyNzY4OCAxOTEuNDYyNCAKTCAxODIuOTk0ODEyIDE5MS40NjI0IApMIDE4Mi45OTQ4MTIgMTg5LjA0MzIgCkwgMTkxLjA5NTM1OSAxODkuMDQzMiAKTCAxOTEuMDk1MzU5IDE4Ni42MjQgCkwgMTkyLjI3OTY1IDE4Ni42MjQgCkwgMTkyLjI3OTY1IDE4NC4yMDQ4IApMIDE5Mi44MDkzNTkgMTg0LjIwNDggCkwgMTkyLjgwOTM1OSAxODEuNzg1NiAKTCAyMDIuOTk5MzI0IDE4MS43ODU2IApMIDIwMi45OTkzMjQgMTc5LjM2NjQgCkwgMjAzLjk0NjA4NCAxNzkuMzY2NCAKTCAyMDMuOTQ2MDg0IDE3Ni45NDcyIApMIDIwOS42NzI0MTEgMTc2Ljk0NzIgCkwgMjA5LjY3MjQxMSAxNzQuNTI4IApMIDIxMy41MDc3NTcgMTc0LjUyOCAKTCAyMTMuNTA3NzU3IDE3Mi4xMDg4IApMIDIxNC42ODIwNDUgMTcyLjEwODggCkwgMjE0LjY4MjA0NSAxNjkuNjg5NiAKTCAyMTYuMjAwNjQ0IDE2OS42ODk2IApMIDIxNi4yMDA2NDQgMTY3LjI3MDQgCkwgMjIwLjU2OTE3MiAxNjcuMjcwNCAKTCAyMjAuNTY5MTcyIDE2NC44NTEyIApMIDIyMi45MTQyNzEgMTY0Ljg1MTIgCkwgMjIyLjkxNDI3MSAxNjIuNDMyIApMIDIyMy4zNTk5MTMgMTYyLjQzMiAKTCAyMjMuMzU5OTEzIDE2MC4wMTI4IApMIDIyMy42NjIxNzIgMTYwLjAxMjggCkwgMjIzLjY2MjE3MiAxNTcuNTkzNiAKTCAyMjQuMjgwMTE0IDE1Ny41OTM2IApMIDIyNC4yODAxMTQgMTU1LjE3NDQgCkwgMjI1LjcxOTc0NiAxNTUuMTc0NCAKTCAyMjUuNzE5NzQ2IDE1Mi43NTUyIApMIDIyNi4yNjQ4NCAxNTIuNzU1MiAKTCAyMjYuMjY0ODQgMTUwLjMzNiAKTCAyMjguODgwNTIyIDE1MC4zMzYgCkwgMjI4Ljg4MDUyMiAxNDcuOTE2OCAKTCAyMzEuMjAwNzg2IDE0Ny45MTY4IApMIDIzMS4yMDA3ODYgMTQ1LjQ5NzYgCkwgMjMyLjUwNTU4NiAxNDUuNDk3NiAKTCAyMzIuNTA1NTg2IDE0My4wNzg0IApMIDIzMi44MTcwNzcgMTQzLjA3ODQgCkwgMjMyLjgxNzA3NyAxNDAuNjU5MiAKTCAyMzguNTAxMjcyIDE0MC42NTkyIApMIDIzOC41MDEyNzIgMTM4LjI0IApMIDIzOS43NDg2NTMgMTM4LjI0IApMIDIzOS43NDg2NTMgMTM1LjgyMDggCkwgMjQzLjg2MzYzNyAxMzUuODIwOCAKTCAyNDMuODYzNjM3IDEzMy40MDE2IApMIDI0NC4xNzY2OTYgMTMzLjQwMTYgCkwgMjQ0LjE3NjY5NiAxMzAuOTgyNCAKTCAyNDYuMzM5ODI3IDEzMC45ODI0IApMIDI0Ni4zMzk4MjcgMTI4LjU2MzIgCkwgMjQ2LjUyNjI4OSAxMjguNTYzMiAKTCAyNDYuNTI2Mjg5IDEyNi4xNDQgCkwgMjQ5LjI3MzU0NiAxMjYuMTQ0IApMIDI0OS4yNzM1NDYgMTIzLjcyNDggCkwgMjUxLjQ0NzY3MSAxMjMuNzI0OCAKTCAyNTEuNDQ3NjcxIDEyMS4zMDU2IApMIDI1MS42MTI4NjkgMTIxLjMwNTYgCkwgMjUxLjYxMjg2OSAxMTguODg2NCAKTCAyNTIuMDg5MjM1IDExOC44ODY0IApMIDI1Mi4wODkyMzUgMTE2LjQ2NzIgCkwgMjUyLjI5NTQ3OCAxMTYuNDY3MiAKTCAyNTIuMjk1NDc4IDExNC4wNDggCkwgMjU4LjEzNDE1IDExNC4wNDggCkwgMjU4LjEzNDE1IDExMS42Mjg4IApMIDI1OC40NTMxMDUgMTExLjYyODggCkwgMjU4LjQ1MzEwNSAxMDkuMjA5NiAKTCAyNTguNzMyODQ5IDEwOS4yMDk2IApMIDI1OC43MzI4NDkgMTA2Ljc5MDQgCkwgMjYwLjY2MjQ2OCAxMDYuNzkwNCAKTCAyNjAuNjYyNDY4IDEwNC4zNzEyIApMIDI2MS44OTMyMjUgMTA0LjM3MTIgCkwgMjYxLjg5MzIyNSAxMDEuOTUyIApMIDI2NC4xNjYyNTggMTAxLjk1MiAKTCAyNjQuMTY2MjU4IDk5LjUzMjggCkwgMjY2LjUxNDUyMiA5OS41MzI4IApMIDI2Ni41MTQ1MjIgOTcuMTEzNiAKTCAyNjkuNDE2ODgzIDk3LjExMzYgCkwgMjY5LjQxNjg4MyA5NC42OTQ0IApMIDI3MC45NzY1OTUgOTQuNjk0NCAKTCAyNzAuOTc2NTk1IDkyLjI3NTIgCkwgMjcyLjgzODA1MiA5Mi4yNzUyIApMIDI3Mi44MzgwNTIgODkuODU2IApMIDI3My41MzMzNTEgODkuODU2IApMIDI3My41MzMzNTEgODcuNDM2OCAKTCAyNzUuMzgzNjk2IDg3LjQzNjggCkwgMjc1LjM4MzY5NiA4NS4wMTc2IApMIDI3OC45ODM5NTMgODUuMDE3NiAKTCAyNzguOTgzOTUzIDgyLjU5ODQgCkwgMjg4LjY1ODc4OSA4Mi41OTg0IApMIDI4OC42NTg3ODkgODAuMTc5MiAKTCAyOTEuMTE3OTMxIDgwLjE3OTIgCkwgMjkxLjExNzkzMSA3Ny43NiAKTCAyOTIuODQyNTc0IDc3Ljc2IApMIDI5Mi44NDI1NzQgNzUuMzQwOCAKTCAyOTMuMzMxNzY2IDc1LjM0MDggCkwgMjkzLjMzMTc2NiA3Mi45MjE2IApMIDI5Ni41Mjk1NTMgNzIuOTIxNiAKTCAyOTYuNTI5NTUzIDcwLjUwMjQgCkwgMzE3LjI4Njg4MSA3MC41MDI0IApMIDMxNy4yODY4ODEgNjguMDgzMiAKTCAzNDUuNjA5NTI2IDY4LjA4MzIgCkwgMzQ1LjYwOTUyNiA2NS42NjQgCkwgMzYwLjEzODk4MSA2NS42NjQgCkwgMzYwLjEzODk4MSA2My4yNDQ4IApMIDM2NC42MDA4ODEgNjMuMjQ0OCAKTCAzNjQuNjAwODgxIDYwLjgyNTYgCkwgMzY5LjIxNTI5MyA2MC44MjU2IApMIDM2OS4yMTUyOTMgNTguNDA2NCAKTCAzODEuMzc5MzA2IDU4LjQwNjQgCkwgMzgxLjM3OTMwNiA1NS45ODcyIApMIDM4My43MzAyNDggNTUuOTg3MiAKTCAzODMuNzMwMjQ4IDUzLjU2OCAKTCAzOTguNDg3MjczIDUzLjU2OCAKTCAzOTguNDg3MjczIDUzLjU2OCAKIiBjbGlwLXBhdGg9InVybCgjcDA4NThhYjJkOTApIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMWY3N2I0OyBzdHJva2Utd2lkdGg6IDEuNTsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF8zIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDU3LjYgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzQiPgogICAgPHBhdGggZD0iTSA0MTQuNzIgMzA3LjU4NCAKTCA0MTQuNzIgNDEuNDcyIAoiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44OyBzdHJva2UtbGluZWpvaW46IG1pdGVyOyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzUiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNDE0LjcyIDMwNy41ODQgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNiI+CiAgICA8cGF0aCBkPSJNIDU3LjYgNDEuNDcyIApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogIDwvZz4KIDwvZz4KIDxkZWZzPgogIDxjbGlwUGF0aCBpZD0icDA4NThhYjJkOTAiPgogICA8cmVjdCB4PSI1Ny42IiB5PSI0MS40NzIiIHdpZHRoPSIzNTcuMTIiIGhlaWdodD0iMjY2LjExMiIvPgogIDwvY2xpcFBhdGg+CiA8L2RlZnM+Cjwvc3ZnPgo=" alt="image" /></p>

<p>Or we can view an approximate density function for them.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">gaussian_kde</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">sample</span><span class="p">)(</span><span class="n">t</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ2MC44cHQiIGhlaWdodD0iMzQ1LjZwdCIgdmlld0JveD0iMCAwIDQ2MC44IDM0NS42IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiA8bWV0YWRhdGE+CiAgPHJkZjpSREYgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICA8Y2M6V29yaz4KICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgIDxkYzpkYXRlPjIwMjUtMDEtMzBUMTE6MDQ6MzMuMDk2OTg4PC9kYzpkYXRlPgogICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICA8ZGM6Y3JlYXRvcj4KICAgICA8Y2M6QWdlbnQ+CiAgICAgIDxkYzp0aXRsZT5NYXRwbG90bGliIHYzLjkuNCwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy88L2RjOnRpdGxlPgogICAgIDwvY2M6QWdlbnQ+CiAgICA8L2RjOmNyZWF0b3I+CiAgIDwvY2M6V29yaz4KICA8L3JkZjpSREY+CiA8L21ldGFkYXRhPgogPGRlZnM+CiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4qe3N0cm9rZS1saW5lam9pbjogcm91bmQ7IHN0cm9rZS1saW5lY2FwOiBidXR0fTwvc3R5bGU+CiA8L2RlZnM+CiA8ZyBpZD0iZmlndXJlXzEiPgogIDxnIGlkPSJwYXRjaF8xIj4KICAgPHBhdGggZD0iTSAwIDM0NS42IApMIDQ2MC44IDM0NS42IApMIDQ2MC44IDAgCkwgMCAwIAp6CiIgc3R5bGU9ImZpbGw6ICNmZmZmZmYiLz4KICA8L2c+CiAgPGcgaWQ9ImF4ZXNfMSI+CiAgIDxnIGlkPSJwYXRjaF8yIj4KICAgIDxwYXRoIGQ9Ik0gNTcuNiAzMDcuNTg0IApMIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCkwgNTcuNiA0MS40NzIgCnoKIiBzdHlsZT0iZmlsbDogI2ZmZmZmZiIvPgogICA8L2c+CiAgIDxnIGlkPSJtYXRwbG90bGliLmF4aXNfMSI+CiAgICA8ZyBpZD0ieHRpY2tfMSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xIj4KICAgICAgPGRlZnM+CiAgICAgICA8cGF0aCBpZD0ibWY4MDg5MWUzYTMiIGQ9Ik0gMCAwIApMIDAgMy41IAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZjgwODkxZTNhMyIgeD0iNzMuODMyNzI3IiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEiPgogICAgICA8IS0tIDEuMCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuODgxMTY1IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMSIgZD0iTSA3OTQgNTMxIApMIDE4MjUgNTMxIApMIDE4MjUgNDA5MSAKTCA3MDMgMzg2NiAKTCA3MDMgNDQ0MSAKTCAxODE5IDQ2NjYgCkwgMjQ1MCA0NjY2IApMIDI0NTAgNTMxIApMIDM0ODEgNTMxIApMIDM0ODEgMCAKTCA3OTQgMCAKTCA3OTQgNTMxIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0yZSIgZD0iTSA2ODQgNzk0IApMIDEzNDQgNzk0IApMIDEzNDQgMCAKTCA2ODQgMCAKTCA2ODQgNzk0IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMCIgZD0iTSAyMDM0IDQyNTAgClEgMTU0NyA0MjUwIDEzMDEgMzc3MCAKUSAxMDU2IDMyOTEgMTA1NiAyMzI4IApRIDEwNTYgMTM2OSAxMzAxIDg4OSAKUSAxNTQ3IDQwOSAyMDM0IDQwOSAKUSAyNTI1IDQwOSAyNzcwIDg4OSAKUSAzMDE2IDEzNjkgMzAxNiAyMzI4IApRIDMwMTYgMzI5MSAyNzcwIDM3NzAgClEgMjUyNSA0MjUwIDIwMzQgNDI1MCAKegpNIDIwMzQgNDc1MCAKUSAyODE5IDQ3NTAgMzIzMyA0MTI5IApRIDM2NDcgMzUwOSAzNjQ3IDIzMjggClEgMzY0NyAxMTUwIDMyMzMgNTI5IApRIDI4MTkgLTkxIDIwMzQgLTkxIApRIDEyNTAgLTkxIDgzNiA1MjkgClEgNDIyIDExNTAgNDIyIDIzMjggClEgNDIyIDM1MDkgODM2IDQxMjkgClEgMTI1MCA0NzUwIDIwMzQgNDc1MCAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMxIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inh0aWNrXzIiPgogICAgIDxnIGlkPSJsaW5lMmRfMiI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbWY4MDg5MWUzYTMiIHg9IjExNC40MTQ1NDUiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMiI+CiAgICAgIDwhLS0gMS41IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDYuNDYyOTgzIDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zNSIgZD0iTSA2OTEgNDY2NiAKTCAzMTY5IDQ2NjYgCkwgMzE2OSA0MTM0IApMIDEyNjkgNDEzNCAKTCAxMjY5IDI5OTEgClEgMTQwNiAzMDM4IDE1NDMgMzA2MSAKUSAxNjgxIDMwODQgMTgxOSAzMDg0IApRIDI2MDAgMzA4NCAzMDU2IDI2NTYgClEgMzUxMyAyMjI4IDM1MTMgMTQ5NyAKUSAzNTEzIDc0NCAzMDQ0IDMyNiAKUSAyNTc1IC05MSAxNzIyIC05MSAKUSAxNDI4IC05MSAxMTIzIC00MSAKUSA4MTkgOSA0OTQgMTA5IApMIDQ5NCA3NDQgClEgNzc1IDU5MSAxMDc1IDUxNiAKUSAxMzc1IDQ0MSAxNzA5IDQ0MSAKUSAyMjUwIDQ0MSAyNTY1IDcyNSAKUSAyODgxIDEwMDkgMjg4MSAxNDk3IApRIDI4ODEgMTk4NCAyNTY1IDIyNjggClEgMjI1MCAyNTUzIDE3MDkgMjU1MyAKUSAxNDU2IDI1NTMgMTIwNCAyNDk3IApRIDk1MyAyNDQxIDY5MSAyMzIyIApMIDY5MSA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfMyI+CiAgICAgPGcgaWQ9ImxpbmUyZF8zIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZjgwODkxZTNhMyIgeD0iMTU0Ljk5NjM2NCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8zIj4KICAgICAgPCEtLSAyLjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Ny4wNDQ4MDEgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTMyIiBkPSJNIDEyMjggNTMxIApMIDM0MzEgNTMxIApMIDM0MzEgMCAKTCA0NjkgMCAKTCA0NjkgNTMxIApRIDgyOCA5MDMgMTQ0OCAxNTI5IApRIDIwNjkgMjE1NiAyMjI4IDIzMzggClEgMjUzMSAyNjc4IDI2NTEgMjkxNCAKUSAyNzcyIDMxNTAgMjc3MiAzMzc4IApRIDI3NzIgMzc1MCAyNTExIDM5ODQgClEgMjI1MCA0MjE5IDE4MzEgNDIxOSAKUSAxNTM0IDQyMTkgMTIwNCA0MTE2IApRIDg3NSA0MDEzIDUwMCAzODAzIApMIDUwMCA0NDQxIApRIDg4MSA0NTk0IDEyMTIgNDY3MiAKUSAxNTQ0IDQ3NTAgMTgxOSA0NzUwIApRIDI1NDQgNDc1MCAyOTc1IDQzODcgClEgMzQwNiA0MDI1IDM0MDYgMzQxOSAKUSAzNDA2IDMxMzEgMzI5OCAyODczIApRIDMxOTEgMjYxNiAyOTA2IDIyNjYgClEgMjgyOCAyMTc1IDI0MDkgMTc0MiAKUSAxOTkxIDEzMDkgMTIyOCA1MzEgCnoKIiB0cmFuc2Zvcm09InNjYWxlKDAuMDE1NjI1KSIvPgogICAgICAgPC9kZWZzPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzQiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21mODA4OTFlM2EzIiB4PSIxOTUuNTc4MTgyIiB5PSIzMDcuNTg0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzQiPgogICAgICA8IS0tIDIuNSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg3LjYyNjYxOSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMiIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ4dGlja181Ij4KICAgICA8ZyBpZD0ibGluZTJkXzUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI21mODA4OTFlM2EzIiB4PSIyMzYuMTYiIHk9IjMwNy41ODQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfNSI+CiAgICAgIDwhLS0gMy4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjguMjA4NDM3IDMyMi4xODI0MzcpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zMyIgZD0iTSAyNTk3IDI1MTYgClEgMzA1MCAyNDE5IDMzMDQgMjExMiAKUSAzNTU5IDE4MDYgMzU1OSAxMzU2IApRIDM1NTkgNjY2IDMwODQgMjg3IApRIDI2MDkgLTkxIDE3MzQgLTkxIApRIDE0NDEgLTkxIDExMzAgLTMzIApRIDgxOSAyNSA0ODggMTQxIApMIDQ4OCA3NTAgClEgNzUwIDU5NyAxMDYyIDUxOSAKUSAxMzc1IDQ0MSAxNzE2IDQ0MSAKUSAyMzA5IDQ0MSAyNjIwIDY3NSAKUSAyOTMxIDkwOSAyOTMxIDEzNTYgClEgMjkzMSAxNzY5IDI2NDIgMjAwMSAKUSAyMzUzIDIyMzQgMTgzOCAyMjM0IApMIDEyOTQgMjIzNCAKTCAxMjk0IDI3NTMgCkwgMTg2MyAyNzUzIApRIDIzMjggMjc1MyAyNTc1IDI5MzkgClEgMjgyMiAzMTI1IDI4MjIgMzQ3NSAKUSAyODIyIDM4MzQgMjU2NyA0MDI2IApRIDIzMTMgNDIxOSAxODM4IDQyMTkgClEgMTU3OCA0MjE5IDEyODEgNDE2MiAKUSA5ODQgNDEwNiA2MjggMzk4OCAKTCA2MjggNDU1MCAKUSA5ODggNDY1MCAxMzAyIDQ3MDAgClEgMTYxNiA0NzUwIDE4OTQgNDc1MCAKUSAyNjEzIDQ3NTAgMzAzMSA0NDIzIApRIDM0NTAgNDA5NyAzNDUwIDM1NDEgClEgMzQ1MCAzMTUzIDMyMjggMjg4NiAKUSAzMDA2IDI2MTkgMjU5NyAyNTE2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNiI+CiAgICAgPGcgaWQ9ImxpbmUyZF82Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZjgwODkxZTNhMyIgeD0iMjc2Ljc0MTgxOCIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF82Ij4KICAgICAgPCEtLSAzLjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2OC43OTAyNTYgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzMiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfNyI+CiAgICAgPGcgaWQ9ImxpbmUyZF83Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZjgwODkxZTNhMyIgeD0iMzE3LjMyMzYzNiIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF83Ij4KICAgICAgPCEtLSA0LjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwOS4zNzIwNzQgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJEZWphVnVTYW5zLTM0IiBkPSJNIDI0MTkgNDExNiAKTCA4MjUgMTYyNSAKTCAyNDE5IDE2MjUgCkwgMjQxOSA0MTE2IAp6Ck0gMjI1MyA0NjY2IApMIDMwNDcgNDY2NiAKTCAzMDQ3IDE2MjUgCkwgMzcxMyAxNjI1IApMIDM3MTMgMTEwMCAKTCAzMDQ3IDExMDAgCkwgMzA0NyAwIApMIDI0MTkgMCAKTCAyNDE5IDExMDAgCkwgMzEzIDExMDAgCkwgMzEzIDE3MDkgCkwgMjI1MyA0NjY2IAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfOCI+CiAgICAgPGcgaWQ9ImxpbmUyZF84Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZjgwODkxZTNhMyIgeD0iMzU3LjkwNTQ1NSIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF84Ij4KICAgICAgPCEtLSA0LjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0OS45NTM4OTIgMzIyLjE4MjQzNykgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieHRpY2tfOSI+CiAgICAgPGcgaWQ9ImxpbmUyZF85Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtZjgwODkxZTNhMyIgeD0iMzk4LjQ4NzI3MyIgeT0iMzA3LjU4NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF85Ij4KICAgICAgPCEtLSA1LjAgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5MC41MzU3MSAzMjIuMTgyNDM3KSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNSIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgPC9nPgogICA8ZyBpZD0ibWF0cGxvdGxpYi5heGlzXzIiPgogICAgPGcgaWQ9Inl0aWNrXzEiPgogICAgIDxnIGlkPSJsaW5lMmRfMTAiPgogICAgICA8ZGVmcz4KICAgICAgIDxwYXRoIGlkPSJtN2UzMTkzMWRmNSIgZD0iTSAwIDAgCkwgLTMuNSAwIAoiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZGVmcz4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtN2UzMTkzMWRmNSIgeD0iNTcuNiIgeT0iMjk1LjQ4ODM3MyIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMCI+CiAgICAgIDwhLS0gMC4wIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMjk5LjI4NzU5Mikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfMiI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xMSI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTdlMzE5MzFkZjUiIHg9IjU3LjYiIHk9IjI2MS42NDY0MzMiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTEiPgogICAgICA8IS0tIDAuMSAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDI2NS40NDU2NTIpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzEiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzMiPgogICAgIDxnIGlkPSJsaW5lMmRfMTIiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI203ZTMxOTMxZGY1IiB4PSI1Ny42IiB5PSIyMjcuODA0NDkzIiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzEyIj4KICAgICAgPCEtLSAwLjIgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAyMzEuNjAzNzEyKSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMyIiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja180Ij4KICAgICA8ZyBpZD0ibGluZTJkXzEzIj4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtN2UzMTkzMWRmNSIgeD0iNTcuNiIgeT0iMTkzLjk2MjU1NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xMyI+CiAgICAgIDwhLS0gMC4zIC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgMTk3Ljc2MTc3Mikgc2NhbGUoMC4xIC0wLjEpIj4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMyIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfNSI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xNCI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTdlMzE5MzFkZjUiIHg9IjU3LjYiIHk9IjE2MC4xMjA2MTQiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMC44Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICAgPGcgaWQ9InRleHRfMTQiPgogICAgICA8IS0tIDAuNCAtLT4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNjk2ODc1IDE2My45MTk4MzIpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzQiIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICAgPGcgaWQ9Inl0aWNrXzYiPgogICAgIDxnIGlkPSJsaW5lMmRfMTUiPgogICAgICA8Zz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI203ZTMxOTMxZGY1IiB4PSI1Ny42IiB5PSIxMjYuMjc4Njc0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzE1Ij4KICAgICAgPCEtLSAwLjUgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSAxMzAuMDc3ODkyKSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zMCIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0yZSIgeD0iNjMuNjIzMDQ3Ii8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTM1IiB4PSI5NS40MTAxNTYiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgIDwvZz4KICAgIDxnIGlkPSJ5dGlja183Ij4KICAgICA8ZyBpZD0ibGluZTJkXzE2Ij4KICAgICAgPGc+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNtN2UzMTkzMWRmNSIgeD0iNTcuNiIgeT0iOTIuNDM2NzM0IiBzdHlsZT0ic3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuOCIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgIDxnIGlkPSJ0ZXh0XzE2Ij4KICAgICAgPCEtLSAwLjYgLS0+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0LjY5Njg3NSA5Ni4yMzU5NTMpIHNjYWxlKDAuMSAtMC4xKSI+CiAgICAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0iRGVqYVZ1U2Fucy0zNiIgZD0iTSAyMTEzIDI1ODQgClEgMTY4OCAyNTg0IDE0MzkgMjI5MyAKUSAxMTkxIDIwMDMgMTE5MSAxNDk3IApRIDExOTEgOTk0IDE0MzkgNzAxIApRIDE2ODggNDA5IDIxMTMgNDA5IApRIDI1MzggNDA5IDI3ODYgNzAxIApRIDMwMzQgOTk0IDMwMzQgMTQ5NyAKUSAzMDM0IDIwMDMgMjc4NiAyMjkzIApRIDI1MzggMjU4NCAyMTEzIDI1ODQgCnoKTSAzMzY2IDQ1NjMgCkwgMzM2NiAzOTg4IApRIDMxMjggNDEwMCAyODg2IDQxNTkgClEgMjY0NCA0MjE5IDI0MDYgNDIxOSAKUSAxNzgxIDQyMTkgMTQ1MSAzNzk3IApRIDExMjIgMzM3NSAxMDc1IDI1MjIgClEgMTI1OSAyNzk0IDE1MzcgMjkzOSAKUSAxODE2IDMwODQgMjE1MCAzMDg0IApRIDI4NTMgMzA4NCAzMjYxIDI2NTcgClEgMzY2OSAyMjMxIDM2NjkgMTQ5NyAKUSAzNjY5IDc3OCAzMjQ0IDM0MyAKUSAyODE5IC05MSAyMTEzIC05MSAKUSAxMzAzIC05MSA4NzUgNTI5IApRIDQ0NyAxMTUwIDQ0NyAyMzI4IApRIDQ0NyAzNDM0IDk3MiA0MDkyIApRIDE0OTcgNDc1MCAyMzgxIDQ3NTAgClEgMjYxOSA0NzUwIDI4NjEgNDcwMyAKUSAzMTAzIDQ2NTYgMzM2NiA0NTYzIAp6CiIgdHJhbnNmb3JtPSJzY2FsZSgwLjAxNTYyNSkiLz4KICAgICAgIDwvZGVmcz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzAiLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMmUiIHg9IjYzLjYyMzA0NyIvPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjRGVqYVZ1U2Fucy0zNiIgeD0iOTUuNDEwMTU2Ii8+CiAgICAgIDwvZz4KICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0ieXRpY2tfOCI+CiAgICAgPGcgaWQ9ImxpbmUyZF8xNyI+CiAgICAgIDxnPgogICAgICAgPHVzZSB4bGluazpocmVmPSIjbTdlMzE5MzFkZjUiIHg9IjU3LjYiIHk9IjU4LjU5NDc5NCIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjgiLz4KICAgICAgPC9nPgogICAgIDwvZz4KICAgICA8ZyBpZD0idGV4dF8xNyI+CiAgICAgIDwhLS0gMC43IC0tPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC42OTY4NzUgNjIuMzk0MDEzKSBzY2FsZSgwLjEgLTAuMSkiPgogICAgICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9IkRlamFWdVNhbnMtMzciIGQ9Ik0gNTI1IDQ2NjYgCkwgMzUyNSA0NjY2IApMIDM1MjUgNDM5NyAKTCAxODMxIDAgCkwgMTE3MiAwIApMIDI3NjYgNDEzNCAKTCA1MjUgNDEzNCAKTCA1MjUgNDY2NiAKegoiIHRyYW5zZm9ybT0ic2NhbGUoMC4wMTU2MjUpIi8+CiAgICAgICA8L2RlZnM+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTMwIi8+CiAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNEZWphVnVTYW5zLTJlIiB4PSI2My42MjMwNDciLz4KICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI0RlamFWdVNhbnMtMzciIHg9Ijk1LjQxMDE1NiIvPgogICAgICA8L2c+CiAgICAgPC9nPgogICAgPC9nPgogICA8L2c+CiAgIDxnIGlkPSJsaW5lMmRfMTgiPgogICAgPHBhdGggZD0iTSA3My44MzI3MjcgMjkzLjcyNTAyMiAKTCA3Ny4wOTU1ODcgMjkyLjg4ODk3MyAKTCA4MC4zNTg0NDcgMjkxLjc2NTM4OSAKTCA4My42MjEzMDcgMjkwLjMwMzg2MSAKTCA4Ni44ODQxNjYgMjg4LjQ2MjMxMyAKTCA5MC4xNDcwMjYgMjg2LjIxMTgzNCAKTCA5My40MDk4ODYgMjgzLjUzOTM5MiAKTCA5Ni42NzI3NDYgMjgwLjQ0Njg0OCAKTCA5OS45MzU2MDUgMjc2Ljk0NTEyNiAKTCAxMDMuMTk4NDY1IDI3My4wNDMyNDUgCkwgMTA2LjQ2MTMyNSAyNjguNzMzMTg0IApMIDEwOS43MjQxODUgMjYzLjk3Mjg5NyAKTCAxMTIuOTg3MDQ0IDI1OC42NzEwMzIgCkwgMTE2LjI0OTkwNCAyNTIuNjc3NTcgCkwgMTE3Ljg4MTMzNCAyNDkuMzU4NDg2IApMIDExOS41MTI3NjQgMjQ1Ljc4NDU2NCAKTCAxMjEuMTQ0MTk0IDI0MS45MjMwNTcgCkwgMTIyLjc3NTYyNCAyMzcuNzQwMTU4IApMIDEyNC40MDcwNTMgMjMzLjIwMjIzMSAKTCAxMjYuMDM4NDgzIDIyOC4yNzcyNDUgCkwgMTI3LjY2OTkxMyAyMjIuOTM2MzUgCkwgMTI5LjMwMTM0MyAyMTcuMTU1NTY5IApMIDEzMC45MzI3NzMgMjEwLjkxNzUzMSAKTCAxMzQuMTk1NjMzIDE5Ny4wNDM0MSAKTCAxMzcuNDU4NDkyIDE4MS4zNjkwOTYgCkwgMTQwLjcyMTM1MiAxNjQuMTQ3NzQgCkwgMTQ1LjYxNTY0MiAxMzYuNTAyMTUgCkwgMTUwLjUwOTkzMSAxMDguOTAyMTc4IApMIDE1My43NzI3OTEgOTIuMDI1NjE1IApMIDE1NS40MDQyMjEgODQuMzkzNDk1IApMIDE1Ny4wMzU2NTEgNzcuNDQyMjUgCkwgMTU4LjY2NzA4MSA3MS4yNjU5OTcgCkwgMTYwLjI5ODUxMSA2NS45NDQwNSAKTCAxNjEuOTI5OTQxIDYxLjUzNzk4OCAKTCAxNjMuNTYxMzcgNTguMDg5MjQ5IApMIDE2NS4xOTI4IDU1LjYxNzM5MiAKTCAxNjYuODI0MjMgNTQuMTE5MDk3IApMIDE2OC40NTU2NiA1My41NjggCkwgMTcwLjA4NzA5IDUzLjkxNTM3NSAKTCAxNzEuNzE4NTIgNTUuMDkxNjUzIApMIDE3My4zNDk5NSA1Ny4wMDg3MzIgCkwgMTc0Ljk4MTM4IDU5LjU2Mjk4NiAKTCAxNzYuNjEyODEgNjIuNjM4ODM2IApMIDE3OC4yNDQyMzkgNjYuMTEyNzQyIApMIDE4MS41MDcwOTkgNzMuNzQ2MTg1IApMIDE4NC43Njk5NTkgODEuNDc2MzMyIApMIDE4Ni40MDEzODkgODUuMTAyNjc5IApMIDE4OC4wMzI4MTkgODguNDQ5MTU4IApMIDE4OS42NjQyNDkgOTEuNDQ1NzExIApMIDE5MS4yOTU2NzggOTQuMDQwNDU4IApMIDE5Mi45MjcxMDggOTYuMjAwMzA2IApMIDE5NC41NTg1MzggOTcuOTEwODQ3IApMIDE5Ni4xODk5NjggOTkuMTc1NTgzIApMIDE5Ny44MjEzOTggMTAwLjAxNDU2OCAKTCAxOTkuNDUyODI4IDEwMC40NjI1ODkgCkwgMjAxLjA4NDI1OCAxMDAuNTY2OTg0IApMIDIwMi43MTU2ODggMTAwLjM4NTI0OCAKTCAyMDQuMzQ3MTE3IDk5Ljk4MjUyMyAKTCAyMDcuNjA5OTc3IDk4Ljc5ODAyNyAKTCAyMTAuODcyODM3IDk3LjU5NTc3NyAKTCAyMTIuNTA0MjY3IDk3LjE2NTY2NiAKTCAyMTQuMTM1Njk3IDk2LjkzNjg3MSAKTCAyMTUuNzY3MTI3IDk2Ljk2NzkzMiAKTCAyMTcuMzk4NTU2IDk3LjMxMDcxNyAKTCAyMTkuMDI5OTg2IDk4LjAwOTc2MiAKTCAyMjAuNjYxNDE2IDk5LjEwMTg0NiAKTCAyMjIuMjkyODQ2IDEwMC42MTU3NDQgCkwgMjIzLjkyNDI3NiAxMDIuNTcyMTU0IApMIDIyNS41NTU3MDYgMTA0Ljk4Mzc1MiAKTCAyMjcuMTg3MTM2IDEwNy44NTUzODEgCkwgMjI4LjgxODU2NiAxMTEuMTg0MzM3IApMIDIzMC40NDk5OTUgMTE0Ljk2MDc0NiAKTCAyMzIuMDgxNDI1IDExOS4xNjgwMyAKTCAyMzMuNzEyODU1IDEyMy43ODM0MzYgCkwgMjM2Ljk3NTcxNSAxMzQuMTIwMzg1IApMIDI0MC4yMzg1NzUgMTQ1LjY5MDA0IApMIDI0My41MDE0MzQgMTU4LjE1NDcxMiAKTCAyNTYuNTUyODczIDIwOS41MTIzODQgCkwgMjU5LjgxNTczMyAyMjAuOTY2Mjg3IApMIDI2My4wNzg1OTMgMjMxLjI4ODY1OCAKTCAyNjQuNzEwMDIzIDIzNS45NjIxNTMgCkwgMjY2LjM0MTQ1MyAyNDAuMjg0NzAxIApMIDI2Ny45NzI4ODMgMjQ0LjI0MjIxMyAKTCAyNjkuNjA0MzEyIDI0Ny44MjQ5NzQgCkwgMjcxLjIzNTc0MiAyNTEuMDI3NzMgCkwgMjcyLjg2NzE3MiAyNTMuODQ5NzM4IApMIDI3NC40OTg2MDIgMjU2LjI5NDc2OCAKTCAyNzYuMTMwMDMyIDI1OC4zNzEwNjMgCkwgMjc3Ljc2MTQ2MiAyNjAuMDkxMjM3IApMIDI3OS4zOTI4OTIgMjYxLjQ3MjExNyAKTCAyODEuMDI0MzIyIDI2Mi41MzQ1MTYgCkwgMjgyLjY1NTc1MSAyNjMuMzAyOTQyIApMIDI4NC4yODcxODEgMjYzLjgwNTI0MSAKTCAyODUuOTE4NjExIDI2NC4wNzIxNiAKTCAyODcuNTUwMDQxIDI2NC4xMzY4NjEgCkwgMjg5LjE4MTQ3MSAyNjQuMDM0MzU4IApMIDI5Mi40NDQzMzEgMjYzLjQ3MzM3NiAKTCAyOTguOTcwMDUgMjYxLjk0MTY5NSAKTCAzMDIuMjMyOTEgMjYxLjQ5NzgzNyAKTCAzMDMuODY0MzQgMjYxLjQ1MDAyMSAKTCAzMDUuNDk1NzcgMjYxLjU0Mzc0OCAKTCAzMDcuMTI3MiAyNjEuNzkyNDg5IApMIDMwOC43NTg2MyAyNjIuMjA0OTgzIApMIDMxMC4zOTAwNTkgMjYyLjc4NTE5NSAKTCAzMTIuMDIxNDg5IDI2My41MzI0MDkgCkwgMzEzLjY1MjkxOSAyNjQuNDQxNDQ1IApMIDMxNS4yODQzNDkgMjY1LjUwMyAKTCAzMTguNTQ3MjA5IDI2OC4wMjg2NTEgCkwgMzIxLjgxMDA2OSAyNzAuOTcxNzU4IApMIDMyNi43MDQzNTggMjc1LjgwMDkyNiAKTCAzMzEuNTk4NjQ4IDI4MC42MTUwOSAKTCAzMzQuODYxNTA4IDI4My41NzI3OTggCkwgMzM4LjEyNDM2NyAyODYuMjA5MTQ3IApMIDM0MS4zODcyMjcgMjg4LjQ2NzA0NyAKTCAzNDQuNjUwMDg3IDI5MC4zMjgxMSAKTCAzNDcuOTEyOTQ3IDI5MS44MDYxMDYgCkwgMzUxLjE3NTgwNiAyOTIuOTM3OTk0IApMIDM1NC40Mzg2NjYgMjkzLjc3NDM5NSAKTCAzNTcuNzAxNTI2IDI5NC4zNzEwMiAKTCAzNjAuOTY0Mzg2IDI5NC43ODE5ODUgCkwgMzY1Ljg1ODY3NSAyOTUuMTUzMzQgCkwgMzcyLjM4NDM5NSAyOTUuMzc3MzE4IApMIDM4My44MDQ0MDQgMjk1LjQ3NjUyNyAKTCAzOTguNDg3MjczIDI5NS40ODggCkwgMzk4LjQ4NzI3MyAyOTUuNDg4IAoiIGNsaXAtcGF0aD0idXJsKCNwMDYyZDRkMTFhYikiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICMxZjc3YjQ7IHN0cm9rZS13aWR0aDogMS41OyBzdHJva2UtbGluZWNhcDogc3F1YXJlIi8+CiAgIDwvZz4KICAgPGcgaWQ9InBhdGNoXzMiPgogICAgPHBhdGggZD0iTSA1Ny42IDMwNy41ODQgCkwgNTcuNiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNCI+CiAgICA8cGF0aCBkPSJNIDQxNC43MiAzMDcuNTg0IApMIDQxNC43MiA0MS40NzIgCiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAwLjg7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1saW5lY2FwOiBzcXVhcmUiLz4KICAgPC9nPgogICA8ZyBpZD0icGF0Y2hfNSI+CiAgICA8cGF0aCBkPSJNIDU3LjYgMzA3LjU4NCAKTCA0MTQuNzIgMzA3LjU4NCAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgIDxnIGlkPSJwYXRjaF82Ij4KICAgIDxwYXRoIGQ9Ik0gNTcuNiA0MS40NzIgCkwgNDE0LjcyIDQxLjQ3MiAKIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiAjMDAwMDAwOyBzdHJva2Utd2lkdGg6IDAuODsgc3Ryb2tlLWxpbmVqb2luOiBtaXRlcjsgc3Ryb2tlLWxpbmVjYXA6IHNxdWFyZSIvPgogICA8L2c+CiAgPC9nPgogPC9nPgogPGRlZnM+CiAgPGNsaXBQYXRoIGlkPSJwMDYyZDRkMTFhYiI+CiAgIDxyZWN0IHg9IjU3LjYiIHk9IjQxLjQ3MiIgd2lkdGg9IjM1Ny4xMiIgaGVpZ2h0PSIyNjYuMTEyIi8+CiAgPC9jbGlwUGF0aD4KIDwvZGVmcz4KPC9zdmc+Cg==" alt="image" /></p>

<h2 id="video-game-leaderboards">Video game leaderboards</h2>

<p><strong><em>COMING SOON</em></strong></p>
</div>

                        <input id="mod-idp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-idp-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sa">r</span><span class="sd">&#39;&#39;&#39;Tools for working with iterated Dirichlet processes.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd"># Module description</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="sd">Consider a situation in which there are several agents, all from the</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="sd">same population. Each agent undertakes a sequence of actions. These</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="sd">actions are chosen according to the agent&#39;s particular tendencies.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="sd">Although different agents have different tendencies, there may be</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="sd">patterns in the population.</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="sd">We observe a certain set of agents over a certain amount of time. Based</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="sd">on these observations, we want to make probabilistic forecasts about two</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="sd">things:</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="sd">* The future behavior of the agents we have observed.</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="sd">* The behavior of a new (unobserved) agent from the population.</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="sd">An iterated Dirichlet process is a mathematical tool that can model</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="sd">this. The file, `idp-paper-9.pdf`, gives the mathematical details. (In</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="sd">this rest of this documentation, we refer to this file as the &quot;Paper.&quot;)</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="sd">This module, `idp`, is a Python implementation of the iterated Dirichlet</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="sd">process (IDP).</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="sd"># Examples</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">## Pressed penny machines</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="sd">Imagine a pressed penny machine, like those found in museums or tourist</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="sd">attractions. For a fee, the machine presses a penny into a commemorative</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a><span class="sd">souvenir. Now imagine the machine is broken, so that it mangles all the</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="sd">pennies we feed it. Each pressed penny it creates is mangled in its own</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="sd">way. Each has its own probability of landing on heads when flipped. In</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="sd">this situation, the agents are the pennies and the actions are the heads</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">and tails that they produce.</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="sd">Now suppose we create seven mangled pennies and flip each one 5 times.</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="sd">Suppose that the first four coins each result in 4 heads out of 5 flips.</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="sd">The fifth coin results in 1 head, the sixth coin results in 4 heads, and</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="sd">the seventh coin results in 3 heads. If we flip the fifth coin one more</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="sd">time, what is the probability that it will land on heads? Looking only</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">at the past flips of the fifth coin, it seems biased towards tails.</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="sd">Overall, though, the machine seems to make coins that are biased towards</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">heads. All seven coins could be heads-biased, and the fifth coin just</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="sd">had an unlucky run. How should we balance these competing intuitions to</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="sd">arrive at a probability?</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="sd">One way to answer this is to model the situation with an IDP. We can do</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="sd">this with the `IDPModel` class as follows:</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="sd">```python</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="sd">&gt;&gt;&gt; from idp import IDPModel</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(1, 1, 0.5,</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="sd">...     [[5 - x, x] for x in [4, 4, 4, 4, 1, 4, 3]])</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="sd">```</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="sd">Next, we run 10,000 weighted simulations and use them to estimate the</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="sd">probability that the fifth coin, if flipped again, will land on heads:</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a><span class="sd">```python</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000)</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="sd">&gt;&gt;&gt; idpModel.postProb(4)</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="sd">0.4381490163838421</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a><span class="sd">```</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="sd">Likewise, we can estimate the same probability for the first and seventh</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="sd">coins:</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="sd">```python</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="sd">&gt;&gt;&gt; idpModel.postProb(0)</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="sd">0.7240808961723293</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="sd">&gt;&gt;&gt; idpModel.postProb(6)</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="sd">0.6791451999003222</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="sd">```</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="sd">These probabilities are not calculated by direct simulation, but by</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="sd">using [importance</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="sd">sampling](https://en.wikipedia.org/wiki/Importance_sampling).</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">Although the sample size is 10,000, the &quot;effective sample size&quot; is</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="sd">lower:</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="sd">```python</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="sd">6590.874508839897</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="sd">```</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="sd">What this means is that the accuracy of our calculations is about the</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="sd">same as if we did 6,591 direct simulations.</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="sd">Above, we looked at the seven coins that were already flipped. Now, let</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">us consider a hypothetical new coin from the machine. We first estimate</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a><span class="sd">the probability that this new coin will land on heads. To do this, we</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="sd">can use any argument larger than the highest index in our observed data.</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="sd">```python</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="sd">&gt;&gt;&gt; idpModel.postProb(7)</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">0.6541807830266262</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="sd">&gt;&gt;&gt; idpModel.postProb(47586)</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a><span class="sd">0.6541807830266262</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a><span class="sd">```</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a><span class="sd">If the new coin from the machine has probability of heads $\theta$, then</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a><span class="sd">$\theta$ is a random variable taking values in $[0, 1]$. The following</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="sd">will plot the cumulative distribution function of $\theta$:</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a><span class="sd">```python</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a><span class="sd">&gt;&gt;&gt; import numpy as np</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a><span class="sd">&gt;&gt;&gt; import matplotlib.pyplot as plt</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a><span class="sd">&gt;&gt;&gt; t = np.linspace(0, 1, 200)</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, idpModel.meanRDGcdf(t))</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a><span class="sd">```</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a><span class="sd">![image](images/coins_cdf.svg)</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a><span class="sd">The random variable $\theta$ has a discrete component, so it does not</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a><span class="sd">have a probability density function. But we can plot an approximate</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="sd">density as follows:</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="sd">```python</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, idpModel.meanRDGpdf(t))</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a><span class="sd">```</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="sd">![image](images/coins_pdf_default.svg)</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="sd">The approximate density is computed by smoothing out the discrete point</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a><span class="sd">masses. The degree of smoothing is determined by a parameter called the</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a><span class="sd">&quot;bandwidth&quot;. (See `IDPModel.meanRDGpdf` for details.) This bandwidth is</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a><span class="sd">computed automatically. We can view the bandwidth that was used most</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a><span class="sd">recently, and we can also set the bandwidth manually.</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a><span class="sd">```python</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a><span class="sd">&gt;&gt;&gt; idpModel.bandwidth</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a><span class="sd">0.11673170321052885</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, idpModel.meanRDGpdf(t, bandwidth=0.001))</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="sd">```</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a><span class="sd">![image](images/coins_pdf_coarse.svg)</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="sd">## Flicking thumbtacks</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a><span class="sd">Imagine a box of 320 thumbtacks. We flick each thumbtack 9 times. If it</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a><span class="sd">lands point up, we call it a success. Point down is a failure. Because</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a><span class="sd">of the imperfections, each thumbtack has its own probability of success.</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a><span class="sd">The file, `tacks.csv`, contains the success and failure counts for this</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="sd">experiment. The data in `tacks.csv` is exactly the data considered in</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="sd">[Liu (1996)](https://doi.org/10.1214/aos/1032526949). (This data</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="sd">originally came from an experiment by Beckett and Diaconis in 1994. In</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a><span class="sd">the original experiment, there were not 320 thumbtacks. Rather, there</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a><span class="sd">were 16 thumbtacks, 2 flickers, and 10 surfaces.)</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="sd">To study this situation, we first create the model and perform 10,000</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">simulations.</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">```python</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">&gt;&gt;&gt; import csv</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">&gt;&gt;&gt; with open(&#39;tacks.csv&#39;) as f:</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="sd">...     sheet = list(csv.reader(f))</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a><span class="sd">...     rowCounts = [[int(value) for value in row] for row in sheet]</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(1, 2, 0.5, rowCounts)</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000) # took ~4m on a Macbook</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="sd">152.9149187791142</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a><span class="sd">```</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a><span class="sd">Here, we use a row concentration parameter of $2$ and a base measure</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="sd">that assigns probability $1/2$ to both $0$ and $1$. This matches the</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="sd">distribution used by Liu. What we call the column concentration</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a><span class="sd">parameter is denoted by $c$ in Liu&#39;s analysis. Liu considers the cases</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a><span class="sd">$c = 0.1$, $c = 1$, $c = 5$, and $c = 10$. Here, we are taking $c = 1$.</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="sd">We also checked our effective sample size, which is a good habit</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="sd">whenever we add new weighted simulations. For comparison, Liu reported</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a><span class="sd">an effective sample size of 227 in the case $c = 1$.</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="sd">We now look at the approximate density of the posterior probability of</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="sd">success.</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a><span class="sd">```python</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, idpModel.meanRDGpdf(t))</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a><span class="sd">&gt;&gt;&gt; idpModel.bandwidth</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="sd">0.11536431167041011</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">```</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">![image](images/tacks_pdf_1.svg)</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a><span class="sd">This graph look about the same as Liu&#39;s, but with minor differences. It</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a><span class="sd">is difficult, though, to make a direct comparison. Liu also uses</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a><span class="sd">Gaussian kernel smoothing, but does not provide any details about it.</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">For example, we do not know the bandwidth used to produce Liu&#39;s graphs.</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">We now try $c = 10$.</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a><span class="sd">```python</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(10, 2, 0.5, rowCounts)</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000)</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a><span class="sd">380.0956178035554</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, idpModel.meanRDGpdf(t))</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a><span class="sd">&gt;&gt;&gt; idpModel.bandwidth</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="sd">0.09615748053800711</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="sd">```</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="sd">![image](images/tacks_pdf_10.svg)</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="sd">This graph also looks similar to Liu&#39;s. For comparison, Liu reported an</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="sd">effective sample size of 300 in this case.</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="sd">## Amazon reviews</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a><span class="sd">[Liu (1996)](https://doi.org/10.1214/aos/1032526949) only covers agents</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a><span class="sd">with two possible actions, such as coins and thumbtacks. The IDP,</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a><span class="sd">though, can handle agents whose range of possible actions is arbitrary.</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="sd">Imagine, then, that we discover a seller on Amazon that has 50 products.</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a><span class="sd">Their products have an average rating of 2.4 stars out of 5. Some</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a><span class="sd">products have almost 100 ratings, while others have only a few. On</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a><span class="sd">average, the products have 23 ratings each. In this case, the agents are</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a><span class="sd">the products and the actions are the ratings that each product earns.</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="sd">Each individual rating must be a whole number of stars between 1 and 5,</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a><span class="sd">inclusive. Hence, each action has 5 possible outcomes. The file,</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a><span class="sd">`reviews.csv`, contains all the data for this example.</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a><span class="sd">To begin, we create the IDP model.</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a><span class="sd">```python</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a><span class="sd">&gt;&gt;&gt; with open(&#39;reviews.csv&#39;) as f:</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a><span class="sd">...     sheet = list(csv.reader(f))</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a><span class="sd">...     rowCounts = [[int(value)</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a><span class="sd">...         for value in row[:5]] for row in sheet[1:]]</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(1, 5, [0.2] * 5, rowCounts)</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="sd">```</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a><span class="sd">In this example, unlike the previous ones, when we try to create a</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a><span class="sd">weighted simulation, we get an error.</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a><span class="sd">```python</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(1)</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a><span class="sd">Traceback (most recent call last):</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a><span class="sd">  File &quot;idp.py&quot;, line 395, in addWeightedSims</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a><span class="sd">    self._weightedSims += [WeightedSim(self) for _ in range(num)]</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a><span class="sd">  File &quot;idp.py&quot;, line 585, in __init__</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a><span class="sd">    self.updateRowCounts()</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a><span class="sd">  File &quot;idp.py&quot;, line 694, in updateRowCounts</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a><span class="sd">    raise ValueError(</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a><span class="sd">ValueError: Simulation weight out of bounds.</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a><span class="sd">Try adjusting scale factor by 28.773115195642152</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a><span class="sd">```</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a><span class="sd">The reason for this error is that the simulation weight was too small</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a><span class="sd">for the code to handle. The error message recommends that we correct for</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a><span class="sd">this by adjusting the scale factor. Following the recommendation, we are</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a><span class="sd">able to create simulations.</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a><span class="sd">```python</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a><span class="sd">&gt;&gt;&gt; idpModel.scale += 28.8</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000) # took ~17s</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a><span class="sd">7.841271686848992</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">```</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a><span class="sd">But now we have a new problem. The effective sample size is only</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a><span class="sd">about 8. To fix this, we can adjust the column concentration.</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">```python</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">&gt;&gt;&gt; idpModel = IDPModel(10, 5, [0.2] * 5, rowCounts)</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a><span class="sd">&gt;&gt;&gt; idpModel.scale += 28.8</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(10000)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a><span class="sd">60.753058312442704</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a><span class="sd">```</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a><span class="sd">This is a much better number, so we go ahead and generate even more</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a><span class="sd">simulations.</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a><span class="sd">```python</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a><span class="sd">&gt;&gt;&gt; idpModel.addWeightedSims(90000) # took ~2.5m</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a><span class="sd">&gt;&gt;&gt; idpModel.ess</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a><span class="sd">344.71978471859825</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a><span class="sd">```</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="sd">We now have 100,000 simulations and an effective sample size of</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">about 345. We are ready to look at the statistical properties of this</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a><span class="sd">model. Let us first consider a hypothetical new product from this</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a><span class="sd">seller.</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a><span class="sd">```python</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a><span class="sd">&gt;&gt;&gt; [idpModel.postProb(50, state) for state in range(5)] # took ~1m</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a><span class="sd">[0.2761966514182088,</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a><span class="sd"> 0.24530376792548603,</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a><span class="sd"> 0.23357331407467244,</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a><span class="sd"> 0.15908773141793714,</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a><span class="sd"> 0.08583853516368677]</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a><span class="sd"> ```</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a><span class="sd">These numbers are the expected review frequencies for the new product.</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="sd">For instance, we expect about 15.9% of the reviews for the new product</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a><span class="sd">to be 4-star reviews. Using these, we can compute the expected average</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a><span class="sd">rating of a new product.</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a><span class="sd">```python</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a><span class="sd">&gt;&gt;&gt; np.average(range(1, 6), weights=_)</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="sd">2.533067730983403</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="sd">```</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a><span class="sd">### Products with few reviews</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a><span class="sd">Consider the product that occupies the last row of `reviews.csv`.</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="sd">```python</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">&gt;&gt;&gt; idpModel.rowCounts[49]</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a><span class="sd">(0, 0, 1, 1, 0)</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a><span class="sd">```</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a><span class="sd">This product has a 3.5 average rating, but only 2 reviews. To see the</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a><span class="sd">effect of these 2 reviews on the expected long-term rating, we compute</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="sd">as we did above.</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="sd">```python</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a><span class="sd">&gt;&gt;&gt; [idpModel.postProb(49, state) for state in range(5)]</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a><span class="sd">[0.1801415747561264,</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a><span class="sd"> 0.20160306349376322,</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a><span class="sd"> 0.2726928799647673,</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a><span class="sd"> 0.2672355123734726,</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="sd"> 0.07832696941186464]</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="sd">&gt;&gt;&gt; np.average(range(1, 6), weights=_)</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">2.862003238191184</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a><span class="sd">```</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a><span class="sd">Based on these 2 reviews, the expected long-term rating of this product</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a><span class="sd">is about 2.86.</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a><span class="sd">Similarly, we can consider the product with row index 25.</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a><span class="sd">```python</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a><span class="sd">&gt;&gt;&gt; idpModel.rowCounts[25]</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a><span class="sd">(0, 3, 0, 6, 7)</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a><span class="sd">&gt;&gt;&gt; np.average(range(1, 6), weights=_)</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a><span class="sd">4.0625</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a><span class="sd">```</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a><span class="sd">This product&#39;s average rating is higher than 4, but it only has 16</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a><span class="sd">reviews. As above, we can see the effect of this as follows.</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="sd">```python</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="sd">&gt;&gt;&gt; [idpModel.postProb(25, state) for state in range(5)]</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a><span class="sd">[0.04922117599491753,</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a><span class="sd"> 0.1952254233996257,</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a><span class="sd"> 0.04941084806597564,</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a><span class="sd"> 0.33072171075167844,</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a><span class="sd"> 0.3754208417877854]</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a><span class="sd">&gt;&gt;&gt; np.average(range(1, 6), weights=_)</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a><span class="sd">3.787895618937802</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a><span class="sd">```</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a><span class="sd">This time the effect is more pronounced, as it should be. Based on these</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="sd">16 reviews, the model expects this product&#39;s long-term rating to be</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a><span class="sd">about 3.79.</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a><span class="sd">### Rating distributions</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a><span class="sd">We saw above that a new product is expected to have a long-term rating</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a><span class="sd">of about 2.53. If we wish to simulate a new product, we can do that as</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a><span class="sd">follows.</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a><span class="sd">```python</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a><span class="sd">&gt;&gt;&gt; idpModel.simRowDist()</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a><span class="sd">[0.3700511656488211,</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a><span class="sd"> 0.28793080435280305,</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="sd"> 0.11220074971323332,</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd"> 0.2031461493683579,</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a><span class="sd"> 0.02667113091678458]</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="sd">&gt;&gt;&gt; np.average(range(1, 6), weights=_)</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a><span class="sd">2.2284552755514815</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">```</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="sd">Our simulated product turned out to have a below-average rating. To see</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">the distribution of all possible new product ratings, we can simulate</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a><span class="sd">100 new products.</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a><span class="sd">```python</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a><span class="sd">&gt;&gt;&gt; from statistics import fmean</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a><span class="sd">&gt;&gt;&gt; sample = [np.average(range(1, 6), weights=idpModel.simRowDist())</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="sd">...     for _ in range(100)] # took ~3m</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a><span class="sd">&gt;&gt;&gt; fmean(sample)</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a><span class="sd">2.5289729704892396</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a><span class="sd">```</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="sd">We can now view the cumulative distribution function of these new</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="sd">product ratings.</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">```python</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a><span class="sd">&gt;&gt;&gt; from scipy.stats import ecdf</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="sd">&gt;&gt;&gt; ax = plt.subplot()</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="sd">&gt;&gt;&gt; ecdf(sample).cdf.plot(ax)</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="sd">```</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a><span class="sd">![image](images/reviews_cdf.svg)</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a><span class="sd">Or we can view an approximate density function for them.</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a><span class="sd">```python</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a><span class="sd">&gt;&gt;&gt; from scipy.stats import gaussian_kde</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="sd">&gt;&gt;&gt; t = np.linspace(1, 5, 200)</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a><span class="sd">&gt;&gt;&gt; plt.plot(t, gaussian_kde(sample)(t))</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="sd">&gt;&gt;&gt; plt.show()</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">```</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">![image](images/reviews_pdf.svg)</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="sd">## Video game leaderboards</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a><span class="sd">***COMING SOON***</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choices</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a><span class="kn">from</span> <span class="nn">scipy.special</span> <span class="kn">import</span> <span class="n">gammaln</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">beta</span><span class="p">,</span> <span class="n">dirichlet</span><span class="p">,</span> <span class="n">gaussian_kde</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a><span class="kn">from</span> <span class="nn">statsmodels.distributions.empirical_distribution</span> <span class="kn">import</span> <span class="n">ECDFDiscrete</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;IDPModel&#39;</span><span class="p">,</span> <span class="s1">&#39;WeightedSim&#39;</span><span class="p">]</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a><span class="k">def</span> <span class="nf">_betaFuncMult</span><span class="p">(</span><span class="n">alpha</span><span class="p">):</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>    <span class="sd">&#39;&#39;&#39;Computes and returns the value of the multivariate beta function,</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a><span class="sd">    evaluated at the given list of arguments.</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a><span class="sd">    **Arguments:**</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a><span class="sd">    * **alpha** (`list`[`float`]): The list of arguments for the</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="sd">        multivariate beta function.</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">gammaln</span><span class="p">(</span><span class="n">alpha</span><span class="p">))</span> <span class="o">-</span> <span class="n">gammaln</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">alpha</span><span class="p">)))</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a><span class="k">class</span> <span class="nc">IDPModel</span><span class="p">:</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;An IDP model on the state space $S = \\{0, ..., L - 1\\}$.</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a><span class="sd">    The IDP model consists of both an IDP and some observed data. See</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a><span class="sd">    Section 9 of the Paper for details.</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colConc</span><span class="p">,</span> <span class="n">rowConc</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">):</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>        <span class="sd">&#39;&#39;&#39;The constructor first uses the given arguments to set the</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a><span class="sd">        corresponding properties. If a property returns a tuple or a</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">        tuple of tuples, then the argument can be passed any</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a><span class="sd">        `array-like` object, such as a list or a list of lists.</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a><span class="sd">        For the `baseMeas` property, the corresponding argument can be</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a><span class="sd">        passed a single floating point value `p`, in which case the</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a><span class="sd">        property will be set to `(1 - p, p)`.</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>        <span class="c1"># `baseMeas` and `rowCounts` are stored as ndarrays rather than</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>        <span class="c1"># lists, since vector addition fails for lists but works for</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>        <span class="c1"># ndarrays. This is important in the constructor of the</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>        <span class="c1"># `WeightedSim` class.</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">]</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>        <span class="n">rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>            <span class="s1">&#39;colConc&#39;</span><span class="p">:</span> <span class="n">colConc</span><span class="p">,</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>            <span class="s1">&#39;rowConc&#39;</span><span class="p">:</span> <span class="n">rowConc</span><span class="p">,</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>            <span class="s1">&#39;baseMeas&#39;</span><span class="p">:</span> <span class="n">baseMeas</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>        <span class="p">}</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">rowCounts</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>    <span class="nd">@property</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>    <span class="k">def</span> <span class="nf">colConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The column concentration parameter. Should be</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a><span class="sd">        positive. Denoted by $\kappa$ in Section 9 of the Paper.</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>    <span class="nd">@property</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>    <span class="k">def</span> <span class="nf">rowConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The row concentration parameter. Should be</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a><span class="sd">        positive. Denoted by $\varepsilon$ in Section 9 of the Paper.</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>    <span class="nd">@property</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>    <span class="k">def</span> <span class="nf">baseMeas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The base probability vector. Should be a</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a><span class="sd">        list of positive numbers that sum to 1. Denoted by</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a><span class="sd">        $\boldsymbol{p} = (p_0, \ldots, p_{L - 1})$ in Section 9 of the</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a><span class="sd">        Paper, where $p_\ell = \varrho(\{\ell\})$.</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">])</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>    <span class="nd">@property</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>    <span class="k">def</span> <span class="nf">rowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`int`)): The row counts for the observed</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a><span class="sd">        data. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a><span class="sd">        `rowCounts`[`row`][`state`] is denoted by $\overline{y}_{m\ell}$</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a><span class="sd">        in Section 9 of the Paper. It is the number of observed</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a><span class="sd">        instances of `state` in the given row of data.</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>    <span class="nd">@property</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>    <span class="k">def</span> <span class="nf">likelihoods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The prior likelihoods. If `row` equals</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a><span class="sd">        $m - 1$, then `likelihoods`[`row`] is denoted by</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a><span class="sd">        $\varrho_N(A_m)$ in Section 9 of the Paper. It is the prior</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="sd">        probability of seeing the row counts for the given row. This</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="sd">        property is computed by the constructor, and should not be</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a><span class="sd">        changed.</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">):</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>            <span class="n">rowConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>            <span class="n">denom</span> <span class="o">=</span> <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">)</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">):]:</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>                    <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">row</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>                <span class="p">)</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>    <span class="nd">@property</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The scale factor to use for weighted simulations.</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a><span class="sd">        Denoted by $\log c$ in Section 9 of the Paper. Defaults to 0.</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a><span class="sd">        Altering this value runs the `WeightedSim.updateScale` method on</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="sd">        every simulation in the `weightedSims` property. If a</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a><span class="sd">        `ValueError` occurs in this process, then no changes will be</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="sd">        made, neither to the `scale` property, nor to any of the</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a><span class="sd">        simulations in the `weightedSims` property.</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>    <span class="nd">@scale</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>        <span class="n">oldVal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateScale</span><span class="p">()</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">oldVal</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>            <span class="k">raise</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>    <span class="nd">@property</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>    <span class="k">def</span> <span class="nf">weightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`WeightedSim`): A tuple of distinct (and therefore</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a><span class="sd">        independent) `WeightedSim` instances. `weightedSims`[k] is</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a><span class="sd">        denoted by $(t^k, \boldsymbol{\theta}_M^{*, k})$ in Section 9 of</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a><span class="sd">        the Paper, and has total weight $V_k$. This property is empty if</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a><span class="sd">        the `addWeightedSims` method has never been run.</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>    <span class="nd">@property</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>    <span class="k">def</span> <span class="nf">ess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the sample</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a><span class="sd">        variance. Denoted by $K_e&#39;&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>        <span class="n">numSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>        <span class="k">if</span> <span class="n">numSims</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>        <span class="n">essPop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">essPop</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>        <span class="k">return</span> <span class="n">essPop</span> <span class="o">*</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="n">essPop</span><span class="o">/</span><span class="n">numSims</span><span class="p">)</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>    <span class="nd">@property</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>    <span class="k">def</span> <span class="nf">essPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the population</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a><span class="sd">        variance. Denoted by $K_e&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span>      <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>        <span class="p">)</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>    <span class="nd">@property</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>    <span class="k">def</span> <span class="nf">bandwidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The bandwidth used most recently by the `meanRDGpdf`</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a><span class="sd">        method. Is `None` if this method has never been used.</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>    <span class="k">def</span> <span class="nf">addRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">):</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>        <span class="sd">&#39;&#39;&#39;Adds new row counts to the `rowCounts` property and runs the</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a><span class="sd">        `WeightedSim.updateRowCounts` method on every simulation in the</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a><span class="sd">        `weightedSims` property. If a `ValueError` occurs in this</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a><span class="sd">        process, then no changes will be made, neither to the</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a><span class="sd">        `rowCounts` property, nor to any of the simulations in the</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a><span class="sd">        * **newRowCounts** (`array_like`): The additional row counts to</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="sd">            be added. Should be an array-like object (such as a list of</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a><span class="sd">            lists) with the same number of columns (states) as</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">            `rowCounts`.</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>        <span class="n">oldRowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">))</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">oldRowCounts</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>            <span class="k">raise</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>    <span class="k">def</span> <span class="nf">delRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numRows</span><span class="p">):</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>        <span class="sd">&#39;&#39;&#39;Deletes the last `numRows` rows of the `rowCounts` property,</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">        then runs the `WeightedSim.updateRowCounts` method on every</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">        simulation in the `weightedSims` property.</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a><span class="sd">        * **numRows** (`int`): The number of rows to delete.</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[:</span><span class="o">-</span><span class="n">numRows</span><span class="p">]</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>        <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>    <span class="k">def</span> <span class="nf">addWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>        <span class="sd">&#39;&#39;&#39;Creates new `WeightedSim` instances and adds them to the</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a><span class="sd">        </span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a><span class="sd">        * **num** (`int`): The number of distinct `WeightedSim`</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a><span class="sd">            instances to create. If zero or negative, no instances are</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a><span class="sd">            created.</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WeightedSim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>    <span class="k">def</span> <span class="nf">clearWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>        <span class="sd">&#39;&#39;&#39;Deletes all weighted simulations contained in the</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>    <span class="k">def</span> <span class="nf">postProb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Computes and returns the posterior probability of seeing the</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a><span class="sd">        given state on a new trial in the given row. If `row` is</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a><span class="sd">        $m - 1$, `state` is $\ell$ , and the length of `rowCounts` is</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a><span class="sd">        $M$, then the value returned by this method is denoted in the</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a><span class="sd">        Paper by $P(\xi_{m, N_m + \ell} = 1 \mid Y = y)$ in the case</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a><span class="sd">        $m \le M$, and by $P(\xi_{M + 1, 1} = \ell \mid Y = y)$ in the</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a><span class="sd">        case $m &gt; M$. This method implements (9.4) and (9.5) in the</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a><span class="sd">        Paper.</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a><span class="sd">        * **row** (`int`): The index of the row whose posterior</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a><span class="sd">            probability should be computed.</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a><span class="sd">        * **state** (`int`): The state whose posterior probability</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a><span class="sd">            should be computed.</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a><span class="sd">        * `float`: The posterior probability of seeing the given state.</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a><span class="sd">        **Raises:**</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a><span class="sd">        * **ValueError**: If the `weightedSims` property is empty.</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No weighted simulations found&#39;</span><span class="p">)</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>        <span class="k">if</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postProbLow</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>            <span class="n">colConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postProbLow</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numRows</span><span class="p">))</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>        <span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">)</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>    <span class="k">def</span> <span class="nf">_postProbLow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>        <span class="sd">&#39;&#39;&#39;This method is the same as `postProb`, except it requires</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a><span class="sd">        `row` to be less than the length of `rowCounts`.</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">*</span> <span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">state</span><span class="p">]</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>        <span class="p">)</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>        <span class="p">)</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>    <span class="k">def</span> <span class="nf">meanRDGcdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;The mean of the row distribution generator (RDG) for a state</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a><span class="sd">        $\ell$ is a probability distribution on $[0, 1]$. More</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a><span class="sd">        specifically, using the notation in the Paper, it is the</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a><span class="sd">        conditional distribution of $\theta_{M + 1, \ell}$ given</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a><span class="sd">        $Y = y$, and an expression for it is given in (9.6) in the</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a><span class="sd">        Paper.</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a><span class="sd">        This method evaluates the cumulative distribution function (cdf)</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a><span class="sd">        of the mean of the RDG for the given state at the given point.</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a><span class="sd">        That is, it gives the cdf for the random probability of seeing</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a><span class="sd">        the given state in a new trial.</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a><span class="sd">        * **t** (`float`): The point at which to evaluate the cdf.</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a><span class="sd">        * **state** (`int`): The state for which the cdf is to be</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a><span class="sd">            computed.</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a><span class="sd">        * `float`: The value of the cdf at the given point.</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>        <span class="n">sampleCDF</span> <span class="o">=</span> <span class="n">ECDFDiscrete</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">sampleCDF</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>        <span class="p">)</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>    <span class="k">def</span> <span class="nf">_prior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>        <span class="sd">&#39;&#39;&#39;Returns the prior distribution of the mean RDG for the given</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a><span class="sd">        state. If no state is given, returns the prior of a row</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="sd">        distribution.</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>        <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>            <span class="k">return</span> <span class="n">dirichlet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">])</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>        <span class="k">return</span> <span class="n">beta</span><span class="p">(</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">][</span><span class="n">state</span><span class="p">],</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">][</span><span class="n">state</span><span class="p">])</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>        <span class="p">)</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>    <span class="k">def</span> <span class="nf">_makeSample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>        <span class="sd">&#39;&#39;&#39;Creates and returns a weighted list of simulated row</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a><span class="sd">        distributions evaluated at the given state. If no state is</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a><span class="sd">        given, returns the row distributions themselves. Used to create</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a><span class="sd">        the empirical distribution of the mean RDG and to simulate a new</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a><span class="sd">        row distribution.</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>        <span class="c1"># The `sample` vector is ordered as</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>        <span class="c1"># \[</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>        <span class="c1">#   \theta_{1 \ell}^{*, 1}, \ldots, \theta_{M \ell}^{*, 1},</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>        <span class="c1">#   \theta_{1 \ell}^{*, 2}, \ldots, \theta_{M \ell}^{*, 2},</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>        <span class="c1">#   \ldots,</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>        <span class="c1">#   \theta_{1 \ell}^{*, K}, \ldots, \theta_{M \ell}^{*, K}</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>        <span class="c1"># \]</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>        <span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>            <span class="k">else</span> <span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">m</span><span class="p">][</span><span class="n">state</span><span class="p">]</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="c1"># outer loop</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numRows</span><span class="p">)</span>  <span class="c1"># inner loop</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>        <span class="p">])</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>            <span class="p">[</span><span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span><span class="p">]</span> <span class="o">*</span> <span class="n">numRows</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>        <span class="p">])</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>        <span class="k">return</span> <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>    <span class="k">def</span> <span class="nf">meanRDGpdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;This method evaluates an approximate density (pdf) for the</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a><span class="sd">        mean of the RDG for the given state. (See `meanRDGcdf` for an</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a><span class="sd">        explanation of the RDG.) The mean of the RDG has a discrete</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a><span class="sd">        component, and therefore has no density. This method creates an</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a><span class="sd">        approximate density using Gaussian kernel density estimation</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a><span class="sd">        (KDE). More specifically, it treats the point mass $\delta_x$ as</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a><span class="sd">        having a Gaussian density with mean $x$ and standard deviation</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a><span class="sd">        $h$, where $h$ is the &quot;bandwidth&quot; of the estimate.</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">        **Arguments:**</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a><span class="sd">        * **t** (`float`): The point at which to evaluate the</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a><span class="sd">            approximate pdf.</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a><span class="sd">        * **state** (`int`): The state for which the pdf is to be</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a><span class="sd">            computed.</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a><span class="sd">        * **bandwidth** (`float`): The bandwidth to use in the Gaussian</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a><span class="sd">            KDE. If omitted, the bandwidth will be calculated using</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a><span class="sd">            Scott&#39;s Rule. The calculated value can be retrieved using</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a><span class="sd">            the `bandwidth` property. This argument is passed directly</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a><span class="sd">            to the `gaussian_kde` function in the `scipy.stats` module.</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a><span class="sd">            See that documentation for further details.</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a><span class="sd">        * `float`: The value of the approximate pdf at the given point.</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>        <span class="n">samplePDF</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">bandwidth</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span> <span class="o">=</span> <span class="n">samplePDF</span><span class="o">.</span><span class="n">factor</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">samplePDF</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>        <span class="p">)</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>    <span class="k">def</span> <span class="nf">simRowDist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>        <span class="sd">&#39;&#39;&#39;Simulates and returns a new row distribution. Uses (8.23) in</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a><span class="sd">        the Paper.</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>        <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>            <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)]</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>        <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">()</span><span class="o">.</span><span class="n">rvs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">()</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>        <span class="k">return</span> <span class="n">choices</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a><span class="k">class</span> <span class="nc">WeightedSim</span><span class="p">:</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;A weighted simulation for an `IDPModel` instance.</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="sd">    In the Paper, a weighted simulation is determined by the pair $(t,</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a><span class="sd">    \boldsymbol{\theta}_M^*)$ and has total weight $V$.</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idpModel</span><span class="p">):</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Uses the given argument to set the corresponding property,</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a><span class="sd">        then runs the `updateRowCounts` method.</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span> <span class="o">=</span> <span class="n">idpModel</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="c1"># stored copy to detect changes</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># the natural logarithm of the total weight</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>    <span class="nd">@property</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>    <span class="k">def</span> <span class="nf">idpModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>        <span class="sd">&#39;&#39;&#39;`IDPModel`: The IDP model for which the weighted simulation</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="sd">        is being created.</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>    <span class="nd">@property</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>    <span class="k">def</span> <span class="nf">rowWeights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): The triangular array of row</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a><span class="sd">        weights for the weighted simulation. Denoted by $t$ in Section 9</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a><span class="sd">        of the Paper.</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">)</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>    <span class="nd">@property</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>    <span class="k">def</span> <span class="nf">rowDistSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): A tuple of simulated row</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a><span class="sd">        distributions. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a><span class="sd">        `rowDistSims`[`row`][`state`] is denoted by $\theta_{m\ell}^*</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="sd">        = u_m^*(\{\ell\})$ in Section 9 of the Paper.</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>    <span class="nd">@property</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>    <span class="k">def</span> <span class="nf">totalWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The total weight of the simulation. Denoted by $V$</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a><span class="sd">        in Section 9 of the Paper.</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>    <span class="k">def</span> <span class="nf">updateRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `rowWeights`, `rowDistSims`, and `totalWeight`</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a><span class="sd">        properties, if necessary, so that the number of rows in</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a><span class="sd">        `rowDistSims` is the same as the number of rows in the</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a><span class="sd">        `IDPModel.rowCounts` property of the associated `idpModel`</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a><span class="sd">        instance.</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a><span class="sd">        **Raises:**</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a><span class="sd">        * **ValueError**: If the computed value for the `totalWeight`</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>        <span class="c1"># If $L$ is the number of states in the IDP, then the case</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>        <span class="c1"># $L = 2$ is separated from the case $2 &lt; L &lt; \infty$ to speed</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>        <span class="c1"># up code execution.</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>        <span class="n">numStates</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>        <span class="c1"># expand properties if row counts have been added</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>        <span class="n">numOldSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">counts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="n">numOldSims</span><span class="p">:]):</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">numOldSims</span> <span class="o">+</span> <span class="n">_</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>            <span class="c1"># build `rowWeights[m]`</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>                    <span class="p">)</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>                    <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>                    <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numStates</span><span class="p">):</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>                        <span class="n">weight</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">state</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>            <span class="p">)</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>            <span class="c1"># build `rowDistSims[m]`</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>            <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>            <span class="k">if</span> <span class="n">choice</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">choice</span><span class="p">])</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>                    <span class="n">rowDistSim</span> <span class="o">=</span> <span class="n">beta</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>                    <span class="p">)</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rowDistSim</span><span class="p">,</span> <span class="n">rowDistSim</span><span class="p">])</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>                        <span class="c1"># vector sum fails for lists, works for ndarray</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>                        <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">counts</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>                        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>                    <span class="p">)</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>            <span class="c1"># build `totalWeight`</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>            <span class="c1">#</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>            <span class="c1"># The m-th iteration of the `for` loop multiplies the</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>            <span class="c1"># previous value of `totalWeight` by the (m + 1)-th factor</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>            <span class="c1"># in the definition of $V$ in Section 9 of the Paper.</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>            <span class="p">)</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>        <span class="c1"># check that total weight is not out of bounds</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>            <span class="n">adj</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>                <span class="s1">&#39;Simulation weight out of bounds.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>                <span class="sa">f</span><span class="s1">&#39;Try adjusting scale factor by </span><span class="si">{</span><span class="n">adj</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>            <span class="p">)</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>        <span class="c1"># trim properties if row counts have been removed</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>        <span class="k">if</span> <span class="n">numOldSims</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">):</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>                <span class="n">numOldSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>            <span class="p">):</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>                <span class="p">)</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>    <span class="k">def</span> <span class="nf">updateScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `totalWeight` property, if necessary, to account</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a><span class="sd">        for a change in the `IDPModel.scale` property of the associated</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a><span class="sd">        `idpModel` instance.</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a><span class="sd">        **Raises:**</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a><span class="sd">        * **ValueError**: If the new value for the `totalWeight`</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>        <span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>        <span class="k">if</span> <span class="n">diff</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span> <span class="o">*</span> <span class="n">diff</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>                    <span class="s1">&#39;Resulting simulation weight is out of bounds&#39;</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>                <span class="p">)</span>
</span></pre></div>


            </section>
                <section id="IDPModel">
                            <input id="IDPModel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">IDPModel</span>:

                <label class="view-source-button" for="IDPModel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel-434"><a href="#IDPModel-434"><span class="linenos">434</span></a><span class="k">class</span> <span class="nc">IDPModel</span><span class="p">:</span>
</span><span id="IDPModel-435"><a href="#IDPModel-435"><span class="linenos">435</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;An IDP model on the state space $S = \\{0, ..., L - 1\\}$.</span>
</span><span id="IDPModel-436"><a href="#IDPModel-436"><span class="linenos">436</span></a>
</span><span id="IDPModel-437"><a href="#IDPModel-437"><span class="linenos">437</span></a><span class="sd">    The IDP model consists of both an IDP and some observed data. See</span>
</span><span id="IDPModel-438"><a href="#IDPModel-438"><span class="linenos">438</span></a><span class="sd">    Section 9 of the Paper for details.</span>
</span><span id="IDPModel-439"><a href="#IDPModel-439"><span class="linenos">439</span></a>
</span><span id="IDPModel-440"><a href="#IDPModel-440"><span class="linenos">440</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="IDPModel-441"><a href="#IDPModel-441"><span class="linenos">441</span></a>
</span><span id="IDPModel-442"><a href="#IDPModel-442"><span class="linenos">442</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colConc</span><span class="p">,</span> <span class="n">rowConc</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">):</span>
</span><span id="IDPModel-443"><a href="#IDPModel-443"><span class="linenos">443</span></a>        <span class="sd">&#39;&#39;&#39;The constructor first uses the given arguments to set the</span>
</span><span id="IDPModel-444"><a href="#IDPModel-444"><span class="linenos">444</span></a><span class="sd">        corresponding properties. If a property returns a tuple or a</span>
</span><span id="IDPModel-445"><a href="#IDPModel-445"><span class="linenos">445</span></a><span class="sd">        tuple of tuples, then the argument can be passed any</span>
</span><span id="IDPModel-446"><a href="#IDPModel-446"><span class="linenos">446</span></a><span class="sd">        `array-like` object, such as a list or a list of lists.</span>
</span><span id="IDPModel-447"><a href="#IDPModel-447"><span class="linenos">447</span></a>
</span><span id="IDPModel-448"><a href="#IDPModel-448"><span class="linenos">448</span></a><span class="sd">        For the `baseMeas` property, the corresponding argument can be</span>
</span><span id="IDPModel-449"><a href="#IDPModel-449"><span class="linenos">449</span></a><span class="sd">        passed a single floating point value `p`, in which case the</span>
</span><span id="IDPModel-450"><a href="#IDPModel-450"><span class="linenos">450</span></a><span class="sd">        property will be set to `(1 - p, p)`.</span>
</span><span id="IDPModel-451"><a href="#IDPModel-451"><span class="linenos">451</span></a>
</span><span id="IDPModel-452"><a href="#IDPModel-452"><span class="linenos">452</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-453"><a href="#IDPModel-453"><span class="linenos">453</span></a>        <span class="c1"># `baseMeas` and `rowCounts` are stored as ndarrays rather than</span>
</span><span id="IDPModel-454"><a href="#IDPModel-454"><span class="linenos">454</span></a>        <span class="c1"># lists, since vector addition fails for lists but works for</span>
</span><span id="IDPModel-455"><a href="#IDPModel-455"><span class="linenos">455</span></a>        <span class="c1"># ndarrays. This is important in the constructor of the</span>
</span><span id="IDPModel-456"><a href="#IDPModel-456"><span class="linenos">456</span></a>        <span class="c1"># `WeightedSim` class.</span>
</span><span id="IDPModel-457"><a href="#IDPModel-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="IDPModel-458"><a href="#IDPModel-458"><span class="linenos">458</span></a>
</span><span id="IDPModel-459"><a href="#IDPModel-459"><span class="linenos">459</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="IDPModel-460"><a href="#IDPModel-460"><span class="linenos">460</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">]</span>
</span><span id="IDPModel-461"><a href="#IDPModel-461"><span class="linenos">461</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="IDPModel-462"><a href="#IDPModel-462"><span class="linenos">462</span></a>        <span class="n">rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-463"><a href="#IDPModel-463"><span class="linenos">463</span></a>
</span><span id="IDPModel-464"><a href="#IDPModel-464"><span class="linenos">464</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="IDPModel-465"><a href="#IDPModel-465"><span class="linenos">465</span></a>            <span class="s1">&#39;colConc&#39;</span><span class="p">:</span> <span class="n">colConc</span><span class="p">,</span>
</span><span id="IDPModel-466"><a href="#IDPModel-466"><span class="linenos">466</span></a>            <span class="s1">&#39;rowConc&#39;</span><span class="p">:</span> <span class="n">rowConc</span><span class="p">,</span>
</span><span id="IDPModel-467"><a href="#IDPModel-467"><span class="linenos">467</span></a>            <span class="s1">&#39;baseMeas&#39;</span><span class="p">:</span> <span class="n">baseMeas</span>
</span><span id="IDPModel-468"><a href="#IDPModel-468"><span class="linenos">468</span></a>        <span class="p">}</span>
</span><span id="IDPModel-469"><a href="#IDPModel-469"><span class="linenos">469</span></a>
</span><span id="IDPModel-470"><a href="#IDPModel-470"><span class="linenos">470</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">rowCounts</span>
</span><span id="IDPModel-471"><a href="#IDPModel-471"><span class="linenos">471</span></a>
</span><span id="IDPModel-472"><a href="#IDPModel-472"><span class="linenos">472</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel-473"><a href="#IDPModel-473"><span class="linenos">473</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel-474"><a href="#IDPModel-474"><span class="linenos">474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="IDPModel-475"><a href="#IDPModel-475"><span class="linenos">475</span></a>
</span><span id="IDPModel-476"><a href="#IDPModel-476"><span class="linenos">476</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-477"><a href="#IDPModel-477"><span class="linenos">477</span></a>    <span class="k">def</span> <span class="nf">colConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-478"><a href="#IDPModel-478"><span class="linenos">478</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The column concentration parameter. Should be</span>
</span><span id="IDPModel-479"><a href="#IDPModel-479"><span class="linenos">479</span></a><span class="sd">        positive. Denoted by $\kappa$ in Section 9 of the Paper.</span>
</span><span id="IDPModel-480"><a href="#IDPModel-480"><span class="linenos">480</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-481"><a href="#IDPModel-481"><span class="linenos">481</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-482"><a href="#IDPModel-482"><span class="linenos">482</span></a>
</span><span id="IDPModel-483"><a href="#IDPModel-483"><span class="linenos">483</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-484"><a href="#IDPModel-484"><span class="linenos">484</span></a>    <span class="k">def</span> <span class="nf">rowConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-485"><a href="#IDPModel-485"><span class="linenos">485</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The row concentration parameter. Should be</span>
</span><span id="IDPModel-486"><a href="#IDPModel-486"><span class="linenos">486</span></a><span class="sd">        positive. Denoted by $\varepsilon$ in Section 9 of the Paper.</span>
</span><span id="IDPModel-487"><a href="#IDPModel-487"><span class="linenos">487</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-488"><a href="#IDPModel-488"><span class="linenos">488</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-489"><a href="#IDPModel-489"><span class="linenos">489</span></a>
</span><span id="IDPModel-490"><a href="#IDPModel-490"><span class="linenos">490</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-491"><a href="#IDPModel-491"><span class="linenos">491</span></a>    <span class="k">def</span> <span class="nf">baseMeas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-492"><a href="#IDPModel-492"><span class="linenos">492</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The base probability vector. Should be a</span>
</span><span id="IDPModel-493"><a href="#IDPModel-493"><span class="linenos">493</span></a><span class="sd">        list of positive numbers that sum to 1. Denoted by</span>
</span><span id="IDPModel-494"><a href="#IDPModel-494"><span class="linenos">494</span></a><span class="sd">        $\boldsymbol{p} = (p_0, \ldots, p_{L - 1})$ in Section 9 of the</span>
</span><span id="IDPModel-495"><a href="#IDPModel-495"><span class="linenos">495</span></a><span class="sd">        Paper, where $p_\ell = \varrho(\{\ell\})$.</span>
</span><span id="IDPModel-496"><a href="#IDPModel-496"><span class="linenos">496</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-497"><a href="#IDPModel-497"><span class="linenos">497</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">])</span>
</span><span id="IDPModel-498"><a href="#IDPModel-498"><span class="linenos">498</span></a>
</span><span id="IDPModel-499"><a href="#IDPModel-499"><span class="linenos">499</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-500"><a href="#IDPModel-500"><span class="linenos">500</span></a>    <span class="k">def</span> <span class="nf">rowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-501"><a href="#IDPModel-501"><span class="linenos">501</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`int`)): The row counts for the observed</span>
</span><span id="IDPModel-502"><a href="#IDPModel-502"><span class="linenos">502</span></a><span class="sd">        data. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="IDPModel-503"><a href="#IDPModel-503"><span class="linenos">503</span></a><span class="sd">        `rowCounts`[`row`][`state`] is denoted by $\overline{y}_{m\ell}$</span>
</span><span id="IDPModel-504"><a href="#IDPModel-504"><span class="linenos">504</span></a><span class="sd">        in Section 9 of the Paper. It is the number of observed</span>
</span><span id="IDPModel-505"><a href="#IDPModel-505"><span class="linenos">505</span></a><span class="sd">        instances of `state` in the given row of data.</span>
</span><span id="IDPModel-506"><a href="#IDPModel-506"><span class="linenos">506</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-507"><a href="#IDPModel-507"><span class="linenos">507</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-508"><a href="#IDPModel-508"><span class="linenos">508</span></a>
</span><span id="IDPModel-509"><a href="#IDPModel-509"><span class="linenos">509</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-510"><a href="#IDPModel-510"><span class="linenos">510</span></a>    <span class="k">def</span> <span class="nf">likelihoods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-511"><a href="#IDPModel-511"><span class="linenos">511</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The prior likelihoods. If `row` equals</span>
</span><span id="IDPModel-512"><a href="#IDPModel-512"><span class="linenos">512</span></a><span class="sd">        $m - 1$, then `likelihoods`[`row`] is denoted by</span>
</span><span id="IDPModel-513"><a href="#IDPModel-513"><span class="linenos">513</span></a><span class="sd">        $\varrho_N(A_m)$ in Section 9 of the Paper. It is the prior</span>
</span><span id="IDPModel-514"><a href="#IDPModel-514"><span class="linenos">514</span></a><span class="sd">        probability of seeing the row counts for the given row. This</span>
</span><span id="IDPModel-515"><a href="#IDPModel-515"><span class="linenos">515</span></a><span class="sd">        property is computed by the constructor, and should not be</span>
</span><span id="IDPModel-516"><a href="#IDPModel-516"><span class="linenos">516</span></a><span class="sd">        changed.</span>
</span><span id="IDPModel-517"><a href="#IDPModel-517"><span class="linenos">517</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-518"><a href="#IDPModel-518"><span class="linenos">518</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">):</span>
</span><span id="IDPModel-519"><a href="#IDPModel-519"><span class="linenos">519</span></a>            <span class="n">rowConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-520"><a href="#IDPModel-520"><span class="linenos">520</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="IDPModel-521"><a href="#IDPModel-521"><span class="linenos">521</span></a>            <span class="n">denom</span> <span class="o">=</span> <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">)</span>
</span><span id="IDPModel-522"><a href="#IDPModel-522"><span class="linenos">522</span></a>            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">):]:</span>
</span><span id="IDPModel-523"><a href="#IDPModel-523"><span class="linenos">523</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IDPModel-524"><a href="#IDPModel-524"><span class="linenos">524</span></a>                    <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">row</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span>
</span><span id="IDPModel-525"><a href="#IDPModel-525"><span class="linenos">525</span></a>                <span class="p">)</span>
</span><span id="IDPModel-526"><a href="#IDPModel-526"><span class="linenos">526</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span>
</span><span id="IDPModel-527"><a href="#IDPModel-527"><span class="linenos">527</span></a>
</span><span id="IDPModel-528"><a href="#IDPModel-528"><span class="linenos">528</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-529"><a href="#IDPModel-529"><span class="linenos">529</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-530"><a href="#IDPModel-530"><span class="linenos">530</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The scale factor to use for weighted simulations.</span>
</span><span id="IDPModel-531"><a href="#IDPModel-531"><span class="linenos">531</span></a><span class="sd">        Denoted by $\log c$ in Section 9 of the Paper. Defaults to 0.</span>
</span><span id="IDPModel-532"><a href="#IDPModel-532"><span class="linenos">532</span></a><span class="sd">        Altering this value runs the `WeightedSim.updateScale` method on</span>
</span><span id="IDPModel-533"><a href="#IDPModel-533"><span class="linenos">533</span></a><span class="sd">        every simulation in the `weightedSims` property. If a</span>
</span><span id="IDPModel-534"><a href="#IDPModel-534"><span class="linenos">534</span></a><span class="sd">        `ValueError` occurs in this process, then no changes will be</span>
</span><span id="IDPModel-535"><a href="#IDPModel-535"><span class="linenos">535</span></a><span class="sd">        made, neither to the `scale` property, nor to any of the</span>
</span><span id="IDPModel-536"><a href="#IDPModel-536"><span class="linenos">536</span></a><span class="sd">        simulations in the `weightedSims` property.</span>
</span><span id="IDPModel-537"><a href="#IDPModel-537"><span class="linenos">537</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-538"><a href="#IDPModel-538"><span class="linenos">538</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="IDPModel-539"><a href="#IDPModel-539"><span class="linenos">539</span></a>
</span><span id="IDPModel-540"><a href="#IDPModel-540"><span class="linenos">540</span></a>    <span class="nd">@scale</span><span class="o">.</span><span class="n">setter</span>
</span><span id="IDPModel-541"><a href="#IDPModel-541"><span class="linenos">541</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="IDPModel-542"><a href="#IDPModel-542"><span class="linenos">542</span></a>        <span class="n">oldVal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="IDPModel-543"><a href="#IDPModel-543"><span class="linenos">543</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="IDPModel-544"><a href="#IDPModel-544"><span class="linenos">544</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDPModel-545"><a href="#IDPModel-545"><span class="linenos">545</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-546"><a href="#IDPModel-546"><span class="linenos">546</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateScale</span><span class="p">()</span>
</span><span id="IDPModel-547"><a href="#IDPModel-547"><span class="linenos">547</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="IDPModel-548"><a href="#IDPModel-548"><span class="linenos">548</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">oldVal</span>
</span><span id="IDPModel-549"><a href="#IDPModel-549"><span class="linenos">549</span></a>            <span class="k">raise</span>
</span><span id="IDPModel-550"><a href="#IDPModel-550"><span class="linenos">550</span></a>
</span><span id="IDPModel-551"><a href="#IDPModel-551"><span class="linenos">551</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-552"><a href="#IDPModel-552"><span class="linenos">552</span></a>    <span class="k">def</span> <span class="nf">weightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-553"><a href="#IDPModel-553"><span class="linenos">553</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`WeightedSim`): A tuple of distinct (and therefore</span>
</span><span id="IDPModel-554"><a href="#IDPModel-554"><span class="linenos">554</span></a><span class="sd">        independent) `WeightedSim` instances. `weightedSims`[k] is</span>
</span><span id="IDPModel-555"><a href="#IDPModel-555"><span class="linenos">555</span></a><span class="sd">        denoted by $(t^k, \boldsymbol{\theta}_M^{*, k})$ in Section 9 of</span>
</span><span id="IDPModel-556"><a href="#IDPModel-556"><span class="linenos">556</span></a><span class="sd">        the Paper, and has total weight $V_k$. This property is empty if</span>
</span><span id="IDPModel-557"><a href="#IDPModel-557"><span class="linenos">557</span></a><span class="sd">        the `addWeightedSims` method has never been run.</span>
</span><span id="IDPModel-558"><a href="#IDPModel-558"><span class="linenos">558</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-559"><a href="#IDPModel-559"><span class="linenos">559</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel-560"><a href="#IDPModel-560"><span class="linenos">560</span></a>
</span><span id="IDPModel-561"><a href="#IDPModel-561"><span class="linenos">561</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-562"><a href="#IDPModel-562"><span class="linenos">562</span></a>    <span class="k">def</span> <span class="nf">ess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-563"><a href="#IDPModel-563"><span class="linenos">563</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the sample</span>
</span><span id="IDPModel-564"><a href="#IDPModel-564"><span class="linenos">564</span></a><span class="sd">        variance. Denoted by $K_e&#39;&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="IDPModel-565"><a href="#IDPModel-565"><span class="linenos">565</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-566"><a href="#IDPModel-566"><span class="linenos">566</span></a>        <span class="n">numSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel-567"><a href="#IDPModel-567"><span class="linenos">567</span></a>        <span class="k">if</span> <span class="n">numSims</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel-568"><a href="#IDPModel-568"><span class="linenos">568</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="IDPModel-569"><a href="#IDPModel-569"><span class="linenos">569</span></a>        <span class="n">essPop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">essPop</span>
</span><span id="IDPModel-570"><a href="#IDPModel-570"><span class="linenos">570</span></a>        <span class="k">return</span> <span class="n">essPop</span> <span class="o">*</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="n">essPop</span><span class="o">/</span><span class="n">numSims</span><span class="p">)</span>
</span><span id="IDPModel-571"><a href="#IDPModel-571"><span class="linenos">571</span></a>
</span><span id="IDPModel-572"><a href="#IDPModel-572"><span class="linenos">572</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-573"><a href="#IDPModel-573"><span class="linenos">573</span></a>    <span class="k">def</span> <span class="nf">essPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-574"><a href="#IDPModel-574"><span class="linenos">574</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the population</span>
</span><span id="IDPModel-575"><a href="#IDPModel-575"><span class="linenos">575</span></a><span class="sd">        variance. Denoted by $K_e&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="IDPModel-576"><a href="#IDPModel-576"><span class="linenos">576</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-577"><a href="#IDPModel-577"><span class="linenos">577</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel-578"><a href="#IDPModel-578"><span class="linenos">578</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="IDPModel-579"><a href="#IDPModel-579"><span class="linenos">579</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel-580"><a href="#IDPModel-580"><span class="linenos">580</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span>      <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span>
</span><span id="IDPModel-581"><a href="#IDPModel-581"><span class="linenos">581</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel-582"><a href="#IDPModel-582"><span class="linenos">582</span></a>        <span class="p">)</span>
</span><span id="IDPModel-583"><a href="#IDPModel-583"><span class="linenos">583</span></a>
</span><span id="IDPModel-584"><a href="#IDPModel-584"><span class="linenos">584</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel-585"><a href="#IDPModel-585"><span class="linenos">585</span></a>    <span class="k">def</span> <span class="nf">bandwidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-586"><a href="#IDPModel-586"><span class="linenos">586</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The bandwidth used most recently by the `meanRDGpdf`</span>
</span><span id="IDPModel-587"><a href="#IDPModel-587"><span class="linenos">587</span></a><span class="sd">        method. Is `None` if this method has never been used.</span>
</span><span id="IDPModel-588"><a href="#IDPModel-588"><span class="linenos">588</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-589"><a href="#IDPModel-589"><span class="linenos">589</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span>
</span><span id="IDPModel-590"><a href="#IDPModel-590"><span class="linenos">590</span></a>
</span><span id="IDPModel-591"><a href="#IDPModel-591"><span class="linenos">591</span></a>    <span class="k">def</span> <span class="nf">addRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">):</span>
</span><span id="IDPModel-592"><a href="#IDPModel-592"><span class="linenos">592</span></a>        <span class="sd">&#39;&#39;&#39;Adds new row counts to the `rowCounts` property and runs the</span>
</span><span id="IDPModel-593"><a href="#IDPModel-593"><span class="linenos">593</span></a><span class="sd">        `WeightedSim.updateRowCounts` method on every simulation in the</span>
</span><span id="IDPModel-594"><a href="#IDPModel-594"><span class="linenos">594</span></a><span class="sd">        `weightedSims` property. If a `ValueError` occurs in this</span>
</span><span id="IDPModel-595"><a href="#IDPModel-595"><span class="linenos">595</span></a><span class="sd">        process, then no changes will be made, neither to the</span>
</span><span id="IDPModel-596"><a href="#IDPModel-596"><span class="linenos">596</span></a><span class="sd">        `rowCounts` property, nor to any of the simulations in the</span>
</span><span id="IDPModel-597"><a href="#IDPModel-597"><span class="linenos">597</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel-598"><a href="#IDPModel-598"><span class="linenos">598</span></a>
</span><span id="IDPModel-599"><a href="#IDPModel-599"><span class="linenos">599</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-600"><a href="#IDPModel-600"><span class="linenos">600</span></a>
</span><span id="IDPModel-601"><a href="#IDPModel-601"><span class="linenos">601</span></a><span class="sd">        * **newRowCounts** (`array_like`): The additional row counts to</span>
</span><span id="IDPModel-602"><a href="#IDPModel-602"><span class="linenos">602</span></a><span class="sd">            be added. Should be an array-like object (such as a list of</span>
</span><span id="IDPModel-603"><a href="#IDPModel-603"><span class="linenos">603</span></a><span class="sd">            lists) with the same number of columns (states) as</span>
</span><span id="IDPModel-604"><a href="#IDPModel-604"><span class="linenos">604</span></a><span class="sd">            `rowCounts`.</span>
</span><span id="IDPModel-605"><a href="#IDPModel-605"><span class="linenos">605</span></a>
</span><span id="IDPModel-606"><a href="#IDPModel-606"><span class="linenos">606</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-607"><a href="#IDPModel-607"><span class="linenos">607</span></a>        <span class="n">oldRowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span>
</span><span id="IDPModel-608"><a href="#IDPModel-608"><span class="linenos">608</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">))</span>
</span><span id="IDPModel-609"><a href="#IDPModel-609"><span class="linenos">609</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDPModel-610"><a href="#IDPModel-610"><span class="linenos">610</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-611"><a href="#IDPModel-611"><span class="linenos">611</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel-612"><a href="#IDPModel-612"><span class="linenos">612</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="IDPModel-613"><a href="#IDPModel-613"><span class="linenos">613</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">oldRowCounts</span>
</span><span id="IDPModel-614"><a href="#IDPModel-614"><span class="linenos">614</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-615"><a href="#IDPModel-615"><span class="linenos">615</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel-616"><a href="#IDPModel-616"><span class="linenos">616</span></a>            <span class="k">raise</span>
</span><span id="IDPModel-617"><a href="#IDPModel-617"><span class="linenos">617</span></a>
</span><span id="IDPModel-618"><a href="#IDPModel-618"><span class="linenos">618</span></a>    <span class="k">def</span> <span class="nf">delRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numRows</span><span class="p">):</span>
</span><span id="IDPModel-619"><a href="#IDPModel-619"><span class="linenos">619</span></a>        <span class="sd">&#39;&#39;&#39;Deletes the last `numRows` rows of the `rowCounts` property,</span>
</span><span id="IDPModel-620"><a href="#IDPModel-620"><span class="linenos">620</span></a><span class="sd">        then runs the `WeightedSim.updateRowCounts` method on every</span>
</span><span id="IDPModel-621"><a href="#IDPModel-621"><span class="linenos">621</span></a><span class="sd">        simulation in the `weightedSims` property.</span>
</span><span id="IDPModel-622"><a href="#IDPModel-622"><span class="linenos">622</span></a>
</span><span id="IDPModel-623"><a href="#IDPModel-623"><span class="linenos">623</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-624"><a href="#IDPModel-624"><span class="linenos">624</span></a>
</span><span id="IDPModel-625"><a href="#IDPModel-625"><span class="linenos">625</span></a><span class="sd">        * **numRows** (`int`): The number of rows to delete.</span>
</span><span id="IDPModel-626"><a href="#IDPModel-626"><span class="linenos">626</span></a>
</span><span id="IDPModel-627"><a href="#IDPModel-627"><span class="linenos">627</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-628"><a href="#IDPModel-628"><span class="linenos">628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[:</span><span class="o">-</span><span class="n">numRows</span><span class="p">]</span>
</span><span id="IDPModel-629"><a href="#IDPModel-629"><span class="linenos">629</span></a>        <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-630"><a href="#IDPModel-630"><span class="linenos">630</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel-631"><a href="#IDPModel-631"><span class="linenos">631</span></a>
</span><span id="IDPModel-632"><a href="#IDPModel-632"><span class="linenos">632</span></a>    <span class="k">def</span> <span class="nf">addWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span id="IDPModel-633"><a href="#IDPModel-633"><span class="linenos">633</span></a>        <span class="sd">&#39;&#39;&#39;Creates new `WeightedSim` instances and adds them to the</span>
</span><span id="IDPModel-634"><a href="#IDPModel-634"><span class="linenos">634</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel-635"><a href="#IDPModel-635"><span class="linenos">635</span></a>
</span><span id="IDPModel-636"><a href="#IDPModel-636"><span class="linenos">636</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-637"><a href="#IDPModel-637"><span class="linenos">637</span></a><span class="sd">        </span>
</span><span id="IDPModel-638"><a href="#IDPModel-638"><span class="linenos">638</span></a><span class="sd">        * **num** (`int`): The number of distinct `WeightedSim`</span>
</span><span id="IDPModel-639"><a href="#IDPModel-639"><span class="linenos">639</span></a><span class="sd">            instances to create. If zero or negative, no instances are</span>
</span><span id="IDPModel-640"><a href="#IDPModel-640"><span class="linenos">640</span></a><span class="sd">            created.</span>
</span><span id="IDPModel-641"><a href="#IDPModel-641"><span class="linenos">641</span></a>
</span><span id="IDPModel-642"><a href="#IDPModel-642"><span class="linenos">642</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-643"><a href="#IDPModel-643"><span class="linenos">643</span></a>        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel-644"><a href="#IDPModel-644"><span class="linenos">644</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WeightedSim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
</span><span id="IDPModel-645"><a href="#IDPModel-645"><span class="linenos">645</span></a>
</span><span id="IDPModel-646"><a href="#IDPModel-646"><span class="linenos">646</span></a>    <span class="k">def</span> <span class="nf">clearWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-647"><a href="#IDPModel-647"><span class="linenos">647</span></a>        <span class="sd">&#39;&#39;&#39;Deletes all weighted simulations contained in the</span>
</span><span id="IDPModel-648"><a href="#IDPModel-648"><span class="linenos">648</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel-649"><a href="#IDPModel-649"><span class="linenos">649</span></a>
</span><span id="IDPModel-650"><a href="#IDPModel-650"><span class="linenos">650</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-651"><a href="#IDPModel-651"><span class="linenos">651</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel-652"><a href="#IDPModel-652"><span class="linenos">652</span></a>
</span><span id="IDPModel-653"><a href="#IDPModel-653"><span class="linenos">653</span></a>    <span class="k">def</span> <span class="nf">postProb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="IDPModel-654"><a href="#IDPModel-654"><span class="linenos">654</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Computes and returns the posterior probability of seeing the</span>
</span><span id="IDPModel-655"><a href="#IDPModel-655"><span class="linenos">655</span></a><span class="sd">        given state on a new trial in the given row. If `row` is</span>
</span><span id="IDPModel-656"><a href="#IDPModel-656"><span class="linenos">656</span></a><span class="sd">        $m - 1$, `state` is $\ell$ , and the length of `rowCounts` is</span>
</span><span id="IDPModel-657"><a href="#IDPModel-657"><span class="linenos">657</span></a><span class="sd">        $M$, then the value returned by this method is denoted in the</span>
</span><span id="IDPModel-658"><a href="#IDPModel-658"><span class="linenos">658</span></a><span class="sd">        Paper by $P(\xi_{m, N_m + \ell} = 1 \mid Y = y)$ in the case</span>
</span><span id="IDPModel-659"><a href="#IDPModel-659"><span class="linenos">659</span></a><span class="sd">        $m \le M$, and by $P(\xi_{M + 1, 1} = \ell \mid Y = y)$ in the</span>
</span><span id="IDPModel-660"><a href="#IDPModel-660"><span class="linenos">660</span></a><span class="sd">        case $m &gt; M$. This method implements (9.4) and (9.5) in the</span>
</span><span id="IDPModel-661"><a href="#IDPModel-661"><span class="linenos">661</span></a><span class="sd">        Paper.</span>
</span><span id="IDPModel-662"><a href="#IDPModel-662"><span class="linenos">662</span></a>
</span><span id="IDPModel-663"><a href="#IDPModel-663"><span class="linenos">663</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-664"><a href="#IDPModel-664"><span class="linenos">664</span></a>
</span><span id="IDPModel-665"><a href="#IDPModel-665"><span class="linenos">665</span></a><span class="sd">        * **row** (`int`): The index of the row whose posterior</span>
</span><span id="IDPModel-666"><a href="#IDPModel-666"><span class="linenos">666</span></a><span class="sd">            probability should be computed.</span>
</span><span id="IDPModel-667"><a href="#IDPModel-667"><span class="linenos">667</span></a><span class="sd">        * **state** (`int`): The state whose posterior probability</span>
</span><span id="IDPModel-668"><a href="#IDPModel-668"><span class="linenos">668</span></a><span class="sd">            should be computed.</span>
</span><span id="IDPModel-669"><a href="#IDPModel-669"><span class="linenos">669</span></a>
</span><span id="IDPModel-670"><a href="#IDPModel-670"><span class="linenos">670</span></a><span class="sd">        **Returns:**</span>
</span><span id="IDPModel-671"><a href="#IDPModel-671"><span class="linenos">671</span></a>
</span><span id="IDPModel-672"><a href="#IDPModel-672"><span class="linenos">672</span></a><span class="sd">        * `float`: The posterior probability of seeing the given state.</span>
</span><span id="IDPModel-673"><a href="#IDPModel-673"><span class="linenos">673</span></a>
</span><span id="IDPModel-674"><a href="#IDPModel-674"><span class="linenos">674</span></a><span class="sd">        **Raises:**</span>
</span><span id="IDPModel-675"><a href="#IDPModel-675"><span class="linenos">675</span></a>
</span><span id="IDPModel-676"><a href="#IDPModel-676"><span class="linenos">676</span></a><span class="sd">        * **ValueError**: If the `weightedSims` property is empty.</span>
</span><span id="IDPModel-677"><a href="#IDPModel-677"><span class="linenos">677</span></a>
</span><span id="IDPModel-678"><a href="#IDPModel-678"><span class="linenos">678</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-679"><a href="#IDPModel-679"><span class="linenos">679</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel-680"><a href="#IDPModel-680"><span class="linenos">680</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No weighted simulations found&#39;</span><span class="p">)</span>
</span><span id="IDPModel-681"><a href="#IDPModel-681"><span class="linenos">681</span></a>
</span><span id="IDPModel-682"><a href="#IDPModel-682"><span class="linenos">682</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-683"><a href="#IDPModel-683"><span class="linenos">683</span></a>        <span class="k">if</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="IDPModel-684"><a href="#IDPModel-684"><span class="linenos">684</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postProbLow</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
</span><span id="IDPModel-685"><a href="#IDPModel-685"><span class="linenos">685</span></a>
</span><span id="IDPModel-686"><a href="#IDPModel-686"><span class="linenos">686</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-687"><a href="#IDPModel-687"><span class="linenos">687</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="IDPModel-688"><a href="#IDPModel-688"><span class="linenos">688</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel-689"><a href="#IDPModel-689"><span class="linenos">689</span></a>            <span class="n">colConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="IDPModel-690"><a href="#IDPModel-690"><span class="linenos">690</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postProbLow</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numRows</span><span class="p">))</span>
</span><span id="IDPModel-691"><a href="#IDPModel-691"><span class="linenos">691</span></a>        <span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">)</span>
</span><span id="IDPModel-692"><a href="#IDPModel-692"><span class="linenos">692</span></a>
</span><span id="IDPModel-693"><a href="#IDPModel-693"><span class="linenos">693</span></a>    <span class="k">def</span> <span class="nf">_postProbLow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="IDPModel-694"><a href="#IDPModel-694"><span class="linenos">694</span></a>        <span class="sd">&#39;&#39;&#39;This method is the same as `postProb`, except it requires</span>
</span><span id="IDPModel-695"><a href="#IDPModel-695"><span class="linenos">695</span></a><span class="sd">        `row` to be less than the length of `rowCounts`.</span>
</span><span id="IDPModel-696"><a href="#IDPModel-696"><span class="linenos">696</span></a>
</span><span id="IDPModel-697"><a href="#IDPModel-697"><span class="linenos">697</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-698"><a href="#IDPModel-698"><span class="linenos">698</span></a>        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="IDPModel-699"><a href="#IDPModel-699"><span class="linenos">699</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">*</span> <span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">state</span><span class="p">]</span>
</span><span id="IDPModel-700"><a href="#IDPModel-700"><span class="linenos">700</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="IDPModel-701"><a href="#IDPModel-701"><span class="linenos">701</span></a>        <span class="p">)</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="IDPModel-702"><a href="#IDPModel-702"><span class="linenos">702</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span>
</span><span id="IDPModel-703"><a href="#IDPModel-703"><span class="linenos">703</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="IDPModel-704"><a href="#IDPModel-704"><span class="linenos">704</span></a>        <span class="p">)</span>
</span><span id="IDPModel-705"><a href="#IDPModel-705"><span class="linenos">705</span></a>
</span><span id="IDPModel-706"><a href="#IDPModel-706"><span class="linenos">706</span></a>    <span class="k">def</span> <span class="nf">meanRDGcdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="IDPModel-707"><a href="#IDPModel-707"><span class="linenos">707</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;The mean of the row distribution generator (RDG) for a state</span>
</span><span id="IDPModel-708"><a href="#IDPModel-708"><span class="linenos">708</span></a><span class="sd">        $\ell$ is a probability distribution on $[0, 1]$. More</span>
</span><span id="IDPModel-709"><a href="#IDPModel-709"><span class="linenos">709</span></a><span class="sd">        specifically, using the notation in the Paper, it is the</span>
</span><span id="IDPModel-710"><a href="#IDPModel-710"><span class="linenos">710</span></a><span class="sd">        conditional distribution of $\theta_{M + 1, \ell}$ given</span>
</span><span id="IDPModel-711"><a href="#IDPModel-711"><span class="linenos">711</span></a><span class="sd">        $Y = y$, and an expression for it is given in (9.6) in the</span>
</span><span id="IDPModel-712"><a href="#IDPModel-712"><span class="linenos">712</span></a><span class="sd">        Paper.</span>
</span><span id="IDPModel-713"><a href="#IDPModel-713"><span class="linenos">713</span></a>
</span><span id="IDPModel-714"><a href="#IDPModel-714"><span class="linenos">714</span></a><span class="sd">        This method evaluates the cumulative distribution function (cdf)</span>
</span><span id="IDPModel-715"><a href="#IDPModel-715"><span class="linenos">715</span></a><span class="sd">        of the mean of the RDG for the given state at the given point.</span>
</span><span id="IDPModel-716"><a href="#IDPModel-716"><span class="linenos">716</span></a><span class="sd">        That is, it gives the cdf for the random probability of seeing</span>
</span><span id="IDPModel-717"><a href="#IDPModel-717"><span class="linenos">717</span></a><span class="sd">        the given state in a new trial.</span>
</span><span id="IDPModel-718"><a href="#IDPModel-718"><span class="linenos">718</span></a>
</span><span id="IDPModel-719"><a href="#IDPModel-719"><span class="linenos">719</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-720"><a href="#IDPModel-720"><span class="linenos">720</span></a>
</span><span id="IDPModel-721"><a href="#IDPModel-721"><span class="linenos">721</span></a><span class="sd">        * **t** (`float`): The point at which to evaluate the cdf.</span>
</span><span id="IDPModel-722"><a href="#IDPModel-722"><span class="linenos">722</span></a><span class="sd">        * **state** (`int`): The state for which the cdf is to be</span>
</span><span id="IDPModel-723"><a href="#IDPModel-723"><span class="linenos">723</span></a><span class="sd">            computed.</span>
</span><span id="IDPModel-724"><a href="#IDPModel-724"><span class="linenos">724</span></a>
</span><span id="IDPModel-725"><a href="#IDPModel-725"><span class="linenos">725</span></a><span class="sd">        **Returns:**</span>
</span><span id="IDPModel-726"><a href="#IDPModel-726"><span class="linenos">726</span></a>
</span><span id="IDPModel-727"><a href="#IDPModel-727"><span class="linenos">727</span></a><span class="sd">        * `float`: The value of the cdf at the given point.</span>
</span><span id="IDPModel-728"><a href="#IDPModel-728"><span class="linenos">728</span></a>
</span><span id="IDPModel-729"><a href="#IDPModel-729"><span class="linenos">729</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-730"><a href="#IDPModel-730"><span class="linenos">730</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-731"><a href="#IDPModel-731"><span class="linenos">731</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-732"><a href="#IDPModel-732"><span class="linenos">732</span></a>
</span><span id="IDPModel-733"><a href="#IDPModel-733"><span class="linenos">733</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="IDPModel-734"><a href="#IDPModel-734"><span class="linenos">734</span></a>        <span class="n">sampleCDF</span> <span class="o">=</span> <span class="n">ECDFDiscrete</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="IDPModel-735"><a href="#IDPModel-735"><span class="linenos">735</span></a>
</span><span id="IDPModel-736"><a href="#IDPModel-736"><span class="linenos">736</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel-737"><a href="#IDPModel-737"><span class="linenos">737</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="IDPModel-738"><a href="#IDPModel-738"><span class="linenos">738</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">sampleCDF</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="IDPModel-739"><a href="#IDPModel-739"><span class="linenos">739</span></a>        <span class="p">)</span>
</span><span id="IDPModel-740"><a href="#IDPModel-740"><span class="linenos">740</span></a>
</span><span id="IDPModel-741"><a href="#IDPModel-741"><span class="linenos">741</span></a>    <span class="k">def</span> <span class="nf">_prior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="IDPModel-742"><a href="#IDPModel-742"><span class="linenos">742</span></a>        <span class="sd">&#39;&#39;&#39;Returns the prior distribution of the mean RDG for the given</span>
</span><span id="IDPModel-743"><a href="#IDPModel-743"><span class="linenos">743</span></a><span class="sd">        state. If no state is given, returns the prior of a row</span>
</span><span id="IDPModel-744"><a href="#IDPModel-744"><span class="linenos">744</span></a><span class="sd">        distribution.</span>
</span><span id="IDPModel-745"><a href="#IDPModel-745"><span class="linenos">745</span></a>
</span><span id="IDPModel-746"><a href="#IDPModel-746"><span class="linenos">746</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-747"><a href="#IDPModel-747"><span class="linenos">747</span></a>        <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDPModel-748"><a href="#IDPModel-748"><span class="linenos">748</span></a>            <span class="k">return</span> <span class="n">dirichlet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">])</span>
</span><span id="IDPModel-749"><a href="#IDPModel-749"><span class="linenos">749</span></a>        <span class="k">return</span> <span class="n">beta</span><span class="p">(</span>
</span><span id="IDPModel-750"><a href="#IDPModel-750"><span class="linenos">750</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">][</span><span class="n">state</span><span class="p">],</span>
</span><span id="IDPModel-751"><a href="#IDPModel-751"><span class="linenos">751</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">][</span><span class="n">state</span><span class="p">])</span>
</span><span id="IDPModel-752"><a href="#IDPModel-752"><span class="linenos">752</span></a>        <span class="p">)</span>
</span><span id="IDPModel-753"><a href="#IDPModel-753"><span class="linenos">753</span></a>
</span><span id="IDPModel-754"><a href="#IDPModel-754"><span class="linenos">754</span></a>    <span class="k">def</span> <span class="nf">_makeSample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="IDPModel-755"><a href="#IDPModel-755"><span class="linenos">755</span></a>        <span class="sd">&#39;&#39;&#39;Creates and returns a weighted list of simulated row</span>
</span><span id="IDPModel-756"><a href="#IDPModel-756"><span class="linenos">756</span></a><span class="sd">        distributions evaluated at the given state. If no state is</span>
</span><span id="IDPModel-757"><a href="#IDPModel-757"><span class="linenos">757</span></a><span class="sd">        given, returns the row distributions themselves. Used to create</span>
</span><span id="IDPModel-758"><a href="#IDPModel-758"><span class="linenos">758</span></a><span class="sd">        the empirical distribution of the mean RDG and to simulate a new</span>
</span><span id="IDPModel-759"><a href="#IDPModel-759"><span class="linenos">759</span></a><span class="sd">        row distribution.</span>
</span><span id="IDPModel-760"><a href="#IDPModel-760"><span class="linenos">760</span></a>
</span><span id="IDPModel-761"><a href="#IDPModel-761"><span class="linenos">761</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-762"><a href="#IDPModel-762"><span class="linenos">762</span></a>        <span class="c1"># The `sample` vector is ordered as</span>
</span><span id="IDPModel-763"><a href="#IDPModel-763"><span class="linenos">763</span></a>        <span class="c1"># \[</span>
</span><span id="IDPModel-764"><a href="#IDPModel-764"><span class="linenos">764</span></a>        <span class="c1">#   \theta_{1 \ell}^{*, 1}, \ldots, \theta_{M \ell}^{*, 1},</span>
</span><span id="IDPModel-765"><a href="#IDPModel-765"><span class="linenos">765</span></a>        <span class="c1">#   \theta_{1 \ell}^{*, 2}, \ldots, \theta_{M \ell}^{*, 2},</span>
</span><span id="IDPModel-766"><a href="#IDPModel-766"><span class="linenos">766</span></a>        <span class="c1">#   \ldots,</span>
</span><span id="IDPModel-767"><a href="#IDPModel-767"><span class="linenos">767</span></a>        <span class="c1">#   \theta_{1 \ell}^{*, K}, \ldots, \theta_{M \ell}^{*, K}</span>
</span><span id="IDPModel-768"><a href="#IDPModel-768"><span class="linenos">768</span></a>        <span class="c1"># \]</span>
</span><span id="IDPModel-769"><a href="#IDPModel-769"><span class="linenos">769</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-770"><a href="#IDPModel-770"><span class="linenos">770</span></a>        <span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
</span><span id="IDPModel-771"><a href="#IDPModel-771"><span class="linenos">771</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="IDPModel-772"><a href="#IDPModel-772"><span class="linenos">772</span></a>            <span class="k">else</span> <span class="n">weightedSim</span><span class="o">.</span><span class="n">rowDistSims</span><span class="p">[</span><span class="n">m</span><span class="p">][</span><span class="n">state</span><span class="p">]</span>
</span><span id="IDPModel-773"><a href="#IDPModel-773"><span class="linenos">773</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="c1"># outer loop</span>
</span><span id="IDPModel-774"><a href="#IDPModel-774"><span class="linenos">774</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numRows</span><span class="p">)</span>  <span class="c1"># inner loop</span>
</span><span id="IDPModel-775"><a href="#IDPModel-775"><span class="linenos">775</span></a>        <span class="p">])</span>
</span><span id="IDPModel-776"><a href="#IDPModel-776"><span class="linenos">776</span></a>        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
</span><span id="IDPModel-777"><a href="#IDPModel-777"><span class="linenos">777</span></a>            <span class="p">[</span><span class="n">weightedSim</span><span class="o">.</span><span class="n">totalWeight</span><span class="p">]</span> <span class="o">*</span> <span class="n">numRows</span>
</span><span id="IDPModel-778"><a href="#IDPModel-778"><span class="linenos">778</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span>
</span><span id="IDPModel-779"><a href="#IDPModel-779"><span class="linenos">779</span></a>        <span class="p">])</span>
</span><span id="IDPModel-780"><a href="#IDPModel-780"><span class="linenos">780</span></a>        <span class="k">return</span> <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span>
</span><span id="IDPModel-781"><a href="#IDPModel-781"><span class="linenos">781</span></a>
</span><span id="IDPModel-782"><a href="#IDPModel-782"><span class="linenos">782</span></a>    <span class="k">def</span> <span class="nf">meanRDGpdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="IDPModel-783"><a href="#IDPModel-783"><span class="linenos">783</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;This method evaluates an approximate density (pdf) for the</span>
</span><span id="IDPModel-784"><a href="#IDPModel-784"><span class="linenos">784</span></a><span class="sd">        mean of the RDG for the given state. (See `meanRDGcdf` for an</span>
</span><span id="IDPModel-785"><a href="#IDPModel-785"><span class="linenos">785</span></a><span class="sd">        explanation of the RDG.) The mean of the RDG has a discrete</span>
</span><span id="IDPModel-786"><a href="#IDPModel-786"><span class="linenos">786</span></a><span class="sd">        component, and therefore has no density. This method creates an</span>
</span><span id="IDPModel-787"><a href="#IDPModel-787"><span class="linenos">787</span></a><span class="sd">        approximate density using Gaussian kernel density estimation</span>
</span><span id="IDPModel-788"><a href="#IDPModel-788"><span class="linenos">788</span></a><span class="sd">        (KDE). More specifically, it treats the point mass $\delta_x$ as</span>
</span><span id="IDPModel-789"><a href="#IDPModel-789"><span class="linenos">789</span></a><span class="sd">        having a Gaussian density with mean $x$ and standard deviation</span>
</span><span id="IDPModel-790"><a href="#IDPModel-790"><span class="linenos">790</span></a><span class="sd">        $h$, where $h$ is the &quot;bandwidth&quot; of the estimate.</span>
</span><span id="IDPModel-791"><a href="#IDPModel-791"><span class="linenos">791</span></a>
</span><span id="IDPModel-792"><a href="#IDPModel-792"><span class="linenos">792</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel-793"><a href="#IDPModel-793"><span class="linenos">793</span></a>
</span><span id="IDPModel-794"><a href="#IDPModel-794"><span class="linenos">794</span></a><span class="sd">        * **t** (`float`): The point at which to evaluate the</span>
</span><span id="IDPModel-795"><a href="#IDPModel-795"><span class="linenos">795</span></a><span class="sd">            approximate pdf.</span>
</span><span id="IDPModel-796"><a href="#IDPModel-796"><span class="linenos">796</span></a><span class="sd">        * **state** (`int`): The state for which the pdf is to be</span>
</span><span id="IDPModel-797"><a href="#IDPModel-797"><span class="linenos">797</span></a><span class="sd">            computed.</span>
</span><span id="IDPModel-798"><a href="#IDPModel-798"><span class="linenos">798</span></a><span class="sd">        * **bandwidth** (`float`): The bandwidth to use in the Gaussian</span>
</span><span id="IDPModel-799"><a href="#IDPModel-799"><span class="linenos">799</span></a><span class="sd">            KDE. If omitted, the bandwidth will be calculated using</span>
</span><span id="IDPModel-800"><a href="#IDPModel-800"><span class="linenos">800</span></a><span class="sd">            Scott&#39;s Rule. The calculated value can be retrieved using</span>
</span><span id="IDPModel-801"><a href="#IDPModel-801"><span class="linenos">801</span></a><span class="sd">            the `bandwidth` property. This argument is passed directly</span>
</span><span id="IDPModel-802"><a href="#IDPModel-802"><span class="linenos">802</span></a><span class="sd">            to the `gaussian_kde` function in the `scipy.stats` module.</span>
</span><span id="IDPModel-803"><a href="#IDPModel-803"><span class="linenos">803</span></a><span class="sd">            See that documentation for further details.</span>
</span><span id="IDPModel-804"><a href="#IDPModel-804"><span class="linenos">804</span></a>
</span><span id="IDPModel-805"><a href="#IDPModel-805"><span class="linenos">805</span></a><span class="sd">        **Returns:**</span>
</span><span id="IDPModel-806"><a href="#IDPModel-806"><span class="linenos">806</span></a>
</span><span id="IDPModel-807"><a href="#IDPModel-807"><span class="linenos">807</span></a><span class="sd">        * `float`: The value of the approximate pdf at the given point.</span>
</span><span id="IDPModel-808"><a href="#IDPModel-808"><span class="linenos">808</span></a>
</span><span id="IDPModel-809"><a href="#IDPModel-809"><span class="linenos">809</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-810"><a href="#IDPModel-810"><span class="linenos">810</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel-811"><a href="#IDPModel-811"><span class="linenos">811</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel-812"><a href="#IDPModel-812"><span class="linenos">812</span></a>
</span><span id="IDPModel-813"><a href="#IDPModel-813"><span class="linenos">813</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="IDPModel-814"><a href="#IDPModel-814"><span class="linenos">814</span></a>        <span class="n">samplePDF</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">bandwidth</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="IDPModel-815"><a href="#IDPModel-815"><span class="linenos">815</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span> <span class="o">=</span> <span class="n">samplePDF</span><span class="o">.</span><span class="n">factor</span>
</span><span id="IDPModel-816"><a href="#IDPModel-816"><span class="linenos">816</span></a>
</span><span id="IDPModel-817"><a href="#IDPModel-817"><span class="linenos">817</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel-818"><a href="#IDPModel-818"><span class="linenos">818</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="IDPModel-819"><a href="#IDPModel-819"><span class="linenos">819</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">samplePDF</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="IDPModel-820"><a href="#IDPModel-820"><span class="linenos">820</span></a>        <span class="p">)</span>
</span><span id="IDPModel-821"><a href="#IDPModel-821"><span class="linenos">821</span></a>
</span><span id="IDPModel-822"><a href="#IDPModel-822"><span class="linenos">822</span></a>    <span class="k">def</span> <span class="nf">simRowDist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel-823"><a href="#IDPModel-823"><span class="linenos">823</span></a>        <span class="sd">&#39;&#39;&#39;Simulates and returns a new row distribution. Uses (8.23) in</span>
</span><span id="IDPModel-824"><a href="#IDPModel-824"><span class="linenos">824</span></a><span class="sd">        the Paper.</span>
</span><span id="IDPModel-825"><a href="#IDPModel-825"><span class="linenos">825</span></a>
</span><span id="IDPModel-826"><a href="#IDPModel-826"><span class="linenos">826</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel-827"><a href="#IDPModel-827"><span class="linenos">827</span></a>        <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span>
</span><span id="IDPModel-828"><a href="#IDPModel-828"><span class="linenos">828</span></a>            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span><span id="IDPModel-829"><a href="#IDPModel-829"><span class="linenos">829</span></a>            <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)]</span>
</span><span id="IDPModel-830"><a href="#IDPModel-830"><span class="linenos">830</span></a>        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDPModel-831"><a href="#IDPModel-831"><span class="linenos">831</span></a>        <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel-832"><a href="#IDPModel-832"><span class="linenos">832</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">()</span><span class="o">.</span><span class="n">rvs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDPModel-833"><a href="#IDPModel-833"><span class="linenos">833</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">()</span>
</span><span id="IDPModel-834"><a href="#IDPModel-834"><span class="linenos">834</span></a>        <span class="k">return</span> <span class="n">choices</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>An IDP model on the state space $S = \{0, ..., L - 1\}$.</p>

<p>The IDP model consists of both an IDP and some observed data. See
Section 9 of the Paper for details.</p>
</div>


                            <div id="IDPModel.__init__" class="classattr">
                                        <input id="IDPModel.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">IDPModel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">colConc</span>, </span><span class="param"><span class="n">rowConc</span>, </span><span class="param"><span class="n">baseMeas</span>, </span><span class="param"><span class="n">rowCounts</span></span>)</span>

                <label class="view-source-button" for="IDPModel.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.__init__-442"><a href="#IDPModel.__init__-442"><span class="linenos">442</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colConc</span><span class="p">,</span> <span class="n">rowConc</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">rowCounts</span><span class="p">):</span>
</span><span id="IDPModel.__init__-443"><a href="#IDPModel.__init__-443"><span class="linenos">443</span></a>        <span class="sd">&#39;&#39;&#39;The constructor first uses the given arguments to set the</span>
</span><span id="IDPModel.__init__-444"><a href="#IDPModel.__init__-444"><span class="linenos">444</span></a><span class="sd">        corresponding properties. If a property returns a tuple or a</span>
</span><span id="IDPModel.__init__-445"><a href="#IDPModel.__init__-445"><span class="linenos">445</span></a><span class="sd">        tuple of tuples, then the argument can be passed any</span>
</span><span id="IDPModel.__init__-446"><a href="#IDPModel.__init__-446"><span class="linenos">446</span></a><span class="sd">        `array-like` object, such as a list or a list of lists.</span>
</span><span id="IDPModel.__init__-447"><a href="#IDPModel.__init__-447"><span class="linenos">447</span></a>
</span><span id="IDPModel.__init__-448"><a href="#IDPModel.__init__-448"><span class="linenos">448</span></a><span class="sd">        For the `baseMeas` property, the corresponding argument can be</span>
</span><span id="IDPModel.__init__-449"><a href="#IDPModel.__init__-449"><span class="linenos">449</span></a><span class="sd">        passed a single floating point value `p`, in which case the</span>
</span><span id="IDPModel.__init__-450"><a href="#IDPModel.__init__-450"><span class="linenos">450</span></a><span class="sd">        property will be set to `(1 - p, p)`.</span>
</span><span id="IDPModel.__init__-451"><a href="#IDPModel.__init__-451"><span class="linenos">451</span></a>
</span><span id="IDPModel.__init__-452"><a href="#IDPModel.__init__-452"><span class="linenos">452</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.__init__-453"><a href="#IDPModel.__init__-453"><span class="linenos">453</span></a>        <span class="c1"># `baseMeas` and `rowCounts` are stored as ndarrays rather than</span>
</span><span id="IDPModel.__init__-454"><a href="#IDPModel.__init__-454"><span class="linenos">454</span></a>        <span class="c1"># lists, since vector addition fails for lists but works for</span>
</span><span id="IDPModel.__init__-455"><a href="#IDPModel.__init__-455"><span class="linenos">455</span></a>        <span class="c1"># ndarrays. This is important in the constructor of the</span>
</span><span id="IDPModel.__init__-456"><a href="#IDPModel.__init__-456"><span class="linenos">456</span></a>        <span class="c1"># `WeightedSim` class.</span>
</span><span id="IDPModel.__init__-457"><a href="#IDPModel.__init__-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="IDPModel.__init__-458"><a href="#IDPModel.__init__-458"><span class="linenos">458</span></a>
</span><span id="IDPModel.__init__-459"><a href="#IDPModel.__init__-459"><span class="linenos">459</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="IDPModel.__init__-460"><a href="#IDPModel.__init__-460"><span class="linenos">460</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">baseMeas</span><span class="p">,</span> <span class="n">baseMeas</span><span class="p">]</span>
</span><span id="IDPModel.__init__-461"><a href="#IDPModel.__init__-461"><span class="linenos">461</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="IDPModel.__init__-462"><a href="#IDPModel.__init__-462"><span class="linenos">462</span></a>        <span class="n">rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="IDPModel.__init__-463"><a href="#IDPModel.__init__-463"><span class="linenos">463</span></a>
</span><span id="IDPModel.__init__-464"><a href="#IDPModel.__init__-464"><span class="linenos">464</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="IDPModel.__init__-465"><a href="#IDPModel.__init__-465"><span class="linenos">465</span></a>            <span class="s1">&#39;colConc&#39;</span><span class="p">:</span> <span class="n">colConc</span><span class="p">,</span>
</span><span id="IDPModel.__init__-466"><a href="#IDPModel.__init__-466"><span class="linenos">466</span></a>            <span class="s1">&#39;rowConc&#39;</span><span class="p">:</span> <span class="n">rowConc</span><span class="p">,</span>
</span><span id="IDPModel.__init__-467"><a href="#IDPModel.__init__-467"><span class="linenos">467</span></a>            <span class="s1">&#39;baseMeas&#39;</span><span class="p">:</span> <span class="n">baseMeas</span>
</span><span id="IDPModel.__init__-468"><a href="#IDPModel.__init__-468"><span class="linenos">468</span></a>        <span class="p">}</span>
</span><span id="IDPModel.__init__-469"><a href="#IDPModel.__init__-469"><span class="linenos">469</span></a>
</span><span id="IDPModel.__init__-470"><a href="#IDPModel.__init__-470"><span class="linenos">470</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">rowCounts</span>
</span><span id="IDPModel.__init__-471"><a href="#IDPModel.__init__-471"><span class="linenos">471</span></a>
</span><span id="IDPModel.__init__-472"><a href="#IDPModel.__init__-472"><span class="linenos">472</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel.__init__-473"><a href="#IDPModel.__init__-473"><span class="linenos">473</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IDPModel.__init__-474"><a href="#IDPModel.__init__-474"><span class="linenos">474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>The constructor first uses the given arguments to set the
corresponding properties. If a property returns a tuple or a
tuple of tuples, then the argument can be passed any
<code>array-like</code> object, such as a list or a list of lists.</p>

<p>For the <code><a href="#IDPModel.baseMeas">baseMeas</a></code> property, the corresponding argument can be
passed a single floating point value <code>p</code>, in which case the
property will be set to <code>(1 - p, p)</code>.</p>
</div>


                            </div>
                            <div id="IDPModel.colConc" class="classattr">
                                        <input id="IDPModel.colConc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">colConc</span>

                <label class="view-source-button" for="IDPModel.colConc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.colConc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.colConc-476"><a href="#IDPModel.colConc-476"><span class="linenos">476</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.colConc-477"><a href="#IDPModel.colConc-477"><span class="linenos">477</span></a>    <span class="k">def</span> <span class="nf">colConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.colConc-478"><a href="#IDPModel.colConc-478"><span class="linenos">478</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The column concentration parameter. Should be</span>
</span><span id="IDPModel.colConc-479"><a href="#IDPModel.colConc-479"><span class="linenos">479</span></a><span class="sd">        positive. Denoted by $\kappa$ in Section 9 of the Paper.</span>
</span><span id="IDPModel.colConc-480"><a href="#IDPModel.colConc-480"><span class="linenos">480</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.colConc-481"><a href="#IDPModel.colConc-481"><span class="linenos">481</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The column concentration parameter. Should be
positive. Denoted by $\kappa$ in Section 9 of the Paper.</p>
</div>


                            </div>
                            <div id="IDPModel.rowConc" class="classattr">
                                        <input id="IDPModel.rowConc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rowConc</span>

                <label class="view-source-button" for="IDPModel.rowConc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.rowConc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.rowConc-483"><a href="#IDPModel.rowConc-483"><span class="linenos">483</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.rowConc-484"><a href="#IDPModel.rowConc-484"><span class="linenos">484</span></a>    <span class="k">def</span> <span class="nf">rowConc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.rowConc-485"><a href="#IDPModel.rowConc-485"><span class="linenos">485</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The row concentration parameter. Should be</span>
</span><span id="IDPModel.rowConc-486"><a href="#IDPModel.rowConc-486"><span class="linenos">486</span></a><span class="sd">        positive. Denoted by $\varepsilon$ in Section 9 of the Paper.</span>
</span><span id="IDPModel.rowConc-487"><a href="#IDPModel.rowConc-487"><span class="linenos">487</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.rowConc-488"><a href="#IDPModel.rowConc-488"><span class="linenos">488</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The row concentration parameter. Should be
positive. Denoted by $\varepsilon$ in Section 9 of the Paper.</p>
</div>


                            </div>
                            <div id="IDPModel.baseMeas" class="classattr">
                                        <input id="IDPModel.baseMeas-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">baseMeas</span>

                <label class="view-source-button" for="IDPModel.baseMeas-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.baseMeas"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.baseMeas-490"><a href="#IDPModel.baseMeas-490"><span class="linenos">490</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.baseMeas-491"><a href="#IDPModel.baseMeas-491"><span class="linenos">491</span></a>    <span class="k">def</span> <span class="nf">baseMeas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.baseMeas-492"><a href="#IDPModel.baseMeas-492"><span class="linenos">492</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The base probability vector. Should be a</span>
</span><span id="IDPModel.baseMeas-493"><a href="#IDPModel.baseMeas-493"><span class="linenos">493</span></a><span class="sd">        list of positive numbers that sum to 1. Denoted by</span>
</span><span id="IDPModel.baseMeas-494"><a href="#IDPModel.baseMeas-494"><span class="linenos">494</span></a><span class="sd">        $\boldsymbol{p} = (p_0, \ldots, p_{L - 1})$ in Section 9 of the</span>
</span><span id="IDPModel.baseMeas-495"><a href="#IDPModel.baseMeas-495"><span class="linenos">495</span></a><span class="sd">        Paper, where $p_\ell = \varrho(\{\ell\})$.</span>
</span><span id="IDPModel.baseMeas-496"><a href="#IDPModel.baseMeas-496"><span class="linenos">496</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.baseMeas-497"><a href="#IDPModel.baseMeas-497"><span class="linenos">497</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>float</code>): The base probability vector. Should be a
list of positive numbers that sum to 1. Denoted by
$\boldsymbol{p} = (p_0, \ldots, p_{L - 1})$ in Section 9 of the
Paper, where $p_\ell = \varrho({\ell})$.</p>
</div>


                            </div>
                            <div id="IDPModel.rowCounts" class="classattr">
                                        <input id="IDPModel.rowCounts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rowCounts</span>

                <label class="view-source-button" for="IDPModel.rowCounts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.rowCounts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.rowCounts-499"><a href="#IDPModel.rowCounts-499"><span class="linenos">499</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.rowCounts-500"><a href="#IDPModel.rowCounts-500"><span class="linenos">500</span></a>    <span class="k">def</span> <span class="nf">rowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.rowCounts-501"><a href="#IDPModel.rowCounts-501"><span class="linenos">501</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`int`)): The row counts for the observed</span>
</span><span id="IDPModel.rowCounts-502"><a href="#IDPModel.rowCounts-502"><span class="linenos">502</span></a><span class="sd">        data. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="IDPModel.rowCounts-503"><a href="#IDPModel.rowCounts-503"><span class="linenos">503</span></a><span class="sd">        `rowCounts`[`row`][`state`] is denoted by $\overline{y}_{m\ell}$</span>
</span><span id="IDPModel.rowCounts-504"><a href="#IDPModel.rowCounts-504"><span class="linenos">504</span></a><span class="sd">        in Section 9 of the Paper. It is the number of observed</span>
</span><span id="IDPModel.rowCounts-505"><a href="#IDPModel.rowCounts-505"><span class="linenos">505</span></a><span class="sd">        instances of `state` in the given row of data.</span>
</span><span id="IDPModel.rowCounts-506"><a href="#IDPModel.rowCounts-506"><span class="linenos">506</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.rowCounts-507"><a href="#IDPModel.rowCounts-507"><span class="linenos">507</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>tuple</code>(<code>int</code>)): The row counts for the observed
data. If <code>row</code> is $m - 1$ and <code>state</code> is $\ell$, then
<code><a href="#IDPModel.rowCounts">rowCounts</a></code>[<code>row</code>][<code>state</code>] is denoted by $\overline{y}_{m\ell}$
in Section 9 of the Paper. It is the number of observed
instances of <code>state</code> in the given row of data.</p>
</div>


                            </div>
                            <div id="IDPModel.likelihoods" class="classattr">
                                        <input id="IDPModel.likelihoods-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">likelihoods</span>

                <label class="view-source-button" for="IDPModel.likelihoods-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.likelihoods"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.likelihoods-509"><a href="#IDPModel.likelihoods-509"><span class="linenos">509</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.likelihoods-510"><a href="#IDPModel.likelihoods-510"><span class="linenos">510</span></a>    <span class="k">def</span> <span class="nf">likelihoods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.likelihoods-511"><a href="#IDPModel.likelihoods-511"><span class="linenos">511</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`float`): The prior likelihoods. If `row` equals</span>
</span><span id="IDPModel.likelihoods-512"><a href="#IDPModel.likelihoods-512"><span class="linenos">512</span></a><span class="sd">        $m - 1$, then `likelihoods`[`row`] is denoted by</span>
</span><span id="IDPModel.likelihoods-513"><a href="#IDPModel.likelihoods-513"><span class="linenos">513</span></a><span class="sd">        $\varrho_N(A_m)$ in Section 9 of the Paper. It is the prior</span>
</span><span id="IDPModel.likelihoods-514"><a href="#IDPModel.likelihoods-514"><span class="linenos">514</span></a><span class="sd">        probability of seeing the row counts for the given row. This</span>
</span><span id="IDPModel.likelihoods-515"><a href="#IDPModel.likelihoods-515"><span class="linenos">515</span></a><span class="sd">        property is computed by the constructor, and should not be</span>
</span><span id="IDPModel.likelihoods-516"><a href="#IDPModel.likelihoods-516"><span class="linenos">516</span></a><span class="sd">        changed.</span>
</span><span id="IDPModel.likelihoods-517"><a href="#IDPModel.likelihoods-517"><span class="linenos">517</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.likelihoods-518"><a href="#IDPModel.likelihoods-518"><span class="linenos">518</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">):</span>
</span><span id="IDPModel.likelihoods-519"><a href="#IDPModel.likelihoods-519"><span class="linenos">519</span></a>            <span class="n">rowConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;rowConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel.likelihoods-520"><a href="#IDPModel.likelihoods-520"><span class="linenos">520</span></a>            <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="IDPModel.likelihoods-521"><a href="#IDPModel.likelihoods-521"><span class="linenos">521</span></a>            <span class="n">denom</span> <span class="o">=</span> <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">)</span>
</span><span id="IDPModel.likelihoods-522"><a href="#IDPModel.likelihoods-522"><span class="linenos">522</span></a>            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">):]:</span>
</span><span id="IDPModel.likelihoods-523"><a href="#IDPModel.likelihoods-523"><span class="linenos">523</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IDPModel.likelihoods-524"><a href="#IDPModel.likelihoods-524"><span class="linenos">524</span></a>                    <span class="n">_betaFuncMult</span><span class="p">(</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">row</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span>
</span><span id="IDPModel.likelihoods-525"><a href="#IDPModel.likelihoods-525"><span class="linenos">525</span></a>                <span class="p">)</span>
</span><span id="IDPModel.likelihoods-526"><a href="#IDPModel.likelihoods-526"><span class="linenos">526</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_likelihoods</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>float</code>): The prior likelihoods. If <code>row</code> equals
$m - 1$, then <code><a href="#IDPModel.likelihoods">likelihoods</a></code>[<code>row</code>] is denoted by
$\varrho_N(A_m)$ in Section 9 of the Paper. It is the prior
probability of seeing the row counts for the given row. This
property is computed by the constructor, and should not be
changed.</p>
</div>


                            </div>
                            <div id="IDPModel.scale" class="classattr">
                                        <input id="IDPModel.scale-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">scale</span>

                <label class="view-source-button" for="IDPModel.scale-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.scale"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.scale-528"><a href="#IDPModel.scale-528"><span class="linenos">528</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.scale-529"><a href="#IDPModel.scale-529"><span class="linenos">529</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.scale-530"><a href="#IDPModel.scale-530"><span class="linenos">530</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`float`: The scale factor to use for weighted simulations.</span>
</span><span id="IDPModel.scale-531"><a href="#IDPModel.scale-531"><span class="linenos">531</span></a><span class="sd">        Denoted by $\log c$ in Section 9 of the Paper. Defaults to 0.</span>
</span><span id="IDPModel.scale-532"><a href="#IDPModel.scale-532"><span class="linenos">532</span></a><span class="sd">        Altering this value runs the `WeightedSim.updateScale` method on</span>
</span><span id="IDPModel.scale-533"><a href="#IDPModel.scale-533"><span class="linenos">533</span></a><span class="sd">        every simulation in the `weightedSims` property. If a</span>
</span><span id="IDPModel.scale-534"><a href="#IDPModel.scale-534"><span class="linenos">534</span></a><span class="sd">        `ValueError` occurs in this process, then no changes will be</span>
</span><span id="IDPModel.scale-535"><a href="#IDPModel.scale-535"><span class="linenos">535</span></a><span class="sd">        made, neither to the `scale` property, nor to any of the</span>
</span><span id="IDPModel.scale-536"><a href="#IDPModel.scale-536"><span class="linenos">536</span></a><span class="sd">        simulations in the `weightedSims` property.</span>
</span><span id="IDPModel.scale-537"><a href="#IDPModel.scale-537"><span class="linenos">537</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.scale-538"><a href="#IDPModel.scale-538"><span class="linenos">538</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The scale factor to use for weighted simulations.
Denoted by $\log c$ in Section 9 of the Paper. Defaults to 0.
Altering this value runs the <code><a href="#WeightedSim.updateScale">WeightedSim.updateScale</a></code> method on
every simulation in the <code><a href="#IDPModel.weightedSims">weightedSims</a></code> property. If a
<code>ValueError</code> occurs in this process, then no changes will be
made, neither to the <code><a href="#IDPModel.scale">scale</a></code> property, nor to any of the
simulations in the <code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>
</div>


                            </div>
                            <div id="IDPModel.weightedSims" class="classattr">
                                        <input id="IDPModel.weightedSims-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">weightedSims</span>

                <label class="view-source-button" for="IDPModel.weightedSims-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.weightedSims"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.weightedSims-551"><a href="#IDPModel.weightedSims-551"><span class="linenos">551</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.weightedSims-552"><a href="#IDPModel.weightedSims-552"><span class="linenos">552</span></a>    <span class="k">def</span> <span class="nf">weightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.weightedSims-553"><a href="#IDPModel.weightedSims-553"><span class="linenos">553</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`WeightedSim`): A tuple of distinct (and therefore</span>
</span><span id="IDPModel.weightedSims-554"><a href="#IDPModel.weightedSims-554"><span class="linenos">554</span></a><span class="sd">        independent) `WeightedSim` instances. `weightedSims`[k] is</span>
</span><span id="IDPModel.weightedSims-555"><a href="#IDPModel.weightedSims-555"><span class="linenos">555</span></a><span class="sd">        denoted by $(t^k, \boldsymbol{\theta}_M^{*, k})$ in Section 9 of</span>
</span><span id="IDPModel.weightedSims-556"><a href="#IDPModel.weightedSims-556"><span class="linenos">556</span></a><span class="sd">        the Paper, and has total weight $V_k$. This property is empty if</span>
</span><span id="IDPModel.weightedSims-557"><a href="#IDPModel.weightedSims-557"><span class="linenos">557</span></a><span class="sd">        the `addWeightedSims` method has never been run.</span>
</span><span id="IDPModel.weightedSims-558"><a href="#IDPModel.weightedSims-558"><span class="linenos">558</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.weightedSims-559"><a href="#IDPModel.weightedSims-559"><span class="linenos">559</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code><a href="#WeightedSim">WeightedSim</a></code>): A tuple of distinct (and therefore
independent) <code><a href="#WeightedSim">WeightedSim</a></code> instances. <code><a href="#IDPModel.weightedSims">weightedSims</a></code>[k] is
denoted by $(t^k, \boldsymbol{\theta}_M^{*, k})$ in Section 9 of
the Paper, and has total weight $V_k$. This property is empty if
the <code><a href="#IDPModel.addWeightedSims">addWeightedSims</a></code> method has never been run.</p>
</div>


                            </div>
                            <div id="IDPModel.ess" class="classattr">
                                        <input id="IDPModel.ess-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">ess</span>

                <label class="view-source-button" for="IDPModel.ess-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.ess"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.ess-561"><a href="#IDPModel.ess-561"><span class="linenos">561</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.ess-562"><a href="#IDPModel.ess-562"><span class="linenos">562</span></a>    <span class="k">def</span> <span class="nf">ess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.ess-563"><a href="#IDPModel.ess-563"><span class="linenos">563</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the sample</span>
</span><span id="IDPModel.ess-564"><a href="#IDPModel.ess-564"><span class="linenos">564</span></a><span class="sd">        variance. Denoted by $K_e&#39;&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="IDPModel.ess-565"><a href="#IDPModel.ess-565"><span class="linenos">565</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.ess-566"><a href="#IDPModel.ess-566"><span class="linenos">566</span></a>        <span class="n">numSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel.ess-567"><a href="#IDPModel.ess-567"><span class="linenos">567</span></a>        <span class="k">if</span> <span class="n">numSims</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel.ess-568"><a href="#IDPModel.ess-568"><span class="linenos">568</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="IDPModel.ess-569"><a href="#IDPModel.ess-569"><span class="linenos">569</span></a>        <span class="n">essPop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">essPop</span>
</span><span id="IDPModel.ess-570"><a href="#IDPModel.ess-570"><span class="linenos">570</span></a>        <span class="k">return</span> <span class="n">essPop</span> <span class="o">*</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">numSims</span> <span class="o">-</span> <span class="n">essPop</span><span class="o">/</span><span class="n">numSims</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The effective sample size, approximated with the sample
variance. Denoted by $K_e''$ in Section 7.2 of the Paper.</p>
</div>


                            </div>
                            <div id="IDPModel.essPop" class="classattr">
                                        <input id="IDPModel.essPop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">essPop</span>

                <label class="view-source-button" for="IDPModel.essPop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.essPop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.essPop-572"><a href="#IDPModel.essPop-572"><span class="linenos">572</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.essPop-573"><a href="#IDPModel.essPop-573"><span class="linenos">573</span></a>    <span class="k">def</span> <span class="nf">essPop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.essPop-574"><a href="#IDPModel.essPop-574"><span class="linenos">574</span></a>        <span class="sd">&#39;&#39;&#39;The effective sample size, approximated with the population</span>
</span><span id="IDPModel.essPop-575"><a href="#IDPModel.essPop-575"><span class="linenos">575</span></a><span class="sd">        variance. Denoted by $K_e&#39;$ in Section 7.2 of the Paper.</span>
</span><span id="IDPModel.essPop-576"><a href="#IDPModel.essPop-576"><span class="linenos">576</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.essPop-577"><a href="#IDPModel.essPop-577"><span class="linenos">577</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel.essPop-578"><a href="#IDPModel.essPop-578"><span class="linenos">578</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="IDPModel.essPop-579"><a href="#IDPModel.essPop-579"><span class="linenos">579</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel.essPop-580"><a href="#IDPModel.essPop-580"><span class="linenos">580</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span>      <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span>
</span><span id="IDPModel.essPop-581"><a href="#IDPModel.essPop-581"><span class="linenos">581</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">sim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">)</span>
</span><span id="IDPModel.essPop-582"><a href="#IDPModel.essPop-582"><span class="linenos">582</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The effective sample size, approximated with the population
variance. Denoted by $K_e'$ in Section 7.2 of the Paper.</p>
</div>


                            </div>
                            <div id="IDPModel.bandwidth" class="classattr">
                                        <input id="IDPModel.bandwidth-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">bandwidth</span>

                <label class="view-source-button" for="IDPModel.bandwidth-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.bandwidth"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.bandwidth-584"><a href="#IDPModel.bandwidth-584"><span class="linenos">584</span></a>    <span class="nd">@property</span>
</span><span id="IDPModel.bandwidth-585"><a href="#IDPModel.bandwidth-585"><span class="linenos">585</span></a>    <span class="k">def</span> <span class="nf">bandwidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.bandwidth-586"><a href="#IDPModel.bandwidth-586"><span class="linenos">586</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The bandwidth used most recently by the `meanRDGpdf`</span>
</span><span id="IDPModel.bandwidth-587"><a href="#IDPModel.bandwidth-587"><span class="linenos">587</span></a><span class="sd">        method. Is `None` if this method has never been used.</span>
</span><span id="IDPModel.bandwidth-588"><a href="#IDPModel.bandwidth-588"><span class="linenos">588</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.bandwidth-589"><a href="#IDPModel.bandwidth-589"><span class="linenos">589</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The bandwidth used most recently by the <code><a href="#IDPModel.meanRDGpdf">meanRDGpdf</a></code>
method. Is <code>None</code> if this method has never been used.</p>
</div>


                            </div>
                            <div id="IDPModel.addRowCounts" class="classattr">
                                        <input id="IDPModel.addRowCounts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addRowCounts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">newRowCounts</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.addRowCounts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.addRowCounts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.addRowCounts-591"><a href="#IDPModel.addRowCounts-591"><span class="linenos">591</span></a>    <span class="k">def</span> <span class="nf">addRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">):</span>
</span><span id="IDPModel.addRowCounts-592"><a href="#IDPModel.addRowCounts-592"><span class="linenos">592</span></a>        <span class="sd">&#39;&#39;&#39;Adds new row counts to the `rowCounts` property and runs the</span>
</span><span id="IDPModel.addRowCounts-593"><a href="#IDPModel.addRowCounts-593"><span class="linenos">593</span></a><span class="sd">        `WeightedSim.updateRowCounts` method on every simulation in the</span>
</span><span id="IDPModel.addRowCounts-594"><a href="#IDPModel.addRowCounts-594"><span class="linenos">594</span></a><span class="sd">        `weightedSims` property. If a `ValueError` occurs in this</span>
</span><span id="IDPModel.addRowCounts-595"><a href="#IDPModel.addRowCounts-595"><span class="linenos">595</span></a><span class="sd">        process, then no changes will be made, neither to the</span>
</span><span id="IDPModel.addRowCounts-596"><a href="#IDPModel.addRowCounts-596"><span class="linenos">596</span></a><span class="sd">        `rowCounts` property, nor to any of the simulations in the</span>
</span><span id="IDPModel.addRowCounts-597"><a href="#IDPModel.addRowCounts-597"><span class="linenos">597</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel.addRowCounts-598"><a href="#IDPModel.addRowCounts-598"><span class="linenos">598</span></a>
</span><span id="IDPModel.addRowCounts-599"><a href="#IDPModel.addRowCounts-599"><span class="linenos">599</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.addRowCounts-600"><a href="#IDPModel.addRowCounts-600"><span class="linenos">600</span></a>
</span><span id="IDPModel.addRowCounts-601"><a href="#IDPModel.addRowCounts-601"><span class="linenos">601</span></a><span class="sd">        * **newRowCounts** (`array_like`): The additional row counts to</span>
</span><span id="IDPModel.addRowCounts-602"><a href="#IDPModel.addRowCounts-602"><span class="linenos">602</span></a><span class="sd">            be added. Should be an array-like object (such as a list of</span>
</span><span id="IDPModel.addRowCounts-603"><a href="#IDPModel.addRowCounts-603"><span class="linenos">603</span></a><span class="sd">            lists) with the same number of columns (states) as</span>
</span><span id="IDPModel.addRowCounts-604"><a href="#IDPModel.addRowCounts-604"><span class="linenos">604</span></a><span class="sd">            `rowCounts`.</span>
</span><span id="IDPModel.addRowCounts-605"><a href="#IDPModel.addRowCounts-605"><span class="linenos">605</span></a>
</span><span id="IDPModel.addRowCounts-606"><a href="#IDPModel.addRowCounts-606"><span class="linenos">606</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.addRowCounts-607"><a href="#IDPModel.addRowCounts-607"><span class="linenos">607</span></a>        <span class="n">oldRowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span>
</span><span id="IDPModel.addRowCounts-608"><a href="#IDPModel.addRowCounts-608"><span class="linenos">608</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">,</span> <span class="n">newRowCounts</span><span class="p">))</span>
</span><span id="IDPModel.addRowCounts-609"><a href="#IDPModel.addRowCounts-609"><span class="linenos">609</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDPModel.addRowCounts-610"><a href="#IDPModel.addRowCounts-610"><span class="linenos">610</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel.addRowCounts-611"><a href="#IDPModel.addRowCounts-611"><span class="linenos">611</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel.addRowCounts-612"><a href="#IDPModel.addRowCounts-612"><span class="linenos">612</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="IDPModel.addRowCounts-613"><a href="#IDPModel.addRowCounts-613"><span class="linenos">613</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="n">oldRowCounts</span>
</span><span id="IDPModel.addRowCounts-614"><a href="#IDPModel.addRowCounts-614"><span class="linenos">614</span></a>            <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel.addRowCounts-615"><a href="#IDPModel.addRowCounts-615"><span class="linenos">615</span></a>                <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="IDPModel.addRowCounts-616"><a href="#IDPModel.addRowCounts-616"><span class="linenos">616</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Adds new row counts to the <code><a href="#IDPModel.rowCounts">rowCounts</a></code> property and runs the
<code><a href="#WeightedSim.updateRowCounts">WeightedSim.updateRowCounts</a></code> method on every simulation in the
<code><a href="#IDPModel.weightedSims">weightedSims</a></code> property. If a <code>ValueError</code> occurs in this
process, then no changes will be made, neither to the
<code><a href="#IDPModel.rowCounts">rowCounts</a></code> property, nor to any of the simulations in the
<code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>newRowCounts</strong> (<code>array_like</code>): The additional row counts to
be added. Should be an array-like object (such as a list of
lists) with the same number of columns (states) as
<code><a href="#IDPModel.rowCounts">rowCounts</a></code>.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.delRowCounts" class="classattr">
                                        <input id="IDPModel.delRowCounts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delRowCounts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">numRows</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.delRowCounts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.delRowCounts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.delRowCounts-618"><a href="#IDPModel.delRowCounts-618"><span class="linenos">618</span></a>    <span class="k">def</span> <span class="nf">delRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numRows</span><span class="p">):</span>
</span><span id="IDPModel.delRowCounts-619"><a href="#IDPModel.delRowCounts-619"><span class="linenos">619</span></a>        <span class="sd">&#39;&#39;&#39;Deletes the last `numRows` rows of the `rowCounts` property,</span>
</span><span id="IDPModel.delRowCounts-620"><a href="#IDPModel.delRowCounts-620"><span class="linenos">620</span></a><span class="sd">        then runs the `WeightedSim.updateRowCounts` method on every</span>
</span><span id="IDPModel.delRowCounts-621"><a href="#IDPModel.delRowCounts-621"><span class="linenos">621</span></a><span class="sd">        simulation in the `weightedSims` property.</span>
</span><span id="IDPModel.delRowCounts-622"><a href="#IDPModel.delRowCounts-622"><span class="linenos">622</span></a>
</span><span id="IDPModel.delRowCounts-623"><a href="#IDPModel.delRowCounts-623"><span class="linenos">623</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.delRowCounts-624"><a href="#IDPModel.delRowCounts-624"><span class="linenos">624</span></a>
</span><span id="IDPModel.delRowCounts-625"><a href="#IDPModel.delRowCounts-625"><span class="linenos">625</span></a><span class="sd">        * **numRows** (`int`): The number of rows to delete.</span>
</span><span id="IDPModel.delRowCounts-626"><a href="#IDPModel.delRowCounts-626"><span class="linenos">626</span></a>
</span><span id="IDPModel.delRowCounts-627"><a href="#IDPModel.delRowCounts-627"><span class="linenos">627</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.delRowCounts-628"><a href="#IDPModel.delRowCounts-628"><span class="linenos">628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">[:</span><span class="o">-</span><span class="n">numRows</span><span class="p">]</span>
</span><span id="IDPModel.delRowCounts-629"><a href="#IDPModel.delRowCounts-629"><span class="linenos">629</span></a>        <span class="k">for</span> <span class="n">weightedSim</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel.delRowCounts-630"><a href="#IDPModel.delRowCounts-630"><span class="linenos">630</span></a>            <span class="n">weightedSim</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Deletes the last <code>numRows</code> rows of the <code><a href="#IDPModel.rowCounts">rowCounts</a></code> property,
then runs the <code><a href="#WeightedSim.updateRowCounts">WeightedSim.updateRowCounts</a></code> method on every
simulation in the <code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>numRows</strong> (<code>int</code>): The number of rows to delete.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.addWeightedSims" class="classattr">
                                        <input id="IDPModel.addWeightedSims-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">addWeightedSims</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">num</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.addWeightedSims-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.addWeightedSims"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.addWeightedSims-632"><a href="#IDPModel.addWeightedSims-632"><span class="linenos">632</span></a>    <span class="k">def</span> <span class="nf">addWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span id="IDPModel.addWeightedSims-633"><a href="#IDPModel.addWeightedSims-633"><span class="linenos">633</span></a>        <span class="sd">&#39;&#39;&#39;Creates new `WeightedSim` instances and adds them to the</span>
</span><span id="IDPModel.addWeightedSims-634"><a href="#IDPModel.addWeightedSims-634"><span class="linenos">634</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel.addWeightedSims-635"><a href="#IDPModel.addWeightedSims-635"><span class="linenos">635</span></a>
</span><span id="IDPModel.addWeightedSims-636"><a href="#IDPModel.addWeightedSims-636"><span class="linenos">636</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.addWeightedSims-637"><a href="#IDPModel.addWeightedSims-637"><span class="linenos">637</span></a><span class="sd">        </span>
</span><span id="IDPModel.addWeightedSims-638"><a href="#IDPModel.addWeightedSims-638"><span class="linenos">638</span></a><span class="sd">        * **num** (`int`): The number of distinct `WeightedSim`</span>
</span><span id="IDPModel.addWeightedSims-639"><a href="#IDPModel.addWeightedSims-639"><span class="linenos">639</span></a><span class="sd">            instances to create. If zero or negative, no instances are</span>
</span><span id="IDPModel.addWeightedSims-640"><a href="#IDPModel.addWeightedSims-640"><span class="linenos">640</span></a><span class="sd">            created.</span>
</span><span id="IDPModel.addWeightedSims-641"><a href="#IDPModel.addWeightedSims-641"><span class="linenos">641</span></a>
</span><span id="IDPModel.addWeightedSims-642"><a href="#IDPModel.addWeightedSims-642"><span class="linenos">642</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.addWeightedSims-643"><a href="#IDPModel.addWeightedSims-643"><span class="linenos">643</span></a>        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel.addWeightedSims-644"><a href="#IDPModel.addWeightedSims-644"><span class="linenos">644</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WeightedSim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
</span></pre></div>


            <div class="docstring"><p>Creates new <code><a href="#WeightedSim">WeightedSim</a></code> instances and adds them to the
<code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>num</strong> (<code>int</code>): The number of distinct <code><a href="#WeightedSim">WeightedSim</a></code>
instances to create. If zero or negative, no instances are
created.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.clearWeightedSims" class="classattr">
                                        <input id="IDPModel.clearWeightedSims-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clearWeightedSims</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.clearWeightedSims-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.clearWeightedSims"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.clearWeightedSims-646"><a href="#IDPModel.clearWeightedSims-646"><span class="linenos">646</span></a>    <span class="k">def</span> <span class="nf">clearWeightedSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.clearWeightedSims-647"><a href="#IDPModel.clearWeightedSims-647"><span class="linenos">647</span></a>        <span class="sd">&#39;&#39;&#39;Deletes all weighted simulations contained in the</span>
</span><span id="IDPModel.clearWeightedSims-648"><a href="#IDPModel.clearWeightedSims-648"><span class="linenos">648</span></a><span class="sd">        `weightedSims` property.</span>
</span><span id="IDPModel.clearWeightedSims-649"><a href="#IDPModel.clearWeightedSims-649"><span class="linenos">649</span></a>
</span><span id="IDPModel.clearWeightedSims-650"><a href="#IDPModel.clearWeightedSims-650"><span class="linenos">650</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.clearWeightedSims-651"><a href="#IDPModel.clearWeightedSims-651"><span class="linenos">651</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Deletes all weighted simulations contained in the
<code><a href="#IDPModel.weightedSims">weightedSims</a></code> property.</p>
</div>


                            </div>
                            <div id="IDPModel.postProb" class="classattr">
                                        <input id="IDPModel.postProb-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">postProb</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">row</span>, </span><span class="param"><span class="n">state</span><span class="o">=</span><span class="mi">1</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.postProb-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.postProb"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.postProb-653"><a href="#IDPModel.postProb-653"><span class="linenos">653</span></a>    <span class="k">def</span> <span class="nf">postProb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="IDPModel.postProb-654"><a href="#IDPModel.postProb-654"><span class="linenos">654</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Computes and returns the posterior probability of seeing the</span>
</span><span id="IDPModel.postProb-655"><a href="#IDPModel.postProb-655"><span class="linenos">655</span></a><span class="sd">        given state on a new trial in the given row. If `row` is</span>
</span><span id="IDPModel.postProb-656"><a href="#IDPModel.postProb-656"><span class="linenos">656</span></a><span class="sd">        $m - 1$, `state` is $\ell$ , and the length of `rowCounts` is</span>
</span><span id="IDPModel.postProb-657"><a href="#IDPModel.postProb-657"><span class="linenos">657</span></a><span class="sd">        $M$, then the value returned by this method is denoted in the</span>
</span><span id="IDPModel.postProb-658"><a href="#IDPModel.postProb-658"><span class="linenos">658</span></a><span class="sd">        Paper by $P(\xi_{m, N_m + \ell} = 1 \mid Y = y)$ in the case</span>
</span><span id="IDPModel.postProb-659"><a href="#IDPModel.postProb-659"><span class="linenos">659</span></a><span class="sd">        $m \le M$, and by $P(\xi_{M + 1, 1} = \ell \mid Y = y)$ in the</span>
</span><span id="IDPModel.postProb-660"><a href="#IDPModel.postProb-660"><span class="linenos">660</span></a><span class="sd">        case $m &gt; M$. This method implements (9.4) and (9.5) in the</span>
</span><span id="IDPModel.postProb-661"><a href="#IDPModel.postProb-661"><span class="linenos">661</span></a><span class="sd">        Paper.</span>
</span><span id="IDPModel.postProb-662"><a href="#IDPModel.postProb-662"><span class="linenos">662</span></a>
</span><span id="IDPModel.postProb-663"><a href="#IDPModel.postProb-663"><span class="linenos">663</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.postProb-664"><a href="#IDPModel.postProb-664"><span class="linenos">664</span></a>
</span><span id="IDPModel.postProb-665"><a href="#IDPModel.postProb-665"><span class="linenos">665</span></a><span class="sd">        * **row** (`int`): The index of the row whose posterior</span>
</span><span id="IDPModel.postProb-666"><a href="#IDPModel.postProb-666"><span class="linenos">666</span></a><span class="sd">            probability should be computed.</span>
</span><span id="IDPModel.postProb-667"><a href="#IDPModel.postProb-667"><span class="linenos">667</span></a><span class="sd">        * **state** (`int`): The state whose posterior probability</span>
</span><span id="IDPModel.postProb-668"><a href="#IDPModel.postProb-668"><span class="linenos">668</span></a><span class="sd">            should be computed.</span>
</span><span id="IDPModel.postProb-669"><a href="#IDPModel.postProb-669"><span class="linenos">669</span></a>
</span><span id="IDPModel.postProb-670"><a href="#IDPModel.postProb-670"><span class="linenos">670</span></a><span class="sd">        **Returns:**</span>
</span><span id="IDPModel.postProb-671"><a href="#IDPModel.postProb-671"><span class="linenos">671</span></a>
</span><span id="IDPModel.postProb-672"><a href="#IDPModel.postProb-672"><span class="linenos">672</span></a><span class="sd">        * `float`: The posterior probability of seeing the given state.</span>
</span><span id="IDPModel.postProb-673"><a href="#IDPModel.postProb-673"><span class="linenos">673</span></a>
</span><span id="IDPModel.postProb-674"><a href="#IDPModel.postProb-674"><span class="linenos">674</span></a><span class="sd">        **Raises:**</span>
</span><span id="IDPModel.postProb-675"><a href="#IDPModel.postProb-675"><span class="linenos">675</span></a>
</span><span id="IDPModel.postProb-676"><a href="#IDPModel.postProb-676"><span class="linenos">676</span></a><span class="sd">        * **ValueError**: If the `weightedSims` property is empty.</span>
</span><span id="IDPModel.postProb-677"><a href="#IDPModel.postProb-677"><span class="linenos">677</span></a>
</span><span id="IDPModel.postProb-678"><a href="#IDPModel.postProb-678"><span class="linenos">678</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.postProb-679"><a href="#IDPModel.postProb-679"><span class="linenos">679</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weightedSims</span><span class="p">:</span>
</span><span id="IDPModel.postProb-680"><a href="#IDPModel.postProb-680"><span class="linenos">680</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No weighted simulations found&#39;</span><span class="p">)</span>
</span><span id="IDPModel.postProb-681"><a href="#IDPModel.postProb-681"><span class="linenos">681</span></a>
</span><span id="IDPModel.postProb-682"><a href="#IDPModel.postProb-682"><span class="linenos">682</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel.postProb-683"><a href="#IDPModel.postProb-683"><span class="linenos">683</span></a>        <span class="k">if</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">:</span>
</span><span id="IDPModel.postProb-684"><a href="#IDPModel.postProb-684"><span class="linenos">684</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postProbLow</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
</span><span id="IDPModel.postProb-685"><a href="#IDPModel.postProb-685"><span class="linenos">685</span></a>
</span><span id="IDPModel.postProb-686"><a href="#IDPModel.postProb-686"><span class="linenos">686</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel.postProb-687"><a href="#IDPModel.postProb-687"><span class="linenos">687</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;baseMeas&#39;</span><span class="p">]</span>
</span><span id="IDPModel.postProb-688"><a href="#IDPModel.postProb-688"><span class="linenos">688</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel.postProb-689"><a href="#IDPModel.postProb-689"><span class="linenos">689</span></a>            <span class="n">colConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="IDPModel.postProb-690"><a href="#IDPModel.postProb-690"><span class="linenos">690</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postProbLow</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numRows</span><span class="p">))</span>
</span><span id="IDPModel.postProb-691"><a href="#IDPModel.postProb-691"><span class="linenos">691</span></a>        <span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Computes and returns the posterior probability of seeing the
given state on a new trial in the given row. If <code>row</code> is
$m - 1$, <code>state</code> is $\ell$ , and the length of <code><a href="#IDPModel.rowCounts">rowCounts</a></code> is
$M$, then the value returned by this method is denoted in the
Paper by $P(\xi_{m, N_m + \ell} = 1 \mid Y = y)$ in the case
$m \le M$, and by $P(\xi_{M + 1, 1} = \ell \mid Y = y)$ in the
case $m &gt; M$. This method implements (9.4) and (9.5) in the
Paper.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>row</strong> (<code>int</code>): The index of the row whose posterior
probability should be computed.</li>
<li><strong>state</strong> (<code>int</code>): The state whose posterior probability
should be computed.</li>
</ul>

<p><strong>Returns:</strong></p>

<ul>
<li><code>float</code>: The posterior probability of seeing the given state.</li>
</ul>

<p><strong>Raises:</strong></p>

<ul>
<li><strong>ValueError</strong>: If the <code><a href="#IDPModel.weightedSims">weightedSims</a></code> property is empty.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.meanRDGcdf" class="classattr">
                                        <input id="IDPModel.meanRDGcdf-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">meanRDGcdf</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">t</span>, </span><span class="param"><span class="n">state</span><span class="o">=</span><span class="mi">1</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.meanRDGcdf-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.meanRDGcdf"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.meanRDGcdf-706"><a href="#IDPModel.meanRDGcdf-706"><span class="linenos">706</span></a>    <span class="k">def</span> <span class="nf">meanRDGcdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="IDPModel.meanRDGcdf-707"><a href="#IDPModel.meanRDGcdf-707"><span class="linenos">707</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;The mean of the row distribution generator (RDG) for a state</span>
</span><span id="IDPModel.meanRDGcdf-708"><a href="#IDPModel.meanRDGcdf-708"><span class="linenos">708</span></a><span class="sd">        $\ell$ is a probability distribution on $[0, 1]$. More</span>
</span><span id="IDPModel.meanRDGcdf-709"><a href="#IDPModel.meanRDGcdf-709"><span class="linenos">709</span></a><span class="sd">        specifically, using the notation in the Paper, it is the</span>
</span><span id="IDPModel.meanRDGcdf-710"><a href="#IDPModel.meanRDGcdf-710"><span class="linenos">710</span></a><span class="sd">        conditional distribution of $\theta_{M + 1, \ell}$ given</span>
</span><span id="IDPModel.meanRDGcdf-711"><a href="#IDPModel.meanRDGcdf-711"><span class="linenos">711</span></a><span class="sd">        $Y = y$, and an expression for it is given in (9.6) in the</span>
</span><span id="IDPModel.meanRDGcdf-712"><a href="#IDPModel.meanRDGcdf-712"><span class="linenos">712</span></a><span class="sd">        Paper.</span>
</span><span id="IDPModel.meanRDGcdf-713"><a href="#IDPModel.meanRDGcdf-713"><span class="linenos">713</span></a>
</span><span id="IDPModel.meanRDGcdf-714"><a href="#IDPModel.meanRDGcdf-714"><span class="linenos">714</span></a><span class="sd">        This method evaluates the cumulative distribution function (cdf)</span>
</span><span id="IDPModel.meanRDGcdf-715"><a href="#IDPModel.meanRDGcdf-715"><span class="linenos">715</span></a><span class="sd">        of the mean of the RDG for the given state at the given point.</span>
</span><span id="IDPModel.meanRDGcdf-716"><a href="#IDPModel.meanRDGcdf-716"><span class="linenos">716</span></a><span class="sd">        That is, it gives the cdf for the random probability of seeing</span>
</span><span id="IDPModel.meanRDGcdf-717"><a href="#IDPModel.meanRDGcdf-717"><span class="linenos">717</span></a><span class="sd">        the given state in a new trial.</span>
</span><span id="IDPModel.meanRDGcdf-718"><a href="#IDPModel.meanRDGcdf-718"><span class="linenos">718</span></a>
</span><span id="IDPModel.meanRDGcdf-719"><a href="#IDPModel.meanRDGcdf-719"><span class="linenos">719</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.meanRDGcdf-720"><a href="#IDPModel.meanRDGcdf-720"><span class="linenos">720</span></a>
</span><span id="IDPModel.meanRDGcdf-721"><a href="#IDPModel.meanRDGcdf-721"><span class="linenos">721</span></a><span class="sd">        * **t** (`float`): The point at which to evaluate the cdf.</span>
</span><span id="IDPModel.meanRDGcdf-722"><a href="#IDPModel.meanRDGcdf-722"><span class="linenos">722</span></a><span class="sd">        * **state** (`int`): The state for which the cdf is to be</span>
</span><span id="IDPModel.meanRDGcdf-723"><a href="#IDPModel.meanRDGcdf-723"><span class="linenos">723</span></a><span class="sd">            computed.</span>
</span><span id="IDPModel.meanRDGcdf-724"><a href="#IDPModel.meanRDGcdf-724"><span class="linenos">724</span></a>
</span><span id="IDPModel.meanRDGcdf-725"><a href="#IDPModel.meanRDGcdf-725"><span class="linenos">725</span></a><span class="sd">        **Returns:**</span>
</span><span id="IDPModel.meanRDGcdf-726"><a href="#IDPModel.meanRDGcdf-726"><span class="linenos">726</span></a>
</span><span id="IDPModel.meanRDGcdf-727"><a href="#IDPModel.meanRDGcdf-727"><span class="linenos">727</span></a><span class="sd">        * `float`: The value of the cdf at the given point.</span>
</span><span id="IDPModel.meanRDGcdf-728"><a href="#IDPModel.meanRDGcdf-728"><span class="linenos">728</span></a>
</span><span id="IDPModel.meanRDGcdf-729"><a href="#IDPModel.meanRDGcdf-729"><span class="linenos">729</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.meanRDGcdf-730"><a href="#IDPModel.meanRDGcdf-730"><span class="linenos">730</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel.meanRDGcdf-731"><a href="#IDPModel.meanRDGcdf-731"><span class="linenos">731</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel.meanRDGcdf-732"><a href="#IDPModel.meanRDGcdf-732"><span class="linenos">732</span></a>
</span><span id="IDPModel.meanRDGcdf-733"><a href="#IDPModel.meanRDGcdf-733"><span class="linenos">733</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="IDPModel.meanRDGcdf-734"><a href="#IDPModel.meanRDGcdf-734"><span class="linenos">734</span></a>        <span class="n">sampleCDF</span> <span class="o">=</span> <span class="n">ECDFDiscrete</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="IDPModel.meanRDGcdf-735"><a href="#IDPModel.meanRDGcdf-735"><span class="linenos">735</span></a>
</span><span id="IDPModel.meanRDGcdf-736"><a href="#IDPModel.meanRDGcdf-736"><span class="linenos">736</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel.meanRDGcdf-737"><a href="#IDPModel.meanRDGcdf-737"><span class="linenos">737</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="IDPModel.meanRDGcdf-738"><a href="#IDPModel.meanRDGcdf-738"><span class="linenos">738</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">sampleCDF</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="IDPModel.meanRDGcdf-739"><a href="#IDPModel.meanRDGcdf-739"><span class="linenos">739</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The mean of the row distribution generator (RDG) for a state
$\ell$ is a probability distribution on $[0, 1]$. More
specifically, using the notation in the Paper, it is the
conditional distribution of $\theta_{M + 1, \ell}$ given
$Y = y$, and an expression for it is given in (9.6) in the
Paper.</p>

<p>This method evaluates the cumulative distribution function (cdf)
of the mean of the RDG for the given state at the given point.
That is, it gives the cdf for the random probability of seeing
the given state in a new trial.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>t</strong> (<code>float</code>): The point at which to evaluate the cdf.</li>
<li><strong>state</strong> (<code>int</code>): The state for which the cdf is to be
computed.</li>
</ul>

<p><strong>Returns:</strong></p>

<ul>
<li><code>float</code>: The value of the cdf at the given point.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.meanRDGpdf" class="classattr">
                                        <input id="IDPModel.meanRDGpdf-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">meanRDGpdf</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">t</span>, </span><span class="param"><span class="n">state</span><span class="o">=</span><span class="mi">1</span>, </span><span class="param"><span class="n">bandwidth</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.meanRDGpdf-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.meanRDGpdf"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.meanRDGpdf-782"><a href="#IDPModel.meanRDGpdf-782"><span class="linenos">782</span></a>    <span class="k">def</span> <span class="nf">meanRDGpdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="IDPModel.meanRDGpdf-783"><a href="#IDPModel.meanRDGpdf-783"><span class="linenos">783</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;This method evaluates an approximate density (pdf) for the</span>
</span><span id="IDPModel.meanRDGpdf-784"><a href="#IDPModel.meanRDGpdf-784"><span class="linenos">784</span></a><span class="sd">        mean of the RDG for the given state. (See `meanRDGcdf` for an</span>
</span><span id="IDPModel.meanRDGpdf-785"><a href="#IDPModel.meanRDGpdf-785"><span class="linenos">785</span></a><span class="sd">        explanation of the RDG.) The mean of the RDG has a discrete</span>
</span><span id="IDPModel.meanRDGpdf-786"><a href="#IDPModel.meanRDGpdf-786"><span class="linenos">786</span></a><span class="sd">        component, and therefore has no density. This method creates an</span>
</span><span id="IDPModel.meanRDGpdf-787"><a href="#IDPModel.meanRDGpdf-787"><span class="linenos">787</span></a><span class="sd">        approximate density using Gaussian kernel density estimation</span>
</span><span id="IDPModel.meanRDGpdf-788"><a href="#IDPModel.meanRDGpdf-788"><span class="linenos">788</span></a><span class="sd">        (KDE). More specifically, it treats the point mass $\delta_x$ as</span>
</span><span id="IDPModel.meanRDGpdf-789"><a href="#IDPModel.meanRDGpdf-789"><span class="linenos">789</span></a><span class="sd">        having a Gaussian density with mean $x$ and standard deviation</span>
</span><span id="IDPModel.meanRDGpdf-790"><a href="#IDPModel.meanRDGpdf-790"><span class="linenos">790</span></a><span class="sd">        $h$, where $h$ is the &quot;bandwidth&quot; of the estimate.</span>
</span><span id="IDPModel.meanRDGpdf-791"><a href="#IDPModel.meanRDGpdf-791"><span class="linenos">791</span></a>
</span><span id="IDPModel.meanRDGpdf-792"><a href="#IDPModel.meanRDGpdf-792"><span class="linenos">792</span></a><span class="sd">        **Arguments:**</span>
</span><span id="IDPModel.meanRDGpdf-793"><a href="#IDPModel.meanRDGpdf-793"><span class="linenos">793</span></a>
</span><span id="IDPModel.meanRDGpdf-794"><a href="#IDPModel.meanRDGpdf-794"><span class="linenos">794</span></a><span class="sd">        * **t** (`float`): The point at which to evaluate the</span>
</span><span id="IDPModel.meanRDGpdf-795"><a href="#IDPModel.meanRDGpdf-795"><span class="linenos">795</span></a><span class="sd">            approximate pdf.</span>
</span><span id="IDPModel.meanRDGpdf-796"><a href="#IDPModel.meanRDGpdf-796"><span class="linenos">796</span></a><span class="sd">        * **state** (`int`): The state for which the pdf is to be</span>
</span><span id="IDPModel.meanRDGpdf-797"><a href="#IDPModel.meanRDGpdf-797"><span class="linenos">797</span></a><span class="sd">            computed.</span>
</span><span id="IDPModel.meanRDGpdf-798"><a href="#IDPModel.meanRDGpdf-798"><span class="linenos">798</span></a><span class="sd">        * **bandwidth** (`float`): The bandwidth to use in the Gaussian</span>
</span><span id="IDPModel.meanRDGpdf-799"><a href="#IDPModel.meanRDGpdf-799"><span class="linenos">799</span></a><span class="sd">            KDE. If omitted, the bandwidth will be calculated using</span>
</span><span id="IDPModel.meanRDGpdf-800"><a href="#IDPModel.meanRDGpdf-800"><span class="linenos">800</span></a><span class="sd">            Scott&#39;s Rule. The calculated value can be retrieved using</span>
</span><span id="IDPModel.meanRDGpdf-801"><a href="#IDPModel.meanRDGpdf-801"><span class="linenos">801</span></a><span class="sd">            the `bandwidth` property. This argument is passed directly</span>
</span><span id="IDPModel.meanRDGpdf-802"><a href="#IDPModel.meanRDGpdf-802"><span class="linenos">802</span></a><span class="sd">            to the `gaussian_kde` function in the `scipy.stats` module.</span>
</span><span id="IDPModel.meanRDGpdf-803"><a href="#IDPModel.meanRDGpdf-803"><span class="linenos">803</span></a><span class="sd">            See that documentation for further details.</span>
</span><span id="IDPModel.meanRDGpdf-804"><a href="#IDPModel.meanRDGpdf-804"><span class="linenos">804</span></a>
</span><span id="IDPModel.meanRDGpdf-805"><a href="#IDPModel.meanRDGpdf-805"><span class="linenos">805</span></a><span class="sd">        **Returns:**</span>
</span><span id="IDPModel.meanRDGpdf-806"><a href="#IDPModel.meanRDGpdf-806"><span class="linenos">806</span></a>
</span><span id="IDPModel.meanRDGpdf-807"><a href="#IDPModel.meanRDGpdf-807"><span class="linenos">807</span></a><span class="sd">        * `float`: The value of the approximate pdf at the given point.</span>
</span><span id="IDPModel.meanRDGpdf-808"><a href="#IDPModel.meanRDGpdf-808"><span class="linenos">808</span></a>
</span><span id="IDPModel.meanRDGpdf-809"><a href="#IDPModel.meanRDGpdf-809"><span class="linenos">809</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.meanRDGpdf-810"><a href="#IDPModel.meanRDGpdf-810"><span class="linenos">810</span></a>        <span class="n">colConc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">]</span>
</span><span id="IDPModel.meanRDGpdf-811"><a href="#IDPModel.meanRDGpdf-811"><span class="linenos">811</span></a>        <span class="n">numRows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)</span>
</span><span id="IDPModel.meanRDGpdf-812"><a href="#IDPModel.meanRDGpdf-812"><span class="linenos">812</span></a>
</span><span id="IDPModel.meanRDGpdf-813"><a href="#IDPModel.meanRDGpdf-813"><span class="linenos">813</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="IDPModel.meanRDGpdf-814"><a href="#IDPModel.meanRDGpdf-814"><span class="linenos">814</span></a>        <span class="n">samplePDF</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">bandwidth</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</span><span id="IDPModel.meanRDGpdf-815"><a href="#IDPModel.meanRDGpdf-815"><span class="linenos">815</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bandwidth</span> <span class="o">=</span> <span class="n">samplePDF</span><span class="o">.</span><span class="n">factor</span>
</span><span id="IDPModel.meanRDGpdf-816"><a href="#IDPModel.meanRDGpdf-816"><span class="linenos">816</span></a>
</span><span id="IDPModel.meanRDGpdf-817"><a href="#IDPModel.meanRDGpdf-817"><span class="linenos">817</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="IDPModel.meanRDGpdf-818"><a href="#IDPModel.meanRDGpdf-818"><span class="linenos">818</span></a>            <span class="p">(</span><span class="n">colConc</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="IDPModel.meanRDGpdf-819"><a href="#IDPModel.meanRDGpdf-819"><span class="linenos">819</span></a>            <span class="p">(</span><span class="n">numRows</span> <span class="o">/</span> <span class="p">(</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">numRows</span><span class="p">))</span> <span class="o">*</span> <span class="n">samplePDF</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="IDPModel.meanRDGpdf-820"><a href="#IDPModel.meanRDGpdf-820"><span class="linenos">820</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This method evaluates an approximate density (pdf) for the
mean of the RDG for the given state. (See <code><a href="#IDPModel.meanRDGcdf">meanRDGcdf</a></code> for an
explanation of the RDG.) The mean of the RDG has a discrete
component, and therefore has no density. This method creates an
approximate density using Gaussian kernel density estimation
(KDE). More specifically, it treats the point mass $\delta_x$ as
having a Gaussian density with mean $x$ and standard deviation
$h$, where $h$ is the "bandwidth" of the estimate.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><strong>t</strong> (<code>float</code>): The point at which to evaluate the
approximate pdf.</li>
<li><strong>state</strong> (<code>int</code>): The state for which the pdf is to be
computed.</li>
<li><strong>bandwidth</strong> (<code>float</code>): The bandwidth to use in the Gaussian
KDE. If omitted, the bandwidth will be calculated using
Scott's Rule. The calculated value can be retrieved using
the <code><a href="#IDPModel.bandwidth">bandwidth</a></code> property. This argument is passed directly
to the <code>gaussian_kde</code> function in the <code>scipy.stats</code> module.
See that documentation for further details.</li>
</ul>

<p><strong>Returns:</strong></p>

<ul>
<li><code>float</code>: The value of the approximate pdf at the given point.</li>
</ul>
</div>


                            </div>
                            <div id="IDPModel.simRowDist" class="classattr">
                                        <input id="IDPModel.simRowDist-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">simRowDist</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IDPModel.simRowDist-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDPModel.simRowDist"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDPModel.simRowDist-822"><a href="#IDPModel.simRowDist-822"><span class="linenos">822</span></a>    <span class="k">def</span> <span class="nf">simRowDist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IDPModel.simRowDist-823"><a href="#IDPModel.simRowDist-823"><span class="linenos">823</span></a>        <span class="sd">&#39;&#39;&#39;Simulates and returns a new row distribution. Uses (8.23) in</span>
</span><span id="IDPModel.simRowDist-824"><a href="#IDPModel.simRowDist-824"><span class="linenos">824</span></a><span class="sd">        the Paper.</span>
</span><span id="IDPModel.simRowDist-825"><a href="#IDPModel.simRowDist-825"><span class="linenos">825</span></a>
</span><span id="IDPModel.simRowDist-826"><a href="#IDPModel.simRowDist-826"><span class="linenos">826</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="IDPModel.simRowDist-827"><a href="#IDPModel.simRowDist-827"><span class="linenos">827</span></a>        <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span>
</span><span id="IDPModel.simRowDist-828"><a href="#IDPModel.simRowDist-828"><span class="linenos">828</span></a>            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span><span id="IDPModel.simRowDist-829"><a href="#IDPModel.simRowDist-829"><span class="linenos">829</span></a>            <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_idp</span><span class="p">[</span><span class="s1">&#39;colConc&#39;</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowCounts</span><span class="p">)]</span>
</span><span id="IDPModel.simRowDist-830"><a href="#IDPModel.simRowDist-830"><span class="linenos">830</span></a>        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDPModel.simRowDist-831"><a href="#IDPModel.simRowDist-831"><span class="linenos">831</span></a>        <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDPModel.simRowDist-832"><a href="#IDPModel.simRowDist-832"><span class="linenos">832</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prior</span><span class="p">()</span><span class="o">.</span><span class="n">rvs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDPModel.simRowDist-833"><a href="#IDPModel.simRowDist-833"><span class="linenos">833</span></a>        <span class="n">sample</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeSample</span><span class="p">()</span>
</span><span id="IDPModel.simRowDist-834"><a href="#IDPModel.simRowDist-834"><span class="linenos">834</span></a>        <span class="k">return</span> <span class="n">choices</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Simulates and returns a new row distribution. Uses (8.23) in
the Paper.</p>
</div>


                            </div>
                </section>
                <section id="WeightedSim">
                            <input id="WeightedSim-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">WeightedSim</span>:

                <label class="view-source-button" for="WeightedSim-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim-836"><a href="#WeightedSim-836"><span class="linenos"> 836</span></a><span class="k">class</span> <span class="nc">WeightedSim</span><span class="p">:</span>
</span><span id="WeightedSim-837"><a href="#WeightedSim-837"><span class="linenos"> 837</span></a>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;A weighted simulation for an `IDPModel` instance.</span>
</span><span id="WeightedSim-838"><a href="#WeightedSim-838"><span class="linenos"> 838</span></a>
</span><span id="WeightedSim-839"><a href="#WeightedSim-839"><span class="linenos"> 839</span></a><span class="sd">    In the Paper, a weighted simulation is determined by the pair $(t,</span>
</span><span id="WeightedSim-840"><a href="#WeightedSim-840"><span class="linenos"> 840</span></a><span class="sd">    \boldsymbol{\theta}_M^*)$ and has total weight $V$.</span>
</span><span id="WeightedSim-841"><a href="#WeightedSim-841"><span class="linenos"> 841</span></a>
</span><span id="WeightedSim-842"><a href="#WeightedSim-842"><span class="linenos"> 842</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="WeightedSim-843"><a href="#WeightedSim-843"><span class="linenos"> 843</span></a>
</span><span id="WeightedSim-844"><a href="#WeightedSim-844"><span class="linenos"> 844</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idpModel</span><span class="p">):</span>
</span><span id="WeightedSim-845"><a href="#WeightedSim-845"><span class="linenos"> 845</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Uses the given argument to set the corresponding property,</span>
</span><span id="WeightedSim-846"><a href="#WeightedSim-846"><span class="linenos"> 846</span></a><span class="sd">        then runs the `updateRowCounts` method.</span>
</span><span id="WeightedSim-847"><a href="#WeightedSim-847"><span class="linenos"> 847</span></a>
</span><span id="WeightedSim-848"><a href="#WeightedSim-848"><span class="linenos"> 848</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-849"><a href="#WeightedSim-849"><span class="linenos"> 849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span> <span class="o">=</span> <span class="n">idpModel</span>
</span><span id="WeightedSim-850"><a href="#WeightedSim-850"><span class="linenos"> 850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="c1"># stored copy to detect changes</span>
</span><span id="WeightedSim-851"><a href="#WeightedSim-851"><span class="linenos"> 851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WeightedSim-852"><a href="#WeightedSim-852"><span class="linenos"> 852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WeightedSim-853"><a href="#WeightedSim-853"><span class="linenos"> 853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># the natural logarithm of the total weight</span>
</span><span id="WeightedSim-854"><a href="#WeightedSim-854"><span class="linenos"> 854</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span><span id="WeightedSim-855"><a href="#WeightedSim-855"><span class="linenos"> 855</span></a>
</span><span id="WeightedSim-856"><a href="#WeightedSim-856"><span class="linenos"> 856</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim-857"><a href="#WeightedSim-857"><span class="linenos"> 857</span></a>    <span class="k">def</span> <span class="nf">idpModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-858"><a href="#WeightedSim-858"><span class="linenos"> 858</span></a>        <span class="sd">&#39;&#39;&#39;`IDPModel`: The IDP model for which the weighted simulation</span>
</span><span id="WeightedSim-859"><a href="#WeightedSim-859"><span class="linenos"> 859</span></a><span class="sd">        is being created.</span>
</span><span id="WeightedSim-860"><a href="#WeightedSim-860"><span class="linenos"> 860</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-861"><a href="#WeightedSim-861"><span class="linenos"> 861</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span>
</span><span id="WeightedSim-862"><a href="#WeightedSim-862"><span class="linenos"> 862</span></a>
</span><span id="WeightedSim-863"><a href="#WeightedSim-863"><span class="linenos"> 863</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim-864"><a href="#WeightedSim-864"><span class="linenos"> 864</span></a>    <span class="k">def</span> <span class="nf">rowWeights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-865"><a href="#WeightedSim-865"><span class="linenos"> 865</span></a>        <span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): The triangular array of row</span>
</span><span id="WeightedSim-866"><a href="#WeightedSim-866"><span class="linenos"> 866</span></a><span class="sd">        weights for the weighted simulation. Denoted by $t$ in Section 9</span>
</span><span id="WeightedSim-867"><a href="#WeightedSim-867"><span class="linenos"> 867</span></a><span class="sd">        of the Paper.</span>
</span><span id="WeightedSim-868"><a href="#WeightedSim-868"><span class="linenos"> 868</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-869"><a href="#WeightedSim-869"><span class="linenos"> 869</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">)</span>
</span><span id="WeightedSim-870"><a href="#WeightedSim-870"><span class="linenos"> 870</span></a>
</span><span id="WeightedSim-871"><a href="#WeightedSim-871"><span class="linenos"> 871</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim-872"><a href="#WeightedSim-872"><span class="linenos"> 872</span></a>    <span class="k">def</span> <span class="nf">rowDistSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-873"><a href="#WeightedSim-873"><span class="linenos"> 873</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): A tuple of simulated row</span>
</span><span id="WeightedSim-874"><a href="#WeightedSim-874"><span class="linenos"> 874</span></a><span class="sd">        distributions. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="WeightedSim-875"><a href="#WeightedSim-875"><span class="linenos"> 875</span></a><span class="sd">        `rowDistSims`[`row`][`state`] is denoted by $\theta_{m\ell}^*</span>
</span><span id="WeightedSim-876"><a href="#WeightedSim-876"><span class="linenos"> 876</span></a><span class="sd">        = u_m^*(\{\ell\})$ in Section 9 of the Paper.</span>
</span><span id="WeightedSim-877"><a href="#WeightedSim-877"><span class="linenos"> 877</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-878"><a href="#WeightedSim-878"><span class="linenos"> 878</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="WeightedSim-879"><a href="#WeightedSim-879"><span class="linenos"> 879</span></a>
</span><span id="WeightedSim-880"><a href="#WeightedSim-880"><span class="linenos"> 880</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim-881"><a href="#WeightedSim-881"><span class="linenos"> 881</span></a>    <span class="k">def</span> <span class="nf">totalWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-882"><a href="#WeightedSim-882"><span class="linenos"> 882</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The total weight of the simulation. Denoted by $V$</span>
</span><span id="WeightedSim-883"><a href="#WeightedSim-883"><span class="linenos"> 883</span></a><span class="sd">        in Section 9 of the Paper.</span>
</span><span id="WeightedSim-884"><a href="#WeightedSim-884"><span class="linenos"> 884</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-885"><a href="#WeightedSim-885"><span class="linenos"> 885</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span>
</span><span id="WeightedSim-886"><a href="#WeightedSim-886"><span class="linenos"> 886</span></a>
</span><span id="WeightedSim-887"><a href="#WeightedSim-887"><span class="linenos"> 887</span></a>    <span class="k">def</span> <span class="nf">updateRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-888"><a href="#WeightedSim-888"><span class="linenos"> 888</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `rowWeights`, `rowDistSims`, and `totalWeight`</span>
</span><span id="WeightedSim-889"><a href="#WeightedSim-889"><span class="linenos"> 889</span></a><span class="sd">        properties, if necessary, so that the number of rows in</span>
</span><span id="WeightedSim-890"><a href="#WeightedSim-890"><span class="linenos"> 890</span></a><span class="sd">        `rowDistSims` is the same as the number of rows in the</span>
</span><span id="WeightedSim-891"><a href="#WeightedSim-891"><span class="linenos"> 891</span></a><span class="sd">        `IDPModel.rowCounts` property of the associated `idpModel`</span>
</span><span id="WeightedSim-892"><a href="#WeightedSim-892"><span class="linenos"> 892</span></a><span class="sd">        instance.</span>
</span><span id="WeightedSim-893"><a href="#WeightedSim-893"><span class="linenos"> 893</span></a>
</span><span id="WeightedSim-894"><a href="#WeightedSim-894"><span class="linenos"> 894</span></a><span class="sd">        **Raises:**</span>
</span><span id="WeightedSim-895"><a href="#WeightedSim-895"><span class="linenos"> 895</span></a>
</span><span id="WeightedSim-896"><a href="#WeightedSim-896"><span class="linenos"> 896</span></a><span class="sd">        * **ValueError**: If the computed value for the `totalWeight`</span>
</span><span id="WeightedSim-897"><a href="#WeightedSim-897"><span class="linenos"> 897</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="WeightedSim-898"><a href="#WeightedSim-898"><span class="linenos"> 898</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="WeightedSim-899"><a href="#WeightedSim-899"><span class="linenos"> 899</span></a>
</span><span id="WeightedSim-900"><a href="#WeightedSim-900"><span class="linenos"> 900</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-901"><a href="#WeightedSim-901"><span class="linenos"> 901</span></a>        <span class="c1"># If $L$ is the number of states in the IDP, then the case</span>
</span><span id="WeightedSim-902"><a href="#WeightedSim-902"><span class="linenos"> 902</span></a>        <span class="c1"># $L = 2$ is separated from the case $2 &lt; L &lt; \infty$ to speed</span>
</span><span id="WeightedSim-903"><a href="#WeightedSim-903"><span class="linenos"> 903</span></a>        <span class="c1"># up code execution.</span>
</span><span id="WeightedSim-904"><a href="#WeightedSim-904"><span class="linenos"> 904</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="WeightedSim-905"><a href="#WeightedSim-905"><span class="linenos"> 905</span></a>        <span class="n">numStates</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="WeightedSim-906"><a href="#WeightedSim-906"><span class="linenos"> 906</span></a>
</span><span id="WeightedSim-907"><a href="#WeightedSim-907"><span class="linenos"> 907</span></a>        <span class="c1"># expand properties if row counts have been added</span>
</span><span id="WeightedSim-908"><a href="#WeightedSim-908"><span class="linenos"> 908</span></a>        <span class="n">numOldSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="WeightedSim-909"><a href="#WeightedSim-909"><span class="linenos"> 909</span></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">counts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="n">numOldSims</span><span class="p">:]):</span>
</span><span id="WeightedSim-910"><a href="#WeightedSim-910"><span class="linenos"> 910</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">numOldSims</span> <span class="o">+</span> <span class="n">_</span>
</span><span id="WeightedSim-911"><a href="#WeightedSim-911"><span class="linenos"> 911</span></a>
</span><span id="WeightedSim-912"><a href="#WeightedSim-912"><span class="linenos"> 912</span></a>            <span class="c1"># build `rowWeights[m]`</span>
</span><span id="WeightedSim-913"><a href="#WeightedSim-913"><span class="linenos"> 913</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="WeightedSim-914"><a href="#WeightedSim-914"><span class="linenos"> 914</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="WeightedSim-915"><a href="#WeightedSim-915"><span class="linenos"> 915</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="WeightedSim-916"><a href="#WeightedSim-916"><span class="linenos"> 916</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim-917"><a href="#WeightedSim-917"><span class="linenos"> 917</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span>
</span><span id="WeightedSim-918"><a href="#WeightedSim-918"><span class="linenos"> 918</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim-919"><a href="#WeightedSim-919"><span class="linenos"> 919</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim-920"><a href="#WeightedSim-920"><span class="linenos"> 920</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim-921"><a href="#WeightedSim-921"><span class="linenos"> 921</span></a>                    <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim-922"><a href="#WeightedSim-922"><span class="linenos"> 922</span></a>                    <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numStates</span><span class="p">):</span>
</span><span id="WeightedSim-923"><a href="#WeightedSim-923"><span class="linenos"> 923</span></a>                        <span class="n">weight</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">state</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="WeightedSim-924"><a href="#WeightedSim-924"><span class="linenos"> 924</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
</span><span id="WeightedSim-925"><a href="#WeightedSim-925"><span class="linenos"> 925</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim-926"><a href="#WeightedSim-926"><span class="linenos"> 926</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
</span><span id="WeightedSim-927"><a href="#WeightedSim-927"><span class="linenos"> 927</span></a>            <span class="p">)</span>
</span><span id="WeightedSim-928"><a href="#WeightedSim-928"><span class="linenos"> 928</span></a>
</span><span id="WeightedSim-929"><a href="#WeightedSim-929"><span class="linenos"> 929</span></a>            <span class="c1"># build `rowDistSims[m]`</span>
</span><span id="WeightedSim-930"><a href="#WeightedSim-930"><span class="linenos"> 930</span></a>            <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim-931"><a href="#WeightedSim-931"><span class="linenos"> 931</span></a>            <span class="k">if</span> <span class="n">choice</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
</span><span id="WeightedSim-932"><a href="#WeightedSim-932"><span class="linenos"> 932</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">choice</span><span class="p">])</span>
</span><span id="WeightedSim-933"><a href="#WeightedSim-933"><span class="linenos"> 933</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim-934"><a href="#WeightedSim-934"><span class="linenos"> 934</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="WeightedSim-935"><a href="#WeightedSim-935"><span class="linenos"> 935</span></a>                    <span class="n">rowDistSim</span> <span class="o">=</span> <span class="n">beta</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="WeightedSim-936"><a href="#WeightedSim-936"><span class="linenos"> 936</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="WeightedSim-937"><a href="#WeightedSim-937"><span class="linenos"> 937</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim-938"><a href="#WeightedSim-938"><span class="linenos"> 938</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim-939"><a href="#WeightedSim-939"><span class="linenos"> 939</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rowDistSim</span><span class="p">,</span> <span class="n">rowDistSim</span><span class="p">])</span>
</span><span id="WeightedSim-940"><a href="#WeightedSim-940"><span class="linenos"> 940</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim-941"><a href="#WeightedSim-941"><span class="linenos"> 941</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim-942"><a href="#WeightedSim-942"><span class="linenos"> 942</span></a>                        <span class="c1"># vector sum fails for lists, works for ndarray</span>
</span><span id="WeightedSim-943"><a href="#WeightedSim-943"><span class="linenos"> 943</span></a>                        <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="WeightedSim-944"><a href="#WeightedSim-944"><span class="linenos"> 944</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">counts</span>
</span><span id="WeightedSim-945"><a href="#WeightedSim-945"><span class="linenos"> 945</span></a>                        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim-946"><a href="#WeightedSim-946"><span class="linenos"> 946</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim-947"><a href="#WeightedSim-947"><span class="linenos"> 947</span></a>
</span><span id="WeightedSim-948"><a href="#WeightedSim-948"><span class="linenos"> 948</span></a>            <span class="c1"># build `totalWeight`</span>
</span><span id="WeightedSim-949"><a href="#WeightedSim-949"><span class="linenos"> 949</span></a>            <span class="c1">#</span>
</span><span id="WeightedSim-950"><a href="#WeightedSim-950"><span class="linenos"> 950</span></a>            <span class="c1"># The m-th iteration of the `for` loop multiplies the</span>
</span><span id="WeightedSim-951"><a href="#WeightedSim-951"><span class="linenos"> 951</span></a>            <span class="c1"># previous value of `totalWeight` by the (m + 1)-th factor</span>
</span><span id="WeightedSim-952"><a href="#WeightedSim-952"><span class="linenos"> 952</span></a>            <span class="c1"># in the definition of $V$ in Section 9 of the Paper.</span>
</span><span id="WeightedSim-953"><a href="#WeightedSim-953"><span class="linenos"> 953</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="WeightedSim-954"><a href="#WeightedSim-954"><span class="linenos"> 954</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="WeightedSim-955"><a href="#WeightedSim-955"><span class="linenos"> 955</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="WeightedSim-956"><a href="#WeightedSim-956"><span class="linenos"> 956</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="WeightedSim-957"><a href="#WeightedSim-957"><span class="linenos"> 957</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="WeightedSim-958"><a href="#WeightedSim-958"><span class="linenos"> 958</span></a>            <span class="p">)</span>
</span><span id="WeightedSim-959"><a href="#WeightedSim-959"><span class="linenos"> 959</span></a>
</span><span id="WeightedSim-960"><a href="#WeightedSim-960"><span class="linenos"> 960</span></a>        <span class="c1"># check that total weight is not out of bounds</span>
</span><span id="WeightedSim-961"><a href="#WeightedSim-961"><span class="linenos"> 961</span></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="WeightedSim-962"><a href="#WeightedSim-962"><span class="linenos"> 962</span></a>            <span class="n">adj</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="WeightedSim-963"><a href="#WeightedSim-963"><span class="linenos"> 963</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="WeightedSim-964"><a href="#WeightedSim-964"><span class="linenos"> 964</span></a>                <span class="s1">&#39;Simulation weight out of bounds.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="WeightedSim-965"><a href="#WeightedSim-965"><span class="linenos"> 965</span></a>                <span class="sa">f</span><span class="s1">&#39;Try adjusting scale factor by </span><span class="si">{</span><span class="n">adj</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="WeightedSim-966"><a href="#WeightedSim-966"><span class="linenos"> 966</span></a>            <span class="p">)</span>
</span><span id="WeightedSim-967"><a href="#WeightedSim-967"><span class="linenos"> 967</span></a>
</span><span id="WeightedSim-968"><a href="#WeightedSim-968"><span class="linenos"> 968</span></a>        <span class="c1"># trim properties if row counts have been removed</span>
</span><span id="WeightedSim-969"><a href="#WeightedSim-969"><span class="linenos"> 969</span></a>        <span class="k">if</span> <span class="n">numOldSims</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">):</span>
</span><span id="WeightedSim-970"><a href="#WeightedSim-970"><span class="linenos"> 970</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
</span><span id="WeightedSim-971"><a href="#WeightedSim-971"><span class="linenos"> 971</span></a>                <span class="n">numOldSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="WeightedSim-972"><a href="#WeightedSim-972"><span class="linenos"> 972</span></a>            <span class="p">):</span>
</span><span id="WeightedSim-973"><a href="#WeightedSim-973"><span class="linenos"> 973</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="WeightedSim-974"><a href="#WeightedSim-974"><span class="linenos"> 974</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="WeightedSim-975"><a href="#WeightedSim-975"><span class="linenos"> 975</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="WeightedSim-976"><a href="#WeightedSim-976"><span class="linenos"> 976</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="WeightedSim-977"><a href="#WeightedSim-977"><span class="linenos"> 977</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="WeightedSim-978"><a href="#WeightedSim-978"><span class="linenos"> 978</span></a>                <span class="p">)</span>
</span><span id="WeightedSim-979"><a href="#WeightedSim-979"><span class="linenos"> 979</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim-980"><a href="#WeightedSim-980"><span class="linenos"> 980</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim-981"><a href="#WeightedSim-981"><span class="linenos"> 981</span></a>
</span><span id="WeightedSim-982"><a href="#WeightedSim-982"><span class="linenos"> 982</span></a>    <span class="k">def</span> <span class="nf">updateScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim-983"><a href="#WeightedSim-983"><span class="linenos"> 983</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `totalWeight` property, if necessary, to account</span>
</span><span id="WeightedSim-984"><a href="#WeightedSim-984"><span class="linenos"> 984</span></a><span class="sd">        for a change in the `IDPModel.scale` property of the associated</span>
</span><span id="WeightedSim-985"><a href="#WeightedSim-985"><span class="linenos"> 985</span></a><span class="sd">        `idpModel` instance.</span>
</span><span id="WeightedSim-986"><a href="#WeightedSim-986"><span class="linenos"> 986</span></a>
</span><span id="WeightedSim-987"><a href="#WeightedSim-987"><span class="linenos"> 987</span></a><span class="sd">        **Raises:**</span>
</span><span id="WeightedSim-988"><a href="#WeightedSim-988"><span class="linenos"> 988</span></a>
</span><span id="WeightedSim-989"><a href="#WeightedSim-989"><span class="linenos"> 989</span></a><span class="sd">        * **ValueError**: If the new value for the `totalWeight`</span>
</span><span id="WeightedSim-990"><a href="#WeightedSim-990"><span class="linenos"> 990</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="WeightedSim-991"><a href="#WeightedSim-991"><span class="linenos"> 991</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="WeightedSim-992"><a href="#WeightedSim-992"><span class="linenos"> 992</span></a>
</span><span id="WeightedSim-993"><a href="#WeightedSim-993"><span class="linenos"> 993</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim-994"><a href="#WeightedSim-994"><span class="linenos"> 994</span></a>        <span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="WeightedSim-995"><a href="#WeightedSim-995"><span class="linenos"> 995</span></a>        <span class="k">if</span> <span class="n">diff</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="WeightedSim-996"><a href="#WeightedSim-996"><span class="linenos"> 996</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span> <span class="o">*</span> <span class="n">diff</span>
</span><span id="WeightedSim-997"><a href="#WeightedSim-997"><span class="linenos"> 997</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span>
</span><span id="WeightedSim-998"><a href="#WeightedSim-998"><span class="linenos"> 998</span></a>            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="WeightedSim-999"><a href="#WeightedSim-999"><span class="linenos"> 999</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="WeightedSim-1000"><a href="#WeightedSim-1000"><span class="linenos">1000</span></a>                    <span class="s1">&#39;Resulting simulation weight is out of bounds&#39;</span>
</span><span id="WeightedSim-1001"><a href="#WeightedSim-1001"><span class="linenos">1001</span></a>                <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A weighted simulation for an <code><a href="#IDPModel">IDPModel</a></code> instance.</p>

<p>In the Paper, a weighted simulation is determined by the pair $(t,
\boldsymbol{\theta}_M^*)$ and has total weight $V$.</p>
</div>


                            <div id="WeightedSim.__init__" class="classattr">
                                        <input id="WeightedSim.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">WeightedSim</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">idpModel</span></span>)</span>

                <label class="view-source-button" for="WeightedSim.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.__init__-844"><a href="#WeightedSim.__init__-844"><span class="linenos">844</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idpModel</span><span class="p">):</span>
</span><span id="WeightedSim.__init__-845"><a href="#WeightedSim.__init__-845"><span class="linenos">845</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Uses the given argument to set the corresponding property,</span>
</span><span id="WeightedSim.__init__-846"><a href="#WeightedSim.__init__-846"><span class="linenos">846</span></a><span class="sd">        then runs the `updateRowCounts` method.</span>
</span><span id="WeightedSim.__init__-847"><a href="#WeightedSim.__init__-847"><span class="linenos">847</span></a>
</span><span id="WeightedSim.__init__-848"><a href="#WeightedSim.__init__-848"><span class="linenos">848</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.__init__-849"><a href="#WeightedSim.__init__-849"><span class="linenos">849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span> <span class="o">=</span> <span class="n">idpModel</span>
</span><span id="WeightedSim.__init__-850"><a href="#WeightedSim.__init__-850"><span class="linenos">850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="c1"># stored copy to detect changes</span>
</span><span id="WeightedSim.__init__-851"><a href="#WeightedSim.__init__-851"><span class="linenos">851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WeightedSim.__init__-852"><a href="#WeightedSim.__init__-852"><span class="linenos">852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="WeightedSim.__init__-853"><a href="#WeightedSim.__init__-853"><span class="linenos">853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># the natural logarithm of the total weight</span>
</span><span id="WeightedSim.__init__-854"><a href="#WeightedSim.__init__-854"><span class="linenos">854</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">updateRowCounts</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Uses the given argument to set the corresponding property,
then runs the <code><a href="#WeightedSim.updateRowCounts">updateRowCounts</a></code> method.</p>
</div>


                            </div>
                            <div id="WeightedSim.idpModel" class="classattr">
                                        <input id="WeightedSim.idpModel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">idpModel</span>

                <label class="view-source-button" for="WeightedSim.idpModel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.idpModel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.idpModel-856"><a href="#WeightedSim.idpModel-856"><span class="linenos">856</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim.idpModel-857"><a href="#WeightedSim.idpModel-857"><span class="linenos">857</span></a>    <span class="k">def</span> <span class="nf">idpModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.idpModel-858"><a href="#WeightedSim.idpModel-858"><span class="linenos">858</span></a>        <span class="sd">&#39;&#39;&#39;`IDPModel`: The IDP model for which the weighted simulation</span>
</span><span id="WeightedSim.idpModel-859"><a href="#WeightedSim.idpModel-859"><span class="linenos">859</span></a><span class="sd">        is being created.</span>
</span><span id="WeightedSim.idpModel-860"><a href="#WeightedSim.idpModel-860"><span class="linenos">860</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.idpModel-861"><a href="#WeightedSim.idpModel-861"><span class="linenos">861</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span>
</span></pre></div>


            <div class="docstring"><p><code><a href="#IDPModel">IDPModel</a></code>: The IDP model for which the weighted simulation
is being created.</p>
</div>


                            </div>
                            <div id="WeightedSim.rowWeights" class="classattr">
                                        <input id="WeightedSim.rowWeights-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rowWeights</span>

                <label class="view-source-button" for="WeightedSim.rowWeights-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.rowWeights"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.rowWeights-863"><a href="#WeightedSim.rowWeights-863"><span class="linenos">863</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim.rowWeights-864"><a href="#WeightedSim.rowWeights-864"><span class="linenos">864</span></a>    <span class="k">def</span> <span class="nf">rowWeights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.rowWeights-865"><a href="#WeightedSim.rowWeights-865"><span class="linenos">865</span></a>        <span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): The triangular array of row</span>
</span><span id="WeightedSim.rowWeights-866"><a href="#WeightedSim.rowWeights-866"><span class="linenos">866</span></a><span class="sd">        weights for the weighted simulation. Denoted by $t$ in Section 9</span>
</span><span id="WeightedSim.rowWeights-867"><a href="#WeightedSim.rowWeights-867"><span class="linenos">867</span></a><span class="sd">        of the Paper.</span>
</span><span id="WeightedSim.rowWeights-868"><a href="#WeightedSim.rowWeights-868"><span class="linenos">868</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.rowWeights-869"><a href="#WeightedSim.rowWeights-869"><span class="linenos">869</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>tuple</code>(<code>float</code>)): The triangular array of row
weights for the weighted simulation. Denoted by $t$ in Section 9
of the Paper.</p>
</div>


                            </div>
                            <div id="WeightedSim.rowDistSims" class="classattr">
                                        <input id="WeightedSim.rowDistSims-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">rowDistSims</span>

                <label class="view-source-button" for="WeightedSim.rowDistSims-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.rowDistSims"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.rowDistSims-871"><a href="#WeightedSim.rowDistSims-871"><span class="linenos">871</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim.rowDistSims-872"><a href="#WeightedSim.rowDistSims-872"><span class="linenos">872</span></a>    <span class="k">def</span> <span class="nf">rowDistSims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.rowDistSims-873"><a href="#WeightedSim.rowDistSims-873"><span class="linenos">873</span></a>        <span class="sa">r</span><span class="sd">&#39;&#39;&#39;`tuple`(`tuple`(`float`)): A tuple of simulated row</span>
</span><span id="WeightedSim.rowDistSims-874"><a href="#WeightedSim.rowDistSims-874"><span class="linenos">874</span></a><span class="sd">        distributions. If `row` is $m - 1$ and `state` is $\ell$, then</span>
</span><span id="WeightedSim.rowDistSims-875"><a href="#WeightedSim.rowDistSims-875"><span class="linenos">875</span></a><span class="sd">        `rowDistSims`[`row`][`state`] is denoted by $\theta_{m\ell}^*</span>
</span><span id="WeightedSim.rowDistSims-876"><a href="#WeightedSim.rowDistSims-876"><span class="linenos">876</span></a><span class="sd">        = u_m^*(\{\ell\})$ in Section 9 of the Paper.</span>
</span><span id="WeightedSim.rowDistSims-877"><a href="#WeightedSim.rowDistSims-877"><span class="linenos">877</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.rowDistSims-878"><a href="#WeightedSim.rowDistSims-878"><span class="linenos">878</span></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>tuple</code>(<code>tuple</code>(<code>float</code>)): A tuple of simulated row
distributions. If <code>row</code> is $m - 1$ and <code>state</code> is $\ell$, then
<code><a href="#WeightedSim.rowDistSims">rowDistSims</a></code>[<code>row</code>][<code>state</code>] is denoted by $\theta_{m\ell}^*
= u_m^*({\ell})$ in Section 9 of the Paper.</p>
</div>


                            </div>
                            <div id="WeightedSim.totalWeight" class="classattr">
                                        <input id="WeightedSim.totalWeight-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">totalWeight</span>

                <label class="view-source-button" for="WeightedSim.totalWeight-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.totalWeight"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.totalWeight-880"><a href="#WeightedSim.totalWeight-880"><span class="linenos">880</span></a>    <span class="nd">@property</span>
</span><span id="WeightedSim.totalWeight-881"><a href="#WeightedSim.totalWeight-881"><span class="linenos">881</span></a>    <span class="k">def</span> <span class="nf">totalWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.totalWeight-882"><a href="#WeightedSim.totalWeight-882"><span class="linenos">882</span></a>        <span class="sd">&#39;&#39;&#39;`float`: The total weight of the simulation. Denoted by $V$</span>
</span><span id="WeightedSim.totalWeight-883"><a href="#WeightedSim.totalWeight-883"><span class="linenos">883</span></a><span class="sd">        in Section 9 of the Paper.</span>
</span><span id="WeightedSim.totalWeight-884"><a href="#WeightedSim.totalWeight-884"><span class="linenos">884</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.totalWeight-885"><a href="#WeightedSim.totalWeight-885"><span class="linenos">885</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code>float</code>: The total weight of the simulation. Denoted by $V$
in Section 9 of the Paper.</p>
</div>


                            </div>
                            <div id="WeightedSim.updateRowCounts" class="classattr">
                                        <input id="WeightedSim.updateRowCounts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">updateRowCounts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="WeightedSim.updateRowCounts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.updateRowCounts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.updateRowCounts-887"><a href="#WeightedSim.updateRowCounts-887"><span class="linenos">887</span></a>    <span class="k">def</span> <span class="nf">updateRowCounts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-888"><a href="#WeightedSim.updateRowCounts-888"><span class="linenos">888</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `rowWeights`, `rowDistSims`, and `totalWeight`</span>
</span><span id="WeightedSim.updateRowCounts-889"><a href="#WeightedSim.updateRowCounts-889"><span class="linenos">889</span></a><span class="sd">        properties, if necessary, so that the number of rows in</span>
</span><span id="WeightedSim.updateRowCounts-890"><a href="#WeightedSim.updateRowCounts-890"><span class="linenos">890</span></a><span class="sd">        `rowDistSims` is the same as the number of rows in the</span>
</span><span id="WeightedSim.updateRowCounts-891"><a href="#WeightedSim.updateRowCounts-891"><span class="linenos">891</span></a><span class="sd">        `IDPModel.rowCounts` property of the associated `idpModel`</span>
</span><span id="WeightedSim.updateRowCounts-892"><a href="#WeightedSim.updateRowCounts-892"><span class="linenos">892</span></a><span class="sd">        instance.</span>
</span><span id="WeightedSim.updateRowCounts-893"><a href="#WeightedSim.updateRowCounts-893"><span class="linenos">893</span></a>
</span><span id="WeightedSim.updateRowCounts-894"><a href="#WeightedSim.updateRowCounts-894"><span class="linenos">894</span></a><span class="sd">        **Raises:**</span>
</span><span id="WeightedSim.updateRowCounts-895"><a href="#WeightedSim.updateRowCounts-895"><span class="linenos">895</span></a>
</span><span id="WeightedSim.updateRowCounts-896"><a href="#WeightedSim.updateRowCounts-896"><span class="linenos">896</span></a><span class="sd">        * **ValueError**: If the computed value for the `totalWeight`</span>
</span><span id="WeightedSim.updateRowCounts-897"><a href="#WeightedSim.updateRowCounts-897"><span class="linenos">897</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="WeightedSim.updateRowCounts-898"><a href="#WeightedSim.updateRowCounts-898"><span class="linenos">898</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="WeightedSim.updateRowCounts-899"><a href="#WeightedSim.updateRowCounts-899"><span class="linenos">899</span></a>
</span><span id="WeightedSim.updateRowCounts-900"><a href="#WeightedSim.updateRowCounts-900"><span class="linenos">900</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.updateRowCounts-901"><a href="#WeightedSim.updateRowCounts-901"><span class="linenos">901</span></a>        <span class="c1"># If $L$ is the number of states in the IDP, then the case</span>
</span><span id="WeightedSim.updateRowCounts-902"><a href="#WeightedSim.updateRowCounts-902"><span class="linenos">902</span></a>        <span class="c1"># $L = 2$ is separated from the case $2 &lt; L &lt; \infty$ to speed</span>
</span><span id="WeightedSim.updateRowCounts-903"><a href="#WeightedSim.updateRowCounts-903"><span class="linenos">903</span></a>        <span class="c1"># up code execution.</span>
</span><span id="WeightedSim.updateRowCounts-904"><a href="#WeightedSim.updateRowCounts-904"><span class="linenos">904</span></a>        <span class="n">baseMeas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-905"><a href="#WeightedSim.updateRowCounts-905"><span class="linenos">905</span></a>        <span class="n">numStates</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">baseMeas</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-906"><a href="#WeightedSim.updateRowCounts-906"><span class="linenos">906</span></a>
</span><span id="WeightedSim.updateRowCounts-907"><a href="#WeightedSim.updateRowCounts-907"><span class="linenos">907</span></a>        <span class="c1"># expand properties if row counts have been added</span>
</span><span id="WeightedSim.updateRowCounts-908"><a href="#WeightedSim.updateRowCounts-908"><span class="linenos">908</span></a>        <span class="n">numOldSims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-909"><a href="#WeightedSim.updateRowCounts-909"><span class="linenos">909</span></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">counts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">[</span><span class="n">numOldSims</span><span class="p">:]):</span>
</span><span id="WeightedSim.updateRowCounts-910"><a href="#WeightedSim.updateRowCounts-910"><span class="linenos">910</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">numOldSims</span> <span class="o">+</span> <span class="n">_</span>
</span><span id="WeightedSim.updateRowCounts-911"><a href="#WeightedSim.updateRowCounts-911"><span class="linenos">911</span></a>
</span><span id="WeightedSim.updateRowCounts-912"><a href="#WeightedSim.updateRowCounts-912"><span class="linenos">912</span></a>            <span class="c1"># build `rowWeights[m]`</span>
</span><span id="WeightedSim.updateRowCounts-913"><a href="#WeightedSim.updateRowCounts-913"><span class="linenos">913</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="WeightedSim.updateRowCounts-914"><a href="#WeightedSim.updateRowCounts-914"><span class="linenos">914</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-915"><a href="#WeightedSim.updateRowCounts-915"><span class="linenos">915</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-916"><a href="#WeightedSim.updateRowCounts-916"><span class="linenos">916</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-917"><a href="#WeightedSim.updateRowCounts-917"><span class="linenos">917</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span>
</span><span id="WeightedSim.updateRowCounts-918"><a href="#WeightedSim.updateRowCounts-918"><span class="linenos">918</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-919"><a href="#WeightedSim.updateRowCounts-919"><span class="linenos">919</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-920"><a href="#WeightedSim.updateRowCounts-920"><span class="linenos">920</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-921"><a href="#WeightedSim.updateRowCounts-921"><span class="linenos">921</span></a>                    <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-922"><a href="#WeightedSim.updateRowCounts-922"><span class="linenos">922</span></a>                    <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numStates</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-923"><a href="#WeightedSim.updateRowCounts-923"><span class="linenos">923</span></a>                        <span class="n">weight</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">state</span><span class="p">]</span> <span class="o">**</span> <span class="n">counts</span><span class="p">[</span><span class="n">state</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-924"><a href="#WeightedSim.updateRowCounts-924"><span class="linenos">924</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-925"><a href="#WeightedSim.updateRowCounts-925"><span class="linenos">925</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-926"><a href="#WeightedSim.updateRowCounts-926"><span class="linenos">926</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-927"><a href="#WeightedSim.updateRowCounts-927"><span class="linenos">927</span></a>            <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-928"><a href="#WeightedSim.updateRowCounts-928"><span class="linenos">928</span></a>
</span><span id="WeightedSim.updateRowCounts-929"><a href="#WeightedSim.updateRowCounts-929"><span class="linenos">929</span></a>            <span class="c1"># build `rowDistSims[m]`</span>
</span><span id="WeightedSim.updateRowCounts-930"><a href="#WeightedSim.updateRowCounts-930"><span class="linenos">930</span></a>            <span class="n">choice</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-931"><a href="#WeightedSim.updateRowCounts-931"><span class="linenos">931</span></a>            <span class="k">if</span> <span class="n">choice</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-932"><a href="#WeightedSim.updateRowCounts-932"><span class="linenos">932</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="n">choice</span><span class="p">])</span>
</span><span id="WeightedSim.updateRowCounts-933"><a href="#WeightedSim.updateRowCounts-933"><span class="linenos">933</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-934"><a href="#WeightedSim.updateRowCounts-934"><span class="linenos">934</span></a>                <span class="k">if</span> <span class="n">numStates</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-935"><a href="#WeightedSim.updateRowCounts-935"><span class="linenos">935</span></a>                    <span class="n">rowDistSim</span> <span class="o">=</span> <span class="n">beta</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-936"><a href="#WeightedSim.updateRowCounts-936"><span class="linenos">936</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="WeightedSim.updateRowCounts-937"><a href="#WeightedSim.updateRowCounts-937"><span class="linenos">937</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-938"><a href="#WeightedSim.updateRowCounts-938"><span class="linenos">938</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-939"><a href="#WeightedSim.updateRowCounts-939"><span class="linenos">939</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rowDistSim</span><span class="p">,</span> <span class="n">rowDistSim</span><span class="p">])</span>
</span><span id="WeightedSim.updateRowCounts-940"><a href="#WeightedSim.updateRowCounts-940"><span class="linenos">940</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="WeightedSim.updateRowCounts-941"><a href="#WeightedSim.updateRowCounts-941"><span class="linenos">941</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-942"><a href="#WeightedSim.updateRowCounts-942"><span class="linenos">942</span></a>                        <span class="c1"># vector sum fails for lists, works for ndarray</span>
</span><span id="WeightedSim.updateRowCounts-943"><a href="#WeightedSim.updateRowCounts-943"><span class="linenos">943</span></a>                        <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-944"><a href="#WeightedSim.updateRowCounts-944"><span class="linenos">944</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowConc</span> <span class="o">*</span> <span class="n">baseMeas</span> <span class="o">+</span> <span class="n">counts</span>
</span><span id="WeightedSim.updateRowCounts-945"><a href="#WeightedSim.updateRowCounts-945"><span class="linenos">945</span></a>                        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-946"><a href="#WeightedSim.updateRowCounts-946"><span class="linenos">946</span></a>                    <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-947"><a href="#WeightedSim.updateRowCounts-947"><span class="linenos">947</span></a>
</span><span id="WeightedSim.updateRowCounts-948"><a href="#WeightedSim.updateRowCounts-948"><span class="linenos">948</span></a>            <span class="c1"># build `totalWeight`</span>
</span><span id="WeightedSim.updateRowCounts-949"><a href="#WeightedSim.updateRowCounts-949"><span class="linenos">949</span></a>            <span class="c1">#</span>
</span><span id="WeightedSim.updateRowCounts-950"><a href="#WeightedSim.updateRowCounts-950"><span class="linenos">950</span></a>            <span class="c1"># The m-th iteration of the `for` loop multiplies the</span>
</span><span id="WeightedSim.updateRowCounts-951"><a href="#WeightedSim.updateRowCounts-951"><span class="linenos">951</span></a>            <span class="c1"># previous value of `totalWeight` by the (m + 1)-th factor</span>
</span><span id="WeightedSim.updateRowCounts-952"><a href="#WeightedSim.updateRowCounts-952"><span class="linenos">952</span></a>            <span class="c1"># in the definition of $V$ in Section 9 of the Paper.</span>
</span><span id="WeightedSim.updateRowCounts-953"><a href="#WeightedSim.updateRowCounts-953"><span class="linenos">953</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-954"><a href="#WeightedSim.updateRowCounts-954"><span class="linenos">954</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-955"><a href="#WeightedSim.updateRowCounts-955"><span class="linenos">955</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="WeightedSim.updateRowCounts-956"><a href="#WeightedSim.updateRowCounts-956"><span class="linenos">956</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-957"><a href="#WeightedSim.updateRowCounts-957"><span class="linenos">957</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="WeightedSim.updateRowCounts-958"><a href="#WeightedSim.updateRowCounts-958"><span class="linenos">958</span></a>            <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-959"><a href="#WeightedSim.updateRowCounts-959"><span class="linenos">959</span></a>
</span><span id="WeightedSim.updateRowCounts-960"><a href="#WeightedSim.updateRowCounts-960"><span class="linenos">960</span></a>        <span class="c1"># check that total weight is not out of bounds</span>
</span><span id="WeightedSim.updateRowCounts-961"><a href="#WeightedSim.updateRowCounts-961"><span class="linenos">961</span></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-962"><a href="#WeightedSim.updateRowCounts-962"><span class="linenos">962</span></a>            <span class="n">adj</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-963"><a href="#WeightedSim.updateRowCounts-963"><span class="linenos">963</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-964"><a href="#WeightedSim.updateRowCounts-964"><span class="linenos">964</span></a>                <span class="s1">&#39;Simulation weight out of bounds.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-965"><a href="#WeightedSim.updateRowCounts-965"><span class="linenos">965</span></a>                <span class="sa">f</span><span class="s1">&#39;Try adjusting scale factor by </span><span class="si">{</span><span class="n">adj</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="WeightedSim.updateRowCounts-966"><a href="#WeightedSim.updateRowCounts-966"><span class="linenos">966</span></a>            <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-967"><a href="#WeightedSim.updateRowCounts-967"><span class="linenos">967</span></a>
</span><span id="WeightedSim.updateRowCounts-968"><a href="#WeightedSim.updateRowCounts-968"><span class="linenos">968</span></a>        <span class="c1"># trim properties if row counts have been removed</span>
</span><span id="WeightedSim.updateRowCounts-969"><a href="#WeightedSim.updateRowCounts-969"><span class="linenos">969</span></a>        <span class="k">if</span> <span class="n">numOldSims</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-970"><a href="#WeightedSim.updateRowCounts-970"><span class="linenos">970</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-971"><a href="#WeightedSim.updateRowCounts-971"><span class="linenos">971</span></a>                <span class="n">numOldSims</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">rowCounts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="WeightedSim.updateRowCounts-972"><a href="#WeightedSim.updateRowCounts-972"><span class="linenos">972</span></a>            <span class="p">):</span>
</span><span id="WeightedSim.updateRowCounts-973"><a href="#WeightedSim.updateRowCounts-973"><span class="linenos">973</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="WeightedSim.updateRowCounts-974"><a href="#WeightedSim.updateRowCounts-974"><span class="linenos">974</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-975"><a href="#WeightedSim.updateRowCounts-975"><span class="linenos">975</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span>
</span><span id="WeightedSim.updateRowCounts-976"><a href="#WeightedSim.updateRowCounts-976"><span class="linenos">976</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">colConc</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span> <span class="o">+</span>
</span><span id="WeightedSim.updateRowCounts-977"><a href="#WeightedSim.updateRowCounts-977"><span class="linenos">977</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="n">m</span><span class="p">]))</span>
</span><span id="WeightedSim.updateRowCounts-978"><a href="#WeightedSim.updateRowCounts-978"><span class="linenos">978</span></a>                <span class="p">)</span>
</span><span id="WeightedSim.updateRowCounts-979"><a href="#WeightedSim.updateRowCounts-979"><span class="linenos">979</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowWeights</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="WeightedSim.updateRowCounts-980"><a href="#WeightedSim.updateRowCounts-980"><span class="linenos">980</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Updates the <code><a href="#WeightedSim.rowWeights">rowWeights</a></code>, <code><a href="#WeightedSim.rowDistSims">rowDistSims</a></code>, and <code><a href="#WeightedSim.totalWeight">totalWeight</a></code>
properties, if necessary, so that the number of rows in
<code><a href="#WeightedSim.rowDistSims">rowDistSims</a></code> is the same as the number of rows in the
<code><a href="#IDPModel.rowCounts">IDPModel.rowCounts</a></code> property of the associated <code><a href="#WeightedSim.idpModel">idpModel</a></code>
instance.</p>

<p><strong>Raises:</strong></p>

<ul>
<li><strong>ValueError</strong>: If the computed value for the <code><a href="#WeightedSim.totalWeight">totalWeight</a></code>
property is so small or so large that it evaluates to <code>0.0</code>
or <code>np.inf</code>.</li>
</ul>
</div>


                            </div>
                            <div id="WeightedSim.updateScale" class="classattr">
                                        <input id="WeightedSim.updateScale-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">updateScale</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="WeightedSim.updateScale-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WeightedSim.updateScale"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WeightedSim.updateScale-982"><a href="#WeightedSim.updateScale-982"><span class="linenos"> 982</span></a>    <span class="k">def</span> <span class="nf">updateScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="WeightedSim.updateScale-983"><a href="#WeightedSim.updateScale-983"><span class="linenos"> 983</span></a>        <span class="sd">&#39;&#39;&#39;Updates the `totalWeight` property, if necessary, to account</span>
</span><span id="WeightedSim.updateScale-984"><a href="#WeightedSim.updateScale-984"><span class="linenos"> 984</span></a><span class="sd">        for a change in the `IDPModel.scale` property of the associated</span>
</span><span id="WeightedSim.updateScale-985"><a href="#WeightedSim.updateScale-985"><span class="linenos"> 985</span></a><span class="sd">        `idpModel` instance.</span>
</span><span id="WeightedSim.updateScale-986"><a href="#WeightedSim.updateScale-986"><span class="linenos"> 986</span></a>
</span><span id="WeightedSim.updateScale-987"><a href="#WeightedSim.updateScale-987"><span class="linenos"> 987</span></a><span class="sd">        **Raises:**</span>
</span><span id="WeightedSim.updateScale-988"><a href="#WeightedSim.updateScale-988"><span class="linenos"> 988</span></a>
</span><span id="WeightedSim.updateScale-989"><a href="#WeightedSim.updateScale-989"><span class="linenos"> 989</span></a><span class="sd">        * **ValueError**: If the new value for the `totalWeight`</span>
</span><span id="WeightedSim.updateScale-990"><a href="#WeightedSim.updateScale-990"><span class="linenos"> 990</span></a><span class="sd">            property is so small or so large that it evaluates to `0.0`</span>
</span><span id="WeightedSim.updateScale-991"><a href="#WeightedSim.updateScale-991"><span class="linenos"> 991</span></a><span class="sd">            or `np.inf`.</span>
</span><span id="WeightedSim.updateScale-992"><a href="#WeightedSim.updateScale-992"><span class="linenos"> 992</span></a>
</span><span id="WeightedSim.updateScale-993"><a href="#WeightedSim.updateScale-993"><span class="linenos"> 993</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="WeightedSim.updateScale-994"><a href="#WeightedSim.updateScale-994"><span class="linenos"> 994</span></a>        <span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span>
</span><span id="WeightedSim.updateScale-995"><a href="#WeightedSim.updateScale-995"><span class="linenos"> 995</span></a>        <span class="k">if</span> <span class="n">diff</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="WeightedSim.updateScale-996"><a href="#WeightedSim.updateScale-996"><span class="linenos"> 996</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rowDistSims</span><span class="p">)</span> <span class="o">*</span> <span class="n">diff</span>
</span><span id="WeightedSim.updateScale-997"><a href="#WeightedSim.updateScale-997"><span class="linenos"> 997</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idpModel</span><span class="o">.</span><span class="n">scale</span>
</span><span id="WeightedSim.updateScale-998"><a href="#WeightedSim.updateScale-998"><span class="linenos"> 998</span></a>            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logWeight</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
</span><span id="WeightedSim.updateScale-999"><a href="#WeightedSim.updateScale-999"><span class="linenos"> 999</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="WeightedSim.updateScale-1000"><a href="#WeightedSim.updateScale-1000"><span class="linenos">1000</span></a>                    <span class="s1">&#39;Resulting simulation weight is out of bounds&#39;</span>
</span><span id="WeightedSim.updateScale-1001"><a href="#WeightedSim.updateScale-1001"><span class="linenos">1001</span></a>                <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Updates the <code><a href="#WeightedSim.totalWeight">totalWeight</a></code> property, if necessary, to account
for a change in the <code><a href="#IDPModel.scale">IDPModel.scale</a></code> property of the associated
<code><a href="#WeightedSim.idpModel">idpModel</a></code> instance.</p>

<p><strong>Raises:</strong></p>

<ul>
<li><strong>ValueError</strong>: If the new value for the <code><a href="#WeightedSim.totalWeight">totalWeight</a></code>
property is so small or so large that it evaluates to <code>0.0</code>
or <code>np.inf</code>.</li>
</ul>
</div>


                            </div>
                </section>
    </main>
</body>
</html>